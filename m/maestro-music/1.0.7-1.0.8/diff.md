# Comparing `tmp/maestro-music-1.0.7.tar.gz` & `tmp/maestro-music-1.0.8.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "maestro-music-1.0.7.tar", last modified: Wed Jul 19 00:49:26 2023, max compression
+gzip compressed data, was "maestro-music-1.0.8.tar", last modified: Thu Jul 20 22:06:36 2023, max compression
```

## Comparing `maestro-music-1.0.7.tar` & `maestro-music-1.0.8.tar`

### file list

```diff
@@ -1,17 +1,17 @@
-drwxr-xr-x   0 sysadmin   (501) staff       (20)        0 2023-07-19 00:49:26.428342 maestro-music-1.0.7/
--rw-r--r--   0 sysadmin   (501) staff       (20)     1067 2023-06-06 05:56:48.000000 maestro-music-1.0.7/LICENSE
--rw-r--r--   0 sysadmin   (501) staff       (20)    11718 2023-07-19 00:49:26.427547 maestro-music-1.0.7/PKG-INFO
--rw-r--r--   0 sysadmin   (501) staff       (20)     1894 2023-07-19 00:39:23.000000 maestro-music-1.0.7/config.py
--rw-r--r--   0 sysadmin   (501) staff       (20)    38175 2023-07-19 00:46:14.000000 maestro-music-1.0.7/helpers.py
--rw-r--r--   0 sysadmin   (501) staff       (20)   146639 2023-03-25 20:23:16.000000 maestro-music-1.0.7/icon.py
--rw-r--r--   0 sysadmin   (501) staff       (20)     8837 2023-06-08 00:47:48.000000 maestro-music-1.0.7/mac_presence.py
--rw-r--r--   0 sysadmin   (501) staff       (20)   116675 2023-07-19 00:47:58.000000 maestro-music-1.0.7/maestro.py
-drwxr-xr-x   0 sysadmin   (501) staff       (20)        0 2023-07-19 00:49:26.426844 maestro-music-1.0.7/maestro_music.egg-info/
--rw-r--r--   0 sysadmin   (501) staff       (20)    11718 2023-07-19 00:49:26.000000 maestro-music-1.0.7/maestro_music.egg-info/PKG-INFO
--rw-r--r--   0 sysadmin   (501) staff       (20)      296 2023-07-19 00:49:26.000000 maestro-music-1.0.7/maestro_music.egg-info/SOURCES.txt
--rw-r--r--   0 sysadmin   (501) staff       (20)        1 2023-07-19 00:49:26.000000 maestro-music-1.0.7/maestro_music.egg-info/dependency_links.txt
--rw-r--r--   0 sysadmin   (501) staff       (20)       40 2023-07-19 00:49:26.000000 maestro-music-1.0.7/maestro_music.egg-info/entry_points.txt
--rw-r--r--   0 sysadmin   (501) staff       (20)      367 2023-07-19 00:49:26.000000 maestro-music-1.0.7/maestro_music.egg-info/requires.txt
--rw-r--r--   0 sysadmin   (501) staff       (20)       41 2023-07-19 00:49:26.000000 maestro-music-1.0.7/maestro_music.egg-info/top_level.txt
--rw-r--r--   0 sysadmin   (501) staff       (20)       38 2023-07-19 00:49:26.428916 maestro-music-1.0.7/setup.cfg
--rw-r--r--   0 sysadmin   (501) staff       (20)     1542 2023-07-19 00:48:57.000000 maestro-music-1.0.7/setup.py
+drwxr-xr-x   0 sysadmin   (501) staff       (20)        0 2023-07-20 22:06:36.191283 maestro-music-1.0.8/
+-rw-r--r--   0 sysadmin   (501) staff       (20)     1067 2023-06-06 05:56:48.000000 maestro-music-1.0.8/LICENSE
+-rw-r--r--   0 sysadmin   (501) staff       (20)    11718 2023-07-20 22:06:36.190769 maestro-music-1.0.8/PKG-INFO
+-rw-r--r--   0 sysadmin   (501) staff       (20)     1894 2023-07-19 00:39:23.000000 maestro-music-1.0.8/config.py
+-rw-r--r--   0 sysadmin   (501) staff       (20)    38177 2023-07-19 00:51:47.000000 maestro-music-1.0.8/helpers.py
+-rw-r--r--   0 sysadmin   (501) staff       (20)   146639 2023-03-25 20:23:16.000000 maestro-music-1.0.8/icon.py
+-rw-r--r--   0 sysadmin   (501) staff       (20)     8837 2023-06-08 00:47:48.000000 maestro-music-1.0.8/mac_presence.py
+-rw-r--r--   0 sysadmin   (501) staff       (20)   117592 2023-07-20 22:06:02.000000 maestro-music-1.0.8/maestro.py
+drwxr-xr-x   0 sysadmin   (501) staff       (20)        0 2023-07-20 22:06:36.190531 maestro-music-1.0.8/maestro_music.egg-info/
+-rw-r--r--   0 sysadmin   (501) staff       (20)    11718 2023-07-20 22:06:36.000000 maestro-music-1.0.8/maestro_music.egg-info/PKG-INFO
+-rw-r--r--   0 sysadmin   (501) staff       (20)      296 2023-07-20 22:06:36.000000 maestro-music-1.0.8/maestro_music.egg-info/SOURCES.txt
+-rw-r--r--   0 sysadmin   (501) staff       (20)        1 2023-07-20 22:06:36.000000 maestro-music-1.0.8/maestro_music.egg-info/dependency_links.txt
+-rw-r--r--   0 sysadmin   (501) staff       (20)       40 2023-07-20 22:06:36.000000 maestro-music-1.0.8/maestro_music.egg-info/entry_points.txt
+-rw-r--r--   0 sysadmin   (501) staff       (20)      367 2023-07-20 22:06:36.000000 maestro-music-1.0.8/maestro_music.egg-info/requires.txt
+-rw-r--r--   0 sysadmin   (501) staff       (20)       41 2023-07-20 22:06:36.000000 maestro-music-1.0.8/maestro_music.egg-info/top_level.txt
+-rw-r--r--   0 sysadmin   (501) staff       (20)       38 2023-07-20 22:06:36.191351 maestro-music-1.0.8/setup.cfg
+-rw-r--r--   0 sysadmin   (501) staff       (20)     1542 2023-07-20 22:06:14.000000 maestro-music-1.0.8/setup.py
```

### Comparing `maestro-music-1.0.7/LICENSE` & `maestro-music-1.0.8/LICENSE`

 * *Files identical despite different names*

### Comparing `maestro-music-1.0.7/PKG-INFO` & `maestro-music-1.0.8/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: maestro-music
-Version: 1.0.7
+Version: 1.0.8
 Summary: A simple command line tool to play songs (or any audio files, really).
 Home-page: https://github.com/PrajwalVandana/maestro-cli
 Author: Prajwal Vandana
 License: MIT
 Keywords: music,sound,audio,music-player,cli,ogg,flac,mp3,wav,spotify,youtube,audio-visualization,audio-visualizer
 Description-Content-Type: text/markdown
 License-File: LICENSE
```

### Comparing `maestro-music-1.0.7/config.py` & `maestro-music-1.0.8/config.py`

 * *Files identical despite different names*

### Comparing `maestro-music-1.0.7/helpers.py` & `maestro-music-1.0.8/helpers.py`

 * *Files 0% similar despite different names*

```diff
@@ -239,15 +239,15 @@
                     keys_to_delete.append(k)
             for k in keys_to_delete:
                 del self.visualizer_data[k]
 
             for i in range(self.i, min(self.i + 5, len(self.playlist))):
                 if self.playlist[i][0] in self.visualizer_data:
                     continue
-                print_to_logfile(f"helpers.py {config.SONGS_DIR}")
+                # print_to_logfile(f"helpers.py {config.SONGS_DIR}")
                 song_path = os.path.join(config.SONGS_DIR, self.playlist[i][1])
                 cur_song_data = LIBROSA.load(
                     song_path, mono=False, sr=config.SAMPLE_RATE
                 )[0]
 
                 if len(cur_song_data.shape) == 1:  # mono -> stereo
                     cur_song_data = np.repeat([cur_song_data], 2, axis=0)
```

### Comparing `maestro-music-1.0.7/icon.py` & `maestro-music-1.0.8/icon.py`

 * *Files identical despite different names*

### Comparing `maestro-music-1.0.7/mac_presence.py` & `maestro-music-1.0.8/mac_presence.py`

 * *Files identical despite different names*

### Comparing `maestro-music-1.0.7/maestro.py` & `maestro-music-1.0.8/maestro.py`

 * *Files 1% similar despite different names*

```diff
@@ -308,6986 +308,7043 @@
 00001330: 706c 6179 6c69 7374 5b3a 5d0a 2020 2020  playlist[:].    
 00001340: 2020 2020 6966 2072 6573 6875 6666 6c65      if reshuffle
 00001350: 3a0a 2020 2020 2020 2020 2020 2020 7368  :.            sh
 00001360: 7566 666c 6528 6e65 7874 5f70 6c61 796c  uffle(next_playl
 00001370: 6973 7429 0a20 2020 2065 6c73 653a 0a20  ist).    else:. 
 00001380: 2020 2020 2020 206e 6578 745f 706c 6179         next_play
 00001390: 6c69 7374 203d 204e 6f6e 650a 0a20 2020  list = None..   
-000013a0: 2068 656c 7065 7273 2e70 7269 6e74 5f74   helpers.print_t
-000013b0: 6f5f 6c6f 6766 696c 6528 226d 6165 7374  o_logfile("maest
-000013c0: 726f 2e70 7922 2c20 636f 6e66 6967 2e53  ro.py", config.S
-000013d0: 4f4e 4753 5f44 4952 290a 2020 2020 706c  ONGS_DIR).    pl
-000013e0: 6179 6572 5f6f 7574 7075 7420 3d20 6865  ayer_output = he
-000013f0: 6c70 6572 732e 506c 6179 6572 4f75 7470  lpers.PlayerOutp
-00001400: 7574 280a 2020 2020 2020 2020 7374 6473  ut(.        stds
-00001410: 6372 2c20 706c 6179 6c69 7374 2c20 766f  cr, playlist, vo
-00001420: 6c75 6d65 2c20 636c 6970 5f6d 6f64 652c  lume, clip_mode,
-00001430: 2075 7064 6174 655f 6469 7363 6f72 642c   update_discord,
-00001440: 2076 6973 7561 6c69 7a65 0a20 2020 2029   visualize.    )
-00001450: 0a0a 2020 2020 6966 2070 6c61 7965 725f  ..    if player_
-00001460: 6f75 7470 7574 2e75 7064 6174 655f 6469  output.update_di
-00001470: 7363 6f72 643a 0a20 2020 2020 2020 2064  scord:.        d
-00001480: 6973 636f 7264 5f74 6974 6c65 5f71 7565  iscord_title_que
-00001490: 7565 203d 206d 756c 7469 7072 6f63 6573  ue = multiproces
-000014a0: 7369 6e67 2e53 696d 706c 6551 7565 7565  sing.SimpleQueue
-000014b0: 2829 0a20 2020 2020 2020 2064 6973 636f  ().        disco
-000014c0: 7264 5f61 7274 6973 745f 7175 6575 6520  rd_artist_queue 
-000014d0: 3d20 6d75 6c74 6970 726f 6365 7373 696e  = multiprocessin
-000014e0: 672e 5369 6d70 6c65 5175 6575 6528 290a  g.SimpleQueue().
-000014f0: 2020 2020 2020 2020 6469 7363 6f72 645f          discord_
-00001500: 7072 6573 656e 6365 5f70 726f 6365 7373  presence_process
-00001510: 203d 206d 756c 7469 7072 6f63 6573 7369   = multiprocessi
-00001520: 6e67 2e50 726f 6365 7373 280a 2020 2020  ng.Process(.    
-00001530: 2020 2020 2020 2020 6461 656d 6f6e 3d54          daemon=T
-00001540: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
-00001550: 2074 6172 6765 743d 6469 7363 6f72 645f   target=discord_
-00001560: 7072 6573 656e 6365 5f6c 6f6f 702c 0a20  presence_loop,. 
-00001570: 2020 2020 2020 2020 2020 2061 7267 733d             args=
-00001580: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00001590: 2020 6469 7363 6f72 645f 7469 746c 655f    discord_title_
-000015a0: 7175 6575 652c 0a20 2020 2020 2020 2020  queue,.         
-000015b0: 2020 2020 2020 2064 6973 636f 7264 5f61         discord_a
-000015c0: 7274 6973 745f 7175 6575 652c 0a20 2020  rtist_queue,.   
-000015d0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-000015e0: 7965 725f 6f75 7470 7574 2e64 6973 636f  yer_output.disco
-000015f0: 7264 5f63 6f6e 6e65 6374 6564 2c0a 2020  rd_connected,.  
-00001600: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
-00001610: 2020 2020 2029 0a20 2020 2020 2020 2064       ).        d
-00001620: 6973 636f 7264 5f70 7265 7365 6e63 655f  iscord_presence_
-00001630: 7072 6f63 6573 732e 7374 6172 7428 290a  process.start().
-00001640: 0a20 2020 2069 6620 7379 732e 706c 6174  .    if sys.plat
-00001650: 666f 726d 203d 3d20 2264 6172 7769 6e22  form == "darwin"
-00001660: 2061 6e64 2063 616e 5f6d 6163 5f6e 6f77   and can_mac_now
-00001670: 5f70 6c61 7969 6e67 3a0a 2020 2020 2020  _playing:.      
-00001680: 2020 6d61 635f 6e6f 775f 706c 6179 696e    mac_now_playin
-00001690: 672e 7469 746c 655f 7175 6575 6520 3d20  g.title_queue = 
-000016a0: 5175 6575 6528 290a 2020 2020 2020 2020  Queue().        
-000016b0: 6d61 635f 6e6f 775f 706c 6179 696e 672e  mac_now_playing.
-000016c0: 6172 7469 7374 5f71 7565 7565 203d 2051  artist_queue = Q
-000016d0: 7565 7565 2829 0a20 2020 2020 2020 206d  ueue().        m
-000016e0: 6163 5f6e 6f77 5f70 6c61 7969 6e67 2e71  ac_now_playing.q
-000016f0: 203d 2051 7565 7565 2829 0a20 2020 2020   = Queue().     
-00001700: 2020 206d 6163 5f6e 6f77 5f70 6c61 7969     mac_now_playi
-00001710: 6e67 2e63 6f76 6572 203d 2063 6f76 6572  ng.cover = cover
-00001720: 5f69 6d67 0a0a 2020 2020 2020 2020 6e73  _img..        ns
-00001730: 5f61 7070 6c69 6361 7469 6f6e 203d 204e  _application = N
-00001740: 5341 7070 6c69 6361 7469 6f6e 2e73 6861  SApplication.sha
-00001750: 7265 6441 7070 6c69 6361 7469 6f6e 2829  redApplication()
-00001760: 0a20 2020 2020 2020 2023 206c 6f67 6f5f  .        # logo_
-00001770: 6e73 5f69 6d61 6765 203d 204e 5349 6d61  ns_image = NSIma
-00001780: 6765 2e61 6c6c 6f63 2829 2e69 6e69 7442  ge.alloc().initB
-00001790: 7952 6566 6572 656e 6369 6e67 4669 6c65  yReferencingFile
-000017a0: 5f28 0a20 2020 2020 2020 2023 2020 2020  _(.        #    
-000017b0: 2022 2e2f 6d61 6573 7472 6f5f 6963 6f6e   "./maestro_icon
-000017c0: 2e70 6e67 220a 2020 2020 2020 2020 2320  .png".        # 
-000017d0: 290a 2020 2020 2020 2020 2320 6e73 5f61  ).        # ns_a
-000017e0: 7070 6c69 6361 7469 6f6e 2e73 6574 4170  pplication.setAp
-000017f0: 706c 6963 6174 696f 6e49 636f 6e49 6d61  plicationIconIma
-00001800: 6765 5f28 6c6f 676f 5f6e 735f 696d 6167  ge_(logo_ns_imag
-00001810: 6529 0a20 2020 2020 2020 206e 735f 6170  e).        ns_ap
-00001820: 706c 6963 6174 696f 6e2e 7365 7441 6374  plication.setAct
-00001830: 6976 6174 696f 6e50 6f6c 6963 795f 280a  ivationPolicy_(.
-00001840: 2020 2020 2020 2020 2020 2020 4e53 4170              NSAp
-00001850: 706c 6963 6174 696f 6e41 6374 6976 6174  plicationActivat
-00001860: 696f 6e50 6f6c 6963 7950 726f 6869 6269  ionPolicyProhibi
-00001870: 7465 640a 2020 2020 2020 2020 290a 0a20  ted.        ).. 
-00001880: 2020 2020 2020 2023 204e 4f54 453a 206b         # NOTE: k
-00001890: 6565 7020 7265 6620 746f 2064 656c 6567  eep ref to deleg
-000018a0: 6174 6520 6f62 6a65 6374 2c20 7365 7444  ate object, setD
-000018b0: 656c 6567 6174 655f 2064 6f65 736e 2774  elegate_ doesn't
-000018c0: 2072 6574 6169 6e0a 2020 2020 2020 2020   retain.        
-000018d0: 6465 6c65 6761 7465 203d 2041 7070 4465  delegate = AppDe
-000018e0: 6c65 6761 7465 2e61 6c6c 6f63 2829 2e69  legate.alloc().i
-000018f0: 6e69 7428 290a 2020 2020 2020 2020 4e53  nit().        NS
-00001900: 4170 7028 292e 7365 7444 656c 6567 6174  App().setDelegat
-00001910: 655f 2864 656c 6567 6174 6529 0a0a 2020  e_(delegate)..  
-00001920: 2020 2020 2020 6170 705f 6865 6c70 6572        app_helper
-00001930: 5f70 726f 6365 7373 203d 206d 756c 7469  _process = multi
-00001940: 7072 6f63 6573 7369 6e67 2e50 726f 6365  processing.Proce
-00001950: 7373 280a 2020 2020 2020 2020 2020 2020  ss(.            
-00001960: 6461 656d 6f6e 3d54 7275 652c 0a20 2020  daemon=True,.   
-00001970: 2020 2020 2020 2020 2074 6172 6765 743d           target=
-00001980: 6170 705f 6865 6c70 6572 5f6c 6f6f 702c  app_helper_loop,
-00001990: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000019a0: 2020 2061 7070 5f68 656c 7065 725f 7072     app_helper_pr
-000019b0: 6f63 6573 732e 7374 6172 7428 290a 0a20  ocess.start().. 
-000019c0: 2020 2070 7265 765f 766f 6c75 6d65 203d     prev_volume =
-000019d0: 2076 6f6c 756d 650a 2020 2020 7768 696c   volume.    whil
-000019e0: 6520 706c 6179 6572 5f6f 7574 7075 742e  e player_output.
-000019f0: 6920 696e 2072 616e 6765 286c 656e 2870  i in range(len(p
-00001a00: 6c61 7965 725f 6f75 7470 7574 2e70 6c61  layer_output.pla
-00001a10: 796c 6973 7429 293a 0a20 2020 2020 2020  ylist)):.       
-00001a20: 2073 6f6e 675f 7061 7468 203d 206f 732e   song_path = os.
-00001a30: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
-00001a40: 2020 2020 2020 2063 6f6e 6669 672e 534f         config.SO
-00001a50: 4e47 535f 4449 522c 2070 6c61 7965 725f  NGS_DIR, player_
-00001a60: 6f75 7470 7574 2e70 6c61 796c 6973 745b  output.playlist[
-00001a70: 706c 6179 6572 5f6f 7574 7075 742e 695d  player_output.i]
-00001a80: 5b31 5d0a 2020 2020 2020 2020 290a 0a20  [1].        ).. 
-00001a90: 2020 2020 2020 2070 6c61 7962 6163 6b20         playback 
-00001aa0: 3d20 506c 6179 6261 636b 2829 0a20 2020  = Playback().   
-00001ab0: 2020 2020 2070 6c61 7962 6163 6b2e 6c6f       playback.lo
-00001ac0: 6164 5f66 696c 6528 736f 6e67 5f70 6174  ad_file(song_pat
-00001ad0: 6829 0a0a 2020 2020 2020 2020 636c 6970  h)..        clip
-00001ae0: 5f73 7472 696e 6720 3d20 706c 6179 6572  _string = player
-00001af0: 5f6f 7574 7075 742e 706c 6179 6c69 7374  _output.playlist
-00001b00: 5b70 6c61 7965 725f 6f75 7470 7574 2e69  [player_output.i
-00001b10: 5d5b 335d 0a20 2020 2020 2020 2069 6620  ][3].        if 
-00001b20: 636c 6970 5f73 7472 696e 673a 0a20 2020  clip_string:.   
-00001b30: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00001b40: 6f75 7470 7574 2e63 6c69 7020 3d20 7475  output.clip = tu
-00001b50: 706c 6528 0a20 2020 2020 2020 2020 2020  ple(.           
-00001b60: 2020 2020 206d 6170 2866 6c6f 6174 2c20       map(float, 
-00001b70: 706c 6179 6572 5f6f 7574 7075 742e 706c  player_output.pl
-00001b80: 6179 6c69 7374 5b70 6c61 7965 725f 6f75  aylist[player_ou
-00001b90: 7470 7574 2e69 5d5b 335d 2e73 706c 6974  tput.i][3].split
-00001ba0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
-00001bb0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00001bc0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00001bd0: 6572 5f6f 7574 7075 742e 636c 6970 203d  er_output.clip =
-00001be0: 2030 2c20 706c 6179 6261 636b 2e64 7572   0, playback.dur
-00001bf0: 6174 696f 6e0a 0a20 2020 2020 2020 2070  ation..        p
-00001c00: 6c61 7965 725f 6f75 7470 7574 2e70 6175  layer_output.pau
-00001c10: 7365 6420 3d20 4661 6c73 650a 2020 2020  sed = False.    
-00001c20: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-00001c30: 742e 6475 7261 7469 6f6e 203d 2066 756c  t.duration = ful
-00001c40: 6c5f 6475 7261 7469 6f6e 203d 2070 6c61  l_duration = pla
-00001c50: 7962 6163 6b2e 6475 7261 7469 6f6e 0a0a  yback.duration..
-00001c60: 2020 2020 2020 2020 6966 2073 7973 2e70          if sys.p
-00001c70: 6c61 7466 6f72 6d20 3d3d 2022 6461 7277  latform == "darw
-00001c80: 696e 2220 616e 6420 6361 6e5f 6d61 635f  in" and can_mac_
-00001c90: 6e6f 775f 706c 6179 696e 673a 0a20 2020  now_playing:.   
-00001ca0: 2020 2020 2020 2020 206d 6163 5f6e 6f77           mac_now
-00001cb0: 5f70 6c61 7969 6e67 2e70 6175 7365 6420  _playing.paused 
-00001cc0: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
-00001cd0: 2020 2020 6d61 635f 6e6f 775f 706c 6179      mac_now_play
-00001ce0: 696e 672e 706f 7320 3d20 300a 2020 2020  ing.pos = 0.    
-00001cf0: 2020 2020 2020 2020 6d61 635f 6e6f 775f          mac_now_
-00001d00: 706c 6179 696e 672e 6c65 6e67 7468 203d  playing.length =
-00001d10: 2070 6c61 7965 725f 6f75 7470 7574 2e64   player_output.d
-00001d20: 7572 6174 696f 6e0a 0a20 2020 2020 2020  uration..       
-00001d30: 2020 2020 2068 656c 7065 7273 2e6d 756c       helpers.mul
-00001d40: 7469 7072 6f63 6573 7369 6e67 5f70 7574  tiprocessing_put
-00001d50: 5f77 6f72 6428 0a20 2020 2020 2020 2020  _word(.         
-00001d60: 2020 2020 2020 206d 6163 5f6e 6f77 5f70         mac_now_p
-00001d70: 6c61 7969 6e67 2e74 6974 6c65 5f71 7565  laying.title_que
-00001d80: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-00001d90: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-00001da0: 742e 706c 6179 6c69 7374 5b70 6c61 7965  t.playlist[playe
-00001db0: 725f 6f75 7470 7574 2e69 5d5b 315d 2c0a  r_output.i][1],.
-00001dc0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00001dd0: 2020 2020 2020 2020 2020 6865 6c70 6572            helper
-00001de0: 732e 6d75 6c74 6970 726f 6365 7373 696e  s.multiprocessin
-00001df0: 675f 7075 745f 776f 7264 280a 2020 2020  g_put_word(.    
-00001e00: 2020 2020 2020 2020 2020 2020 6d61 635f              mac_
-00001e10: 6e6f 775f 706c 6179 696e 672e 6172 7469  now_playing.arti
-00001e20: 7374 5f71 7565 7565 2c0a 2020 2020 2020  st_queue,.      
-00001e30: 2020 2020 2020 2020 2020 706c 6179 6572            player
-00001e40: 5f6f 7574 7075 742e 706c 6179 6c69 7374  _output.playlist
-00001e50: 5b70 6c61 7965 725f 6f75 7470 7574 2e69  [player_output.i
-00001e60: 5d5b 2d33 5d2c 0a20 2020 2020 2020 2020  ][-3],.         
-00001e70: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
-00001e80: 2020 7570 6461 7465 5f6e 6f77 5f70 6c61    update_now_pla
-00001e90: 7969 6e67 203d 2054 7275 650a 0a20 2020  ying = True..   
-00001ea0: 2020 2020 2069 6620 706c 6179 6572 5f6f       if player_o
-00001eb0: 7574 7075 742e 7570 6461 7465 5f64 6973  utput.update_dis
-00001ec0: 636f 7264 3a0a 2020 2020 2020 2020 2020  cord:.          
-00001ed0: 2020 6865 6c70 6572 732e 6d75 6c74 6970    helpers.multip
-00001ee0: 726f 6365 7373 696e 675f 7075 745f 776f  rocessing_put_wo
-00001ef0: 7264 280a 2020 2020 2020 2020 2020 2020  rd(.            
-00001f00: 2020 2020 6469 7363 6f72 645f 7469 746c      discord_titl
-00001f10: 655f 7175 6575 652c 2070 6c61 7965 725f  e_queue, player_
-00001f20: 6f75 7470 7574 2e70 6c61 796c 6973 745b  output.playlist[
-00001f30: 706c 6179 6572 5f6f 7574 7075 742e 695d  player_output.i]
-00001f40: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
-00001f50: 290a 2020 2020 2020 2020 2020 2020 6865  ).            he
-00001f60: 6c70 6572 732e 6d75 6c74 6970 726f 6365  lpers.multiproce
-00001f70: 7373 696e 675f 7075 745f 776f 7264 280a  ssing_put_word(.
-00001f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001f90: 6469 7363 6f72 645f 6172 7469 7374 5f71  discord_artist_q
-00001fa0: 7565 7565 2c0a 2020 2020 2020 2020 2020  ueue,.          
-00001fb0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00001fc0: 7075 742e 706c 6179 6c69 7374 5b70 6c61  put.playlist[pla
-00001fd0: 7965 725f 6f75 7470 7574 2e69 5d5b 2d33  yer_output.i][-3
-00001fe0: 5d2c 0a20 2020 2020 2020 2020 2020 2029  ],.            )
-00001ff0: 0a0a 2020 2020 2020 2020 706c 6179 6261  ..        playba
-00002000: 636b 2e70 6c61 7928 290a 0a20 2020 2020  ck.play()..     
-00002010: 2020 2069 6620 706c 6179 6572 5f6f 7574     if player_out
-00002020: 7075 742e 636c 6970 5f6d 6f64 653a 0a20  put.clip_mode:. 
-00002030: 2020 2020 2020 2020 2020 2063 6c69 705f             clip_
-00002040: 7374 6172 742c 2063 6c69 705f 656e 6420  start, clip_end 
-00002050: 3d20 706c 6179 6572 5f6f 7574 7075 742e  = player_output.
-00002060: 636c 6970 0a20 2020 2020 2020 2020 2020  clip.           
-00002070: 2070 6c61 7965 725f 6f75 7470 7574 2e64   player_output.d
-00002080: 7572 6174 696f 6e20 3d20 636c 6970 5f65  uration = clip_e
-00002090: 6e64 202d 2063 6c69 705f 7374 6172 740a  nd - clip_start.
-000020a0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-000020b0: 6261 636b 2e73 6565 6b28 636c 6970 5f73  back.seek(clip_s
-000020c0: 7461 7274 290a 2020 2020 2020 2020 2020  tart).          
-000020d0: 2020 6966 2073 7973 2e70 6c61 7466 6f72    if sys.platfor
-000020e0: 6d20 3d3d 2022 6461 7277 696e 2220 616e  m == "darwin" an
-000020f0: 6420 6361 6e5f 6d61 635f 6e6f 775f 706c  d can_mac_now_pl
-00002100: 6179 696e 673a 0a20 2020 2020 2020 2020  aying:.         
-00002110: 2020 2020 2020 206d 6163 5f6e 6f77 5f70         mac_now_p
-00002120: 6c61 7969 6e67 2e70 6f73 203d 2072 6f75  laying.pos = rou
-00002130: 6e64 2870 6c61 7962 6163 6b2e 6375 7272  nd(playback.curr
-00002140: 5f70 6f73 290a 2020 2020 2020 2020 2020  _pos).          
-00002150: 2020 6c61 7374 5f74 696d 6573 7461 6d70    last_timestamp
-00002160: 203d 2070 6c61 7962 6163 6b2e 6375 7272   = playback.curr
-00002170: 5f70 6f73 0a0a 2020 2020 2020 2020 7374  _pos..        st
-00002180: 6172 745f 7469 6d65 203d 2070 6175 7365  art_time = pause
-00002190: 5f73 7461 7274 203d 2074 696d 6528 290a  _start = time().
-000021a0: 2020 2020 2020 2020 706c 6179 6261 636b          playback
-000021b0: 2e73 6574 5f76 6f6c 756d 6528 706c 6179  .set_volume(play
-000021c0: 6572 5f6f 7574 7075 742e 766f 6c75 6d65  er_output.volume
-000021d0: 290a 0a20 2020 2020 2020 206c 6173 745f  )..        last_
-000021e0: 7469 6d65 7374 616d 7020 3d20 706c 6179  timestamp = play
-000021f0: 6261 636b 2e63 7572 725f 706f 730a 2020  back.curr_pos.  
-00002200: 2020 2020 2020 6e65 7874 5f73 6f6e 6720        next_song 
-00002210: 3d20 3120 2023 202d 3120 6966 2067 6f69  = 1  # -1 if goi
-00002220: 6e67 2062 6163 6b2c 2030 2069 6620 7265  ng back, 0 if re
-00002230: 7374 6172 7469 6e67 2c20 2b31 2069 6620  starting, +1 if 
-00002240: 6e65 7874 2073 6f6e 670a 2020 2020 2020  next song.      
-00002250: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-00002260: 656e 6469 6e67 203d 2046 616c 7365 0a20  ending = False. 
-00002270: 2020 2020 2020 2077 6869 6c65 2054 7275         while Tru
-00002280: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00002290: 6620 6e6f 7420 706c 6179 6261 636b 2e61  f not playback.a
-000022a0: 6374 6976 6520 6f72 2028 0a20 2020 2020  ctive or (.     
-000022b0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-000022c0: 725f 6f75 7470 7574 2e63 6c69 705f 6d6f  r_output.clip_mo
-000022d0: 6465 0a20 2020 2020 2020 2020 2020 2020  de.             
-000022e0: 2020 2061 6e64 2070 6c61 7962 6163 6b2e     and playback.
-000022f0: 6375 7272 5f70 6f73 203e 2070 6c61 7965  curr_pos > playe
-00002300: 725f 6f75 7470 7574 2e63 6c69 705b 315d  r_output.clip[1]
-00002310: 0a20 2020 2020 2020 2020 2020 2029 3a0a  .            ):.
-00002320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002330: 6e65 7874 5f73 6f6e 6720 3d20 6e6f 7420  next_song = not 
-00002340: 706c 6179 6572 5f6f 7574 7075 742e 6c6f  player_output.lo
-00002350: 6f70 696e 675f 6375 7272 656e 745f 736f  oping_current_so
-00002360: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
-00002370: 2020 2062 7265 616b 0a0a 2020 2020 2020     break..      
-00002380: 2020 2020 2020 2320 6661 6465 2069 6e20        # fade in 
-00002390: 6669 7273 7420 3220 7365 636f 6e64 7320  first 2 seconds 
-000023a0: 6f66 2063 6c69 700a 2020 2020 2020 2020  of clip.        
-000023b0: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
-000023c0: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-000023d0: 6f75 7470 7574 2e63 6c69 705f 6d6f 6465  output.clip_mode
-000023e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000023f0: 2061 6e64 2063 6c69 705f 7374 6172 7420   and clip_start 
-00002400: 213d 2030 2020 2320 6966 2063 6c69 7020  != 0  # if clip 
-00002410: 646f 6573 6e27 7420 7374 6172 7420 6174  doesn't start at
-00002420: 2062 6567 696e 6e69 6e67 0a20 2020 2020   beginning.     
-00002430: 2020 2020 2020 2020 2020 2061 6e64 2063             and c
-00002440: 6c69 705f 656e 6420 2d20 636c 6970 5f73  lip_end - clip_s
-00002450: 7461 7274 203e 2035 2020 2320 6966 2063  tart > 5  # if c
-00002460: 6c69 7020 6973 206c 6f6e 6765 7220 7468  lip is longer th
-00002470: 616e 2035 2073 6563 730a 2020 2020 2020  an 5 secs.      
-00002480: 2020 2020 2020 2020 2020 616e 6420 706c            and pl
-00002490: 6179 6261 636b 2e63 7572 725f 706f 7320  ayback.curr_pos 
-000024a0: 3c20 636c 6970 5f73 7461 7274 202b 2032  < clip_start + 2
-000024b0: 0a20 2020 2020 2020 2020 2020 2029 3a0a  .            ):.
-000024c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000024d0: 706c 6179 6261 636b 2e73 6574 5f76 6f6c  playback.set_vol
-000024e0: 756d 6528 0a20 2020 2020 2020 2020 2020  ume(.           
-000024f0: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00002500: 6f75 7470 7574 2e76 6f6c 756d 6520 2a20  output.volume * 
-00002510: 2870 6c61 7962 6163 6b2e 6375 7272 5f70  (playback.curr_p
-00002520: 6f73 202d 2063 6c69 705f 7374 6172 7429  os - clip_start)
-00002530: 202f 2032 0a20 2020 2020 2020 2020 2020   / 2.           
-00002540: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00002550: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00002560: 2020 2020 2020 2020 2070 6c61 7962 6163           playbac
-00002570: 6b2e 7365 745f 766f 6c75 6d65 2870 6c61  k.set_volume(pla
-00002580: 7965 725f 6f75 7470 7574 2e76 6f6c 756d  yer_output.volum
-00002590: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
-000025a0: 6966 2073 7973 2e70 6c61 7466 6f72 6d20  if sys.platform 
-000025b0: 3d3d 2022 6461 7277 696e 2220 616e 6420  == "darwin" and 
-000025c0: 6361 6e5f 6d61 635f 6e6f 775f 706c 6179  can_mac_now_play
-000025d0: 696e 673a 0a20 2020 2020 2020 2020 2020  ing:.           
-000025e0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-000025f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00002600: 2075 7064 6174 655f 6e6f 775f 706c 6179   update_now_play
-00002610: 696e 673a 0a20 2020 2020 2020 2020 2020  ing:.           
-00002620: 2020 2020 2020 2020 2020 2020 206d 6163               mac
-00002630: 5f6e 6f77 5f70 6c61 7969 6e67 2e75 7064  _now_playing.upd
-00002640: 6174 6528 290a 2020 2020 2020 2020 2020  ate().          
-00002650: 2020 2020 2020 2020 2020 2020 2020 7570                up
-00002660: 6461 7465 5f6e 6f77 5f70 6c61 7969 6e67  date_now_playing
-00002670: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
-00002680: 2020 2020 2020 2020 2020 2020 204e 5352               NSR
-00002690: 756e 4c6f 6f70 2e63 7572 7265 6e74 5275  unLoop.currentRu
-000026a0: 6e4c 6f6f 7028 292e 7275 6e55 6e74 696c  nLoop().runUntil
-000026b0: 4461 7465 5f28 0a20 2020 2020 2020 2020  Date_(.         
-000026c0: 2020 2020 2020 2020 2020 2020 2020 204e                 N
-000026d0: 5344 6174 652e 6461 7465 5769 7468 5469  SDate.dateWithTi
-000026e0: 6d65 496e 7465 7276 616c 5369 6e63 654e  meIntervalSinceN
-000026f0: 6f77 5f28 302e 3035 290a 2020 2020 2020  ow_(0.05).      
-00002700: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00002710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002720: 6578 6365 7074 3a20 2023 2070 796c 696e  except:  # pylin
-00002730: 743a 2064 6973 6162 6c65 3d62 6172 652d  t: disable=bare-
-00002740: 6578 6365 7074 0a20 2020 2020 2020 2020  except.         
-00002750: 2020 2020 2020 2020 2020 2063 616e 5f6d             can_m
-00002760: 6163 5f6e 6f77 5f70 6c61 7969 6e67 203d  ac_now_playing =
-00002770: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
-00002780: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
-00002790: 2020 2020 2020 2020 2073 7973 2e70 6c61           sys.pla
-000027a0: 7466 6f72 6d20 3d3d 2022 6461 7277 696e  tform == "darwin
-000027b0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-000027c0: 2020 616e 6420 6361 6e5f 6d61 635f 6e6f    and can_mac_no
-000027d0: 775f 706c 6179 696e 670a 2020 2020 2020  w_playing.      
-000027e0: 2020 2020 2020 2020 2020 616e 6420 6e6f            and no
-000027f0: 7420 6d61 635f 6e6f 775f 706c 6179 696e  t mac_now_playin
-00002800: 672e 712e 656d 7074 7928 290a 2020 2020  g.q.empty().    
-00002810: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-00002820: 2020 2020 2020 2020 2020 2063 203d 206d             c = m
-00002830: 6163 5f6e 6f77 5f70 6c61 7969 6e67 2e71  ac_now_playing.q
-00002840: 2e67 6574 2829 0a20 2020 2020 2020 2020  .get().         
-00002850: 2020 2020 2020 2069 6620 6320 696e 2022         if c in "
-00002860: 6e4e 223a 0a20 2020 2020 2020 2020 2020  nN":.           
-00002870: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
+000013a0: 2023 2068 656c 7065 7273 2e70 7269 6e74   # helpers.print
+000013b0: 5f74 6f5f 6c6f 6766 696c 6528 226d 6165  _to_logfile("mae
+000013c0: 7374 726f 2e70 7922 2c20 636f 6e66 6967  stro.py", config
+000013d0: 2e53 4f4e 4753 5f44 4952 290a 2020 2020  .SONGS_DIR).    
+000013e0: 706c 6179 6572 5f6f 7574 7075 7420 3d20  player_output = 
+000013f0: 6865 6c70 6572 732e 506c 6179 6572 4f75  helpers.PlayerOu
+00001400: 7470 7574 280a 2020 2020 2020 2020 7374  tput(.        st
+00001410: 6473 6372 2c20 706c 6179 6c69 7374 2c20  dscr, playlist, 
+00001420: 766f 6c75 6d65 2c20 636c 6970 5f6d 6f64  volume, clip_mod
+00001430: 652c 2075 7064 6174 655f 6469 7363 6f72  e, update_discor
+00001440: 642c 2076 6973 7561 6c69 7a65 0a20 2020  d, visualize.   
+00001450: 2029 0a0a 2020 2020 6966 2070 6c61 7965   )..    if playe
+00001460: 725f 6f75 7470 7574 2e75 7064 6174 655f  r_output.update_
+00001470: 6469 7363 6f72 643a 0a20 2020 2020 2020  discord:.       
+00001480: 2064 6973 636f 7264 5f74 6974 6c65 5f71   discord_title_q
+00001490: 7565 7565 203d 206d 756c 7469 7072 6f63  ueue = multiproc
+000014a0: 6573 7369 6e67 2e53 696d 706c 6551 7565  essing.SimpleQue
+000014b0: 7565 2829 0a20 2020 2020 2020 2064 6973  ue().        dis
+000014c0: 636f 7264 5f61 7274 6973 745f 7175 6575  cord_artist_queu
+000014d0: 6520 3d20 6d75 6c74 6970 726f 6365 7373  e = multiprocess
+000014e0: 696e 672e 5369 6d70 6c65 5175 6575 6528  ing.SimpleQueue(
+000014f0: 290a 2020 2020 2020 2020 6469 7363 6f72  ).        discor
+00001500: 645f 7072 6573 656e 6365 5f70 726f 6365  d_presence_proce
+00001510: 7373 203d 206d 756c 7469 7072 6f63 6573  ss = multiproces
+00001520: 7369 6e67 2e50 726f 6365 7373 280a 2020  sing.Process(.  
+00001530: 2020 2020 2020 2020 2020 6461 656d 6f6e            daemon
+00001540: 3d54 7275 652c 0a20 2020 2020 2020 2020  =True,.         
+00001550: 2020 2074 6172 6765 743d 6469 7363 6f72     target=discor
+00001560: 645f 7072 6573 656e 6365 5f6c 6f6f 702c  d_presence_loop,
+00001570: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
+00001580: 733d 280a 2020 2020 2020 2020 2020 2020  s=(.            
+00001590: 2020 2020 6469 7363 6f72 645f 7469 746c      discord_titl
+000015a0: 655f 7175 6575 652c 0a20 2020 2020 2020  e_queue,.       
+000015b0: 2020 2020 2020 2020 2064 6973 636f 7264           discord
+000015c0: 5f61 7274 6973 745f 7175 6575 652c 0a20  _artist_queue,. 
+000015d0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000015e0: 6c61 7965 725f 6f75 7470 7574 2e64 6973  layer_output.dis
+000015f0: 636f 7264 5f63 6f6e 6e65 6374 6564 2c0a  cord_connected,.
+00001600: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+00001610: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00001620: 2064 6973 636f 7264 5f70 7265 7365 6e63   discord_presenc
+00001630: 655f 7072 6f63 6573 732e 7374 6172 7428  e_process.start(
+00001640: 290a 0a20 2020 2069 6620 7379 732e 706c  )..    if sys.pl
+00001650: 6174 666f 726d 203d 3d20 2264 6172 7769  atform == "darwi
+00001660: 6e22 2061 6e64 2063 616e 5f6d 6163 5f6e  n" and can_mac_n
+00001670: 6f77 5f70 6c61 7969 6e67 3a0a 2020 2020  ow_playing:.    
+00001680: 2020 2020 6d61 635f 6e6f 775f 706c 6179      mac_now_play
+00001690: 696e 672e 7469 746c 655f 7175 6575 6520  ing.title_queue 
+000016a0: 3d20 5175 6575 6528 290a 2020 2020 2020  = Queue().      
+000016b0: 2020 6d61 635f 6e6f 775f 706c 6179 696e    mac_now_playin
+000016c0: 672e 6172 7469 7374 5f71 7565 7565 203d  g.artist_queue =
+000016d0: 2051 7565 7565 2829 0a20 2020 2020 2020   Queue().       
+000016e0: 206d 6163 5f6e 6f77 5f70 6c61 7969 6e67   mac_now_playing
+000016f0: 2e71 203d 2051 7565 7565 2829 0a20 2020  .q = Queue().   
+00001700: 2020 2020 206d 6163 5f6e 6f77 5f70 6c61       mac_now_pla
+00001710: 7969 6e67 2e63 6f76 6572 203d 2063 6f76  ying.cover = cov
+00001720: 6572 5f69 6d67 0a0a 2020 2020 2020 2020  er_img..        
+00001730: 6e73 5f61 7070 6c69 6361 7469 6f6e 203d  ns_application =
+00001740: 204e 5341 7070 6c69 6361 7469 6f6e 2e73   NSApplication.s
+00001750: 6861 7265 6441 7070 6c69 6361 7469 6f6e  haredApplication
+00001760: 2829 0a20 2020 2020 2020 2023 206c 6f67  ().        # log
+00001770: 6f5f 6e73 5f69 6d61 6765 203d 204e 5349  o_ns_image = NSI
+00001780: 6d61 6765 2e61 6c6c 6f63 2829 2e69 6e69  mage.alloc().ini
+00001790: 7442 7952 6566 6572 656e 6369 6e67 4669  tByReferencingFi
+000017a0: 6c65 5f28 0a20 2020 2020 2020 2023 2020  le_(.        #  
+000017b0: 2020 2022 2e2f 6d61 6573 7472 6f5f 6963     "./maestro_ic
+000017c0: 6f6e 2e70 6e67 220a 2020 2020 2020 2020  on.png".        
+000017d0: 2320 290a 2020 2020 2020 2020 2320 6e73  # ).        # ns
+000017e0: 5f61 7070 6c69 6361 7469 6f6e 2e73 6574  _application.set
+000017f0: 4170 706c 6963 6174 696f 6e49 636f 6e49  ApplicationIconI
+00001800: 6d61 6765 5f28 6c6f 676f 5f6e 735f 696d  mage_(logo_ns_im
+00001810: 6167 6529 0a20 2020 2020 2020 206e 735f  age).        ns_
+00001820: 6170 706c 6963 6174 696f 6e2e 7365 7441  application.setA
+00001830: 6374 6976 6174 696f 6e50 6f6c 6963 795f  ctivationPolicy_
+00001840: 280a 2020 2020 2020 2020 2020 2020 4e53  (.            NS
+00001850: 4170 706c 6963 6174 696f 6e41 6374 6976  ApplicationActiv
+00001860: 6174 696f 6e50 6f6c 6963 7950 726f 6869  ationPolicyProhi
+00001870: 6269 7465 640a 2020 2020 2020 2020 290a  bited.        ).
+00001880: 0a20 2020 2020 2020 2023 204e 4f54 453a  .        # NOTE:
+00001890: 206b 6565 7020 7265 6620 746f 2064 656c   keep ref to del
+000018a0: 6567 6174 6520 6f62 6a65 6374 2c20 7365  egate object, se
+000018b0: 7444 656c 6567 6174 655f 2064 6f65 736e  tDelegate_ doesn
+000018c0: 2774 2072 6574 6169 6e0a 2020 2020 2020  't retain.      
+000018d0: 2020 6465 6c65 6761 7465 203d 2041 7070    delegate = App
+000018e0: 4465 6c65 6761 7465 2e61 6c6c 6f63 2829  Delegate.alloc()
+000018f0: 2e69 6e69 7428 290a 2020 2020 2020 2020  .init().        
+00001900: 4e53 4170 7028 292e 7365 7444 656c 6567  NSApp().setDeleg
+00001910: 6174 655f 2864 656c 6567 6174 6529 0a0a  ate_(delegate)..
+00001920: 2020 2020 2020 2020 6170 705f 6865 6c70          app_help
+00001930: 6572 5f70 726f 6365 7373 203d 206d 756c  er_process = mul
+00001940: 7469 7072 6f63 6573 7369 6e67 2e50 726f  tiprocessing.Pro
+00001950: 6365 7373 280a 2020 2020 2020 2020 2020  cess(.          
+00001960: 2020 6461 656d 6f6e 3d54 7275 652c 0a20    daemon=True,. 
+00001970: 2020 2020 2020 2020 2020 2074 6172 6765             targe
+00001980: 743d 6170 705f 6865 6c70 6572 5f6c 6f6f  t=app_helper_loo
+00001990: 702c 0a20 2020 2020 2020 2029 0a20 2020  p,.        ).   
+000019a0: 2020 2020 2061 7070 5f68 656c 7065 725f       app_helper_
+000019b0: 7072 6f63 6573 732e 7374 6172 7428 290a  process.start().
+000019c0: 0a20 2020 2070 7265 765f 766f 6c75 6d65  .    prev_volume
+000019d0: 203d 2076 6f6c 756d 650a 2020 2020 7768   = volume.    wh
+000019e0: 696c 6520 706c 6179 6572 5f6f 7574 7075  ile player_outpu
+000019f0: 742e 6920 696e 2072 616e 6765 286c 656e  t.i in range(len
+00001a00: 2870 6c61 7965 725f 6f75 7470 7574 2e70  (player_output.p
+00001a10: 6c61 796c 6973 7429 293a 0a20 2020 2020  laylist)):.     
+00001a20: 2020 2073 6f6e 675f 7061 7468 203d 206f     song_path = o
+00001a30: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
+00001a40: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
+00001a50: 534f 4e47 535f 4449 522c 2070 6c61 7965  SONGS_DIR, playe
+00001a60: 725f 6f75 7470 7574 2e70 6c61 796c 6973  r_output.playlis
+00001a70: 745b 706c 6179 6572 5f6f 7574 7075 742e  t[player_output.
+00001a80: 695d 5b31 5d0a 2020 2020 2020 2020 290a  i][1].        ).
+00001a90: 0a20 2020 2020 2020 2070 6c61 7962 6163  .        playbac
+00001aa0: 6b20 3d20 506c 6179 6261 636b 2829 0a20  k = Playback(). 
+00001ab0: 2020 2020 2020 2070 6c61 7962 6163 6b2e         playback.
+00001ac0: 6c6f 6164 5f66 696c 6528 736f 6e67 5f70  load_file(song_p
+00001ad0: 6174 6829 0a0a 2020 2020 2020 2020 636c  ath)..        cl
+00001ae0: 6970 5f73 7472 696e 6720 3d20 706c 6179  ip_string = play
+00001af0: 6572 5f6f 7574 7075 742e 706c 6179 6c69  er_output.playli
+00001b00: 7374 5b70 6c61 7965 725f 6f75 7470 7574  st[player_output
+00001b10: 2e69 5d5b 335d 0a20 2020 2020 2020 2069  .i][3].        i
+00001b20: 6620 636c 6970 5f73 7472 696e 673a 0a20  f clip_string:. 
+00001b30: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00001b40: 725f 6f75 7470 7574 2e63 6c69 7020 3d20  r_output.clip = 
+00001b50: 7475 706c 6528 0a20 2020 2020 2020 2020  tuple(.         
+00001b60: 2020 2020 2020 206d 6170 2866 6c6f 6174         map(float
+00001b70: 2c20 706c 6179 6572 5f6f 7574 7075 742e  , player_output.
+00001b80: 706c 6179 6c69 7374 5b70 6c61 7965 725f  playlist[player_
+00001b90: 6f75 7470 7574 2e69 5d5b 335d 2e73 706c  output.i][3].spl
+00001ba0: 6974 2829 290a 2020 2020 2020 2020 2020  it()).          
+00001bb0: 2020 290a 2020 2020 2020 2020 656c 7365    ).        else
+00001bc0: 3a0a 2020 2020 2020 2020 2020 2020 706c  :.            pl
+00001bd0: 6179 6572 5f6f 7574 7075 742e 636c 6970  ayer_output.clip
+00001be0: 203d 2030 2c20 706c 6179 6261 636b 2e64   = 0, playback.d
+00001bf0: 7572 6174 696f 6e0a 0a20 2020 2020 2020  uration..       
+00001c00: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
+00001c10: 6175 7365 6420 3d20 4661 6c73 650a 2020  aused = False.  
+00001c20: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+00001c30: 7075 742e 6475 7261 7469 6f6e 203d 2066  put.duration = f
+00001c40: 756c 6c5f 6475 7261 7469 6f6e 203d 2070  ull_duration = p
+00001c50: 6c61 7962 6163 6b2e 6475 7261 7469 6f6e  layback.duration
+00001c60: 0a0a 2020 2020 2020 2020 6966 2073 7973  ..        if sys
+00001c70: 2e70 6c61 7466 6f72 6d20 3d3d 2022 6461  .platform == "da
+00001c80: 7277 696e 2220 616e 6420 6361 6e5f 6d61  rwin" and can_ma
+00001c90: 635f 6e6f 775f 706c 6179 696e 673a 0a20  c_now_playing:. 
+00001ca0: 2020 2020 2020 2020 2020 206d 6163 5f6e             mac_n
+00001cb0: 6f77 5f70 6c61 7969 6e67 2e70 6175 7365  ow_playing.pause
+00001cc0: 6420 3d20 4661 6c73 650a 2020 2020 2020  d = False.      
+00001cd0: 2020 2020 2020 6d61 635f 6e6f 775f 706c        mac_now_pl
+00001ce0: 6179 696e 672e 706f 7320 3d20 300a 2020  aying.pos = 0.  
+00001cf0: 2020 2020 2020 2020 2020 6d61 635f 6e6f            mac_no
+00001d00: 775f 706c 6179 696e 672e 6c65 6e67 7468  w_playing.length
+00001d10: 203d 2070 6c61 7965 725f 6f75 7470 7574   = player_output
+00001d20: 2e64 7572 6174 696f 6e0a 0a20 2020 2020  .duration..     
+00001d30: 2020 2020 2020 2068 656c 7065 7273 2e6d         helpers.m
+00001d40: 756c 7469 7072 6f63 6573 7369 6e67 5f70  ultiprocessing_p
+00001d50: 7574 5f77 6f72 6428 0a20 2020 2020 2020  ut_word(.       
+00001d60: 2020 2020 2020 2020 206d 6163 5f6e 6f77           mac_now
+00001d70: 5f70 6c61 7969 6e67 2e74 6974 6c65 5f71  _playing.title_q
+00001d80: 7565 7565 2c0a 2020 2020 2020 2020 2020  ueue,.          
+00001d90: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+00001da0: 7075 742e 706c 6179 6c69 7374 5b70 6c61  put.playlist[pla
+00001db0: 7965 725f 6f75 7470 7574 2e69 5d5b 315d  yer_output.i][1]
+00001dc0: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+00001dd0: 2020 2020 2020 2020 2020 2020 6865 6c70              help
+00001de0: 6572 732e 6d75 6c74 6970 726f 6365 7373  ers.multiprocess
+00001df0: 696e 675f 7075 745f 776f 7264 280a 2020  ing_put_word(.  
+00001e00: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00001e10: 635f 6e6f 775f 706c 6179 696e 672e 6172  c_now_playing.ar
+00001e20: 7469 7374 5f71 7565 7565 2c0a 2020 2020  tist_queue,.    
+00001e30: 2020 2020 2020 2020 2020 2020 706c 6179              play
+00001e40: 6572 5f6f 7574 7075 742e 706c 6179 6c69  er_output.playli
+00001e50: 7374 5b70 6c61 7965 725f 6f75 7470 7574  st[player_output
+00001e60: 2e69 5d5b 2d33 5d2c 0a20 2020 2020 2020  .i][-3],.       
+00001e70: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00001e80: 2020 2020 7570 6461 7465 5f6e 6f77 5f70      update_now_p
+00001e90: 6c61 7969 6e67 203d 2054 7275 650a 0a20  laying = True.. 
+00001ea0: 2020 2020 2020 2069 6620 706c 6179 6572         if player
+00001eb0: 5f6f 7574 7075 742e 7570 6461 7465 5f64  _output.update_d
+00001ec0: 6973 636f 7264 3a0a 2020 2020 2020 2020  iscord:.        
+00001ed0: 2020 2020 6865 6c70 6572 732e 6d75 6c74      helpers.mult
+00001ee0: 6970 726f 6365 7373 696e 675f 7075 745f  iprocessing_put_
+00001ef0: 776f 7264 280a 2020 2020 2020 2020 2020  word(.          
+00001f00: 2020 2020 2020 6469 7363 6f72 645f 7469        discord_ti
+00001f10: 746c 655f 7175 6575 652c 2070 6c61 7965  tle_queue, playe
+00001f20: 725f 6f75 7470 7574 2e70 6c61 796c 6973  r_output.playlis
+00001f30: 745b 706c 6179 6572 5f6f 7574 7075 742e  t[player_output.
+00001f40: 695d 5b31 5d0a 2020 2020 2020 2020 2020  i][1].          
+00001f50: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00001f60: 6865 6c70 6572 732e 6d75 6c74 6970 726f  helpers.multipro
+00001f70: 6365 7373 696e 675f 7075 745f 776f 7264  cessing_put_word
+00001f80: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00001f90: 2020 6469 7363 6f72 645f 6172 7469 7374    discord_artist
+00001fa0: 5f71 7565 7565 2c0a 2020 2020 2020 2020  _queue,.        
+00001fb0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00001fc0: 7574 7075 742e 706c 6179 6c69 7374 5b70  utput.playlist[p
+00001fd0: 6c61 7965 725f 6f75 7470 7574 2e69 5d5b  layer_output.i][
+00001fe0: 2d33 5d2c 0a20 2020 2020 2020 2020 2020  -3],.           
+00001ff0: 2029 0a0a 2020 2020 2020 2020 706c 6179   )..        play
+00002000: 6261 636b 2e70 6c61 7928 290a 0a20 2020  back.play()..   
+00002010: 2020 2020 2069 6620 706c 6179 6572 5f6f       if player_o
+00002020: 7574 7075 742e 636c 6970 5f6d 6f64 653a  utput.clip_mode:
+00002030: 0a20 2020 2020 2020 2020 2020 2063 6c69  .            cli
+00002040: 705f 7374 6172 742c 2063 6c69 705f 656e  p_start, clip_en
+00002050: 6420 3d20 706c 6179 6572 5f6f 7574 7075  d = player_outpu
+00002060: 742e 636c 6970 0a20 2020 2020 2020 2020  t.clip.         
+00002070: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00002080: 2e64 7572 6174 696f 6e20 3d20 636c 6970  .duration = clip
+00002090: 5f65 6e64 202d 2063 6c69 705f 7374 6172  _end - clip_star
+000020a0: 740a 2020 2020 2020 2020 2020 2020 706c  t.            pl
+000020b0: 6179 6261 636b 2e73 6565 6b28 636c 6970  ayback.seek(clip
+000020c0: 5f73 7461 7274 290a 2020 2020 2020 2020  _start).        
+000020d0: 2020 2020 6966 2073 7973 2e70 6c61 7466      if sys.platf
+000020e0: 6f72 6d20 3d3d 2022 6461 7277 696e 2220  orm == "darwin" 
+000020f0: 616e 6420 6361 6e5f 6d61 635f 6e6f 775f  and can_mac_now_
+00002100: 706c 6179 696e 673a 0a20 2020 2020 2020  playing:.       
+00002110: 2020 2020 2020 2020 206d 6163 5f6e 6f77           mac_now
+00002120: 5f70 6c61 7969 6e67 2e70 6f73 203d 2072  _playing.pos = r
+00002130: 6f75 6e64 2870 6c61 7962 6163 6b2e 6375  ound(playback.cu
+00002140: 7272 5f70 6f73 290a 2020 2020 2020 2020  rr_pos).        
+00002150: 2020 2020 6c61 7374 5f74 696d 6573 7461      last_timesta
+00002160: 6d70 203d 2070 6c61 7962 6163 6b2e 6375  mp = playback.cu
+00002170: 7272 5f70 6f73 0a0a 2020 2020 2020 2020  rr_pos..        
+00002180: 7374 6172 745f 7469 6d65 203d 2070 6175  start_time = pau
+00002190: 7365 5f73 7461 7274 203d 2074 696d 6528  se_start = time(
+000021a0: 290a 2020 2020 2020 2020 706c 6179 6261  ).        playba
+000021b0: 636b 2e73 6574 5f76 6f6c 756d 6528 706c  ck.set_volume(pl
+000021c0: 6179 6572 5f6f 7574 7075 742e 766f 6c75  ayer_output.volu
+000021d0: 6d65 290a 0a20 2020 2020 2020 206c 6173  me)..        las
+000021e0: 745f 7469 6d65 7374 616d 7020 3d20 706c  t_timestamp = pl
+000021f0: 6179 6261 636b 2e63 7572 725f 706f 730a  ayback.curr_pos.
+00002200: 2020 2020 2020 2020 6e65 7874 5f73 6f6e          next_son
+00002210: 6720 3d20 3120 2023 202d 3120 6966 2067  g = 1  # -1 if g
+00002220: 6f69 6e67 2062 6163 6b2c 2030 2069 6620  oing back, 0 if 
+00002230: 7265 7374 6172 7469 6e67 2c20 2b31 2069  restarting, +1 i
+00002240: 6620 6e65 7874 2073 6f6e 670a 2020 2020  f next song.    
+00002250: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+00002260: 742e 656e 6469 6e67 203d 2046 616c 7365  t.ending = False
+00002270: 0a20 2020 2020 2020 2077 6869 6c65 2054  .        while T
+00002280: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00002290: 2069 6620 6e6f 7420 706c 6179 6261 636b   if not playback
+000022a0: 2e61 6374 6976 6520 6f72 2028 0a20 2020  .active or (.   
+000022b0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+000022c0: 7965 725f 6f75 7470 7574 2e63 6c69 705f  yer_output.clip_
+000022d0: 6d6f 6465 0a20 2020 2020 2020 2020 2020  mode.           
+000022e0: 2020 2020 2061 6e64 2070 6c61 7962 6163       and playbac
+000022f0: 6b2e 6375 7272 5f70 6f73 203e 2070 6c61  k.curr_pos > pla
+00002300: 7965 725f 6f75 7470 7574 2e63 6c69 705b  yer_output.clip[
+00002310: 315d 0a20 2020 2020 2020 2020 2020 2029  1].            )
+00002320: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002330: 2020 6e65 7874 5f73 6f6e 6720 3d20 6e6f    next_song = no
+00002340: 7420 706c 6179 6572 5f6f 7574 7075 742e  t player_output.
+00002350: 6c6f 6f70 696e 675f 6375 7272 656e 745f  looping_current_
+00002360: 736f 6e67 0a20 2020 2020 2020 2020 2020  song.           
+00002370: 2020 2020 2062 7265 616b 0a0a 2020 2020       break..    
+00002380: 2020 2020 2020 2020 2320 6661 6465 2069          # fade i
+00002390: 6e20 6669 7273 7420 3220 7365 636f 6e64  n first 2 second
+000023a0: 7320 6f66 2063 6c69 700a 2020 2020 2020  s of clip.      
+000023b0: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+000023c0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+000023d0: 725f 6f75 7470 7574 2e63 6c69 705f 6d6f  r_output.clip_mo
+000023e0: 6465 0a20 2020 2020 2020 2020 2020 2020  de.             
+000023f0: 2020 2061 6e64 2063 6c69 705f 7374 6172     and clip_star
+00002400: 7420 213d 2030 2020 2320 6966 2063 6c69  t != 0  # if cli
+00002410: 7020 646f 6573 6e27 7420 7374 6172 7420  p doesn't start 
+00002420: 6174 2062 6567 696e 6e69 6e67 0a20 2020  at beginning.   
+00002430: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+00002440: 2063 6c69 705f 656e 6420 2d20 636c 6970   clip_end - clip
+00002450: 5f73 7461 7274 203e 2035 2020 2320 6966  _start > 5  # if
+00002460: 2063 6c69 7020 6973 206c 6f6e 6765 7220   clip is longer 
+00002470: 7468 616e 2035 2073 6563 730a 2020 2020  than 5 secs.    
+00002480: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+00002490: 706c 6179 6261 636b 2e63 7572 725f 706f  playback.curr_po
+000024a0: 7320 3c20 636c 6970 5f73 7461 7274 202b  s < clip_start +
+000024b0: 2032 0a20 2020 2020 2020 2020 2020 2029   2.            )
+000024c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000024d0: 2020 706c 6179 6261 636b 2e73 6574 5f76    playback.set_v
+000024e0: 6f6c 756d 6528 0a20 2020 2020 2020 2020  olume(.         
+000024f0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00002500: 725f 6f75 7470 7574 2e76 6f6c 756d 6520  r_output.volume 
+00002510: 2a20 2870 6c61 7962 6163 6b2e 6375 7272  * (playback.curr
+00002520: 5f70 6f73 202d 2063 6c69 705f 7374 6172  _pos - clip_star
+00002530: 7429 202f 2032 0a20 2020 2020 2020 2020  t) / 2.         
+00002540: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00002550: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00002560: 2020 2020 2020 2020 2020 2070 6c61 7962             playb
+00002570: 6163 6b2e 7365 745f 766f 6c75 6d65 2870  ack.set_volume(p
+00002580: 6c61 7965 725f 6f75 7470 7574 2e76 6f6c  layer_output.vol
+00002590: 756d 6529 0a0a 2020 2020 2020 2020 2020  ume)..          
+000025a0: 2020 6966 2073 7973 2e70 6c61 7466 6f72    if sys.platfor
+000025b0: 6d20 3d3d 2022 6461 7277 696e 2220 616e  m == "darwin" an
+000025c0: 6420 6361 6e5f 6d61 635f 6e6f 775f 706c  d can_mac_now_pl
+000025d0: 6179 696e 673a 0a20 2020 2020 2020 2020  aying:.         
+000025e0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+000025f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002600: 6966 2075 7064 6174 655f 6e6f 775f 706c  if update_now_pl
+00002610: 6179 696e 673a 0a20 2020 2020 2020 2020  aying:.         
+00002620: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00002630: 6163 5f6e 6f77 5f70 6c61 7969 6e67 2e75  ac_now_playing.u
+00002640: 7064 6174 6528 290a 2020 2020 2020 2020  pdate().        
+00002650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002660: 7570 6461 7465 5f6e 6f77 5f70 6c61 7969  update_now_playi
+00002670: 6e67 203d 2046 616c 7365 0a20 2020 2020  ng = False.     
+00002680: 2020 2020 2020 2020 2020 2020 2020 204e                 N
+00002690: 5352 756e 4c6f 6f70 2e63 7572 7265 6e74  SRunLoop.current
+000026a0: 5275 6e4c 6f6f 7028 292e 7275 6e55 6e74  RunLoop().runUnt
+000026b0: 696c 4461 7465 5f28 0a20 2020 2020 2020  ilDate_(.       
+000026c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000026d0: 204e 5344 6174 652e 6461 7465 5769 7468   NSDate.dateWith
+000026e0: 5469 6d65 496e 7465 7276 616c 5369 6e63  TimeIntervalSinc
+000026f0: 654e 6f77 5f28 302e 3035 290a 2020 2020  eNow_(0.05).    
+00002700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002710: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00002720: 2020 6578 6365 7074 3a20 2023 2070 796c    except:  # pyl
+00002730: 696e 743a 2064 6973 6162 6c65 3d62 6172  int: disable=bar
+00002740: 652d 6578 6365 7074 0a20 2020 2020 2020  e-except.       
+00002750: 2020 2020 2020 2020 2020 2020 2063 616e               can
+00002760: 5f6d 6163 5f6e 6f77 5f70 6c61 7969 6e67  _mac_now_playing
+00002770: 203d 2046 616c 7365 0a0a 2020 2020 2020   = False..      
+00002780: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+00002790: 2020 2020 2020 2020 2020 2073 7973 2e70             sys.p
+000027a0: 6c61 7466 6f72 6d20 3d3d 2022 6461 7277  latform == "darw
+000027b0: 696e 220a 2020 2020 2020 2020 2020 2020  in".            
+000027c0: 2020 2020 616e 6420 6361 6e5f 6d61 635f      and can_mac_
+000027d0: 6e6f 775f 706c 6179 696e 670a 2020 2020  now_playing.    
+000027e0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+000027f0: 6e6f 7420 6d61 635f 6e6f 775f 706c 6179  not mac_now_play
+00002800: 696e 672e 712e 656d 7074 7928 290a 2020  ing.q.empty().  
+00002810: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+00002820: 2020 2020 2020 2020 2020 2020 2063 203d               c =
+00002830: 206d 6163 5f6e 6f77 5f70 6c61 7969 6e67   mac_now_playing
+00002840: 2e71 2e67 6574 2829 0a20 2020 2020 2020  .q.get().       
+00002850: 2020 2020 2020 2020 2069 6620 6320 696e           if c in
+00002860: 2022 6e4e 223a 0a20 2020 2020 2020 2020   "nN":.         
+00002870: 2020 2020 2020 2020 2020 2069 6620 280a             if (.
 00002880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002890: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-000028a0: 7075 742e 6920 3d3d 206c 656e 2870 6c61  put.i == len(pla
-000028b0: 7965 725f 6f75 7470 7574 2e70 6c61 796c  yer_output.playl
-000028c0: 6973 7429 202d 2031 0a20 2020 2020 2020  ist) - 1.       
+00002890: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+000028a0: 7574 7075 742e 6920 3d3d 206c 656e 2870  utput.i == len(p
+000028b0: 6c61 7965 725f 6f75 7470 7574 2e70 6c61  layer_output.pla
+000028c0: 796c 6973 7429 202d 2031 0a20 2020 2020  ylist) - 1.     
 000028d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000028e0: 2061 6e64 206e 6f74 206c 6f6f 700a 2020   and not loop.  
+000028e0: 2020 2061 6e64 206e 6f74 206c 6f6f 700a     and not loop.
 000028f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002900: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00002910: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-00002920: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00002930: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00002900: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+00002910: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00002920: 6173 730a 2020 2020 2020 2020 2020 2020  ass.            
+00002930: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
 00002940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002950: 2020 2020 6e65 7874 5f73 6f6e 6720 3d20      next_song = 
-00002960: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00002970: 2020 2020 2020 2020 2020 706c 6179 6261            playba
-00002980: 636b 2e73 746f 7028 290a 2020 2020 2020  ck.stop().      
+00002950: 2020 2020 2020 6e65 7874 5f73 6f6e 6720        next_song 
+00002960: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
+00002970: 2020 2020 2020 2020 2020 2020 706c 6179              play
+00002980: 6261 636b 2e73 746f 7028 290a 2020 2020  back.stop().    
 00002990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000029a0: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
-000029b0: 2020 2020 2020 2020 656c 6966 2063 2069          elif c i
-000029c0: 6e20 2262 4222 3a0a 2020 2020 2020 2020  n "bB":.        
-000029d0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-000029e0: 6c61 7965 725f 6f75 7470 7574 2e69 203d  layer_output.i =
-000029f0: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-00002a00: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-00002a10: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00002a20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000029a0: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+000029b0: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+000029c0: 2069 6e20 2262 4222 3a0a 2020 2020 2020   in "bB":.      
+000029d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000029e0: 2070 6c61 7965 725f 6f75 7470 7574 2e69   player_output.i
+000029f0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+00002a00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00002a10: 6173 730a 2020 2020 2020 2020 2020 2020  ass.            
+00002a20: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
 00002a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002a40: 2020 2020 6e65 7874 5f73 6f6e 6720 3d20      next_song = 
-00002a50: 2d31 0a20 2020 2020 2020 2020 2020 2020  -1.             
-00002a60: 2020 2020 2020 2020 2020 2070 6c61 7962             playb
-00002a70: 6163 6b2e 7374 6f70 2829 0a20 2020 2020  ack.stop().     
+00002a40: 2020 2020 2020 6e65 7874 5f73 6f6e 6720        next_song 
+00002a50: 3d20 2d31 0a20 2020 2020 2020 2020 2020  = -1.           
+00002a60: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00002a70: 7962 6163 6b2e 7374 6f70 2829 0a20 2020  yback.stop().   
 00002a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002a90: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
-00002aa0: 2020 2020 2020 2020 2065 6c69 6620 6320           elif c 
-00002ab0: 696e 2022 7252 223a 0a20 2020 2020 2020  in "rR":.       
-00002ac0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00002ad0: 7962 6163 6b2e 7374 6f70 2829 0a20 2020  yback.stop().   
+00002a90: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
+00002aa0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00002ab0: 6320 696e 2022 7252 223a 0a20 2020 2020  c in "rR":.     
+00002ac0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00002ad0: 6c61 7962 6163 6b2e 7374 6f70 2829 0a20  layback.stop(). 
 00002ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002af0: 206e 6578 745f 736f 6e67 203d 2030 0a20   next_song = 0. 
-00002b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002b10: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
-00002b20: 2020 2020 2020 2020 2065 6c69 6620 6320           elif c 
-00002b30: 696e 2022 7151 223a 0a20 2020 2020 2020  in "qQ":.       
-00002b40: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00002b50: 7965 725f 6f75 7470 7574 2e65 6e64 696e  yer_output.endin
-00002b60: 6720 3d20 5472 7565 0a20 2020 2020 2020  g = True.       
-00002b70: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-00002b80: 616b 0a20 2020 2020 2020 2020 2020 2020  ak.             
-00002b90: 2020 2065 6c69 6620 6320 3d3d 2022 2022     elif c == " "
-00002ba0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00002bb0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00002bc0: 7075 742e 7061 7573 6564 203d 206e 6f74  put.paused = not
-00002bd0: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-00002be0: 6175 7365 640a 0a20 2020 2020 2020 2020  aused..         
-00002bf0: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
-00002c00: 6179 6572 5f6f 7574 7075 742e 7061 7573  ayer_output.paus
-00002c10: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
-00002c20: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00002c30: 6261 636b 2e70 6175 7365 2829 0a20 2020  back.pause().   
+00002af0: 2020 206e 6578 745f 736f 6e67 203d 2030     next_song = 0
+00002b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002b10: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
+00002b20: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00002b30: 6320 696e 2022 7151 223a 0a20 2020 2020  c in "qQ":.     
+00002b40: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00002b50: 6c61 7965 725f 6f75 7470 7574 2e65 6e64  layer_output.end
+00002b60: 696e 6720 3d20 5472 7565 0a20 2020 2020  ing = True.     
+00002b70: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00002b80: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
+00002b90: 2020 2020 2065 6c69 6620 6320 3d3d 2022       elif c == "
+00002ba0: 2022 3a0a 2020 2020 2020 2020 2020 2020   ":.            
+00002bb0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00002bc0: 7574 7075 742e 7061 7573 6564 203d 206e  utput.paused = n
+00002bd0: 6f74 2070 6c61 7965 725f 6f75 7470 7574  ot player_output
+00002be0: 2e70 6175 7365 640a 0a20 2020 2020 2020  .paused..       
+00002bf0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00002c00: 706c 6179 6572 5f6f 7574 7075 742e 7061  player_output.pa
+00002c10: 7573 6564 3a0a 2020 2020 2020 2020 2020  used:.          
+00002c20: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00002c30: 6179 6261 636b 2e70 6175 7365 2829 0a20  ayback.pause(). 
 00002c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c50: 2020 2020 2070 6175 7365 5f73 7461 7274       pause_start
-00002c60: 203d 2074 696d 6528 290a 2020 2020 2020   = time().      
-00002c70: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00002c80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00002c90: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00002ca0: 6261 636b 2e72 6573 756d 6528 290a 2020  back.resume().  
+00002c50: 2020 2020 2020 2070 6175 7365 5f73 7461         pause_sta
+00002c60: 7274 203d 2074 696d 6528 290a 2020 2020  rt = time().    
+00002c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c80: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00002c90: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00002ca0: 6179 6261 636b 2e72 6573 756d 6528 290a  ayback.resume().
 00002cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002cc0: 2020 2020 2020 7374 6172 745f 7469 6d65        start_time
-00002cd0: 202b 3d20 7469 6d65 2829 202d 2070 6175   += time() - pau
-00002ce0: 7365 5f73 7461 7274 0a0a 2020 2020 2020  se_start..      
-00002cf0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00002d00: 2073 7973 2e70 6c61 7466 6f72 6d20 3d3d   sys.platform ==
-00002d10: 2022 6461 7277 696e 2220 616e 6420 6361   "darwin" and ca
-00002d20: 6e5f 6d61 635f 6e6f 775f 706c 6179 696e  n_mac_now_playin
-00002d30: 673a 0a20 2020 2020 2020 2020 2020 2020  g:.             
-00002d40: 2020 2020 2020 2020 2020 206d 6163 5f6e             mac_n
-00002d50: 6f77 5f70 6c61 7969 6e67 2e70 6175 7365  ow_playing.pause
-00002d60: 6420 3d20 706c 6179 6572 5f6f 7574 7075  d = player_outpu
-00002d70: 742e 7061 7573 6564 0a20 2020 2020 2020  t.paused.       
+00002cc0: 2020 2020 2020 2020 7374 6172 745f 7469          start_ti
+00002cd0: 6d65 202b 3d20 7469 6d65 2829 202d 2070  me += time() - p
+00002ce0: 6175 7365 5f73 7461 7274 0a0a 2020 2020  ause_start..    
+00002cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d00: 6966 2073 7973 2e70 6c61 7466 6f72 6d20  if sys.platform 
+00002d10: 3d3d 2022 6461 7277 696e 2220 616e 6420  == "darwin" and 
+00002d20: 6361 6e5f 6d61 635f 6e6f 775f 706c 6179  can_mac_now_play
+00002d30: 696e 673a 0a20 2020 2020 2020 2020 2020  ing:.           
+00002d40: 2020 2020 2020 2020 2020 2020 206d 6163               mac
+00002d50: 5f6e 6f77 5f70 6c61 7969 6e67 2e70 6175  _now_playing.pau
+00002d60: 7365 6420 3d20 706c 6179 6572 5f6f 7574  sed = player_out
+00002d70: 7075 742e 7061 7573 6564 0a20 2020 2020  put.paused.     
 00002d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d90: 2069 6620 706c 6179 6572 5f6f 7574 7075   if player_outpu
-00002da0: 742e 7061 7573 6564 3a0a 2020 2020 2020  t.paused:.      
+00002d90: 2020 2069 6620 706c 6179 6572 5f6f 7574     if player_out
+00002da0: 7075 742e 7061 7573 6564 3a0a 2020 2020  put.paused:.    
 00002db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002dc0: 2020 2020 2020 6d61 635f 6e6f 775f 706c        mac_now_pl
-00002dd0: 6179 696e 672e 7061 7573 6528 290a 2020  aying.pause().  
+00002dc0: 2020 2020 2020 2020 6d61 635f 6e6f 775f          mac_now_
+00002dd0: 706c 6179 696e 672e 7061 7573 6528 290a  playing.pause().
 00002de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002df0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00002df0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
 00002e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e10: 2020 2020 2020 2020 6d61 635f 6e6f 775f          mac_now_
-00002e20: 706c 6179 696e 672e 7265 7375 6d65 2829  playing.resume()
-00002e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002e40: 2020 2020 2020 2020 2075 7064 6174 655f           update_
-00002e50: 6e6f 775f 706c 6179 696e 6720 3d20 5472  now_playing = Tr
-00002e60: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
-00002e70: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00002e80: 7574 7075 742e 6f75 7470 7574 2870 6c61  utput.output(pla
-00002e90: 7962 6163 6b2e 6375 7272 5f70 6f73 290a  yback.curr_pos).
-00002ea0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00002eb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00002ec0: 2020 6320 3d20 7374 6473 6372 2e67 6574    c = stdscr.get
-00002ed0: 6368 2829 0a20 2020 2020 2020 2020 2020  ch().           
-00002ee0: 2020 2020 206e 6578 745f 6320 3d20 7374       next_c = st
-00002ef0: 6473 6372 2e67 6574 6368 2829 0a20 2020  dscr.getch().   
-00002f00: 2020 2020 2020 2020 2020 2020 2077 6869               whi
-00002f10: 6c65 206e 6578 745f 6320 213d 202d 313a  le next_c != -1:
-00002f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002f30: 2020 2020 2063 2c20 6e65 7874 5f63 203d       c, next_c =
-00002f40: 206e 6578 745f 632c 2073 7464 7363 722e   next_c, stdscr.
-00002f50: 6765 7463 6828 290a 0a20 2020 2020 2020  getch()..       
-00002f60: 2020 2020 2020 2020 2069 6620 6320 213d           if c !=
-00002f70: 202d 313a 0a20 2020 2020 2020 2020 2020   -1:.           
-00002f80: 2020 2020 2020 2020 2069 6620 706c 6179           if play
-00002f90: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
-00002fa0: 696e 6720 6973 204e 6f6e 653a 0a20 2020  ing is None:.   
+00002e10: 2020 2020 2020 2020 2020 6d61 635f 6e6f            mac_no
+00002e20: 775f 706c 6179 696e 672e 7265 7375 6d65  w_playing.resume
+00002e30: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+00002e40: 2020 2020 2020 2020 2020 2075 7064 6174             updat
+00002e50: 655f 6e6f 775f 706c 6179 696e 6720 3d20  e_now_playing = 
+00002e60: 5472 7565 0a0a 2020 2020 2020 2020 2020  True..          
+00002e70: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00002e80: 5f6f 7574 7075 742e 6f75 7470 7574 2870  _output.output(p
+00002e90: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
+00002ea0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00002eb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00002ec0: 2020 2020 6320 3d20 7374 6473 6372 2e67      c = stdscr.g
+00002ed0: 6574 6368 2829 0a20 2020 2020 2020 2020  etch().         
+00002ee0: 2020 2020 2020 206e 6578 745f 6320 3d20         next_c = 
+00002ef0: 7374 6473 6372 2e67 6574 6368 2829 0a20  stdscr.getch(). 
+00002f00: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00002f10: 6869 6c65 206e 6578 745f 6320 213d 202d  hile next_c != -
+00002f20: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+00002f30: 2020 2020 2020 2063 2c20 6e65 7874 5f63         c, next_c
+00002f40: 203d 206e 6578 745f 632c 2073 7464 7363   = next_c, stdsc
+00002f50: 722e 6765 7463 6828 290a 0a20 2020 2020  r.getch()..     
+00002f60: 2020 2020 2020 2020 2020 2069 6620 6320             if c 
+00002f70: 213d 202d 313a 0a20 2020 2020 2020 2020  != -1:.         
+00002f80: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
+00002f90: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
+00002fa0: 7074 696e 6720 6973 204e 6f6e 653a 0a20  pting is None:. 
 00002fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002fc0: 2020 2020 2069 6620 6320 3d3d 2063 7572       if c == cur
-00002fd0: 7365 732e 4b45 595f 4c45 4654 3a0a 2020  ses.KEY_LEFT:.  
+00002fc0: 2020 2020 2020 2069 6620 6320 3d3d 2063         if c == c
+00002fd0: 7572 7365 732e 4b45 595f 4c45 4654 3a0a  urses.KEY_LEFT:.
 00002fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002ff0: 2020 2020 2020 2020 2020 706c 6179 6261            playba
-00003000: 636b 2e73 6565 6b28 706c 6179 6261 636b  ck.seek(playback
-00003010: 2e63 7572 725f 706f 7320 2d20 636f 6e66  .curr_pos - conf
-00003020: 6967 2e53 4352 5542 5f54 494d 4529 0a20  ig.SCRUB_TIME). 
-00003030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003040: 2020 2020 2020 2020 2020 2069 6620 7379             if sy
-00003050: 732e 706c 6174 666f 726d 203d 3d20 2264  s.platform == "d
-00003060: 6172 7769 6e22 2061 6e64 2063 616e 5f6d  arwin" and can_m
-00003070: 6163 5f6e 6f77 5f70 6c61 7969 6e67 3a0a  ac_now_playing:.
-00003080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ff0: 2020 2020 2020 2020 2020 2020 706c 6179              play
+00003000: 6261 636b 2e73 6565 6b28 706c 6179 6261  back.seek(playba
+00003010: 636b 2e63 7572 725f 706f 7320 2d20 636f  ck.curr_pos - co
+00003020: 6e66 6967 2e53 4352 5542 5f54 494d 4529  nfig.SCRUB_TIME)
+00003030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003040: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00003050: 7379 732e 706c 6174 666f 726d 203d 3d20  sys.platform == 
+00003060: 2264 6172 7769 6e22 2061 6e64 2063 616e  "darwin" and can
+00003070: 5f6d 6163 5f6e 6f77 5f70 6c61 7969 6e67  _mac_now_playing
+00003080: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 00003090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000030a0: 6d61 635f 6e6f 775f 706c 6179 696e 672e  mac_now_playing.
-000030b0: 706f 7320 3d20 726f 756e 6428 706c 6179  pos = round(play
-000030c0: 6261 636b 2e63 7572 725f 706f 7329 0a20  back.curr_pos). 
-000030d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000030e0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-000030f0: 7064 6174 655f 6e6f 775f 706c 6179 696e  pdate_now_playin
-00003100: 6720 3d20 5472 7565 0a0a 2020 2020 2020  g = True..      
+000030a0: 2020 6d61 635f 6e6f 775f 706c 6179 696e    mac_now_playin
+000030b0: 672e 706f 7320 3d20 726f 756e 6428 706c  g.pos = round(pl
+000030c0: 6179 6261 636b 2e63 7572 725f 706f 7329  ayback.curr_pos)
+000030d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000030e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030f0: 2075 7064 6174 655f 6e6f 775f 706c 6179   update_now_play
+00003100: 696e 6720 3d20 5472 7565 0a0a 2020 2020  ing = True..    
 00003110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003120: 2020 2020 2020 6c61 7374 5f74 696d 6573        last_times
-00003130: 7461 6d70 203d 2070 6c61 7962 6163 6b2e  tamp = playback.
-00003140: 6375 7272 5f70 6f73 0a20 2020 2020 2020  curr_pos.       
+00003120: 2020 2020 2020 2020 6c61 7374 5f74 696d          last_tim
+00003130: 6573 7461 6d70 203d 2070 6c61 7962 6163  estamp = playbac
+00003140: 6b2e 6375 7272 5f70 6f73 0a20 2020 2020  k.curr_pos.     
 00003150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003160: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00003170: 7574 2e6f 7574 7075 7428 706c 6179 6261  ut.output(playba
-00003180: 636b 2e63 7572 725f 706f 7329 0a20 2020  ck.curr_pos).   
+00003160: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00003170: 7470 7574 2e6f 7574 7075 7428 706c 6179  tput.output(play
+00003180: 6261 636b 2e63 7572 725f 706f 7329 0a20  back.curr_pos). 
 00003190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000031a0: 2020 2020 2065 6c69 6620 6320 3d3d 2063       elif c == c
-000031b0: 7572 7365 732e 4b45 595f 5249 4748 543a  urses.KEY_RIGHT:
-000031c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000031d0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-000031e0: 7962 6163 6b2e 7365 656b 2870 6c61 7962  yback.seek(playb
-000031f0: 6163 6b2e 6375 7272 5f70 6f73 202b 2063  ack.curr_pos + c
-00003200: 6f6e 6669 672e 5343 5255 425f 5449 4d45  onfig.SCRUB_TIME
-00003210: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00003220: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00003230: 2073 7973 2e70 6c61 7466 6f72 6d20 3d3d   sys.platform ==
-00003240: 2022 6461 7277 696e 2220 616e 6420 6361   "darwin" and ca
-00003250: 6e5f 6d61 635f 6e6f 775f 706c 6179 696e  n_mac_now_playin
-00003260: 673a 0a20 2020 2020 2020 2020 2020 2020  g:.             
+000031a0: 2020 2020 2020 2065 6c69 6620 6320 3d3d         elif c ==
+000031b0: 2063 7572 7365 732e 4b45 595f 5249 4748   curses.KEY_RIGH
+000031c0: 543a 0a20 2020 2020 2020 2020 2020 2020  T:.             
+000031d0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000031e0: 6c61 7962 6163 6b2e 7365 656b 2870 6c61  layback.seek(pla
+000031f0: 7962 6163 6b2e 6375 7272 5f70 6f73 202b  yback.curr_pos +
+00003200: 2063 6f6e 6669 672e 5343 5255 425f 5449   config.SCRUB_TI
+00003210: 4d45 290a 2020 2020 2020 2020 2020 2020  ME).            
+00003220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003230: 6966 2073 7973 2e70 6c61 7466 6f72 6d20  if sys.platform 
+00003240: 3d3d 2022 6461 7277 696e 2220 616e 6420  == "darwin" and 
+00003250: 6361 6e5f 6d61 635f 6e6f 775f 706c 6179  can_mac_now_play
+00003260: 696e 673a 0a20 2020 2020 2020 2020 2020  ing:.           
 00003270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003280: 2020 206d 6163 5f6e 6f77 5f70 6c61 7969     mac_now_playi
-00003290: 6e67 2e70 6f73 203d 2072 6f75 6e64 2870  ng.pos = round(p
-000032a0: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
-000032b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00003280: 2020 2020 206d 6163 5f6e 6f77 5f70 6c61       mac_now_pla
+00003290: 7969 6e67 2e70 6f73 203d 2072 6f75 6e64  ying.pos = round
+000032a0: 2870 6c61 7962 6163 6b2e 6375 7272 5f70  (playback.curr_p
+000032b0: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
 000032c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032d0: 2020 7570 6461 7465 5f6e 6f77 5f70 6c61    update_now_pla
-000032e0: 7969 6e67 203d 2054 7275 650a 0a20 2020  ying = True..   
+000032d0: 2020 2020 7570 6461 7465 5f6e 6f77 5f70      update_now_p
+000032e0: 6c61 7969 6e67 203d 2054 7275 650a 0a20  laying = True.. 
 000032f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003300: 2020 2020 2020 2020 206c 6173 745f 7469           last_ti
-00003310: 6d65 7374 616d 7020 3d20 706c 6179 6261  mestamp = playba
-00003320: 636b 2e63 7572 725f 706f 730a 2020 2020  ck.curr_pos.    
+00003300: 2020 2020 2020 2020 2020 206c 6173 745f             last_
+00003310: 7469 6d65 7374 616d 7020 3d20 706c 6179  timestamp = play
+00003320: 6261 636b 2e63 7572 725f 706f 730a 2020  back.curr_pos.  
 00003330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003340: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00003350: 7574 7075 742e 6f75 7470 7574 2870 6c61  utput.output(pla
-00003360: 7962 6163 6b2e 6375 7272 5f70 6f73 290a  yback.curr_pos).
-00003370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003380: 2020 2020 2020 2020 656c 6966 2063 203d          elif c =
-00003390: 3d20 6375 7273 6573 2e4b 4559 5f55 503a  = curses.KEY_UP:
-000033a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000033b0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-000033c0: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
-000033d0: 6c65 722e 7363 726f 6c6c 5f62 6163 6b77  ler.scroll_backw
-000033e0: 6172 6428 290a 2020 2020 2020 2020 2020  ard().          
+00003340: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00003350: 5f6f 7574 7075 742e 6f75 7470 7574 2870  _output.output(p
+00003360: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
+00003370: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00003380: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+00003390: 203d 3d20 6375 7273 6573 2e4b 4559 5f55   == curses.KEY_U
+000033a0: 503a 0a20 2020 2020 2020 2020 2020 2020  P:.             
+000033b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000033c0: 6c61 7965 725f 6f75 7470 7574 2e73 6372  layer_output.scr
+000033d0: 6f6c 6c65 722e 7363 726f 6c6c 5f62 6163  oller.scroll_bac
+000033e0: 6b77 6172 6428 290a 2020 2020 2020 2020  kward().        
 000033f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003400: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-00003410: 6f75 7470 7574 2870 6c61 7962 6163 6b2e  output(playback.
-00003420: 6375 7272 5f70 6f73 290a 2020 2020 2020  curr_pos).      
+00003400: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+00003410: 742e 6f75 7470 7574 2870 6c61 7962 6163  t.output(playbac
+00003420: 6b2e 6375 7272 5f70 6f73 290a 2020 2020  k.curr_pos).    
 00003430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003440: 2020 656c 6966 2063 203d 3d20 6375 7273    elif c == curs
-00003450: 6573 2e4b 4559 5f44 4f57 4e3a 0a20 2020  es.KEY_DOWN:.   
+00003440: 2020 2020 656c 6966 2063 203d 3d20 6375      elif c == cu
+00003450: 7273 6573 2e4b 4559 5f44 4f57 4e3a 0a20  rses.KEY_DOWN:. 
 00003460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003470: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00003480: 6f75 7470 7574 2e73 6372 6f6c 6c65 722e  output.scroller.
-00003490: 7363 726f 6c6c 5f66 6f72 7761 7264 2829  scroll_forward()
-000034a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000034b0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-000034c0: 7965 725f 6f75 7470 7574 2e6f 7574 7075  yer_output.outpu
-000034d0: 7428 706c 6179 6261 636b 2e63 7572 725f  t(playback.curr_
-000034e0: 706f 7329 0a20 2020 2020 2020 2020 2020  pos).           
-000034f0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00003500: 6620 6320 3d3d 2063 7572 7365 732e 4b45  f c == curses.KE
-00003510: 595f 454e 5445 523a 0a20 2020 2020 2020  Y_ENTER:.       
+00003470: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00003480: 725f 6f75 7470 7574 2e73 6372 6f6c 6c65  r_output.scrolle
+00003490: 722e 7363 726f 6c6c 5f66 6f72 7761 7264  r.scroll_forward
+000034a0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+000034b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000034c0: 6c61 7965 725f 6f75 7470 7574 2e6f 7574  layer_output.out
+000034d0: 7075 7428 706c 6179 6261 636b 2e63 7572  put(playback.cur
+000034e0: 725f 706f 7329 0a20 2020 2020 2020 2020  r_pos).         
+000034f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00003500: 6c69 6620 6320 3d3d 2063 7572 7365 732e  lif c == curses.
+00003510: 4b45 595f 454e 5445 523a 0a20 2020 2020  KEY_ENTER:.     
 00003520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003530: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00003540: 7574 2e69 203d 2070 6c61 7965 725f 6f75  ut.i = player_ou
-00003550: 7470 7574 2e73 6372 6f6c 6c65 722e 706f  tput.scroller.po
-00003560: 7320 2d20 310a 2020 2020 2020 2020 2020  s - 1.          
+00003530: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00003540: 7470 7574 2e69 203d 2070 6c61 7965 725f  tput.i = player_
+00003550: 6f75 7470 7574 2e73 6372 6f6c 6c65 722e  output.scroller.
+00003560: 706f 7320 2d20 310a 2020 2020 2020 2020  pos - 1.        
 00003570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003580: 2020 6e65 7874 5f73 6f6e 6720 3d20 310a    next_song = 1.
-00003590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035a0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-000035b0: 6261 636b 2e73 746f 7028 290a 2020 2020  back.stop().    
+00003580: 2020 2020 6e65 7874 5f73 6f6e 6720 3d20      next_song = 
+00003590: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+000035a0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+000035b0: 6179 6261 636b 2e73 746f 7028 290a 2020  ayback.stop().  
 000035c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035d0: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+000035d0: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
 000035e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035f0: 2020 2020 2020 656c 6966 2063 203d 3d20        elif c == 
-00003600: 6375 7273 6573 2e4b 4559 5f44 433a 0a20  curses.KEY_DC:. 
-00003610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003620: 2020 2020 2020 2020 2020 2073 656c 6563             selec
-00003630: 7465 645f 736f 6e67 203d 2070 6c61 7965  ted_song = playe
-00003640: 725f 6f75 7470 7574 2e73 6372 6f6c 6c65  r_output.scrolle
-00003650: 722e 706f 730a 2020 2020 2020 2020 2020  r.pos.          
+000035f0: 2020 2020 2020 2020 656c 6966 2063 203d          elif c =
+00003600: 3d20 6375 7273 6573 2e4b 4559 5f44 433a  = curses.KEY_DC:
+00003610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003620: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00003630: 6563 7465 645f 736f 6e67 203d 2070 6c61  ected_song = pla
+00003640: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
+00003650: 6c65 722e 706f 730a 2020 2020 2020 2020  ler.pos.        
 00003660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003670: 2020 6465 6c20 706c 6179 6572 5f6f 7574    del player_out
-00003680: 7075 742e 706c 6179 6c69 7374 5b73 656c  put.playlist[sel
-00003690: 6563 7465 645f 736f 6e67 5d0a 0a20 2020  ected_song]..   
+00003670: 2020 2020 6465 6c20 706c 6179 6572 5f6f      del player_o
+00003680: 7574 7075 742e 706c 6179 6c69 7374 5b73  utput.playlist[s
+00003690: 656c 6563 7465 645f 736f 6e67 5d0a 0a20  elected_song].. 
 000036a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000036b0: 2020 2020 2020 2020 2069 6620 6c6f 6f70           if loop
-000036c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000036b0: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
+000036c0: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
 000036d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000036e0: 2020 6966 2072 6573 6875 6666 6c65 3a0a    if reshuffle:.
-000036f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000036e0: 2020 2020 6966 2072 6573 6875 6666 6c65      if reshuffle
+000036f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 00003700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003710: 2020 2020 6e65 7874 5f70 6c61 796c 6973      next_playlis
-00003720: 7420 3d20 706c 6179 6c69 7374 5b3a 5d0a  t = playlist[:].
-00003730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003710: 2020 2020 2020 6e65 7874 5f70 6c61 796c        next_playl
+00003720: 6973 7420 3d20 706c 6179 6c69 7374 5b3a  ist = playlist[:
+00003730: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
 00003740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003750: 2020 2020 7368 7566 666c 6528 6e65 7874      shuffle(next
-00003760: 5f70 6c61 796c 6973 7429 0a20 2020 2020  _playlist).     
+00003750: 2020 2020 2020 7368 7566 666c 6528 6e65        shuffle(ne
+00003760: 7874 5f70 6c61 796c 6973 7429 0a20 2020  xt_playlist).   
 00003770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003780: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00003790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003780: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00003790: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
 000037a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037b0: 2020 2020 2064 656c 206e 6578 745f 706c       del next_pl
-000037c0: 6179 6c69 7374 5b73 656c 6563 7465 645f  aylist[selected_
-000037d0: 736f 6e67 5d0a 0a20 2020 2020 2020 2020  song]..         
+000037b0: 2020 2020 2020 2064 656c 206e 6578 745f         del next_
+000037c0: 706c 6179 6c69 7374 5b73 656c 6563 7465  playlist[selecte
+000037d0: 645f 736f 6e67 5d0a 0a20 2020 2020 2020  d_song]..       
 000037e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037f0: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-00003800: 2e73 6372 6f6c 6c65 722e 6e75 6d5f 6c69  .scroller.num_li
-00003810: 6e65 7320 2d3d 2031 0a20 2020 2020 2020  nes -= 1.       
+000037f0: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+00003800: 7574 2e73 6372 6f6c 6c65 722e 6e75 6d5f  ut.scroller.num_
+00003810: 6c69 6e65 7320 2d3d 2031 0a20 2020 2020  lines -= 1.     
 00003820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003830: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
+00003830: 2020 2020 2020 2069 6620 280a 2020 2020         if (.    
 00003840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003850: 2020 2020 2020 2020 2020 7365 6c65 6374            select
-00003860: 6564 5f73 6f6e 6720 3d3d 2070 6c61 7965  ed_song == playe
-00003870: 725f 6f75 7470 7574 2e69 0a20 2020 2020  r_output.i.     
+00003850: 2020 2020 2020 2020 2020 2020 7365 6c65              sele
+00003860: 6374 6564 5f73 6f6e 6720 3d3d 2070 6c61  cted_song == pla
+00003870: 7965 725f 6f75 7470 7574 2e69 0a20 2020  yer_output.i.   
 00003880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003890: 2020 2020 2020 2029 3a20 2023 2064 656c         ):  # del
-000038a0: 6574 6564 2063 7572 7265 6e74 2073 6f6e  eted current son
-000038b0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+00003890: 2020 2020 2020 2020 2029 3a20 2023 2064           ):  # d
+000038a0: 656c 6574 6564 2063 7572 7265 6e74 2073  eleted current s
+000038b0: 6f6e 670a 2020 2020 2020 2020 2020 2020  ong.            
 000038c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000038d0: 2020 6e65 7874 5f73 6f6e 6720 3d20 310a    next_song = 1.
-000038e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000038d0: 2020 2020 6e65 7874 5f73 6f6e 6720 3d20      next_song = 
+000038e0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
 000038f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003900: 2320 7769 6c6c 2062 6520 696e 6372 656d  # will be increm
-00003910: 656e 7465 6420 746f 2069 0a20 2020 2020  ented to i.     
+00003900: 2020 2320 7769 6c6c 2062 6520 696e 6372    # will be incr
+00003910: 656d 656e 7465 6420 746f 2069 0a20 2020  emented to i.   
 00003920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003930: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-00003940: 725f 6f75 7470 7574 2e73 6372 6f6c 6c65  r_output.scrolle
-00003950: 722e 706f 7320 3d20 706c 6179 6572 5f6f  r.pos = player_o
-00003960: 7574 7075 742e 6920 2d20 310a 2020 2020  utput.i - 1.    
+00003930: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00003940: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
+00003950: 6c65 722e 706f 7320 3d20 706c 6179 6572  ler.pos = player
+00003960: 5f6f 7574 7075 742e 6920 2d20 310a 2020  _output.i - 1.  
 00003970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003980: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00003990: 6572 5f6f 7574 7075 742e 6920 2d3d 2031  er_output.i -= 1
-000039a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003980: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00003990: 6179 6572 5f6f 7574 7075 742e 6920 2d3d  ayer_output.i -=
+000039a0: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
 000039b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000039c0: 2070 6c61 7962 6163 6b2e 7374 6f70 2829   playback.stop()
-000039d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000039c0: 2020 2070 6c61 7962 6163 6b2e 7374 6f70     playback.stop
+000039d0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
 000039e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000039f0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+000039f0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
 00003a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a10: 2020 2023 2064 656c 6574 6564 2073 6f6e     # deleted son
-00003a20: 6720 6265 666f 7265 2063 7572 7265 6e74  g before current
-00003a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003a40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00003a50: 7365 6c65 6374 6564 5f73 6f6e 6720 3c20  selected_song < 
-00003a60: 706c 6179 6572 5f6f 7574 7075 742e 693a  player_output.i:
-00003a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003a10: 2020 2020 2023 2064 656c 6574 6564 2073       # deleted s
+00003a20: 6f6e 6720 6265 666f 7265 2063 7572 7265  ong before curre
+00003a30: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
+00003a40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00003a50: 6620 7365 6c65 6374 6564 5f73 6f6e 6720  f selected_song 
+00003a60: 3c20 706c 6179 6572 5f6f 7574 7075 742e  < player_output.
+00003a70: 693a 0a20 2020 2020 2020 2020 2020 2020  i:.             
 00003a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a90: 2070 6c61 7965 725f 6f75 7470 7574 2e69   player_output.i
-00003aa0: 202d 3d20 310a 2020 2020 2020 2020 2020   -= 1.          
-00003ab0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00003ac0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00003a90: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00003aa0: 2e69 202d 3d20 310a 2020 2020 2020 2020  .i -= 1.        
+00003ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ac0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
 00003ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ae0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00003ae0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
 00003af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b00: 2020 2020 2063 203d 2063 6872 2863 290a       c = chr(c).
-00003b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b00: 2020 2020 2020 2063 203d 2063 6872 2863         c = chr(c
+00003b10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 00003b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b30: 6966 2063 2069 6e20 226e 4e22 3a0a 2020  if c in "nN":.  
+00003b30: 2020 6966 2063 2069 6e20 226e 4e22 3a0a    if c in "nN":.
 00003b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b60: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
+00003b60: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
 00003b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b80: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00003b90: 6c61 7965 725f 6f75 7470 7574 2e69 0a20  layer_output.i. 
-00003ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b90: 2070 6c61 7965 725f 6f75 7470 7574 2e69   player_output.i
+00003ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00003bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003bc0: 2020 2020 2020 203d 3d20 6c65 6e28 706c         == len(pl
-00003bd0: 6179 6572 5f6f 7574 7075 742e 706c 6179  ayer_output.play
-00003be0: 6c69 7374 2920 2d20 310a 2020 2020 2020  list) - 1.      
+00003bc0: 2020 2020 2020 2020 203d 3d20 6c65 6e28           == len(
+00003bd0: 706c 6179 6572 5f6f 7574 7075 742e 706c  player_output.pl
+00003be0: 6179 6c69 7374 2920 2d20 310a 2020 2020  aylist) - 1.    
 00003bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c10: 2020 616e 6420 6e6f 7420 6c6f 6f70 0a20    and not loop. 
-00003c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c10: 2020 2020 616e 6420 6e6f 7420 6c6f 6f70      and not loop
+00003c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00003c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c40: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+00003c40: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
 00003c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c60: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00003c70: 7373 0a20 2020 2020 2020 2020 2020 2020  ss.             
+00003c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c70: 7061 7373 0a20 2020 2020 2020 2020 2020  pass.           
 00003c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00003c90: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
 00003ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003cc0: 2020 2020 206e 6578 745f 736f 6e67 203d       next_song =
-00003cd0: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
+00003cc0: 2020 2020 2020 206e 6578 745f 736f 6e67         next_song
+00003cd0: 203d 2031 0a20 2020 2020 2020 2020 2020   = 1.           
 00003ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003cf0: 2020 2020 2020 2020 2020 2070 6c61 7962             playb
-00003d00: 6163 6b2e 7374 6f70 2829 0a20 2020 2020  ack.stop().     
+00003cf0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00003d00: 7962 6163 6b2e 7374 6f70 2829 0a20 2020  yback.stop().   
 00003d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d30: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
+00003d30: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
 00003d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d50: 2020 2020 2020 2020 2065 6c69 6620 6320           elif c 
-00003d60: 696e 2022 6242 223a 0a20 2020 2020 2020  in "bB":.       
+00003d50: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00003d60: 6320 696e 2022 6242 223a 0a20 2020 2020  c in "bB":.     
 00003d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00003d90: 706c 6179 6572 5f6f 7574 7075 742e 6920  player_output.i 
-00003da0: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+00003d80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00003d90: 6620 706c 6179 6572 5f6f 7574 7075 742e  f player_output.
+00003da0: 6920 3d3d 2030 3a0a 2020 2020 2020 2020  i == 0:.        
 00003db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003dc0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00003dd0: 7373 0a20 2020 2020 2020 2020 2020 2020  ss.             
+00003dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003dd0: 7061 7373 0a20 2020 2020 2020 2020 2020  pass.           
 00003de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003df0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00003df0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
 00003e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e20: 2020 2020 206e 6578 745f 736f 6e67 203d       next_song =
-00003e30: 202d 310a 2020 2020 2020 2020 2020 2020   -1.            
+00003e20: 2020 2020 2020 206e 6578 745f 736f 6e67         next_song
+00003e30: 203d 202d 310a 2020 2020 2020 2020 2020   = -1.          
 00003e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e50: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00003e60: 6261 636b 2e73 746f 7028 290a 2020 2020  back.stop().    
+00003e50: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00003e60: 6179 6261 636b 2e73 746f 7028 290a 2020  ayback.stop().  
 00003e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e90: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+00003e90: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
 00003ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003eb0: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
-00003ec0: 2069 6e20 2272 5222 3a0a 2020 2020 2020   in "rR":.      
+00003eb0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00003ec0: 2063 2069 6e20 2272 5222 3a0a 2020 2020   c in "rR":.    
 00003ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ee0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00003ef0: 6179 6261 636b 2e73 746f 7028 290a 2020  ayback.stop().  
+00003ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ef0: 706c 6179 6261 636b 2e73 746f 7028 290a  playback.stop().
 00003f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00003f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f20: 2020 6e65 7874 5f73 6f6e 6720 3d20 300a    next_song = 0.
-00003f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f20: 2020 2020 6e65 7874 5f73 6f6e 6720 3d20      next_song = 
+00003f30: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
 00003f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f50: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+00003f50: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
 00003f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f70: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
-00003f80: 2069 6e20 226c 4c22 3a0a 2020 2020 2020   in "lL":.      
+00003f70: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00003f80: 2063 2069 6e20 226c 4c22 3a0a 2020 2020   c in "lL":.    
 00003f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003fa0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00003fb0: 6179 6572 5f6f 7574 7075 742e 6c6f 6f70  ayer_output.loop
-00003fc0: 696e 675f 6375 7272 656e 745f 736f 6e67  ing_current_song
-00003fd0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00003fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003fb0: 706c 6179 6572 5f6f 7574 7075 742e 6c6f  player_output.lo
+00003fc0: 6f70 696e 675f 6375 7272 656e 745f 736f  oping_current_so
+00003fd0: 6e67 203d 2028 0a20 2020 2020 2020 2020  ng = (.         
 00003fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ff0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00004000: 7965 725f 6f75 7470 7574 2e6c 6f6f 7069  yer_output.loopi
-00004010: 6e67 5f63 7572 7265 6e74 5f73 6f6e 6720  ng_current_song 
-00004020: 2b20 310a 2020 2020 2020 2020 2020 2020  + 1.            
+00003ff0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00004000: 6c61 7965 725f 6f75 7470 7574 2e6c 6f6f  layer_output.loo
+00004010: 7069 6e67 5f63 7572 7265 6e74 5f73 6f6e  ping_current_son
+00004020: 6720 2b20 310a 2020 2020 2020 2020 2020  g + 1.          
 00004030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004040: 2020 2020 2020 2020 2920 2520 6c65 6e28          ) % len(
-00004050: 636f 6e66 6967 2e4c 4f4f 505f 4d4f 4445  config.LOOP_MODE
-00004060: 5329 0a20 2020 2020 2020 2020 2020 2020  S).             
+00004040: 2020 2020 2020 2020 2020 2920 2520 6c65            ) % le
+00004050: 6e28 636f 6e66 6967 2e4c 4f4f 505f 4d4f  n(config.LOOP_MO
+00004060: 4445 5329 0a20 2020 2020 2020 2020 2020  DES).           
 00004070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004080: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
-00004090: 7470 7574 2e6f 7574 7075 7428 706c 6179  tput.output(play
-000040a0: 6261 636b 2e63 7572 725f 706f 7329 0a20  back.curr_pos). 
-000040b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000040d0: 6c69 6620 6320 696e 2022 6343 223a 0a20  lif c in "cC":. 
-000040e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004080: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
+00004090: 6f75 7470 7574 2e6f 7574 7075 7428 706c  output.output(pl
+000040a0: 6179 6261 636b 2e63 7572 725f 706f 7329  ayback.curr_pos)
+000040b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000040c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000040d0: 2065 6c69 6620 6320 696e 2022 6343 223a   elif c in "cC":
+000040e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000040f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004100: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-00004110: 2e63 6c69 705f 6d6f 6465 203d 2028 0a20  .clip_mode = (. 
-00004120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004100: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+00004110: 7574 2e63 6c69 705f 6d6f 6465 203d 2028  ut.clip_mode = (
+00004120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00004130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004140: 2020 2020 2020 206e 6f74 2070 6c61 7965         not playe
-00004150: 725f 6f75 7470 7574 2e63 6c69 705f 6d6f  r_output.clip_mo
-00004160: 6465 0a20 2020 2020 2020 2020 2020 2020  de.             
+00004140: 2020 2020 2020 2020 206e 6f74 2070 6c61           not pla
+00004150: 7965 725f 6f75 7470 7574 2e63 6c69 705f  yer_output.clip_
+00004160: 6d6f 6465 0a20 2020 2020 2020 2020 2020  mode.           
 00004170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004180: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00004180: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
 00004190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000041b0: 706c 6179 6572 5f6f 7574 7075 742e 636c  player_output.cl
-000041c0: 6970 5f6d 6f64 653a 0a20 2020 2020 2020  ip_mode:.       
+000041a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000041b0: 6620 706c 6179 6572 5f6f 7574 7075 742e  f player_output.
+000041c0: 636c 6970 5f6d 6f64 653a 0a20 2020 2020  clip_mode:.     
 000041d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000041e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041f0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+000041f0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
 00004200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004210: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00004220: 6c69 705f 7374 6172 742c 0a20 2020 2020  lip_start,.     
+00004210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004220: 2063 6c69 705f 7374 6172 742c 0a20 2020   clip_start,.   
 00004230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004250: 2020 2020 2020 2063 6c69 705f 656e 642c         clip_end,
-00004260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004250: 2020 2020 2020 2020 2063 6c69 705f 656e           clip_en
+00004260: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
 00004270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004280: 2020 2020 2020 2020 2029 203d 2070 6c61           ) = pla
-00004290: 7965 725f 6f75 7470 7574 2e63 6c69 700a  yer_output.clip.
-000042a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004280: 2020 2020 2020 2020 2020 2029 203d 2070             ) = p
+00004290: 6c61 7965 725f 6f75 7470 7574 2e63 6c69  layer_output.cli
+000042a0: 700a 2020 2020 2020 2020 2020 2020 2020  p.              
 000042b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000042c0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-000042d0: 7574 7075 742e 6475 7261 7469 6f6e 203d  utput.duration =
-000042e0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+000042c0: 2020 2020 2020 2020 2020 706c 6179 6572            player
+000042d0: 5f6f 7574 7075 742e 6475 7261 7469 6f6e  _output.duration
+000042e0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
 000042f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004300: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00004310: 6c69 705f 656e 6420 2d20 636c 6970 5f73  lip_end - clip_s
-00004320: 7461 7274 0a20 2020 2020 2020 2020 2020  tart.           
+00004300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004310: 2063 6c69 705f 656e 6420 2d20 636c 6970   clip_end - clip
+00004320: 5f73 7461 7274 0a20 2020 2020 2020 2020  _start.         
 00004330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004340: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00004350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004340: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00004350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00004360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004370: 2020 2020 2020 2069 6620 280a 2020 2020         if (.    
+00004370: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
 00004380: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000043a0: 2020 2020 2020 2020 706c 6179 6261 636b          playback
-000043b0: 2e63 7572 725f 706f 7320 3c20 636c 6970  .curr_pos < clip
-000043c0: 5f73 7461 7274 0a20 2020 2020 2020 2020  _start.         
+000043a0: 2020 2020 2020 2020 2020 706c 6179 6261            playba
+000043b0: 636b 2e63 7572 725f 706f 7320 3c20 636c  ck.curr_pos < cl
+000043c0: 6970 5f73 7461 7274 0a20 2020 2020 2020  ip_start.       
 000043d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000043e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000043f0: 2020 206f 7220 706c 6179 6261 636b 2e63     or playback.c
-00004400: 7572 725f 706f 7320 3e20 636c 6970 5f65  urr_pos > clip_e
-00004410: 6e64 0a20 2020 2020 2020 2020 2020 2020  nd.             
+000043f0: 2020 2020 206f 7220 706c 6179 6261 636b       or playback
+00004400: 2e63 7572 725f 706f 7320 3e20 636c 6970  .curr_pos > clip
+00004410: 5f65 6e64 0a20 2020 2020 2020 2020 2020  _end.           
 00004420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004430: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+00004430: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
 00004440: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004460: 2020 2020 2020 2020 2020 706c 6179 6261            playba
-00004470: 636b 2e73 6565 6b28 636c 6970 5f73 7461  ck.seek(clip_sta
-00004480: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
+00004460: 2020 2020 2020 2020 2020 2020 706c 6179              play
+00004470: 6261 636b 2e73 6565 6b28 636c 6970 5f73  back.seek(clip_s
+00004480: 7461 7274 290a 2020 2020 2020 2020 2020  tart).          
 00004490: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000044a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000044b0: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
+000044b0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
 000044c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000044d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000044e0: 2020 2020 2073 7973 2e70 6c61 7466 6f72       sys.platfor
-000044f0: 6d20 3d3d 2022 6461 7277 696e 220a 2020  m == "darwin".  
+000044e0: 2020 2020 2020 2073 7973 2e70 6c61 7466         sys.platf
+000044f0: 6f72 6d20 3d3d 2022 6461 7277 696e 220a  orm == "darwin".
 00004500: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004520: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00004530: 6420 6361 6e5f 6d61 635f 6e6f 775f 706c  d can_mac_now_pl
-00004540: 6179 696e 670a 2020 2020 2020 2020 2020  aying.          
+00004520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004530: 616e 6420 6361 6e5f 6d61 635f 6e6f 775f  and can_mac_now_
+00004540: 706c 6179 696e 670a 2020 2020 2020 2020  playing.        
 00004550: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004570: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+00004570: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
 00004580: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045a0: 2020 2020 206d 6163 5f6e 6f77 5f70 6c61       mac_now_pla
-000045b0: 7969 6e67 2e70 6f73 203d 2072 6f75 6e64  ying.pos = round
-000045c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000045a0: 2020 2020 2020 206d 6163 5f6e 6f77 5f70         mac_now_p
+000045b0: 6c61 7969 6e67 2e70 6f73 203d 2072 6f75  laying.pos = rou
+000045c0: 6e64 280a 2020 2020 2020 2020 2020 2020  nd(.            
 000045d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000045e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045f0: 2020 2020 2020 706c 6179 6261 636b 2e63        playback.c
-00004600: 7572 725f 706f 730a 2020 2020 2020 2020  urr_pos.        
+000045f0: 2020 2020 2020 2020 706c 6179 6261 636b          playback
+00004600: 2e63 7572 725f 706f 730a 2020 2020 2020  .curr_pos.      
 00004610: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004630: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00004630: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
 00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004660: 2020 2020 2020 2020 2020 7570 6461 7465            update
-00004670: 5f6e 6f77 5f70 6c61 7969 6e67 203d 2054  _now_playing = T
-00004680: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00004660: 2020 2020 2020 2020 2020 2020 7570 6461              upda
+00004670: 7465 5f6e 6f77 5f70 6c61 7969 6e67 203d  te_now_playing =
+00004680: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
 00004690: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000046a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046b0: 6c61 7374 5f74 696d 6573 7461 6d70 203d  last_timestamp =
-000046c0: 2070 6c61 7962 6163 6b2e 6375 7272 5f70   playback.curr_p
-000046d0: 6f73 0a20 2020 2020 2020 2020 2020 2020  os.             
+000046b0: 2020 6c61 7374 5f74 696d 6573 7461 6d70    last_timestamp
+000046c0: 203d 2070 6c61 7962 6163 6b2e 6375 7272   = playback.curr
+000046d0: 5f70 6f73 0a20 2020 2020 2020 2020 2020  _pos.           
 000046e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000046f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
 00004700: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004720: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00004730: 7574 2e64 7572 6174 696f 6e20 3d20 6675  ut.duration = fu
-00004740: 6c6c 5f64 7572 6174 696f 6e0a 2020 2020  ll_duration.    
+00004720: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00004730: 7470 7574 2e64 7572 6174 696f 6e20 3d20  tput.duration = 
+00004740: 6675 6c6c 5f64 7572 6174 696f 6e0a 2020  full_duration.  
 00004750: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004770: 706c 6179 6572 5f6f 7574 7075 742e 6f75  player_output.ou
-00004780: 7470 7574 2870 6c61 7962 6163 6b2e 6375  tput(playback.cu
-00004790: 7272 5f70 6f73 290a 2020 2020 2020 2020  rr_pos).        
+00004770: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
+00004780: 6f75 7470 7574 2870 6c61 7962 6163 6b2e  output(playback.
+00004790: 6375 7272 5f70 6f73 290a 2020 2020 2020  curr_pos).      
 000047a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047b0: 2020 2020 2020 2020 656c 6966 2063 2069          elif c i
-000047c0: 6e20 2270 5022 3a0a 2020 2020 2020 2020  n "pP":.        
+000047b0: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+000047c0: 2069 6e20 2270 5022 3a0a 2020 2020 2020   in "pP":.      
 000047d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047e0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-000047f0: 6572 5f6f 7574 7075 742e 7363 726f 6c6c  er_output.scroll
-00004800: 6572 2e70 6f73 203d 2070 6c61 7965 725f  er.pos = player_
-00004810: 6f75 7470 7574 2e69 0a20 2020 2020 2020  output.i.       
+000047e0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+000047f0: 6179 6572 5f6f 7574 7075 742e 7363 726f  ayer_output.scro
+00004800: 6c6c 6572 2e70 6f73 203d 2070 6c61 7965  ller.pos = playe
+00004810: 725f 6f75 7470 7574 2e69 0a20 2020 2020  r_output.i.     
 00004820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004830: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00004840: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
-00004850: 6c65 722e 7265 7369 7a65 2829 0a20 2020  ler.resize().   
+00004830: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00004840: 6c61 7965 725f 6f75 7470 7574 2e73 6372  layer_output.scr
+00004850: 6f6c 6c65 722e 7265 7369 7a65 2829 0a20  oller.resize(). 
 00004860: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004880: 2070 6c61 7965 725f 6f75 7470 7574 2e6f   player_output.o
-00004890: 7574 7075 7428 706c 6179 6261 636b 2e63  utput(playback.c
-000048a0: 7572 725f 706f 7329 0a20 2020 2020 2020  urr_pos).       
+00004880: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00004890: 2e6f 7574 7075 7428 706c 6179 6261 636b  .output(playback
+000048a0: 2e63 7572 725f 706f 7329 0a20 2020 2020  .curr_pos).     
 000048b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048c0: 2020 2020 2020 2020 2065 6c69 6620 6320           elif c 
-000048d0: 696e 2022 6747 223a 0a20 2020 2020 2020  in "gG":.       
+000048c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000048d0: 6320 696e 2022 6747 223a 0a20 2020 2020  c in "gG":.     
 000048e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00004900: 6c6f 6f70 3a0a 2020 2020 2020 2020 2020  loop:.          
+000048f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00004900: 6620 6c6f 6f70 3a0a 2020 2020 2020 2020  f loop:.        
 00004910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004920: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00004930: 6179 6261 636b 2e73 746f 7028 290a 2020  ayback.stop().  
+00004920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004930: 706c 6179 6261 636b 2e73 746f 7028 290a  playback.stop().
 00004940: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004960: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00004970: 7075 742e 6920 3d20 280a 2020 2020 2020  put.i = (.      
+00004960: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00004970: 7574 7075 742e 6920 3d20 280a 2020 2020  utput.i = (.    
 00004980: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049a0: 2020 2020 2020 6c65 6e28 706c 6179 6572        len(player
-000049b0: 5f6f 7574 7075 742e 706c 6179 6c69 7374  _output.playlist
-000049c0: 2920 2d20 310a 2020 2020 2020 2020 2020  ) - 1.          
+000049a0: 2020 2020 2020 2020 6c65 6e28 706c 6179          len(play
+000049b0: 6572 5f6f 7574 7075 742e 706c 6179 6c69  er_output.playli
+000049c0: 7374 2920 2d20 310a 2020 2020 2020 2020  st) - 1.        
 000049d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049e0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-000049f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000049e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000049f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 00004a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a10: 2020 2020 2020 2020 6e65 7874 5f73 6f6e          next_son
-00004a20: 6720 3d20 310a 2020 2020 2020 2020 2020  g = 1.          
+00004a10: 2020 2020 2020 2020 2020 6e65 7874 5f73            next_s
+00004a20: 6f6e 6720 3d20 310a 2020 2020 2020 2020  ong = 1.        
 00004a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a40: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00004a50: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
+00004a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a50: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
 00004a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a70: 2020 2020 656c 6966 2063 2069 6e20 2265      elif c in "e
-00004a80: 4522 3a0a 2020 2020 2020 2020 2020 2020  E":.            
+00004a70: 2020 2020 2020 656c 6966 2063 2069 6e20        elif c in 
+00004a80: 2265 4522 3a0a 2020 2020 2020 2020 2020  "eE":.          
 00004a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004aa0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00004ab0: 7574 7075 742e 656e 6469 6e67 203d 2028  utput.ending = (
-00004ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004aa0: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00004ab0: 5f6f 7574 7075 742e 656e 6469 6e67 203d  _output.ending =
+00004ac0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
 00004ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ae0: 2020 2020 2020 2020 206e 6f74 2070 6c61           not pla
-00004af0: 7965 725f 6f75 7470 7574 2e65 6e64 696e  yer_output.endin
-00004b00: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+00004ae0: 2020 2020 2020 2020 2020 206e 6f74 2070             not p
+00004af0: 6c61 7965 725f 6f75 7470 7574 2e65 6e64  layer_output.end
+00004b00: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
 00004b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b20: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00004b20: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
 00004b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b40: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00004b50: 6572 5f6f 7574 7075 742e 6f75 7470 7574  er_output.output
-00004b60: 2870 6c61 7962 6163 6b2e 6375 7272 5f70  (playback.curr_p
-00004b70: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
+00004b40: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00004b50: 6179 6572 5f6f 7574 7075 742e 6f75 7470  ayer_output.outp
+00004b60: 7574 2870 6c61 7962 6163 6b2e 6375 7272  ut(playback.curr
+00004b70: 5f70 6f73 290a 2020 2020 2020 2020 2020  _pos).          
 00004b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b90: 2020 2020 656c 6966 2063 2069 6e20 2271      elif c in "q
-00004ba0: 5122 3a0a 2020 2020 2020 2020 2020 2020  Q":.            
+00004b90: 2020 2020 2020 656c 6966 2063 2069 6e20        elif c in 
+00004ba0: 2271 5122 3a0a 2020 2020 2020 2020 2020  "qQ":.          
 00004bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004bc0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00004bd0: 7574 7075 742e 656e 6469 6e67 203d 2054  utput.ending = T
-00004be0: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00004bc0: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00004bd0: 5f6f 7574 7075 742e 656e 6469 6e67 203d  _output.ending =
+00004be0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
 00004bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c00: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+00004c00: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
 00004c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c20: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00004c30: 6966 2063 2069 6e20 2264 4422 3a0a 2020  if c in "dD":.  
+00004c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004c30: 656c 6966 2063 2069 6e20 2264 4422 3a0a  elif c in "dD":.
 00004c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c60: 2020 6966 2070 6c61 7965 725f 6f75 7470    if player_outp
-00004c70: 7574 2e75 7064 6174 655f 6469 7363 6f72  ut.update_discor
-00004c80: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
+00004c60: 2020 2020 6966 2070 6c61 7965 725f 6f75      if player_ou
+00004c70: 7470 7574 2e75 7064 6174 655f 6469 7363  tput.update_disc
+00004c80: 6f72 643a 0a20 2020 2020 2020 2020 2020  ord:.           
 00004c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ca0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-00004cb0: 725f 6f75 7470 7574 2e75 7064 6174 655f  r_output.update_
-00004cc0: 6469 7363 6f72 6420 3d20 4661 6c73 650a  discord = False.
-00004cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004ca0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00004cb0: 7965 725f 6f75 7470 7574 2e75 7064 6174  yer_output.updat
+00004cc0: 655f 6469 7363 6f72 6420 3d20 4661 6c73  e_discord = Fals
+00004cd0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
 00004ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004cf0: 2020 2020 2020 2020 6469 7363 6f72 645f          discord_
-00004d00: 7072 6573 656e 6365 5f70 726f 6365 7373  presence_process
-00004d10: 2e74 6572 6d69 6e61 7465 2829 0a20 2020  .terminate().   
+00004cf0: 2020 2020 2020 2020 2020 6469 7363 6f72            discor
+00004d00: 645f 7072 6573 656e 6365 5f70 726f 6365  d_presence_proce
+00004d10: 7373 2e74 6572 6d69 6e61 7465 2829 0a20  ss.terminate(). 
 00004d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004d40: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00004d40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
 00004d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004d60: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00004d70: 6c61 7965 725f 6f75 7470 7574 2e75 7064  layer_output.upd
-00004d80: 6174 655f 6469 7363 6f72 6420 3d20 5472  ate_discord = Tr
-00004d90: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
+00004d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d70: 2070 6c61 7965 725f 6f75 7470 7574 2e75   player_output.u
+00004d80: 7064 6174 655f 6469 7363 6f72 6420 3d20  pdate_discord = 
+00004d90: 5472 7565 0a0a 2020 2020 2020 2020 2020  True..          
 00004da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004db0: 2020 2020 2020 2020 2020 2020 6469 7363              disc
-00004dc0: 6f72 645f 7469 746c 655f 7175 6575 6520  ord_title_queue 
-00004dd0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00004db0: 2020 2020 2020 2020 2020 2020 2020 6469                di
+00004dc0: 7363 6f72 645f 7469 746c 655f 7175 6575  scord_title_queu
+00004dd0: 6520 3d20 280a 2020 2020 2020 2020 2020  e = (.          
 00004de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004e00: 6d75 6c74 6970 726f 6365 7373 696e 672e  multiprocessing.
-00004e10: 5369 6d70 6c65 5175 6575 6528 290a 2020  SimpleQueue().  
+00004e00: 2020 6d75 6c74 6970 726f 6365 7373 696e    multiprocessin
+00004e10: 672e 5369 6d70 6c65 5175 6575 6528 290a  g.SimpleQueue().
 00004e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004e40: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00004e40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
 00004e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004e70: 666f 7220 6320 696e 2070 6c61 7965 725f  for c in player_
-00004e80: 6f75 7470 7574 2e70 6c61 796c 6973 745b  output.playlist[
-00004e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004e70: 2020 666f 7220 6320 696e 2070 6c61 7965    for c in playe
+00004e80: 725f 6f75 7470 7574 2e70 6c61 796c 6973  r_output.playlis
+00004e90: 745b 0a20 2020 2020 2020 2020 2020 2020  t[.             
 00004ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004eb0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00004ec0: 7965 725f 6f75 7470 7574 2e69 0a20 2020  yer_output.i.   
+00004eb0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00004ec0: 6c61 7965 725f 6f75 7470 7574 2e69 0a20  layer_output.i. 
 00004ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ef0: 2020 2020 205d 5b31 5d3a 0a20 2020 2020       ][1]:.     
+00004ef0: 2020 2020 2020 205d 5b31 5d3a 0a20 2020         ][1]:.   
 00004f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004f20: 2020 2020 2020 2064 6973 636f 7264 5f74         discord_t
-00004f30: 6974 6c65 5f71 7565 7565 2e70 7574 2863  itle_queue.put(c
-00004f40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00004f20: 2020 2020 2020 2020 2064 6973 636f 7264           discord
+00004f30: 5f74 6974 6c65 5f71 7565 7565 2e70 7574  _title_queue.put
+00004f40: 2863 290a 2020 2020 2020 2020 2020 2020  (c).            
 00004f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004f60: 2020 2020 2020 2020 2020 6469 7363 6f72            discor
-00004f70: 645f 7469 746c 655f 7175 6575 652e 7075  d_title_queue.pu
-00004f80: 7428 225c 6e22 290a 0a20 2020 2020 2020  t("\n")..       
+00004f60: 2020 2020 2020 2020 2020 2020 6469 7363              disc
+00004f70: 6f72 645f 7469 746c 655f 7175 6575 652e  ord_title_queue.
+00004f80: 7075 7428 225c 6e22 290a 0a20 2020 2020  put("\n")..     
 00004f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004fb0: 2064 6973 636f 7264 5f61 7274 6973 745f   discord_artist_
-00004fc0: 7175 6575 6520 3d20 280a 2020 2020 2020  queue = (.      
+00004fb0: 2020 2064 6973 636f 7264 5f61 7274 6973     discord_artis
+00004fc0: 745f 7175 6575 6520 3d20 280a 2020 2020  t_queue = (.    
 00004fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00004fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ff0: 2020 2020 2020 6d75 6c74 6970 726f 6365        multiproce
-00005000: 7373 696e 672e 5369 6d70 6c65 5175 6575  ssing.SimpleQueu
-00005010: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
+00004ff0: 2020 2020 2020 2020 6d75 6c74 6970 726f          multipro
+00005000: 6365 7373 696e 672e 5369 6d70 6c65 5175  cessing.SimpleQu
+00005010: 6575 6528 290a 2020 2020 2020 2020 2020  eue().          
 00005020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005030: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00005030: 2020 2020 2020 2020 2020 2020 2020 290a                ).
 00005040: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005060: 2020 2020 2020 666f 7220 6320 696e 2070        for c in p
-00005070: 6c61 7965 725f 6f75 7470 7574 2e70 6c61  layer_output.pla
-00005080: 796c 6973 745b 0a20 2020 2020 2020 2020  ylist[.         
+00005060: 2020 2020 2020 2020 666f 7220 6320 696e          for c in
+00005070: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
+00005080: 6c61 796c 6973 745b 0a20 2020 2020 2020  laylist[.       
 00005090: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000050a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050b0: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-000050c0: 2e69 0a20 2020 2020 2020 2020 2020 2020  .i.             
+000050b0: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+000050c0: 7574 2e69 0a20 2020 2020 2020 2020 2020  ut.i.           
 000050d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050e0: 2020 2020 2020 2020 2020 205d 5b2d 335d             ][-3]
-000050f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000050e0: 2020 2020 2020 2020 2020 2020 205d 5b2d               ][-
+000050f0: 335d 3a0a 2020 2020 2020 2020 2020 2020  3]:.            
 00005100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005110: 2020 2020 2020 2020 2020 2020 2020 6469                di
-00005120: 7363 6f72 645f 6172 7469 7374 5f71 7565  scord_artist_que
-00005130: 7565 2e70 7574 2863 290a 2020 2020 2020  ue.put(c).      
+00005110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005120: 6469 7363 6f72 645f 6172 7469 7374 5f71  discord_artist_q
+00005130: 7565 7565 2e70 7574 2863 290a 2020 2020  ueue.put(c).    
 00005140: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005160: 2020 6469 7363 6f72 645f 6172 7469 7374    discord_artist
-00005170: 5f71 7565 7565 2e70 7574 2822 5c6e 2229  _queue.put("\n")
-00005180: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005160: 2020 2020 6469 7363 6f72 645f 6172 7469      discord_arti
+00005170: 7374 5f71 7565 7565 2e70 7574 2822 5c6e  st_queue.put("\n
+00005180: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
 00005190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000051a0: 2020 2020 2020 2020 2020 706c 6179 6572            player
-000051b0: 5f6f 7574 7075 742e 6469 7363 6f72 645f  _output.discord_
-000051c0: 636f 6e6e 6563 7465 6420 3d20 280a 2020  connected = (.  
+000051a0: 2020 2020 2020 2020 2020 2020 706c 6179              play
+000051b0: 6572 5f6f 7574 7075 742e 6469 7363 6f72  er_output.discor
+000051c0: 645f 636f 6e6e 6563 7465 6420 3d20 280a  d_connected = (.
 000051d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000051e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000051f0: 2020 2020 2020 2020 2020 6d75 6c74 6970            multip
-00005200: 726f 6365 7373 696e 672e 5661 6c75 6528  rocessing.Value(
-00005210: 2269 222c 2032 290a 2020 2020 2020 2020  "i", 2).        
+000051f0: 2020 2020 2020 2020 2020 2020 6d75 6c74              mult
+00005200: 6970 726f 6365 7373 696e 672e 5661 6c75  iprocessing.Valu
+00005210: 6528 2269 222c 2032 290a 2020 2020 2020  e("i", 2).      
 00005220: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005240: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
+00005240: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
 00005250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005260: 2020 2020 2020 2020 2020 2023 2073 7461             # sta
-00005270: 7274 206e 6577 2070 726f 6365 7373 0a20  rt new process. 
-00005280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005260: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+00005270: 7461 7274 206e 6577 2070 726f 6365 7373  tart new process
+00005280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00005290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000052a0: 2020 2020 2020 2064 6973 636f 7264 5f70         discord_p
-000052b0: 7265 7365 6e63 655f 7072 6f63 6573 7320  resence_process 
-000052c0: 3d20 6d75 6c74 6970 726f 6365 7373 696e  = multiprocessin
-000052d0: 672e 5072 6f63 6573 7328 0a20 2020 2020  g.Process(.     
+000052a0: 2020 2020 2020 2020 2064 6973 636f 7264           discord
+000052b0: 5f70 7265 7365 6e63 655f 7072 6f63 6573  _presence_proces
+000052c0: 7320 3d20 6d75 6c74 6970 726f 6365 7373  s = multiprocess
+000052d0: 696e 672e 5072 6f63 6573 7328 0a20 2020  ing.Process(.   
 000052e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000052f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005300: 2020 2020 2020 2064 6165 6d6f 6e3d 5472         daemon=Tr
-00005310: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+00005300: 2020 2020 2020 2020 2064 6165 6d6f 6e3d           daemon=
+00005310: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
 00005320: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005340: 7461 7267 6574 3d64 6973 636f 7264 5f70  target=discord_p
-00005350: 7265 7365 6e63 655f 6c6f 6f70 2c0a 2020  resence_loop,.  
+00005340: 2020 7461 7267 6574 3d64 6973 636f 7264    target=discord
+00005350: 5f70 7265 7365 6e63 655f 6c6f 6f70 2c0a  _presence_loop,.
 00005360: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005380: 2020 2020 2020 2020 2020 6172 6773 3d28            args=(
-00005390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005380: 2020 2020 2020 2020 2020 2020 6172 6773              args
+00005390: 3d28 0a20 2020 2020 2020 2020 2020 2020  =(.             
 000053a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000053b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000053c0: 2064 6973 636f 7264 5f74 6974 6c65 5f71   discord_title_q
-000053d0: 7565 7565 2c0a 2020 2020 2020 2020 2020  ueue,.          
+000053c0: 2020 2064 6973 636f 7264 5f74 6974 6c65     discord_title
+000053d0: 5f71 7565 7565 2c0a 2020 2020 2020 2020  _queue,.        
 000053e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000053f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005400: 2020 2020 2020 6469 7363 6f72 645f 6172        discord_ar
-00005410: 7469 7374 5f71 7565 7565 2c0a 2020 2020  tist_queue,.    
+00005400: 2020 2020 2020 2020 6469 7363 6f72 645f          discord_
+00005410: 6172 7469 7374 5f71 7565 7565 2c0a 2020  artist_queue,.  
 00005420: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005440: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00005450: 6572 5f6f 7574 7075 742e 6469 7363 6f72  er_output.discor
-00005460: 645f 636f 6e6e 6563 7465 642c 0a20 2020  d_connected,.   
+00005440: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00005450: 6179 6572 5f6f 7574 7075 742e 6469 7363  ayer_output.disc
+00005460: 6f72 645f 636f 6e6e 6563 7465 642c 0a20  ord_connected,. 
 00005470: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005490: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+00005490: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
 000054a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000054b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000054c0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+000054c0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
 000054d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000054e0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-000054f0: 7363 6f72 645f 7072 6573 656e 6365 5f70  scord_presence_p
-00005500: 726f 6365 7373 2e73 7461 7274 2829 0a20  rocess.start(). 
-00005510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005520: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00005530: 6c69 6620 6320 696e 2022 6949 223a 0a20  lif c in "iI":. 
-00005540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000054e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000054f0: 6469 7363 6f72 645f 7072 6573 656e 6365  discord_presence
+00005500: 5f70 726f 6365 7373 2e73 7461 7274 2829  _process.start()
+00005510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005530: 2065 6c69 6620 6320 696e 2022 6949 223a   elif c in "iI":
+00005540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00005550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005560: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-00005570: 2e70 726f 6d70 7469 6e67 203d 2028 0a20  .prompting = (. 
-00005580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005560: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+00005570: 7574 2e70 726f 6d70 7469 6e67 203d 2028  ut.prompting = (
+00005580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00005590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000055a0: 2020 2020 2020 2022 222c 0a20 2020 2020         "",.     
+000055a0: 2020 2020 2020 2020 2022 222c 0a20 2020           "",.   
 000055b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000055c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000055d0: 2020 2030 2c0a 2020 2020 2020 2020 2020     0,.          
+000055d0: 2020 2020 2030 2c0a 2020 2020 2020 2020       0,.        
 000055e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000055f0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00005600: 6e66 6967 2e50 524f 4d50 545f 4d4f 4445  nfig.PROMPT_MODE
-00005610: 535b 2269 6e73 6572 7422 5d2c 0a20 2020  S["insert"],.   
+000055f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005600: 636f 6e66 6967 2e50 524f 4d50 545f 4d4f  config.PROMPT_MO
+00005610: 4445 535b 2269 6e73 6572 7422 5d2c 0a20  DES["insert"],. 
 00005620: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005640: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00005640: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
 00005650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005660: 2020 2020 2020 2063 7572 7365 732e 6375         curses.cu
-00005670: 7273 5f73 6574 2854 7275 6529 0a20 2020  rs_set(True).   
+00005660: 2020 2020 2020 2020 2063 7572 7365 732e           curses.
+00005670: 6375 7273 5f73 6574 2854 7275 6529 0a20  curs_set(True). 
 00005680: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000056a0: 2073 6372 6565 6e5f 7369 7a65 203d 2073   screen_size = s
-000056b0: 7464 7363 722e 6765 746d 6178 7978 2829  tdscr.getmaxyx()
-000056c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000056a0: 2020 2073 6372 6565 6e5f 7369 7a65 203d     screen_size =
+000056b0: 2073 7464 7363 722e 6765 746d 6178 7978   stdscr.getmaxyx
+000056c0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
 000056d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000056e0: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-000056f0: 7574 2e73 6372 6f6c 6c65 722e 7265 7369  ut.scroller.resi
-00005700: 7a65 280a 2020 2020 2020 2020 2020 2020  ze(.            
+000056e0: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+000056f0: 7470 7574 2e73 6372 6f6c 6c65 722e 7265  tput.scroller.re
+00005700: 7369 7a65 280a 2020 2020 2020 2020 2020  size(.          
 00005710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005720: 2020 2020 2020 2020 2020 2020 7363 7265              scre
-00005730: 656e 5f73 697a 655b 305d 202d 2033 0a20  en_size[0] - 3. 
-00005740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005720: 2020 2020 2020 2020 2020 2020 2020 7363                sc
+00005730: 7265 656e 5f73 697a 655b 305d 202d 2033  reen_size[0] - 3
+00005740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00005750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005760: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00005760: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 00005770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005780: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00005790: 6f75 7470 7574 2e6f 7574 7075 7428 706c  output.output(pl
-000057a0: 6179 6261 636b 2e63 7572 725f 706f 7329  ayback.curr_pos)
-000057b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005780: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00005790: 725f 6f75 7470 7574 2e6f 7574 7075 7428  r_output.output(
+000057a0: 706c 6179 6261 636b 2e63 7572 725f 706f  playback.curr_po
+000057b0: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
 000057c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000057d0: 2065 6c69 6620 6320 696e 2022 6141 223a   elif c in "aA":
-000057e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000057d0: 2020 2065 6c69 6620 6320 696e 2022 6141     elif c in "aA
+000057e0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
 000057f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005800: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00005810: 7574 2e70 726f 6d70 7469 6e67 203d 2028  ut.prompting = (
-00005820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005800: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00005810: 7470 7574 2e70 726f 6d70 7469 6e67 203d  tput.prompting =
+00005820: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
 00005830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005840: 2020 2020 2020 2020 2022 222c 0a20 2020           "",.   
+00005840: 2020 2020 2020 2020 2020 2022 222c 0a20             "",. 
 00005850: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005870: 2020 2020 2030 2c0a 2020 2020 2020 2020       0,.        
+00005870: 2020 2020 2020 2030 2c0a 2020 2020 2020         0,.      
 00005880: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058a0: 636f 6e66 6967 2e50 524f 4d50 545f 4d4f  config.PROMPT_MO
-000058b0: 4445 535b 2261 6464 225d 2c0a 2020 2020  DES["add"],.    
+000058a0: 2020 636f 6e66 6967 2e50 524f 4d50 545f    config.PROMPT_
+000058b0: 4d4f 4445 535b 2261 6464 225d 2c0a 2020  MODES["add"],.  
 000058c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000058d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000058e0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
 000058f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005900: 2020 2020 2020 6375 7273 6573 2e63 7572        curses.cur
-00005910: 735f 7365 7428 5472 7565 290a 2020 2020  s_set(True).    
+00005900: 2020 2020 2020 2020 6375 7273 6573 2e63          curses.c
+00005910: 7572 735f 7365 7428 5472 7565 290a 2020  urs_set(True).  
 00005920: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005940: 7363 7265 656e 5f73 697a 6520 3d20 7374  screen_size = st
-00005950: 6473 6372 2e67 6574 6d61 7879 7828 290a  dscr.getmaxyx().
-00005960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005940: 2020 7363 7265 656e 5f73 697a 6520 3d20    screen_size = 
+00005950: 7374 6473 6372 2e67 6574 6d61 7879 7828  stdscr.getmaxyx(
+00005960: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 00005970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005980: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-00005990: 742e 7363 726f 6c6c 6572 2e72 6573 697a  t.scroller.resiz
-000059a0: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
+00005980: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+00005990: 7075 742e 7363 726f 6c6c 6572 2e72 6573  put.scroller.res
+000059a0: 697a 6528 0a20 2020 2020 2020 2020 2020  ize(.           
 000059b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000059c0: 2020 2020 2020 2020 2020 2073 6372 6565             scree
-000059d0: 6e5f 7369 7a65 5b30 5d20 2d20 330a 2020  n_size[0] - 3.  
+000059c0: 2020 2020 2020 2020 2020 2020 2073 6372               scr
+000059d0: 6565 6e5f 7369 7a65 5b30 5d20 2d20 330a  een_size[0] - 3.
 000059e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000059f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a00: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00005a00: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
 00005a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a20: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00005a30: 7574 7075 742e 6f75 7470 7574 2870 6c61  utput.output(pla
-00005a40: 7962 6163 6b2e 6375 7272 5f70 6f73 290a  yback.curr_pos).
-00005a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a20: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00005a30: 5f6f 7574 7075 742e 6f75 7470 7574 2870  _output.output(p
+00005a40: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
+00005a50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 00005a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a70: 656c 6966 2063 2069 6e20 2274 5422 3a0a  elif c in "tT":.
-00005a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a70: 2020 656c 6966 2063 2069 6e20 2274 5422    elif c in "tT"
+00005a80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 00005a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005aa0: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-00005ab0: 742e 7072 6f6d 7074 696e 6720 3d20 280a  t.prompting = (.
-00005ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005aa0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+00005ab0: 7075 742e 7072 6f6d 7074 696e 6720 3d20  put.prompting = 
+00005ac0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
 00005ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ae0: 2020 2020 2020 2020 2222 2c0a 2020 2020          "",.    
+00005ae0: 2020 2020 2020 2020 2020 2222 2c0a 2020            "",.  
 00005af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b10: 2020 2020 302c 0a20 2020 2020 2020 2020      0,.         
+00005b10: 2020 2020 2020 302c 0a20 2020 2020 2020        0,.       
 00005b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00005b40: 6f6e 6669 672e 5052 4f4d 5054 5f4d 4f44  onfig.PROMPT_MOD
-00005b50: 4553 5b22 7461 6722 5d2c 0a20 2020 2020  ES["tag"],.     
+00005b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b40: 2063 6f6e 6669 672e 5052 4f4d 5054 5f4d   config.PROMPT_M
+00005b50: 4f44 4553 5b22 7461 6722 5d2c 0a20 2020  ODES["tag"],.   
 00005b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b70: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00005b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b80: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
 00005b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ba0: 2020 2020 2063 7572 7365 732e 6375 7273       curses.curs
-00005bb0: 5f73 6574 2854 7275 6529 0a20 2020 2020  _set(True).     
+00005ba0: 2020 2020 2020 2063 7572 7365 732e 6375         curses.cu
+00005bb0: 7273 5f73 6574 2854 7275 6529 0a20 2020  rs_set(True).   
 00005bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005bd0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00005be0: 6372 6565 6e5f 7369 7a65 203d 2073 7464  creen_size = std
-00005bf0: 7363 722e 6765 746d 6178 7978 2829 0a20  scr.getmaxyx(). 
-00005c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005be0: 2073 6372 6565 6e5f 7369 7a65 203d 2073   screen_size = s
+00005bf0: 7464 7363 722e 6765 746d 6178 7978 2829  tdscr.getmaxyx()
+00005c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00005c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c20: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-00005c30: 2e73 6372 6f6c 6c65 722e 7265 7369 7a65  .scroller.resize
-00005c40: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00005c20: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+00005c30: 7574 2e73 6372 6f6c 6c65 722e 7265 7369  ut.scroller.resi
+00005c40: 7a65 280a 2020 2020 2020 2020 2020 2020  ze(.            
 00005c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c60: 2020 2020 2020 2020 2020 7363 7265 656e            screen
-00005c70: 5f73 697a 655b 305d 202d 2033 0a20 2020  _size[0] - 3.   
+00005c60: 2020 2020 2020 2020 2020 2020 7363 7265              scre
+00005c70: 656e 5f73 697a 655b 305d 202d 2033 0a20  en_size[0] - 3. 
 00005c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ca0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00005ca0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
 00005cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005cc0: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
-00005cd0: 7470 7574 2e6f 7574 7075 7428 706c 6179  tput.output(play
-00005ce0: 6261 636b 2e63 7572 725f 706f 7329 0a20  back.curr_pos). 
-00005cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d00: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00005d10: 6c69 6620 6320 696e 2022 6d4d 223a 0a20  lif c in "mM":. 
-00005d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005cc0: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
+00005cd0: 6f75 7470 7574 2e6f 7574 7075 7428 706c  output.output(pl
+00005ce0: 6179 6261 636b 2e63 7572 725f 706f 7329  ayback.curr_pos)
+00005cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d10: 2065 6c69 6620 6320 696e 2022 6d4d 223a   elif c in "mM":
+00005d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00005d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d40: 2020 2069 6620 706c 6179 6572 5f6f 7574     if player_out
-00005d50: 7075 742e 766f 6c75 6d65 203d 3d20 303a  put.volume == 0:
-00005d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005d40: 2020 2020 2069 6620 706c 6179 6572 5f6f       if player_o
+00005d50: 7574 7075 742e 766f 6c75 6d65 203d 3d20  utput.volume == 
+00005d60: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
 00005d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d80: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00005d90: 6f75 7470 7574 2e76 6f6c 756d 6520 3d20  output.volume = 
-00005da0: 7072 6576 5f76 6f6c 756d 650a 2020 2020  prev_volume.    
+00005d80: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00005d90: 725f 6f75 7470 7574 2e76 6f6c 756d 6520  r_output.volume 
+00005da0: 3d20 7072 6576 5f76 6f6c 756d 650a 2020  = prev_volume.  
 00005db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005dd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00005dd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
 00005de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005df0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00005e00: 6179 6572 5f6f 7574 7075 742e 766f 6c75  ayer_output.volu
-00005e10: 6d65 203d 2030 0a20 2020 2020 2020 2020  me = 0.         
+00005df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005e00: 706c 6179 6572 5f6f 7574 7075 742e 766f  player_output.vo
+00005e10: 6c75 6d65 203d 2030 0a20 2020 2020 2020  lume = 0.       
 00005e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005e30: 2020 2020 2020 2020 2020 2070 6c61 7962             playb
-00005e40: 6163 6b2e 7365 745f 766f 6c75 6d65 2870  ack.set_volume(p
-00005e50: 6c61 7965 725f 6f75 7470 7574 2e76 6f6c  layer_output.vol
-00005e60: 756d 6529 0a0a 2020 2020 2020 2020 2020  ume)..          
+00005e30: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00005e40: 7962 6163 6b2e 7365 745f 766f 6c75 6d65  yback.set_volume
+00005e50: 2870 6c61 7965 725f 6f75 7470 7574 2e76  (player_output.v
+00005e60: 6f6c 756d 6529 0a0a 2020 2020 2020 2020  olume)..        
 00005e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005e80: 2020 2020 2020 2020 2020 706c 6179 6572            player
-00005e90: 5f6f 7574 7075 742e 6f75 7470 7574 2870  _output.output(p
-00005ea0: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
-00005eb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00005e80: 2020 2020 2020 2020 2020 2020 706c 6179              play
+00005e90: 6572 5f6f 7574 7075 742e 6f75 7470 7574  er_output.output
+00005ea0: 2870 6c61 7962 6163 6b2e 6375 7272 5f70  (playback.curr_p
+00005eb0: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
 00005ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ed0: 2020 656c 6966 2063 2069 6e20 2276 5622    elif c in "vV"
-00005ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00005ed0: 2020 2020 656c 6966 2063 2069 6e20 2276      elif c in "v
+00005ee0: 5622 3a0a 2020 2020 2020 2020 2020 2020  V":.            
 00005ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005f00: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00005f10: 7075 742e 7669 7375 616c 697a 6520 3d20  put.visualize = 
-00005f20: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00005f00: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00005f10: 7574 7075 742e 7669 7375 616c 697a 6520  utput.visualize 
+00005f20: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
 00005f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005f40: 2020 2020 2020 2020 2020 6e6f 7420 706c            not pl
-00005f50: 6179 6572 5f6f 7574 7075 742e 7669 7375  ayer_output.visu
-00005f60: 616c 697a 650a 2020 2020 2020 2020 2020  alize.          
+00005f40: 2020 2020 2020 2020 2020 2020 6e6f 7420              not 
+00005f50: 706c 6179 6572 5f6f 7574 7075 742e 7669  player_output.vi
+00005f60: 7375 616c 697a 650a 2020 2020 2020 2020  sualize.        
 00005f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005f80: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00005f80: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
 00005f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005fb0: 706c 6179 6572 5f6f 7574 7075 742e 6f75  player_output.ou
-00005fc0: 7470 7574 2870 6c61 7962 6163 6b2e 6375  tput(playback.cu
-00005fd0: 7272 5f70 6f73 290a 2020 2020 2020 2020  rr_pos).        
+00005fb0: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
+00005fc0: 6f75 7470 7574 2870 6c61 7962 6163 6b2e  output(playback.
+00005fd0: 6375 7272 5f70 6f73 290a 2020 2020 2020  curr_pos).      
 00005fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ff0: 2020 2020 2020 2020 656c 6966 2063 203d          elif c =
-00006000: 3d20 2220 223a 0a20 2020 2020 2020 2020  = " ":.         
+00005ff0: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+00006000: 203d 3d20 2220 223a 0a20 2020 2020 2020   == " ":.       
 00006010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006020: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-00006030: 725f 6f75 7470 7574 2e70 6175 7365 6420  r_output.paused 
-00006040: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00006020: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00006030: 7965 725f 6f75 7470 7574 2e70 6175 7365  yer_output.pause
+00006040: 6420 3d20 280a 2020 2020 2020 2020 2020  d = (.          
 00006050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006060: 2020 2020 2020 2020 2020 2020 6e6f 7420              not 
-00006070: 706c 6179 6572 5f6f 7574 7075 742e 7061  player_output.pa
-00006080: 7573 6564 0a20 2020 2020 2020 2020 2020  used.           
+00006060: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
+00006070: 7420 706c 6179 6572 5f6f 7574 7075 742e  t player_output.
+00006080: 7061 7573 6564 0a20 2020 2020 2020 2020  paused.         
 00006090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060a0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+000060a0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
 000060b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000060c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060d0: 6966 2070 6c61 7965 725f 6f75 7470 7574  if player_output
-000060e0: 2e70 6175 7365 643a 0a20 2020 2020 2020  .paused:.       
+000060d0: 2020 6966 2070 6c61 7965 725f 6f75 7470    if player_outp
+000060e0: 7574 2e70 6175 7365 643a 0a20 2020 2020  ut.paused:.     
 000060f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006110: 2070 6c61 7962 6163 6b2e 7061 7573 6528   playback.pause(
-00006120: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00006110: 2020 2070 6c61 7962 6163 6b2e 7061 7573     playback.paus
+00006120: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
 00006130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006140: 2020 2020 2020 2020 2020 7061 7573 655f            pause_
-00006150: 7374 6172 7420 3d20 7469 6d65 2829 0a20  start = time(). 
-00006160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006140: 2020 2020 2020 2020 2020 2020 7061 7573              paus
+00006150: 655f 7374 6172 7420 3d20 7469 6d65 2829  e_start = time()
+00006160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00006170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006180: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00006180: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
 00006190: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000061a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061b0: 2070 6c61 7962 6163 6b2e 7265 7375 6d65   playback.resume
-000061c0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+000061b0: 2020 2070 6c61 7962 6163 6b2e 7265 7375     playback.resu
+000061c0: 6d65 2829 0a20 2020 2020 2020 2020 2020  me().           
 000061d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061e0: 2020 2020 2020 2020 2020 2073 7461 7274             start
-000061f0: 5f74 696d 6520 2b3d 2074 696d 6528 2920  _time += time() 
-00006200: 2d20 7061 7573 655f 7374 6172 740a 0a20  - pause_start.. 
-00006210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000061e0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+000061f0: 7274 5f74 696d 6520 2b3d 2074 696d 6528  rt_time += time(
+00006200: 2920 2d20 7061 7573 655f 7374 6172 740a  ) - pause_start.
+00006210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00006220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006230: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
+00006230: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
 00006240: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006260: 7379 732e 706c 6174 666f 726d 203d 3d20  sys.platform == 
-00006270: 2264 6172 7769 6e22 0a20 2020 2020 2020  "darwin".       
+00006260: 2020 7379 732e 706c 6174 666f 726d 203d    sys.platform =
+00006270: 3d20 2264 6172 7769 6e22 0a20 2020 2020  = "darwin".     
 00006280: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000062a0: 2061 6e64 2063 616e 5f6d 6163 5f6e 6f77   and can_mac_now
-000062b0: 5f70 6c61 7969 6e67 0a20 2020 2020 2020  _playing.       
+000062a0: 2020 2061 6e64 2063 616e 5f6d 6163 5f6e     and can_mac_n
+000062b0: 6f77 5f70 6c61 7969 6e67 0a20 2020 2020  ow_playing.     
 000062c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000062d0: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
-000062e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000062d0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+000062e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 000062f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006300: 2020 2020 2020 2020 6d61 635f 6e6f 775f          mac_now_
-00006310: 706c 6179 696e 672e 7061 7573 6564 203d  playing.paused =
-00006320: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00006300: 2020 2020 2020 2020 2020 6d61 635f 6e6f            mac_no
+00006310: 775f 706c 6179 696e 672e 7061 7573 6564  w_playing.paused
+00006320: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
 00006330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006340: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00006350: 6c61 7965 725f 6f75 7470 7574 2e70 6175  layer_output.pau
-00006360: 7365 640a 2020 2020 2020 2020 2020 2020  sed.            
+00006340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006350: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
+00006360: 6175 7365 640a 2020 2020 2020 2020 2020  aused.          
 00006370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006380: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00006380: 2020 2020 2020 2020 2020 2020 2020 290a                ).
 00006390: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000063a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000063b0: 2020 2020 2020 6966 2070 6c61 7965 725f        if player_
-000063c0: 6f75 7470 7574 2e70 6175 7365 643a 0a20  output.paused:. 
-000063d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000063b0: 2020 2020 2020 2020 6966 2070 6c61 7965          if playe
+000063c0: 725f 6f75 7470 7574 2e70 6175 7365 643a  r_output.paused:
+000063d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000063e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000063f0: 2020 2020 2020 2020 2020 206d 6163 5f6e             mac_n
-00006400: 6f77 5f70 6c61 7969 6e67 2e70 6175 7365  ow_playing.pause
-00006410: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+000063f0: 2020 2020 2020 2020 2020 2020 206d 6163               mac
+00006400: 5f6e 6f77 5f70 6c61 7969 6e67 2e70 6175  _now_playing.pau
+00006410: 7365 2829 0a20 2020 2020 2020 2020 2020  se().           
 00006420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006430: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00006440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006430: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00006440: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
 00006450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006460: 2020 2020 2020 2020 2020 2020 206d 6163               mac
-00006470: 5f6e 6f77 5f70 6c61 7969 6e67 2e72 6573  _now_playing.res
-00006480: 756d 6528 290a 2020 2020 2020 2020 2020  ume().          
+00006460: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00006470: 6163 5f6e 6f77 5f70 6c61 7969 6e67 2e72  ac_now_playing.r
+00006480: 6573 756d 6528 290a 2020 2020 2020 2020  esume().        
 00006490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000064a0: 2020 2020 2020 2020 2020 2020 2020 7570                up
-000064b0: 6461 7465 5f6e 6f77 5f70 6c61 7969 6e67  date_now_playing
-000064c0: 203d 2054 7275 650a 0a20 2020 2020 2020   = True..       
+000064a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000064b0: 7570 6461 7465 5f6e 6f77 5f70 6c61 7969  update_now_playi
+000064c0: 6e67 203d 2054 7275 650a 0a20 2020 2020  ng = True..     
 000064d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000064e0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-000064f0: 7965 725f 6f75 7470 7574 2e6f 7574 7075  yer_output.outpu
-00006500: 7428 706c 6179 6261 636b 2e63 7572 725f  t(playback.curr_
-00006510: 706f 7329 0a20 2020 2020 2020 2020 2020  pos).           
+000064e0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000064f0: 6c61 7965 725f 6f75 7470 7574 2e6f 7574  layer_output.out
+00006500: 7075 7428 706c 6179 6261 636b 2e63 7572  put(playback.cur
+00006510: 725f 706f 7329 0a20 2020 2020 2020 2020  r_pos).         
 00006520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006530: 2020 2020 2065 6c69 6620 6320 3d3d 2022       elif c == "
-00006540: 5b22 3a0a 2020 2020 2020 2020 2020 2020  [":.            
+00006530: 2020 2020 2020 2065 6c69 6620 6320 3d3d         elif c ==
+00006540: 2022 5b22 3a0a 2020 2020 2020 2020 2020   "[":.          
 00006550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006560: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00006570: 7574 7075 742e 766f 6c75 6d65 203d 206d  utput.volume = m
-00006580: 6178 280a 2020 2020 2020 2020 2020 2020  ax(.            
+00006560: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00006570: 5f6f 7574 7075 742e 766f 6c75 6d65 203d  _output.volume =
+00006580: 206d 6178 280a 2020 2020 2020 2020 2020   max(.          
 00006590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000065a0: 2020 2020 2020 2020 2020 2020 302c 2070              0, p
-000065b0: 6c61 7965 725f 6f75 7470 7574 2e76 6f6c  layer_output.vol
-000065c0: 756d 6520 2d20 636f 6e66 6967 2e56 4f4c  ume - config.VOL
-000065d0: 554d 455f 5354 4550 0a20 2020 2020 2020  UME_STEP.       
+000065a0: 2020 2020 2020 2020 2020 2020 2020 302c                0,
+000065b0: 2070 6c61 7965 725f 6f75 7470 7574 2e76   player_output.v
+000065c0: 6f6c 756d 6520 2d20 636f 6e66 6967 2e56  olume - config.V
+000065d0: 4f4c 554d 455f 5354 4550 0a20 2020 2020  OLUME_STEP.     
 000065e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000065f0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00006600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000065f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00006600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00006610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006620: 2020 2070 6c61 7962 6163 6b2e 7365 745f     playback.set_
-00006630: 766f 6c75 6d65 2870 6c61 7965 725f 6f75  volume(player_ou
-00006640: 7470 7574 2e76 6f6c 756d 6529 0a0a 2020  tput.volume)..  
+00006620: 2020 2020 2070 6c61 7962 6163 6b2e 7365       playback.se
+00006630: 745f 766f 6c75 6d65 2870 6c61 7965 725f  t_volume(player_
+00006640: 6f75 7470 7574 2e76 6f6c 756d 6529 0a0a  output.volume)..
 00006650: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006670: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-00006680: 6f75 7470 7574 2870 6c61 7962 6163 6b2e  output(playback.
-00006690: 6375 7272 5f70 6f73 290a 0a20 2020 2020  curr_pos)..     
+00006670: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+00006680: 742e 6f75 7470 7574 2870 6c61 7962 6163  t.output(playbac
+00006690: 6b2e 6375 7272 5f70 6f73 290a 0a20 2020  k.curr_pos)..   
 000066a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000066b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000066c0: 7265 765f 766f 6c75 6d65 203d 2070 6c61  rev_volume = pla
-000066d0: 7965 725f 6f75 7470 7574 2e76 6f6c 756d  yer_output.volum
-000066e0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000066b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000066c0: 2070 7265 765f 766f 6c75 6d65 203d 2070   prev_volume = p
+000066d0: 6c61 7965 725f 6f75 7470 7574 2e76 6f6c  layer_output.vol
+000066e0: 756d 650a 2020 2020 2020 2020 2020 2020  ume.            
 000066f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006700: 2020 656c 6966 2063 203d 3d20 225d 223a    elif c == "]":
-00006710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006700: 2020 2020 656c 6966 2063 203d 3d20 225d      elif c == "]
+00006710: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
 00006720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006730: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00006740: 7574 2e76 6f6c 756d 6520 3d20 6d69 6e28  ut.volume = min(
-00006750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006730: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00006740: 7470 7574 2e76 6f6c 756d 6520 3d20 6d69  tput.volume = mi
+00006750: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
 00006760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006770: 2020 2020 2020 2020 2031 2c20 706c 6179           1, play
-00006780: 6572 5f6f 7574 7075 742e 766f 6c75 6d65  er_output.volume
-00006790: 202b 2063 6f6e 6669 672e 564f 4c55 4d45   + config.VOLUME
-000067a0: 5f53 5445 500a 2020 2020 2020 2020 2020  _STEP.          
+00006770: 2020 2020 2020 2020 2020 2031 2c20 706c             1, pl
+00006780: 6179 6572 5f6f 7574 7075 742e 766f 6c75  ayer_output.volu
+00006790: 6d65 202b 2063 6f6e 6669 672e 564f 4c55  me + config.VOLU
+000067a0: 4d45 5f53 5445 500a 2020 2020 2020 2020  ME_STEP.        
 000067b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000067c0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+000067c0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
 000067d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000067e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000067f0: 706c 6179 6261 636b 2e73 6574 5f76 6f6c  playback.set_vol
-00006800: 756d 6528 706c 6179 6572 5f6f 7574 7075  ume(player_outpu
-00006810: 742e 766f 6c75 6d65 290a 0a20 2020 2020  t.volume)..     
+000067f0: 2020 706c 6179 6261 636b 2e73 6574 5f76    playback.set_v
+00006800: 6f6c 756d 6528 706c 6179 6572 5f6f 7574  olume(player_out
+00006810: 7075 742e 766f 6c75 6d65 290a 0a20 2020  put.volume)..   
 00006820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006830: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00006840: 6c61 7965 725f 6f75 7470 7574 2e6f 7574  layer_output.out
-00006850: 7075 7428 706c 6179 6261 636b 2e63 7572  put(playback.cur
-00006860: 725f 706f 7329 0a0a 2020 2020 2020 2020  r_pos)..        
+00006830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006840: 2070 6c61 7965 725f 6f75 7470 7574 2e6f   player_output.o
+00006850: 7574 7075 7428 706c 6179 6261 636b 2e63  utput(playback.c
+00006860: 7572 725f 706f 7329 0a0a 2020 2020 2020  urr_pos)..      
 00006870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006880: 2020 2020 2020 2020 2020 2020 7072 6576              prev
-00006890: 5f76 6f6c 756d 6520 3d20 706c 6179 6572  _volume = player
-000068a0: 5f6f 7574 7075 742e 766f 6c75 6d65 0a20  _output.volume. 
-000068b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000068c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000068d0: 6c69 6620 6320 696e 2022 5c72 5c6e 223a  lif c in "\r\n":
-000068e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006880: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00006890: 6576 5f76 6f6c 756d 6520 3d20 706c 6179  ev_volume = play
+000068a0: 6572 5f6f 7574 7075 742e 766f 6c75 6d65  er_output.volume
+000068b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000068c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000068d0: 2065 6c69 6620 6320 696e 2022 5c72 5c6e   elif c in "\r\n
+000068e0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
 000068f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006900: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00006910: 7574 2e69 203d 2028 0a20 2020 2020 2020  ut.i = (.       
+00006900: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00006910: 7470 7574 2e69 203d 2028 0a20 2020 2020  tput.i = (.     
 00006920: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006940: 2070 6c61 7965 725f 6f75 7470 7574 2e73   player_output.s
-00006950: 6372 6f6c 6c65 722e 706f 7320 2d20 310a  croller.pos - 1.
-00006960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006940: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00006950: 2e73 6372 6f6c 6c65 722e 706f 7320 2d20  .scroller.pos - 
+00006960: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
 00006970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006980: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00006980: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
 00006990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000069a0: 2020 2020 2020 2020 2020 6e65 7874 5f73            next_s
-000069b0: 6f6e 6720 3d20 310a 2020 2020 2020 2020  ong = 1.        
+000069a0: 2020 2020 2020 2020 2020 2020 6e65 7874              next
+000069b0: 5f73 6f6e 6720 3d20 310a 2020 2020 2020  _song = 1.      
 000069c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000069d0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-000069e0: 6261 636b 2e73 746f 7028 290a 2020 2020  back.stop().    
+000069d0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+000069e0: 6179 6261 636b 2e73 746f 7028 290a 2020  ayback.stop().  
 000069f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a10: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+00006a10: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
 00006a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a30: 2020 2020 2020 656c 6966 2063 2069 6e20        elif c in 
-00006a40: 225c 625c 7837 6622 3a0a 2020 2020 2020  "\b\x7f":.      
+00006a30: 2020 2020 2020 2020 656c 6966 2063 2069          elif c i
+00006a40: 6e20 225c 625c 7837 6622 3a0a 2020 2020  n "\b\x7f":.    
 00006a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a60: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00006a70: 6c65 6374 6564 5f73 6f6e 6720 3d20 706c  lected_song = pl
-00006a80: 6179 6572 5f6f 7574 7075 742e 7363 726f  ayer_output.scro
-00006a90: 6c6c 6572 2e70 6f73 0a20 2020 2020 2020  ller.pos.       
+00006a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006a70: 7365 6c65 6374 6564 5f73 6f6e 6720 3d20  selected_song = 
+00006a80: 706c 6179 6572 5f6f 7574 7075 742e 7363  player_output.sc
+00006a90: 726f 6c6c 6572 2e70 6f73 0a20 2020 2020  roller.pos.     
 00006aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ab0: 2020 2020 2020 2020 2020 2020 2064 656c               del
-00006ac0: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-00006ad0: 6c61 796c 6973 745b 7365 6c65 6374 6564  laylist[selected
-00006ae0: 5f73 6f6e 675d 0a0a 2020 2020 2020 2020  _song]..        
+00006ab0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00006ac0: 656c 2070 6c61 7965 725f 6f75 7470 7574  el player_output
+00006ad0: 2e70 6c61 796c 6973 745b 7365 6c65 6374  .playlist[select
+00006ae0: 6564 5f73 6f6e 675d 0a0a 2020 2020 2020  ed_song]..      
 00006af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006b00: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00006b10: 6f6f 703a 0a20 2020 2020 2020 2020 2020  oop:.           
+00006b00: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00006b10: 206c 6f6f 703a 0a20 2020 2020 2020 2020   loop:.         
 00006b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006b30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00006b40: 7265 7368 7566 666c 653a 0a20 2020 2020  reshuffle:.     
+00006b30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00006b40: 6620 7265 7368 7566 666c 653a 0a20 2020  f reshuffle:.   
 00006b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006b70: 2020 2020 2020 206e 6578 745f 706c 6179         next_play
-00006b80: 6c69 7374 203d 2070 6c61 796c 6973 745b  list = playlist[
-00006b90: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+00006b70: 2020 2020 2020 2020 206e 6578 745f 706c           next_pl
+00006b80: 6179 6c69 7374 203d 2070 6c61 796c 6973  aylist = playlis
+00006b90: 745b 3a5d 0a20 2020 2020 2020 2020 2020  t[:].           
 00006ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006bb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00006bc0: 6875 6666 6c65 286e 6578 745f 706c 6179  huffle(next_play
-00006bd0: 6c69 7374 290a 2020 2020 2020 2020 2020  list).          
+00006bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006bc0: 2073 6875 6666 6c65 286e 6578 745f 706c   shuffle(next_pl
+00006bd0: 6179 6c69 7374 290a 2020 2020 2020 2020  aylist).        
 00006be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006bf0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00006c00: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00006bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006c00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
 00006c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c30: 6465 6c20 6e65 7874 5f70 6c61 796c 6973  del next_playlis
-00006c40: 745b 7365 6c65 6374 6564 5f73 6f6e 675d  t[selected_song]
-00006c50: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006c30: 2020 6465 6c20 6e65 7874 5f70 6c61 796c    del next_playl
+00006c40: 6973 745b 7365 6c65 6374 6564 5f73 6f6e  ist[selected_son
+00006c50: 675d 0a0a 2020 2020 2020 2020 2020 2020  g]..            
 00006c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c70: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00006c80: 7075 742e 7363 726f 6c6c 6572 2e6e 756d  put.scroller.num
-00006c90: 5f6c 696e 6573 202d 3d20 310a 2020 2020  _lines -= 1.    
+00006c70: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00006c80: 7574 7075 742e 7363 726f 6c6c 6572 2e6e  utput.scroller.n
+00006c90: 756d 5f6c 696e 6573 202d 3d20 310a 2020  um_lines -= 1.  
 00006ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006cc0: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
+00006cc0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
 00006cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ce0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00006cf0: 6563 7465 645f 736f 6e67 203d 3d20 706c  ected_song == pl
-00006d00: 6179 6572 5f6f 7574 7075 742e 690a 2020  ayer_output.i.  
+00006ce0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00006cf0: 656c 6563 7465 645f 736f 6e67 203d 3d20  elected_song == 
+00006d00: 706c 6179 6572 5f6f 7574 7075 742e 690a  player_output.i.
 00006d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d30: 2020 293a 2020 2320 6465 6c65 7465 6420    ):  # deleted 
-00006d40: 6375 7272 656e 7420 736f 6e67 0a20 2020  current song.   
+00006d30: 2020 2020 293a 2020 2320 6465 6c65 7465      ):  # delete
+00006d40: 6420 6375 7272 656e 7420 736f 6e67 0a20  d current song. 
 00006d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d70: 2020 2020 206e 6578 745f 736f 6e67 203d       next_song =
-00006d80: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
+00006d70: 2020 2020 2020 206e 6578 745f 736f 6e67         next_song
+00006d80: 203d 2031 0a20 2020 2020 2020 2020 2020   = 1.           
 00006d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006da0: 2020 2020 2020 2020 2020 2023 2077 696c             # wil
-00006db0: 6c20 6265 2069 6e63 7265 6d65 6e74 6564  l be incremented
-00006dc0: 2074 6f20 690a 2020 2020 2020 2020 2020   to i.          
+00006da0: 2020 2020 2020 2020 2020 2020 2023 2077               # w
+00006db0: 696c 6c20 6265 2069 6e63 7265 6d65 6e74  ill be increment
+00006dc0: 6564 2074 6f20 690a 2020 2020 2020 2020  ed to i.        
 00006dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006de0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00006df0: 6179 6572 5f6f 7574 7075 742e 7363 726f  ayer_output.scro
-00006e00: 6c6c 6572 2e70 6f73 203d 2028 0a20 2020  ller.pos = (.   
+00006de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006df0: 706c 6179 6572 5f6f 7574 7075 742e 7363  player_output.sc
+00006e00: 726f 6c6c 6572 2e70 6f73 203d 2028 0a20  roller.pos = (. 
 00006e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e30: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00006e40: 6f75 7470 7574 2e69 202d 2031 0a20 2020  output.i - 1.   
+00006e30: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00006e40: 725f 6f75 7470 7574 2e69 202d 2031 0a20  r_output.i - 1. 
 00006e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e70: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00006e70: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
 00006e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e90: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00006ea0: 6c61 7965 725f 6f75 7470 7574 2e69 202d  layer_output.i -
-00006eb0: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
+00006e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006ea0: 2070 6c61 7965 725f 6f75 7470 7574 2e69   player_output.i
+00006eb0: 202d 3d20 310a 2020 2020 2020 2020 2020   -= 1.          
 00006ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ed0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00006ee0: 6261 636b 2e73 746f 7028 290a 2020 2020  back.stop().    
+00006ed0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00006ee0: 6179 6261 636b 2e73 746f 7028 290a 2020  ayback.stop().  
 00006ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f10: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+00006f10: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
 00006f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f30: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00006f40: 6465 6c65 7465 6420 736f 6e67 2062 6566  deleted song bef
-00006f50: 6f72 6520 6375 7272 656e 740a 2020 2020  ore current.    
+00006f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f40: 2320 6465 6c65 7465 6420 736f 6e67 2062  # deleted song b
+00006f50: 6566 6f72 6520 6375 7272 656e 740a 2020  efore current.  
 00006f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f80: 6966 2073 656c 6563 7465 645f 736f 6e67  if selected_song
-00006f90: 203c 2070 6c61 7965 725f 6f75 7470 7574   < player_output
-00006fa0: 2e69 3a0a 2020 2020 2020 2020 2020 2020  .i:.            
+00006f80: 2020 6966 2073 656c 6563 7465 645f 736f    if selected_so
+00006f90: 6e67 203c 2070 6c61 7965 725f 6f75 7470  ng < player_outp
+00006fa0: 7574 2e69 3a0a 2020 2020 2020 2020 2020  ut.i:.          
 00006fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006fc0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00006fd0: 6572 5f6f 7574 7075 742e 6920 2d3d 2031  er_output.i -= 1
-00006fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006ff0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00007000: 6570 7420 2856 616c 7565 4572 726f 722c  ept (ValueError,
-00007010: 204f 7665 7266 6c6f 7745 7272 6f72 293a   OverflowError):
-00007020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006fc0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00006fd0: 6179 6572 5f6f 7574 7075 742e 6920 2d3d  ayer_output.i -=
+00006fe0: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
+00006ff0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00007000: 7863 6570 7420 2856 616c 7565 4572 726f  xcept (ValueErro
+00007010: 722c 204f 7665 7266 6c6f 7745 7272 6f72  r, OverflowError
+00007020: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
 00007030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007040: 2070 6173 730a 2020 2020 2020 2020 2020   pass.          
-00007050: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00007060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007070: 2020 2020 2020 2020 6966 2063 203d 3d20          if c == 
-00007080: 6375 7273 6573 2e4b 4559 5f4c 4546 543a  curses.KEY_LEFT:
-00007090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000070a0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-000070b0: 796c 696e 743a 2064 6973 6162 6c65 3d75  ylint: disable=u
-000070c0: 6e73 7562 7363 7269 7074 6162 6c65 2d6f  nsubscriptable-o
-000070d0: 626a 6563 740a 2020 2020 2020 2020 2020  bject.          
+00007040: 2020 2070 6173 730a 2020 2020 2020 2020     pass.        
+00007050: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00007060: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00007070: 2020 2020 2020 2020 2020 6966 2063 203d            if c =
+00007080: 3d20 6375 7273 6573 2e4b 4559 5f4c 4546  = curses.KEY_LEF
+00007090: 543a 0a20 2020 2020 2020 2020 2020 2020  T:.             
+000070a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000070b0: 2070 796c 696e 743a 2064 6973 6162 6c65   pylint: disable
+000070c0: 3d75 6e73 7562 7363 7269 7074 6162 6c65  =unsubscriptable
+000070d0: 2d6f 626a 6563 740a 2020 2020 2020 2020  -object.        
 000070e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000070f0: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-00007100: 7072 6f6d 7074 696e 6720 3d20 280a 2020  prompting = (.  
+000070f0: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+00007100: 742e 7072 6f6d 7074 696e 6720 3d20 280a  t.prompting = (.
 00007110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007120: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00007130: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
-00007140: 7074 696e 675b 305d 2c0a 2020 2020 2020  pting[0],.      
+00007120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007130: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
+00007140: 6f6d 7074 696e 675b 305d 2c0a 2020 2020  ompting[0],.    
 00007150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007160: 2020 2020 2020 2020 2020 6d61 7828 706c            max(pl
-00007170: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
-00007180: 7074 696e 675b 315d 202d 2031 2c20 3029  pting[1] - 1, 0)
-00007190: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00007160: 2020 2020 2020 2020 2020 2020 6d61 7828              max(
+00007170: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
+00007180: 6f6d 7074 696e 675b 315d 202d 2031 2c20  ompting[1] - 1, 
+00007190: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
 000071a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071b0: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-000071c0: 7072 6f6d 7074 696e 675b 325d 2c0a 2020  prompting[2],.  
+000071b0: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+000071c0: 742e 7072 6f6d 7074 696e 675b 325d 2c0a  t.prompting[2],.
 000071d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071e0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+000071e0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
 000071f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007200: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00007210: 7574 7075 742e 6f75 7470 7574 2870 6c61  utput.output(pla
-00007220: 7962 6163 6b2e 6375 7272 5f70 6f73 290a  yback.curr_pos).
-00007230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007240: 2020 2020 2020 2020 656c 6966 2063 203d          elif c =
-00007250: 3d20 6375 7273 6573 2e4b 4559 5f52 4947  = curses.KEY_RIG
-00007260: 4854 3a0a 2020 2020 2020 2020 2020 2020  HT:.            
+00007200: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00007210: 5f6f 7574 7075 742e 6f75 7470 7574 2870  _output.output(p
+00007220: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
+00007230: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00007240: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+00007250: 203d 3d20 6375 7273 6573 2e4b 4559 5f52   == curses.KEY_R
+00007260: 4947 4854 3a0a 2020 2020 2020 2020 2020  IGHT:.          
 00007270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007280: 2320 7079 6c69 6e74 3a20 6469 7361 626c  # pylint: disabl
-00007290: 653d 756e 7375 6273 6372 6970 7461 626c  e=unsubscriptabl
-000072a0: 652d 6f62 6a65 6374 0a20 2020 2020 2020  e-object.       
+00007280: 2020 2320 7079 6c69 6e74 3a20 6469 7361    # pylint: disa
+00007290: 626c 653d 756e 7375 6273 6372 6970 7461  ble=unsubscripta
+000072a0: 626c 652d 6f62 6a65 6374 0a20 2020 2020  ble-object.     
 000072b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000072c0: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-000072d0: 7574 2e70 726f 6d70 7469 6e67 203d 2028  ut.prompting = (
-000072e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000072c0: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+000072d0: 7470 7574 2e70 726f 6d70 7469 6e67 203d  tput.prompting =
+000072e0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
 000072f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007300: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-00007310: 726f 6d70 7469 6e67 5b30 5d2c 0a20 2020  rompting[0],.   
+00007300: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00007310: 2e70 726f 6d70 7469 6e67 5b30 5d2c 0a20  .prompting[0],. 
 00007320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007330: 2020 2020 2020 2020 2020 2020 206d 696e               min
-00007340: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00007330: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00007340: 696e 280a 2020 2020 2020 2020 2020 2020  in(.            
 00007350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007360: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00007370: 7075 742e 7072 6f6d 7074 696e 675b 315d  put.prompting[1]
-00007380: 202b 2031 2c0a 2020 2020 2020 2020 2020   + 1,.          
+00007360: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00007370: 7574 7075 742e 7072 6f6d 7074 696e 675b  utput.prompting[
+00007380: 315d 202b 2031 2c0a 2020 2020 2020 2020  1] + 1,.        
 00007390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000073a0: 2020 2020 2020 2020 2020 6c65 6e28 706c            len(pl
-000073b0: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
-000073c0: 7074 696e 675b 305d 292c 0a20 2020 2020  pting[0]),.     
+000073a0: 2020 2020 2020 2020 2020 2020 6c65 6e28              len(
+000073b0: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
+000073c0: 6f6d 7074 696e 675b 305d 292c 0a20 2020  ompting[0]),.   
 000073d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000073e0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+000073e0: 2020 2020 2020 2020 2020 2020 2029 2c0a               ),.
 000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007400: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00007410: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
-00007420: 7074 696e 675b 325d 2c0a 2020 2020 2020  pting[2],.      
+00007400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007410: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
+00007420: 6f6d 7074 696e 675b 325d 2c0a 2020 2020  ompting[2],.    
 00007430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007440: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00007440: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
 00007450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007460: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-00007470: 742e 6f75 7470 7574 2870 6c61 7962 6163  t.output(playbac
-00007480: 6b2e 6375 7272 5f70 6f73 290a 2020 2020  k.curr_pos).    
+00007460: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+00007470: 7075 742e 6f75 7470 7574 2870 6c61 7962  put.output(playb
+00007480: 6163 6b2e 6375 7272 5f70 6f73 290a 2020  ack.curr_pos).  
 00007490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074a0: 2020 2020 656c 6966 2063 203d 3d20 6375      elif c == cu
-000074b0: 7273 6573 2e4b 4559 5f55 503a 0a20 2020  rses.KEY_UP:.   
+000074a0: 2020 2020 2020 656c 6966 2063 203d 3d20        elif c == 
+000074b0: 6375 7273 6573 2e4b 4559 5f55 503a 0a20  curses.KEY_UP:. 
 000074c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074d0: 2020 2020 2020 2020 2069 6620 706c 6179           if play
-000074e0: 6572 5f6f 7574 7075 742e 7363 726f 6c6c  er_output.scroll
-000074f0: 6572 2e70 6f73 2021 3d20 303a 0a20 2020  er.pos != 0:.   
+000074d0: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
+000074e0: 6179 6572 5f6f 7574 7075 742e 7363 726f  ayer_output.scro
+000074f0: 6c6c 6572 2e70 6f73 2021 3d20 303a 0a20  ller.pos != 0:. 
 00007500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007510: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00007520: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
-00007530: 6c65 722e 7363 726f 6c6c 5f62 6163 6b77  ler.scroll_backw
-00007540: 6172 6428 290a 2020 2020 2020 2020 2020  ard().          
+00007510: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00007520: 6c61 7965 725f 6f75 7470 7574 2e73 6372  layer_output.scr
+00007530: 6f6c 6c65 722e 7363 726f 6c6c 5f62 6163  oller.scroll_bac
+00007540: 6b77 6172 6428 290a 2020 2020 2020 2020  kward().        
 00007550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007560: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00007570: 7075 742e 6f75 7470 7574 2870 6c61 7962  put.output(playb
-00007580: 6163 6b2e 6375 7272 5f70 6f73 290a 2020  ack.curr_pos).  
+00007560: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00007570: 7574 7075 742e 6f75 7470 7574 2870 6c61  utput.output(pla
+00007580: 7962 6163 6b2e 6375 7272 5f70 6f73 290a  yback.curr_pos).
 00007590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000075a0: 2020 2020 2020 656c 6966 2063 203d 3d20        elif c == 
-000075b0: 6375 7273 6573 2e4b 4559 5f44 4f57 4e3a  curses.KEY_DOWN:
-000075c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000075d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000075e0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000075a0: 2020 2020 2020 2020 656c 6966 2063 203d          elif c =
+000075b0: 3d20 6375 7273 6573 2e4b 4559 5f44 4f57  = curses.KEY_DOW
+000075c0: 4e3a 0a20 2020 2020 2020 2020 2020 2020  N:.             
+000075d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000075e0: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
 000075f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007600: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-00007610: 7363 726f 6c6c 6572 2e70 6f73 0a20 2020  scroller.pos.   
+00007600: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+00007610: 742e 7363 726f 6c6c 6572 2e70 6f73 0a20  t.scroller.pos. 
 00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007630: 2020 2020 2020 2020 2020 2020 2021 3d20               != 
-00007640: 706c 6179 6572 5f6f 7574 7075 742e 7363  player_output.sc
-00007650: 726f 6c6c 6572 2e6e 756d 5f6c 696e 6573  roller.num_lines
-00007660: 202d 2031 0a20 2020 2020 2020 2020 2020   - 1.           
+00007630: 2020 2020 2020 2020 2020 2020 2020 2021                 !
+00007640: 3d20 706c 6179 6572 5f6f 7574 7075 742e  = player_output.
+00007650: 7363 726f 6c6c 6572 2e6e 756d 5f6c 696e  scroller.num_lin
+00007660: 6573 202d 2031 0a20 2020 2020 2020 2020  es - 1.         
 00007670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007680: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+00007680: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
 00007690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000076a0: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-000076b0: 742e 7363 726f 6c6c 6572 2e73 6372 6f6c  t.scroller.scrol
-000076c0: 6c5f 666f 7277 6172 6428 290a 2020 2020  l_forward().    
+000076a0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+000076b0: 7075 742e 7363 726f 6c6c 6572 2e73 6372  put.scroller.scr
+000076c0: 6f6c 6c5f 666f 7277 6172 6428 290a 2020  oll_forward().  
 000076d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000076e0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-000076f0: 6572 5f6f 7574 7075 742e 6f75 7470 7574  er_output.output
-00007700: 2870 6c61 7962 6163 6b2e 6375 7272 5f70  (playback.curr_p
-00007710: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
-00007720: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00007730: 2063 203d 3d20 6375 7273 6573 2e4b 4559   c == curses.KEY
-00007740: 5f44 433a 0a20 2020 2020 2020 2020 2020  _DC:.           
+000076e0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+000076f0: 6179 6572 5f6f 7574 7075 742e 6f75 7470  ayer_output.outp
+00007700: 7574 2870 6c61 7962 6163 6b2e 6375 7272  ut(playback.curr
+00007710: 5f70 6f73 290a 2020 2020 2020 2020 2020  _pos).          
+00007720: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00007730: 6966 2063 203d 3d20 6375 7273 6573 2e4b  if c == curses.K
+00007740: 4559 5f44 433a 0a20 2020 2020 2020 2020  EY_DC:.         
 00007750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007760: 2023 2070 796c 696e 743a 2064 6973 6162   # pylint: disab
-00007770: 6c65 3d75 6e73 7562 7363 7269 7074 6162  le=unsubscriptab
-00007780: 6c65 2d6f 626a 6563 740a 2020 2020 2020  le-object.      
+00007760: 2020 2023 2070 796c 696e 743a 2064 6973     # pylint: dis
+00007770: 6162 6c65 3d75 6e73 7562 7363 7269 7074  able=unsubscript
+00007780: 6162 6c65 2d6f 626a 6563 740a 2020 2020  able-object.    
 00007790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077a0: 2020 2020 2020 6966 2070 6c61 7965 725f        if player_
-000077b0: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-000077c0: 5b31 5d20 3e20 303a 0a20 2020 2020 2020  [1] > 0:.       
+000077a0: 2020 2020 2020 2020 6966 2070 6c61 7965          if playe
+000077b0: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+000077c0: 6e67 5b31 5d20 3e20 303a 0a20 2020 2020  ng[1] > 0:.     
 000077d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077e0: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-000077f0: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-00007800: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+000077e0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+000077f0: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+00007800: 6e67 203d 2028 0a20 2020 2020 2020 2020  ng = (.         
 00007810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007820: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00007830: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-00007840: 5b30 5d5b 0a20 2020 2020 2020 2020 2020  [0][.           
+00007820: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00007830: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+00007840: 6e67 5b30 5d5b 0a20 2020 2020 2020 2020  ng[0][.         
 00007850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007860: 2020 2020 2020 2020 2020 2020 203a 2070               : p
-00007870: 6c61 7965 725f 6f75 7470 7574 2e70 726f  layer_output.pro
-00007880: 6d70 7469 6e67 5b31 5d20 2d20 310a 2020  mpting[1] - 1.  
+00007860: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00007870: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
+00007880: 726f 6d70 7469 6e67 5b31 5d20 2d20 310a  rompting[1] - 1.
 00007890: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000078a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000078b0: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
+000078b0: 2020 2020 5d0a 2020 2020 2020 2020 2020      ].          
 000078c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000078d0: 2020 2020 2020 2020 2b20 706c 6179 6572          + player
-000078e0: 5f6f 7574 7075 742e 7072 6f6d 7074 696e  _output.promptin
-000078f0: 675b 305d 5b0a 2020 2020 2020 2020 2020  g[0][.          
+000078d0: 2020 2020 2020 2020 2020 2b20 706c 6179            + play
+000078e0: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
+000078f0: 696e 675b 305d 5b0a 2020 2020 2020 2020  ing[0][.        
 00007900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007910: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00007920: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
-00007930: 7074 696e 675b 315d 203a 0a20 2020 2020  pting[1] :.     
+00007910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007920: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
+00007930: 6f6d 7074 696e 675b 315d 203a 0a20 2020  ompting[1] :.   
 00007940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007950: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-00007960: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00007950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007960: 205d 2c0a 2020 2020 2020 2020 2020 2020   ],.            
 00007970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007980: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-00007990: 7075 742e 7072 6f6d 7074 696e 675b 315d  put.prompting[1]
-000079a0: 202d 2031 2c0a 2020 2020 2020 2020 2020   - 1,.          
+00007980: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+00007990: 7574 7075 742e 7072 6f6d 7074 696e 675b  utput.prompting[
+000079a0: 315d 202d 2031 2c0a 2020 2020 2020 2020  1] - 1,.        
 000079b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079c0: 2020 2020 2020 2020 2020 706c 6179 6572            player
-000079d0: 5f6f 7574 7075 742e 7072 6f6d 7074 696e  _output.promptin
-000079e0: 675b 325d 2c0a 2020 2020 2020 2020 2020  g[2],.          
+000079c0: 2020 2020 2020 2020 2020 2020 706c 6179              play
+000079d0: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
+000079e0: 696e 675b 325d 2c0a 2020 2020 2020 2020  ing[2],.        
 000079f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a00: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00007a00: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
 00007a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a20: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-00007a30: 742e 6f75 7470 7574 2870 6c61 7962 6163  t.output(playbac
-00007a40: 6b2e 6375 7272 5f70 6f73 290a 2020 2020  k.curr_pos).    
+00007a20: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+00007a30: 7075 742e 6f75 7470 7574 2870 6c61 7962  put.output(playb
+00007a40: 6163 6b2e 6375 7272 5f70 6f73 290a 2020  ack.curr_pos).  
 00007a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a60: 2020 2020 656c 6966 2063 203d 3d20 6375      elif c == cu
-00007a70: 7273 6573 2e4b 4559 5f45 4e54 4552 3a0a  rses.KEY_ENTER:.
-00007a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a90: 2020 2020 2020 2020 2020 2020 2320 7079              # py
-00007aa0: 6c69 6e74 3a20 6469 7361 626c 653d 756e  lint: disable=un
-00007ab0: 7375 6273 6372 6970 7461 626c 652d 6f62  subscriptable-ob
-00007ac0: 6a65 6374 0a20 2020 2020 2020 2020 2020  ject.           
+00007a60: 2020 2020 2020 656c 6966 2063 203d 3d20        elif c == 
+00007a70: 6375 7273 6573 2e4b 4559 5f45 4e54 4552  curses.KEY_ENTER
+00007a80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00007a90: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00007aa0: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
+00007ab0: 756e 7375 6273 6372 6970 7461 626c 652d  unsubscriptable-
+00007ac0: 6f62 6a65 6374 0a20 2020 2020 2020 2020  object.         
 00007ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ae0: 2069 6620 706c 6179 6572 5f6f 7574 7075   if player_outpu
-00007af0: 742e 7072 6f6d 7074 696e 675b 0a20 2020  t.prompting[.   
+00007ae0: 2020 2069 6620 706c 6179 6572 5f6f 7574     if player_out
+00007af0: 7075 742e 7072 6f6d 7074 696e 675b 0a20  put.prompting[. 
 00007b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b10: 2020 2020 2020 2020 2020 2020 2030 0a20               0. 
-00007b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b30: 2020 2020 2020 2020 2020 205d 2e69 736e             ].isn
-00007b40: 756d 6572 6963 2829 2061 6e64 2070 6c61  umeric() and pla
-00007b50: 7965 725f 6f75 7470 7574 2e70 726f 6d70  yer_output.promp
-00007b60: 7469 6e67 5b32 5d20 696e 2028 0a20 2020  ting[2] in (.   
+00007b10: 2020 2020 2020 2020 2020 2020 2020 2030                 0
+00007b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007b30: 2020 2020 2020 2020 2020 2020 205d 2e69               ].i
+00007b40: 736e 756d 6572 6963 2829 2061 6e64 2070  snumeric() and p
+00007b50: 6c61 7965 725f 6f75 7470 7574 2e70 726f  layer_output.pro
+00007b60: 6d70 7469 6e67 5b32 5d20 696e 2028 0a20  mpting[2] in (. 
 00007b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b80: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00007b90: 6669 672e 5052 4f4d 5054 5f4d 4f44 4553  fig.PROMPT_MODES
-00007ba0: 5b22 6164 6422 5d2c 0a20 2020 2020 2020  ["add"],.       
+00007b80: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00007b90: 6f6e 6669 672e 5052 4f4d 5054 5f4d 4f44  onfig.PROMPT_MOD
+00007ba0: 4553 5b22 6164 6422 5d2c 0a20 2020 2020  ES["add"],.     
 00007bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bc0: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-00007bd0: 5052 4f4d 5054 5f4d 4f44 4553 5b22 696e  PROMPT_MODES["in
-00007be0: 7365 7274 225d 2c0a 2020 2020 2020 2020  sert"],.        
+00007bc0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+00007bd0: 672e 5052 4f4d 5054 5f4d 4f44 4553 5b22  g.PROMPT_MODES["
+00007be0: 696e 7365 7274 225d 2c0a 2020 2020 2020  insert"],.      
 00007bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c00: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+00007c00: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
 00007c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c20: 2020 2020 2020 2066 6f72 2064 6574 6169         for detai
-00007c30: 6c73 2069 6e20 706c 6179 6572 5f6f 7574  ls in player_out
-00007c40: 7075 742e 706c 6179 6c69 7374 3a0a 2020  put.playlist:.  
+00007c20: 2020 2020 2020 2020 2066 6f72 2064 6574           for det
+00007c30: 6169 6c73 2069 6e20 706c 6179 6572 5f6f  ails in player_o
+00007c40: 7574 7075 742e 706c 6179 6c69 7374 3a0a  utput.playlist:.
 00007c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c70: 2020 6966 2069 6e74 2864 6574 6169 6c73    if int(details
-00007c80: 5b30 5d29 203d 3d20 696e 7428 0a20 2020  [0]) == int(.   
+00007c70: 2020 2020 6966 2069 6e74 2864 6574 6169      if int(detai
+00007c80: 6c73 5b30 5d29 203d 3d20 696e 7428 0a20  ls[0]) == int(. 
 00007c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007cb0: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-00007cc0: 7574 2e70 726f 6d70 7469 6e67 5b30 5d0a  ut.prompting[0].
-00007cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007cb0: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+00007cc0: 7470 7574 2e70 726f 6d70 7469 6e67 5b30  tput.prompting[0
+00007cd0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
 00007ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007cf0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+00007cf0: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
 00007d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d10: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00007d20: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
+00007d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d20: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
 00007d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00007d40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
 00007d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d60: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00007d70: 6974 6820 6f70 656e 280a 2020 2020 2020  ith open(.      
+00007d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d70: 2077 6974 6820 6f70 656e 280a 2020 2020   with open(.    
 00007d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007da0: 2020 636f 6e66 6967 2e53 4f4e 4753 5f49    config.SONGS_I
-00007db0: 4e46 4f5f 5041 5448 2c0a 2020 2020 2020  NFO_PATH,.      
+00007da0: 2020 2020 636f 6e66 6967 2e53 4f4e 4753      config.SONGS
+00007db0: 5f49 4e46 4f5f 5041 5448 2c0a 2020 2020  _INFO_PATH,.    
 00007dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007de0: 2020 2272 222c 0a20 2020 2020 2020 2020    "r",.         
+00007de0: 2020 2020 2272 222c 0a20 2020 2020 2020      "r",.       
 00007df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e00: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00007e10: 6e63 6f64 696e 673d 2275 7466 2d38 222c  ncoding="utf-8",
-00007e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e10: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
+00007e20: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
 00007e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e40: 2020 2020 2029 2061 7320 736f 6e67 735f       ) as songs_
-00007e50: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
+00007e40: 2020 2020 2020 2029 2061 7320 736f 6e67         ) as song
+00007e50: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
 00007e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e70: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00007e80: 7220 6c69 6e65 2069 6e20 736f 6e67 735f  r line in songs_
-00007e90: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
+00007e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e80: 666f 7220 6c69 6e65 2069 6e20 736f 6e67  for line in song
+00007e90: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
 00007ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ec0: 2020 6465 7461 696c 7320 3d20 6c69 6e65    details = line
-00007ed0: 2e73 7472 6970 2829 2e73 706c 6974 2822  .strip().split("
-00007ee0: 7c22 290a 2020 2020 2020 2020 2020 2020  |").            
+00007ec0: 2020 2020 6465 7461 696c 7320 3d20 6c69      details = li
+00007ed0: 6e65 2e73 7472 6970 2829 2e73 706c 6974  ne.strip().split
+00007ee0: 2822 7c22 290a 2020 2020 2020 2020 2020  ("|").          
 00007ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f10: 736f 6e67 5f69 6420 3d20 696e 7428 6465  song_id = int(de
-00007f20: 7461 696c 735b 305d 290a 2020 2020 2020  tails[0]).      
+00007f10: 2020 736f 6e67 5f69 6420 3d20 696e 7428    song_id = int(
+00007f20: 6465 7461 696c 735b 305d 290a 2020 2020  details[0]).    
 00007f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f50: 2020 2020 2020 6966 2073 6f6e 675f 6964        if song_id
-00007f60: 203d 3d20 696e 7428 0a20 2020 2020 2020   == int(.       
+00007f50: 2020 2020 2020 2020 6966 2073 6f6e 675f          if song_
+00007f60: 6964 203d 3d20 696e 7428 0a20 2020 2020  id == int(.     
 00007f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f90: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00007fa0: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-00007fb0: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
+00007f90: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00007fa0: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+00007fb0: 6e67 5b30 5d0a 2020 2020 2020 2020 2020  ng[0].          
 00007fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00007fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007fe0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00007fe0: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
 00007ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008010: 2020 2073 6f6e 675f 6461 7461 203d 206d     song_data = m
-00008020: 7573 6963 5f74 6167 2e6c 6f61 645f 6669  usic_tag.load_fi
-00008030: 6c65 280a 2020 2020 2020 2020 2020 2020  le(.            
+00008010: 2020 2020 2073 6f6e 675f 6461 7461 203d       song_data =
+00008020: 206d 7573 6963 5f74 6167 2e6c 6f61 645f   music_tag.load_
+00008030: 6669 6c65 280a 2020 2020 2020 2020 2020  file(.          
 00008040: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008060: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
-00008070: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
+00008060: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+00008070: 682e 6a6f 696e 280a 2020 2020 2020 2020  h.join(.        
 00008080: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000080a0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000080b0: 6e66 6967 2e53 4f4e 4753 5f44 4952 2c20  nfig.SONGS_DIR, 
-000080c0: 6465 7461 696c 735b 315d 0a20 2020 2020  details[1].     
+000080a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000080b0: 636f 6e66 6967 2e53 4f4e 4753 5f44 4952  config.SONGS_DIR
+000080c0: 2c20 6465 7461 696c 735b 315d 0a20 2020  , details[1].   
 000080d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000080e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000080f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00008100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000080f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008100: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
 00008110: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008130: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00008130: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
 00008140: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008160: 2020 2064 6574 6169 6c73 202b 3d20 5b0a     details += [.
-00008170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008160: 2020 2020 2064 6574 6169 6c73 202b 3d20       details += 
+00008170: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
 00008180: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081a0: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+000081a0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
 000081b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000081c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081d0: 2020 2020 2020 2020 2020 2020 2020 736f                so
-000081e0: 6e67 5f64 6174 615b 0a20 2020 2020 2020  ng_data[.       
+000081d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000081e0: 736f 6e67 5f64 6174 615b 0a20 2020 2020  song_data[.     
 000081f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008200: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008220: 2020 2020 2022 6172 7469 7374 220a 2020       "artist".  
+00008220: 2020 2020 2020 2022 6172 7469 7374 220a         "artist".
 00008230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008240: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008260: 2020 2020 2020 5d2e 7661 6c75 650a 2020        ].value.  
+00008260: 2020 2020 2020 2020 5d2e 7661 6c75 650a          ].value.
 00008270: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008280: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000082a0: 2020 2020 2020 6f72 2022 556e 6b6e 6f77        or "Unknow
-000082b0: 6e20 4172 7469 7374 220a 2020 2020 2020  n Artist".      
+000082a0: 2020 2020 2020 2020 6f72 2022 556e 6b6e          or "Unkn
+000082b0: 6f77 6e20 4172 7469 7374 220a 2020 2020  own Artist".    
 000082c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000082d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000082e0: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-000082f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000082e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000082f0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
 00008300: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008320: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+00008320: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
 00008330: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008350: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00008360: 6f6e 675f 6461 7461 5b22 616c 6275 6d22  ong_data["album"
-00008370: 5d2e 7661 6c75 650a 2020 2020 2020 2020  ].value.        
+00008350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008360: 2073 6f6e 675f 6461 7461 5b22 616c 6275   song_data["albu
+00008370: 6d22 5d2e 7661 6c75 650a 2020 2020 2020  m"].value.      
 00008380: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008390: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000083a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000083b0: 6f72 2022 556e 6b6e 6f77 6e20 416c 6275  or "Unknown Albu
-000083c0: 6d22 0a20 2020 2020 2020 2020 2020 2020  m".             
+000083b0: 2020 6f72 2022 556e 6b6e 6f77 6e20 416c    or "Unknown Al
+000083c0: 6275 6d22 0a20 2020 2020 2020 2020 2020  bum".           
 000083d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000083e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000083f0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+000083f0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
 00008400: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008420: 2020 2020 2020 2020 2020 2020 2020 280a                (.
-00008430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008430: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
 00008440: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008460: 2020 2020 2020 2020 736f 6e67 5f64 6174          song_dat
-00008470: 615b 0a20 2020 2020 2020 2020 2020 2020  a[.             
+00008460: 2020 2020 2020 2020 2020 736f 6e67 5f64            song_d
+00008470: 6174 615b 0a20 2020 2020 2020 2020 2020  ata[.           
 00008480: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000084a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000084b0: 616c 6275 6d61 7274 6973 7422 0a20 2020  albumartist".   
+000084a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000084b0: 2022 616c 6275 6d61 7274 6973 7422 0a20   "albumartist". 
 000084c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000084d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000084e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000084f0: 2020 2020 205d 2e76 616c 7565 0a20 2020       ].value.   
+000084f0: 2020 2020 2020 205d 2e76 616c 7565 0a20         ].value. 
 00008500: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008510: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008530: 2020 2020 206f 7220 2255 6e6b 6e6f 776e       or "Unknown
-00008540: 2041 6c62 756d 2041 7274 6973 7422 0a20   Album Artist". 
-00008550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008530: 2020 2020 2020 206f 7220 2255 6e6b 6e6f         or "Unkno
+00008540: 776e 2041 6c62 756d 2041 7274 6973 7422  wn Album Artist"
+00008550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00008560: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008580: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
+00008580: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
 00008590: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000085a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000085b0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+000085b0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
 000085c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000085d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000085e0: 2020 2020 2020 2020 6966 2028 0a20 2020          if (.   
+000085e0: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
 000085f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008600: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008620: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-00008630: 726f 6d70 7469 6e67 5b32 5d0a 2020 2020  rompting[2].    
+00008620: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00008630: 2e70 726f 6d70 7469 6e67 5b32 5d0a 2020  .prompting[2].  
 00008640: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008650: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008670: 3d3d 2063 6f6e 6669 672e 5052 4f4d 5054  == config.PROMPT
-00008680: 5f4d 4f44 4553 5b22 696e 7365 7274 225d  _MODES["insert"]
-00008690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008670: 2020 3d3d 2063 6f6e 6669 672e 5052 4f4d    == config.PROM
+00008680: 5054 5f4d 4f44 4553 5b22 696e 7365 7274  PT_MODES["insert
+00008690: 225d 0a20 2020 2020 2020 2020 2020 2020  "].             
 000086a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000086b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086c0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+000086c0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
 000086d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000086e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086f0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00008700: 7574 7075 742e 706c 6179 6c69 7374 2e69  utput.playlist.i
-00008710: 6e73 6572 7428 0a20 2020 2020 2020 2020  nsert(.         
+000086f0: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00008700: 5f6f 7574 7075 742e 706c 6179 6c69 7374  _output.playlist
+00008710: 2e69 6e73 6572 7428 0a20 2020 2020 2020  .insert(.       
 00008720: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008740: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00008750: 6c61 7965 725f 6f75 7470 7574 2e73 6372  layer_output.scr
-00008760: 6f6c 6c65 722e 706f 730a 2020 2020 2020  oller.pos.      
+00008740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008750: 2070 6c61 7965 725f 6f75 7470 7574 2e73   player_output.s
+00008760: 6372 6f6c 6c65 722e 706f 730a 2020 2020  croller.pos.    
 00008770: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008780: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087a0: 2020 2b20 312c 0a20 2020 2020 2020 2020    + 1,.         
+000087a0: 2020 2020 2b20 312c 0a20 2020 2020 2020      + 1,.       
 000087b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000087c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087d0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000087e0: 6574 6169 6c73 2c0a 2020 2020 2020 2020  etails,.        
+000087d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087e0: 2064 6574 6169 6c73 2c0a 2020 2020 2020   details,.      
 000087f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008810: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00008810: 2020 2020 2020 2020 2020 2020 2020 290a                ).
 00008820: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008840: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00008850: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00008840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008850: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
 00008860: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008880: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00008890: 7574 7075 742e 706c 6179 6c69 7374 2e61  utput.playlist.a
-000088a0: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
+00008880: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00008890: 5f6f 7574 7075 742e 706c 6179 6c69 7374  _output.playlist
+000088a0: 2e61 7070 656e 6428 0a20 2020 2020 2020  .append(.       
 000088b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000088c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000088d0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000088e0: 6574 6169 6c73 0a20 2020 2020 2020 2020  etails.         
+000088d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088e0: 2064 6574 6169 6c73 0a20 2020 2020 2020   details.       
 000088f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008910: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00008910: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
 00008920: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008940: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00008950: 6c6f 6f70 3a0a 2020 2020 2020 2020 2020  loop:.          
+00008940: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00008950: 6620 6c6f 6f70 3a0a 2020 2020 2020 2020  f loop:.        
 00008960: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008980: 2020 2020 2020 2020 2020 6966 2072 6573            if res
-00008990: 6875 6666 6c65 3a0a 2020 2020 2020 2020  huffle:.        
+00008980: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00008990: 6573 6875 6666 6c65 3a0a 2020 2020 2020  eshuffle:.      
 000089a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000089b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000089c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089d0: 6e65 7874 5f70 6c61 796c 6973 742e 696e  next_playlist.in
-000089e0: 7365 7274 280a 2020 2020 2020 2020 2020  sert(.          
+000089d0: 2020 6e65 7874 5f70 6c61 796c 6973 742e    next_playlist.
+000089e0: 696e 7365 7274 280a 2020 2020 2020 2020  insert(.        
 000089f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a20: 2020 7261 6e64 696e 7428 0a20 2020 2020    randint(.     
+00008a20: 2020 2020 7261 6e64 696e 7428 0a20 2020      randint(.   
 00008a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a60: 2020 2020 2020 2020 2020 2030 2c0a 2020             0,.  
+00008a60: 2020 2020 2020 2020 2020 2020 2030 2c0a               0,.
 00008a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008aa0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
-00008ab0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00008aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ab0: 6c65 6e28 0a20 2020 2020 2020 2020 2020  len(.           
 00008ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008af0: 2020 2020 2020 206e 6578 745f 706c 6179         next_play
-00008b00: 6c69 7374 0a20 2020 2020 2020 2020 2020  list.           
+00008af0: 2020 2020 2020 2020 206e 6578 745f 706c           next_pl
+00008b00: 6179 6c69 7374 0a20 2020 2020 2020 2020  aylist.         
 00008b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b40: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00008b40: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
 00008b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b80: 2020 2020 2020 202d 2031 2c0a 2020 2020         - 1,.    
+00008b80: 2020 2020 2020 2020 202d 2031 2c0a 2020           - 1,.  
 00008b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008bc0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+00008bc0: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
 00008bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c00: 2020 2020 2020 2064 6574 6169 6c73 2c0a         details,.
-00008c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c00: 2020 2020 2020 2020 2064 6574 6169 6c73           details
+00008c10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
 00008c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00008c40: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
 00008c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c70: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00008c80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00008c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c80: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
 00008c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008cb0: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-00008cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008cb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00008cc0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
 00008cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008cf0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-00008d00: 7965 725f 6f75 7470 7574 2e70 726f 6d70  yer_output.promp
-00008d10: 7469 6e67 5b0a 2020 2020 2020 2020 2020  ting[.          
+00008cf0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00008d00: 6c61 7965 725f 6f75 7470 7574 2e70 726f  layer_output.pro
+00008d10: 6d70 7469 6e67 5b0a 2020 2020 2020 2020  mpting[.        
 00008d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d50: 2020 2020 2020 320a 2020 2020 2020 2020        2.        
+00008d50: 2020 2020 2020 2020 320a 2020 2020 2020          2.      
 00008d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d90: 2020 2020 5d0a 2020 2020 2020 2020 2020      ].          
+00008d90: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
 00008da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008dd0: 2020 3d3d 2063 6f6e 6669 672e 5052 4f4d    == config.PROM
-00008de0: 5054 5f4d 4f44 4553 5b0a 2020 2020 2020  PT_MODES[.      
+00008dd0: 2020 2020 3d3d 2063 6f6e 6669 672e 5052      == config.PR
+00008de0: 4f4d 5054 5f4d 4f44 4553 5b0a 2020 2020  OMPT_MODES[.    
 00008df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e20: 2020 2020 2020 2020 2020 2269 6e73 6572            "inser
-00008e30: 7422 0a20 2020 2020 2020 2020 2020 2020  t".             
+00008e20: 2020 2020 2020 2020 2020 2020 2269 6e73              "ins
+00008e30: 6572 7422 0a20 2020 2020 2020 2020 2020  ert".           
 00008e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e60: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-00008e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e70: 205d 0a20 2020 2020 2020 2020 2020 2020   ].             
 00008e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ea0: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
+00008ea0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
 00008eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ee0: 2020 2020 2020 2020 6e65 7874 5f70 6c61          next_pla
-00008ef0: 796c 6973 742e 696e 7365 7274 280a 2020  ylist.insert(.  
+00008ee0: 2020 2020 2020 2020 2020 6e65 7874 5f70            next_p
+00008ef0: 6c61 796c 6973 742e 696e 7365 7274 280a  laylist.insert(.
 00008f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f30: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00008f40: 6179 6572 5f6f 7574 7075 742e 7363 726f  ayer_output.scro
-00008f50: 6c6c 6572 2e70 6f73 0a20 2020 2020 2020  ller.pos.       
+00008f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008f40: 706c 6179 6572 5f6f 7574 7075 742e 7363  player_output.sc
+00008f50: 726f 6c6c 6572 2e70 6f73 0a20 2020 2020  roller.pos.     
 00008f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f90: 2020 2020 2020 2020 202b 2031 2c0a 2020           + 1,.  
+00008f90: 2020 2020 2020 2020 2020 202b 2031 2c0a             + 1,.
 00008fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008fd0: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00008fe0: 7461 696c 732c 0a20 2020 2020 2020 2020  tails,.         
+00008fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008fe0: 6465 7461 696c 732c 0a20 2020 2020 2020  details,.       
 00008ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009000: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009020: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00009020: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 00009030: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009050: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00009060: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00009050: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00009060: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
 00009070: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009090: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000090a0: 6578 745f 706c 6179 6c69 7374 2e61 7070  ext_playlist.app
-000090b0: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
+00009090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000090a0: 206e 6578 745f 706c 6179 6c69 7374 2e61   next_playlist.a
+000090b0: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
 000090c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000090d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000090e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090f0: 2020 2020 2064 6574 6169 6c73 0a20 2020       details.   
+000090f0: 2020 2020 2020 2064 6574 6169 6c73 0a20         details. 
 00009100: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009110: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009130: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00009130: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
 00009140: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009160: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-00009170: 725f 6f75 7470 7574 2e73 6372 6f6c 6c65  r_output.scrolle
-00009180: 722e 6e75 6d5f 6c69 6e65 7320 2b3d 2028  r.num_lines += (
-00009190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009160: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00009170: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
+00009180: 6c65 722e 6e75 6d5f 6c69 6e65 7320 2b3d  ler.num_lines +=
+00009190: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
 000091a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000091b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000091c0: 2020 2020 2031 0a20 2020 2020 2020 2020       1.         
+000091c0: 2020 2020 2020 2031 0a20 2020 2020 2020         1.       
 000091d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000091e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000091f0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000091f0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
 00009200: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009220: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-00009230: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-00009240: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00009220: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+00009230: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+00009240: 6e67 203d 204e 6f6e 650a 2020 2020 2020  ng = None.      
 00009250: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009270: 2020 2020 2020 2020 6375 7273 6573 2e63          curses.c
-00009280: 7572 735f 7365 7428 4661 6c73 6529 0a20  urs_set(False). 
-00009290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009270: 2020 2020 2020 2020 2020 6375 7273 6573            curses
+00009280: 2e63 7572 735f 7365 7428 4661 6c73 6529  .curs_set(False)
+00009290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000092a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000092b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000092c0: 6c61 7965 725f 6f75 7470 7574 2e73 6372  layer_output.scr
-000092d0: 6f6c 6c65 722e 7265 7369 7a65 280a 2020  oller.resize(.  
+000092b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000092c0: 2070 6c61 7965 725f 6f75 7470 7574 2e73   player_output.s
+000092d0: 6372 6f6c 6c65 722e 7265 7369 7a65 280a  croller.resize(.
 000092e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000092f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009310: 2020 7363 7265 656e 5f73 697a 655b 305d    screen_size[0]
-00009320: 202d 2032 0a20 2020 2020 2020 2020 2020   - 2.           
+00009310: 2020 2020 7363 7265 656e 5f73 697a 655b      screen_size[
+00009320: 305d 202d 2032 0a20 2020 2020 2020 2020  0] - 2.         
 00009330: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009350: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00009350: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
 00009360: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009380: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
-00009390: 7470 7574 2e6f 7574 7075 7428 0a20 2020  tput.output(.   
+00009380: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
+00009390: 6f75 7470 7574 2e6f 7574 7075 7428 0a20  output.output(. 
 000093a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000093b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000093c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000093d0: 2070 6c61 7962 6163 6b2e 6375 7272 5f70   playback.curr_p
-000093e0: 6f73 0a20 2020 2020 2020 2020 2020 2020  os.             
+000093d0: 2020 2070 6c61 7962 6163 6b2e 6375 7272     playback.curr
+000093e0: 5f70 6f73 0a20 2020 2020 2020 2020 2020  _pos.           
 000093f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009410: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00009410: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 00009420: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009440: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
+00009440: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
 00009450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009460: 2020 2020 2020 2065 6c69 6620 280a 2020         elif (.  
+00009460: 2020 2020 2020 2020 2065 6c69 6620 280a           elif (.
 00009470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009480: 2020 2020 2020 2020 2020 2020 2020 227c                "|
-00009490: 2220 6e6f 7420 696e 2070 6c61 7965 725f  " not in player_
-000094a0: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-000094b0: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
+00009480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009490: 227c 2220 6e6f 7420 696e 2070 6c61 7965  "|" not in playe
+000094a0: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+000094b0: 6e67 5b30 5d0a 2020 2020 2020 2020 2020  ng[0].          
 000094c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094d0: 2020 2020 616e 6420 706c 6179 6572 5f6f      and player_o
-000094e0: 7574 7075 742e 7072 6f6d 7074 696e 675b  utput.prompting[
-000094f0: 325d 0a20 2020 2020 2020 2020 2020 2020  2].             
+000094d0: 2020 2020 2020 616e 6420 706c 6179 6572        and player
+000094e0: 5f6f 7574 7075 742e 7072 6f6d 7074 696e  _output.promptin
+000094f0: 675b 325d 0a20 2020 2020 2020 2020 2020  g[2].           
 00009500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009510: 2020 203d 3d20 636f 6e66 6967 2e50 524f     == config.PRO
-00009520: 4d50 545f 4d4f 4445 535b 2274 6167 225d  MPT_MODES["tag"]
-00009530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009540: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
-00009550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009510: 2020 2020 203d 3d20 636f 6e66 6967 2e50       == config.P
+00009520: 524f 4d50 545f 4d4f 4445 535b 2274 6167  ROMPT_MODES["tag
+00009530: 225d 0a20 2020 2020 2020 2020 2020 2020  "].             
+00009540: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00009550: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 00009560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009570: 7461 6773 203d 2070 6c61 7965 725f 6f75  tags = player_ou
-00009580: 7470 7574 2e70 726f 6d70 7469 6e67 5b30  tput.prompting[0
-00009590: 5d2e 7370 6c69 7428 222c 2229 0a0a 2020  ].split(",")..  
+00009570: 2020 7461 6773 203d 2070 6c61 7965 725f    tags = player_
+00009580: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
+00009590: 5b30 5d2e 7370 6c69 7428 222c 2229 0a0a  [0].split(",")..
 000095a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000095b0: 2020 2020 2020 2020 2020 2020 2020 7461                ta
-000095c0: 6767 696e 675f 6964 7320 3d20 7b7d 0a20  gging_ids = {}. 
-000095d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000095e0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000095f0: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-00009600: 6e28 706c 6179 6572 5f6f 7574 7075 742e  n(player_output.
-00009610: 706c 6179 6c69 7374 2929 3a0a 2020 2020  playlist)):.    
+000095b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000095c0: 7461 6767 696e 675f 6964 7320 3d20 7b7d  tagging_ids = {}
+000095d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000095e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000095f0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00009600: 6c65 6e28 706c 6179 6572 5f6f 7574 7075  len(player_outpu
+00009610: 742e 706c 6179 6c69 7374 2929 3a0a 2020  t.playlist)):.  
 00009620: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009640: 7461 6767 696e 675f 6964 735b 0a20 2020  tagging_ids[.   
+00009640: 2020 7461 6767 696e 675f 6964 735b 0a20    tagging_ids[. 
 00009650: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009670: 2020 2020 2069 6e74 2870 6c61 7965 725f       int(player_
-00009680: 6f75 7470 7574 2e70 6c61 796c 6973 745b  output.playlist[
-00009690: 695d 5b30 5d29 0a20 2020 2020 2020 2020  i][0]).         
+00009670: 2020 2020 2020 2069 6e74 2870 6c61 7965         int(playe
+00009680: 725f 6f75 7470 7574 2e70 6c61 796c 6973  r_output.playlis
+00009690: 745b 695d 5b30 5d29 0a20 2020 2020 2020  t[i][0]).       
 000096a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096b0: 2020 2020 2020 2020 2020 205d 203d 2069             ] = i
-000096c0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000096b0: 2020 2020 2020 2020 2020 2020 205d 203d               ] =
+000096c0: 2069 0a0a 2020 2020 2020 2020 2020 2020   i..            
 000096d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096e0: 2020 736f 6e67 735f 6669 6c65 203d 206f    songs_file = o
-000096f0: 7065 6e28 0a20 2020 2020 2020 2020 2020  pen(.           
+000096e0: 2020 2020 736f 6e67 735f 6669 6c65 203d      songs_file =
+000096f0: 206f 7065 6e28 0a20 2020 2020 2020 2020   open(.         
 00009700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009710: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-00009720: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
-00009730: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
-00009740: 7574 662d 3822 0a20 2020 2020 2020 2020  utf-8".         
+00009710: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+00009720: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+00009730: 482c 2022 7222 2c20 656e 636f 6469 6e67  H, "r", encoding
+00009740: 3d22 7574 662d 3822 0a20 2020 2020 2020  ="utf-8".       
 00009750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009760: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00009760: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
 00009770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009780: 2020 2020 2020 2020 206c 696e 6573 203d           lines =
-00009790: 2073 6f6e 6773 5f66 696c 652e 7265 6164   songs_file.read
-000097a0: 2829 2e73 706c 6974 6c69 6e65 7328 290a  ().splitlines().
-000097b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009780: 2020 2020 2020 2020 2020 206c 696e 6573             lines
+00009790: 203d 2073 6f6e 6773 5f66 696c 652e 7265   = songs_file.re
+000097a0: 6164 2829 2e73 706c 6974 6c69 6e65 7328  ad().splitlines(
+000097b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 000097c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000097d0: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
-000097e0: 656e 286c 696e 6573 2929 3a0a 2020 2020  en(lines)):.    
+000097d0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000097e0: 286c 656e 286c 696e 6573 2929 3a0a 2020  (len(lines)):.  
 000097f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009810: 6465 7461 696c 7320 3d20 6c69 6e65 735b  details = lines[
-00009820: 695d 2e73 7472 6970 2829 2e73 706c 6974  i].strip().split
-00009830: 2822 7c22 290a 2020 2020 2020 2020 2020  ("|").          
+00009810: 2020 6465 7461 696c 7320 3d20 6c69 6e65    details = line
+00009820: 735b 695d 2e73 7472 6970 2829 2e73 706c  s[i].strip().spl
+00009830: 6974 2822 7c22 290a 2020 2020 2020 2020  it("|").        
 00009840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009850: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
-00009860: 6420 3d20 696e 7428 6465 7461 696c 735b  d = int(details[
-00009870: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
+00009850: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+00009860: 5f69 6420 3d20 696e 7428 6465 7461 696c  _id = int(detail
+00009870: 735b 305d 290a 2020 2020 2020 2020 2020  s[0]).          
 00009880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009890: 2020 2020 2020 2020 6966 2073 6f6e 675f          if song_
-000098a0: 6964 2069 6e20 7461 6767 696e 675f 6964  id in tagging_id
-000098b0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00009890: 2020 2020 2020 2020 2020 6966 2073 6f6e            if son
+000098a0: 675f 6964 2069 6e20 7461 6767 696e 675f  g_id in tagging_
+000098b0: 6964 733a 0a20 2020 2020 2020 2020 2020  ids:.           
 000098c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098d0: 2020 2020 2020 2020 2020 2069 6620 6465             if de
-000098e0: 7461 696c 735b 325d 3a0a 2020 2020 2020  tails[2]:.      
+000098d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000098e0: 6465 7461 696c 735b 325d 3a0a 2020 2020  details[2]:.    
 000098f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009910: 2020 2020 2020 6e65 775f 7461 6773 203d        new_tags =
-00009920: 2064 6574 6169 6c73 5b32 5d2e 7370 6c69   details[2].spli
-00009930: 7428 222c 2229 0a20 2020 2020 2020 2020  t(",").         
+00009910: 2020 2020 2020 2020 6e65 775f 7461 6773          new_tags
+00009920: 203d 2064 6574 6169 6c73 5b32 5d2e 7370   = details[2].sp
+00009930: 6c69 7428 222c 2229 0a20 2020 2020 2020  lit(",").       
 00009940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009950: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00009960: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00009950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009960: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
 00009970: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009990: 206e 6577 5f74 6167 7320 3d20 5b5d 0a20   new_tags = []. 
-000099a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009990: 2020 206e 6577 5f74 6167 7320 3d20 5b5d     new_tags = []
+000099a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000099b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000099c0: 2020 2020 2020 206e 6577 5f74 6167 7320         new_tags 
-000099d0: 2b3d 205b 0a20 2020 2020 2020 2020 2020  += [.           
+000099c0: 2020 2020 2020 2020 206e 6577 5f74 6167           new_tag
+000099d0: 7320 2b3d 205b 0a20 2020 2020 2020 2020  s += [.         
 000099e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000099f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a00: 2074 6167 0a20 2020 2020 2020 2020 2020   tag.           
+00009a00: 2020 2074 6167 0a20 2020 2020 2020 2020     tag.         
 00009a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a30: 2066 6f72 2074 6167 2069 6e20 7461 6773   for tag in tags
-00009a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009a30: 2020 2066 6f72 2074 6167 2069 6e20 7461     for tag in ta
+00009a40: 6773 0a20 2020 2020 2020 2020 2020 2020  gs.             
 00009a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009a70: 7461 6720 6e6f 7420 696e 206e 6577 5f74  tag not in new_t
-00009a80: 6167 730a 2020 2020 2020 2020 2020 2020  ags.            
+00009a60: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00009a70: 6620 7461 6720 6e6f 7420 696e 206e 6577  f tag not in new
+00009a80: 5f74 6167 730a 2020 2020 2020 2020 2020  _tags.          
 00009a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009aa0: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+00009aa0: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
 00009ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ad0: 2020 2020 2020 6465 7461 696c 735b 325d        details[2]
-00009ae0: 203d 2022 2c22 2e6a 6f69 6e28 6e65 775f   = ",".join(new_
-00009af0: 7461 6773 290a 2020 2020 2020 2020 2020  tags).          
+00009ad0: 2020 2020 2020 2020 6465 7461 696c 735b          details[
+00009ae0: 325d 203d 2022 2c22 2e6a 6f69 6e28 6e65  2] = ",".join(ne
+00009af0: 775f 7461 6773 290a 2020 2020 2020 2020  w_tags).        
 00009b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b10: 2020 2020 2020 2020 2020 2020 2020 6c69                li
-00009b20: 6e65 735b 695d 203d 2022 7c22 2e6a 6f69  nes[i] = "|".joi
-00009b30: 6e28 6465 7461 696c 7329 0a20 2020 2020  n(details).     
+00009b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b20: 6c69 6e65 735b 695d 203d 2022 7c22 2e6a  lines[i] = "|".j
+00009b30: 6f69 6e28 6465 7461 696c 7329 0a20 2020  oin(details).   
 00009b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b60: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-00009b70: 2e70 6c61 796c 6973 745b 0a20 2020 2020  .playlist[.     
+00009b60: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+00009b70: 7574 2e70 6c61 796c 6973 745b 0a20 2020  ut.playlist[.   
 00009b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ba0: 2020 2020 2020 2074 6167 6769 6e67 5f69         tagging_i
-00009bb0: 6473 5b73 6f6e 675f 6964 5d0a 2020 2020  ds[song_id].    
+00009ba0: 2020 2020 2020 2020 2074 6167 6769 6e67           tagging
+00009bb0: 5f69 6473 5b73 6f6e 675f 6964 5d0a 2020  _ids[song_id].  
 00009bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009be0: 2020 2020 5d5b 325d 203d 2064 6574 6169      ][2] = detai
-00009bf0: 6c73 5b32 5d0a 2020 2020 2020 2020 2020  ls[2].          
+00009be0: 2020 2020 2020 5d5b 325d 203d 2064 6574        ][2] = det
+00009bf0: 6169 6c73 5b32 5d0a 2020 2020 2020 2020  ails[2].        
 00009c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c10: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
-00009c20: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
+00009c10: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
+00009c20: 6c65 2e63 6c6f 7365 2829 0a0a 2020 2020  le.close()..    
 00009c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c40: 2020 2020 2020 2020 2020 736f 6e67 735f            songs_
-00009c50: 6669 6c65 203d 206f 7065 6e28 0a20 2020  file = open(.   
+00009c40: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+00009c50: 735f 6669 6c65 203d 206f 7065 6e28 0a20  s_file = open(. 
 00009c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00009c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c80: 2063 6f6e 6669 672e 534f 4e47 535f 494e   config.SONGS_IN
-00009c90: 464f 5f50 4154 482c 2022 7722 2c20 656e  FO_PATH, "w", en
-00009ca0: 636f 6469 6e67 3d22 7574 662d 3822 0a20  coding="utf-8". 
-00009cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cc0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00009cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009c80: 2020 2063 6f6e 6669 672e 534f 4e47 535f     config.SONGS_
+00009c90: 494e 464f 5f50 4154 482c 2022 7722 2c20  INFO_PATH, "w", 
+00009ca0: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+00009cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009cd0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
 00009ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cf0: 2073 6f6e 6773 5f66 696c 652e 7772 6974   songs_file.writ
-00009d00: 6528 225c 6e22 2e6a 6f69 6e28 6c69 6e65  e("\n".join(line
-00009d10: 7329 290a 2020 2020 2020 2020 2020 2020  s)).            
+00009cf0: 2020 2073 6f6e 6773 5f66 696c 652e 7772     songs_file.wr
+00009d00: 6974 6528 225c 6e22 2e6a 6f69 6e28 6c69  ite("\n".join(li
+00009d10: 6e65 7329 290a 2020 2020 2020 2020 2020  nes)).          
 00009d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d30: 2020 2020 736f 6e67 735f 6669 6c65 2e63      songs_file.c
-00009d40: 6c6f 7365 2829 0a0a 2020 2020 2020 2020  lose()..        
+00009d30: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
+00009d40: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
 00009d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d60: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-00009d70: 7574 7075 742e 7072 6f6d 7074 696e 6720  utput.prompting 
-00009d80: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
+00009d60: 2020 2020 2020 2020 2020 706c 6179 6572            player
+00009d70: 5f6f 7574 7075 742e 7072 6f6d 7074 696e  _output.promptin
+00009d80: 6720 3d20 4e6f 6e65 0a20 2020 2020 2020  g = None.       
 00009d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009da0: 2020 2020 2020 2063 7572 7365 732e 6375         curses.cu
-00009db0: 7273 5f73 6574 2846 616c 7365 290a 2020  rs_set(False).  
+00009da0: 2020 2020 2020 2020 2063 7572 7365 732e           curses.
+00009db0: 6375 7273 5f73 6574 2846 616c 7365 290a  curs_set(False).
 00009dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009dd0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00009de0: 6179 6572 5f6f 7574 7075 742e 6f75 7470  ayer_output.outp
-00009df0: 7574 2870 6c61 7962 6163 6b2e 6375 7272  ut(playback.curr
-00009e00: 5f70 6f73 290a 2020 2020 2020 2020 2020  _pos).          
-00009e10: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00009e20: 6966 2063 203d 3d20 3237 3a20 2023 2045  if c == 27:  # E
-00009e30: 5343 206b 6579 0a20 2020 2020 2020 2020  SC key.         
+00009dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009de0: 706c 6179 6572 5f6f 7574 7075 742e 6f75  player_output.ou
+00009df0: 7470 7574 2870 6c61 7962 6163 6b2e 6375  tput(playback.cu
+00009e00: 7272 5f70 6f73 290a 2020 2020 2020 2020  rr_pos).        
+00009e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009e20: 656c 6966 2063 203d 3d20 3237 3a20 2023  elif c == 27:  #
+00009e30: 2045 5343 206b 6579 0a20 2020 2020 2020   ESC key.       
 00009e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e50: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-00009e60: 2e70 726f 6d70 7469 6e67 203d 204e 6f6e  .prompting = Non
-00009e70: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00009e80: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-00009e90: 7273 6573 2e63 7572 735f 7365 7428 4661  rses.curs_set(Fa
-00009ea0: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
+00009e50: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+00009e60: 7574 2e70 726f 6d70 7469 6e67 203d 204e  ut.prompting = N
+00009e70: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+00009e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009e90: 6375 7273 6573 2e63 7572 735f 7365 7428  curses.curs_set(
+00009ea0: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
 00009eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ec0: 2070 6c61 7965 725f 6f75 7470 7574 2e73   player_output.s
-00009ed0: 6372 6f6c 6c65 722e 7265 7369 7a65 2873  croller.resize(s
-00009ee0: 6372 6565 6e5f 7369 7a65 5b30 5d20 2d20  creen_size[0] - 
-00009ef0: 3229 0a20 2020 2020 2020 2020 2020 2020  2).             
-00009f00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00009f10: 6c61 7965 725f 6f75 7470 7574 2e6f 7574  layer_output.out
-00009f20: 7075 7428 706c 6179 6261 636b 2e63 7572  put(playback.cur
-00009f30: 725f 706f 7329 0a20 2020 2020 2020 2020  r_pos).         
-00009f40: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00009f50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00009ec0: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+00009ed0: 2e73 6372 6f6c 6c65 722e 7265 7369 7a65  .scroller.resize
+00009ee0: 2873 6372 6565 6e5f 7369 7a65 5b30 5d20  (screen_size[0] 
+00009ef0: 2d20 3229 0a20 2020 2020 2020 2020 2020  - 2).           
+00009f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f10: 2070 6c61 7965 725f 6f75 7470 7574 2e6f   player_output.o
+00009f20: 7574 7075 7428 706c 6179 6261 636b 2e63  utput(playback.c
+00009f30: 7572 725f 706f 7329 0a20 2020 2020 2020  urr_pos).       
+00009f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f50: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
 00009f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f70: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00009f70: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
 00009f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f90: 2020 2020 2020 6320 3d20 6368 7228 6329        c = chr(c)
-00009fa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009f90: 2020 2020 2020 2020 6320 3d20 6368 7228          c = chr(
+00009fa0: 6329 0a20 2020 2020 2020 2020 2020 2020  c).             
 00009fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009fc0: 2069 6620 6320 696e 2022 5c72 5c6e 223a   if c in "\r\n":
-00009fd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009fc0: 2020 2069 6620 6320 696e 2022 5c72 5c6e     if c in "\r\n
+00009fd0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
 00009fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ff0: 2020 2020 2023 2070 796c 696e 743a 2064       # pylint: d
-0000a000: 6973 6162 6c65 3d75 6e73 7562 7363 7269  isable=unsubscri
-0000a010: 7074 6162 6c65 2d6f 626a 6563 740a 2020  ptable-object.  
+00009ff0: 2020 2020 2020 2023 2070 796c 696e 743a         # pylint:
+0000a000: 2064 6973 6162 6c65 3d75 6e73 7562 7363   disable=unsubsc
+0000a010: 7269 7074 6162 6c65 2d6f 626a 6563 740a  riptable-object.
 0000a020: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a040: 2020 6966 2070 6c61 7965 725f 6f75 7470    if player_outp
-0000a050: 7574 2e70 726f 6d70 7469 6e67 5b0a 2020  ut.prompting[.  
+0000a040: 2020 2020 6966 2070 6c61 7965 725f 6f75      if player_ou
+0000a050: 7470 7574 2e70 726f 6d70 7469 6e67 5b0a  tput.prompting[.
 0000a060: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a080: 2020 2020 2020 300a 2020 2020 2020 2020        0.        
+0000a080: 2020 2020 2020 2020 300a 2020 2020 2020          0.      
 0000a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0a0: 2020 2020 2020 2020 2020 2020 5d2e 6973              ].is
-0000a0b0: 6e75 6d65 7269 6328 2920 616e 6420 706c  numeric() and pl
-0000a0c0: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
-0000a0d0: 7074 696e 675b 0a20 2020 2020 2020 2020  pting[.         
+0000a0a0: 2020 2020 2020 2020 2020 2020 2020 5d2e                ].
+0000a0b0: 6973 6e75 6d65 7269 6328 2920 616e 6420  isnumeric() and 
+0000a0c0: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
+0000a0d0: 6f6d 7074 696e 675b 0a20 2020 2020 2020  ompting[.       
 0000a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0f0: 2020 2020 2020 2020 2020 2020 2020 2032                 2
-0000a100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a100: 2032 0a20 2020 2020 2020 2020 2020 2020   2.             
 0000a110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a120: 2020 2020 205d 2069 6e20 280a 2020 2020       ] in (.    
+0000a120: 2020 2020 2020 205d 2069 6e20 280a 2020         ] in (.  
 0000a130: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a150: 2020 2020 636f 6e66 6967 2e50 524f 4d50      config.PROMP
-0000a160: 545f 4d4f 4445 535b 2261 6464 225d 2c0a  T_MODES["add"],.
-0000a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a150: 2020 2020 2020 636f 6e66 6967 2e50 524f        config.PRO
+0000a160: 4d50 545f 4d4f 4445 535b 2261 6464 225d  MPT_MODES["add"]
+0000a170: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
 0000a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a190: 2020 2020 2020 2020 636f 6e66 6967 2e50          config.P
-0000a1a0: 524f 4d50 545f 4d4f 4445 535b 2269 6e73  ROMPT_MODES["ins
-0000a1b0: 6572 7422 5d2c 0a20 2020 2020 2020 2020  ert"],.         
+0000a190: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+0000a1a0: 2e50 524f 4d50 545f 4d4f 4445 535b 2269  .PROMPT_MODES["i
+0000a1b0: 6e73 6572 7422 5d2c 0a20 2020 2020 2020  nsert"],.       
 0000a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1d0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+0000a1d0: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
 0000a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a200: 2020 2020 2020 666f 7220 6465 7461 696c        for detail
-0000a210: 7320 696e 2070 6c61 7965 725f 6f75 7470  s in player_outp
-0000a220: 7574 2e70 6c61 796c 6973 743a 0a20 2020  ut.playlist:.   
+0000a200: 2020 2020 2020 2020 666f 7220 6465 7461          for deta
+0000a210: 696c 7320 696e 2070 6c61 7965 725f 6f75  ils in player_ou
+0000a220: 7470 7574 2e70 6c61 796c 6973 743a 0a20  tput.playlist:. 
 0000a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a250: 2020 2020 2020 2020 2069 6620 696e 7428           if int(
-0000a260: 6465 7461 696c 735b 305d 2920 3d3d 2069  details[0]) == i
-0000a270: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
+0000a250: 2020 2020 2020 2020 2020 2069 6620 696e             if in
+0000a260: 7428 6465 7461 696c 735b 305d 2920 3d3d  t(details[0]) ==
+0000a270: 2069 6e74 280a 2020 2020 2020 2020 2020   int(.          
 0000a280: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2a0: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-0000a2b0: 742e 7072 6f6d 7074 696e 675b 305d 0a20  t.prompting[0]. 
-0000a2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2a0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+0000a2b0: 7075 742e 7072 6f6d 7074 696e 675b 305d  put.prompting[0]
+0000a2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2e0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+0000a2e0: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
 0000a2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a310: 2020 2020 2020 2020 2020 2020 2020 6272                br
-0000a320: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
+0000a310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a320: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
 0000a330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a340: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0000a350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000a340: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0000a350: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
 0000a360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a370: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-0000a380: 7468 206f 7065 6e28 0a20 2020 2020 2020  th open(.       
+0000a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a380: 7769 7468 206f 7065 6e28 0a20 2020 2020  with open(.     
 0000a390: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3b0: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-0000a3c0: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
-0000a3d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a3b0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+0000a3c0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+0000a3d0: 482c 0a20 2020 2020 2020 2020 2020 2020  H,.             
 0000a3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a400: 2022 7222 2c0a 2020 2020 2020 2020 2020   "r",.          
+0000a400: 2020 2022 7222 2c0a 2020 2020 2020 2020     "r",.        
 0000a410: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a430: 2020 2020 2020 656e 636f 6469 6e67 3d22        encoding="
-0000a440: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
+0000a430: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
+0000a440: 3d22 7574 662d 3822 2c0a 2020 2020 2020  ="utf-8",.      
 0000a450: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a470: 2020 2020 2920 6173 2073 6f6e 6773 5f66      ) as songs_f
-0000a480: 696c 653a 0a20 2020 2020 2020 2020 2020  ile:.           
+0000a470: 2020 2020 2020 2920 6173 2073 6f6e 6773        ) as songs
+0000a480: 5f66 696c 653a 0a20 2020 2020 2020 2020  _file:.         
 0000a490: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4b0: 2020 2020 2066 6f72 206c 696e 6520 696e       for line in
-0000a4c0: 2073 6f6e 6773 5f66 696c 653a 0a20 2020   songs_file:.   
+0000a4b0: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
+0000a4c0: 696e 2073 6f6e 6773 5f66 696c 653a 0a20  in songs_file:. 
 0000a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a500: 2064 6574 6169 6c73 203d 2028 0a20 2020   details = (.   
+0000a500: 2020 2064 6574 6169 6c73 203d 2028 0a20     details = (. 
 0000a510: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a520: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a540: 2020 2020 206c 696e 652e 7374 7269 7028       line.strip(
-0000a550: 292e 7370 6c69 7428 227c 2229 0a20 2020  ).split("|").   
+0000a540: 2020 2020 2020 206c 696e 652e 7374 7269         line.stri
+0000a550: 7028 292e 7370 6c69 7428 227c 2229 0a20  p().split("|"). 
 0000a560: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a570: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a590: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0000a590: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
 0000a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5c0: 2020 2020 2020 2073 6f6e 675f 6964 203d         song_id =
-0000a5d0: 2069 6e74 2864 6574 6169 6c73 5b30 5d29   int(details[0])
-0000a5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a5c0: 2020 2020 2020 2020 2073 6f6e 675f 6964           song_id
+0000a5d0: 203d 2069 6e74 2864 6574 6169 6c73 5b30   = int(details[0
+0000a5e0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
 0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a610: 2020 2020 2069 6620 736f 6e67 5f69 6420       if song_id 
-0000a620: 3d3d 2069 6e74 280a 2020 2020 2020 2020  == int(.        
+0000a610: 2020 2020 2020 2069 6620 736f 6e67 5f69         if song_i
+0000a620: 6420 3d3d 2069 6e74 280a 2020 2020 2020  d == int(.      
 0000a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a660: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
-0000a670: 6f6d 7074 696e 675b 0a20 2020 2020 2020  ompting[.       
+0000a660: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
+0000a670: 7072 6f6d 7074 696e 675b 0a20 2020 2020  prompting[.     
 0000a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6b0: 2020 2020 2030 0a20 2020 2020 2020 2020       0.         
+0000a6b0: 2020 2020 2020 2030 0a20 2020 2020 2020         0.       
 0000a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6e0: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-0000a6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6f0: 205d 0a20 2020 2020 2020 2020 2020 2020   ].             
 0000a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a720: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+0000a720: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
 0000a730: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a760: 736f 6e67 5f64 6174 6120 3d20 280a 2020  song_data = (.  
+0000a760: 2020 736f 6e67 5f64 6174 6120 3d20 280a    song_data = (.
 0000a770: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7a0: 2020 2020 2020 2020 2020 6d75 7369 635f            music_
-0000a7b0: 7461 672e 6c6f 6164 5f66 696c 6528 0a20  tag.load_file(. 
-0000a7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7a0: 2020 2020 2020 2020 2020 2020 6d75 7369              musi
+0000a7b0: 635f 7461 672e 6c6f 6164 5f66 696c 6528  c_tag.load_file(
+0000a7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7f0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0000a800: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
+0000a7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a800: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
 0000a810: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a850: 2063 6f6e 6669 672e 534f 4e47 535f 4449   config.SONGS_DI
-0000a860: 522c 0a20 2020 2020 2020 2020 2020 2020  R,.             
+0000a850: 2020 2063 6f6e 6669 672e 534f 4e47 535f     config.SONGS_
+0000a860: 4449 522c 0a20 2020 2020 2020 2020 2020  DIR,.           
 0000a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a880: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8a0: 2020 2020 2020 2064 6574 6169 6c73 5b31         details[1
-0000a8b0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+0000a8a0: 2020 2020 2020 2020 2064 6574 6169 6c73           details
+0000a8b0: 5b31 5d2c 0a20 2020 2020 2020 2020 2020  [1],.           
 0000a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8f0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0000a8f0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 0000a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a910: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a930: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0000a930: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
 0000a940: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a960: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000a960: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
 0000a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9a0: 2020 2020 2064 6574 6169 6c73 202b 3d20       details += 
-0000a9b0: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+0000a9a0: 2020 2020 2020 2064 6574 6169 6c73 202b         details +
+0000a9b0: 3d20 5b0a 2020 2020 2020 2020 2020 2020  = [.            
 0000a9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9e0: 2020 2020 2020 2020 2020 2020 2020 280a                (.
-0000a9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
 0000aa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa30: 736f 6e67 5f64 6174 615b 0a20 2020 2020  song_data[.     
+0000aa30: 2020 736f 6e67 5f64 6174 615b 0a20 2020    song_data[.   
 0000aa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000aa80: 6172 7469 7374 220a 2020 2020 2020 2020  artist".        
+0000aa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa80: 2022 6172 7469 7374 220a 2020 2020 2020   "artist".      
 0000aa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aac0: 2020 2020 2020 2020 5d2e 7661 6c75 650a          ].value.
-0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aac0: 2020 2020 2020 2020 2020 5d2e 7661 6c75            ].valu
+0000aad0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
 0000aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ab00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab10: 6f72 2022 556e 6b6e 6f77 6e20 4172 7469  or "Unknown Arti
-0000ab20: 7374 220a 2020 2020 2020 2020 2020 2020  st".            
+0000ab10: 2020 6f72 2022 556e 6b6e 6f77 6e20 4172    or "Unknown Ar
+0000ab20: 7469 7374 220a 2020 2020 2020 2020 2020  tist".          
 0000ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab60: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+0000ab60: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
 0000ab70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab90: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-0000aba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aba0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
 0000abb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abe0: 2073 6f6e 675f 6461 7461 5b0a 2020 2020   song_data[.    
+0000abe0: 2020 2073 6f6e 675f 6461 7461 5b0a 2020     song_data[.  
 0000abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ac00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac30: 2261 6c62 756d 220a 2020 2020 2020 2020  "album".        
+0000ac30: 2020 2261 6c62 756d 220a 2020 2020 2020    "album".      
 0000ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac70: 2020 2020 2020 2020 5d2e 7661 6c75 650a          ].value.
-0000ac80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac70: 2020 2020 2020 2020 2020 5d2e 7661 6c75            ].valu
+0000ac80: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
 0000ac90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000acb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acc0: 6f72 2022 556e 6b6e 6f77 6e20 416c 6275  or "Unknown Albu
-0000acd0: 6d22 0a20 2020 2020 2020 2020 2020 2020  m".             
+0000acc0: 2020 6f72 2022 556e 6b6e 6f77 6e20 416c    or "Unknown Al
+0000acd0: 6275 6d22 0a20 2020 2020 2020 2020 2020  bum".           
 0000ace0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad00: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000ad10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad10: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
 0000ad20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad40: 2020 2020 2020 2020 2020 2020 2020 280a                (.
-0000ad50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad50: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
 0000ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ad70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad90: 736f 6e67 5f64 6174 615b 0a20 2020 2020  song_data[.     
+0000ad90: 2020 736f 6e67 5f64 6174 615b 0a20 2020    song_data[.   
 0000ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000adc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000add0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000ade0: 616c 6275 6d61 7274 6973 7422 0a20 2020  albumartist".   
+0000add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ade0: 2022 616c 6275 6d61 7274 6973 7422 0a20   "albumartist". 
 0000adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ae00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae20: 2020 2020 2020 2020 2020 2020 205d 2e76               ].v
-0000ae30: 616c 7565 0a20 2020 2020 2020 2020 2020  alue.           
+0000ae20: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+0000ae30: 2e76 616c 7565 0a20 2020 2020 2020 2020  .value.         
 0000ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ae50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ae60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae70: 2020 2020 206f 7220 2255 6e6b 6e6f 776e       or "Unknown
-0000ae80: 2041 6c62 756d 2041 7274 6973 7422 0a20   Album Artist". 
-0000ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae70: 2020 2020 2020 206f 7220 2255 6e6b 6e6f         or "Unkno
+0000ae80: 776e 2041 6c62 756d 2041 7274 6973 7422  wn Album Artist"
+0000ae90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aec0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+0000aec0: 2020 2020 2020 2020 2020 2020 2029 2c0a               ),.
 0000aed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af00: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+0000af00: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
 0000af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000af30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af40: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
+0000af40: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
 0000af50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000af60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af80: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-0000af90: 726f 6d70 7469 6e67 5b0a 2020 2020 2020  rompting[.      
+0000af80: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+0000af90: 2e70 726f 6d70 7469 6e67 5b0a 2020 2020  .prompting[.    
 0000afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000afb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afd0: 2020 2020 2020 2020 2020 320a 2020 2020            2.    
+0000afd0: 2020 2020 2020 2020 2020 2020 320a 2020              2.  
 0000afe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b010: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+0000b010: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
 0000b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b050: 2020 2020 2020 3d3d 2063 6f6e 6669 672e        == config.
-0000b060: 5052 4f4d 5054 5f4d 4f44 4553 5b0a 2020  PROMPT_MODES[.  
+0000b050: 2020 2020 2020 2020 3d3d 2063 6f6e 6669          == confi
+0000b060: 672e 5052 4f4d 5054 5f4d 4f44 4553 5b0a  g.PROMPT_MODES[.
 0000b070: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0a0: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-0000b0b0: 6e73 6572 7422 0a20 2020 2020 2020 2020  nsert".         
+0000b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b0b0: 2269 6e73 6572 7422 0a20 2020 2020 2020  "insert".       
 0000b0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0f0: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
+0000b0f0: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
 0000b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b120: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
-0000b130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b120: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000b130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 0000b140: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b160: 2020 2020 2020 2020 2020 2020 706c 6179              play
-0000b170: 6572 5f6f 7574 7075 742e 706c 6179 6c69  er_output.playli
-0000b180: 7374 2e69 6e73 6572 7428 0a20 2020 2020  st.insert(.     
+0000b160: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+0000b170: 6179 6572 5f6f 7574 7075 742e 706c 6179  ayer_output.play
+0000b180: 6c69 7374 2e69 6e73 6572 7428 0a20 2020  list.insert(.   
 0000b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b1c0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-0000b1d0: 725f 6f75 7470 7574 2e73 6372 6f6c 6c65  r_output.scrolle
-0000b1e0: 722e 706f 730a 2020 2020 2020 2020 2020  r.pos.          
+0000b1c0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+0000b1d0: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
+0000b1e0: 6c65 722e 706f 730a 2020 2020 2020 2020  ler.pos.        
 0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b220: 2020 2020 2020 2b20 312c 0a20 2020 2020        + 1,.     
+0000b220: 2020 2020 2020 2020 2b20 312c 0a20 2020          + 1,.   
 0000b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b260: 2020 2020 2020 2020 2020 2064 6574 6169             detai
-0000b270: 6c73 2c0a 2020 2020 2020 2020 2020 2020  ls,.            
+0000b260: 2020 2020 2020 2020 2020 2020 2064 6574               det
+0000b270: 6169 6c73 2c0a 2020 2020 2020 2020 2020  ails,.          
 0000b280: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000b2b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
 0000b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2e0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0000b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2e0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000b2f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 0000b300: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b320: 2020 2020 2020 2020 2020 2020 706c 6179              play
-0000b330: 6572 5f6f 7574 7075 742e 706c 6179 6c69  er_output.playli
-0000b340: 7374 2e61 7070 656e 6428 0a20 2020 2020  st.append(.     
+0000b320: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+0000b330: 6179 6572 5f6f 7574 7075 742e 706c 6179  ayer_output.play
+0000b340: 6c69 7374 2e61 7070 656e 6428 0a20 2020  list.append(.   
 0000b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b380: 2020 2020 2020 2020 2020 2064 6574 6169             detai
-0000b390: 6c73 0a20 2020 2020 2020 2020 2020 2020  ls.             
+0000b380: 2020 2020 2020 2020 2020 2020 2064 6574               det
+0000b390: 6169 6c73 0a20 2020 2020 2020 2020 2020  ails.           
 0000b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000b3d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3d0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
 0000b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b400: 2020 2020 2020 2020 2069 6620 6c6f 6f70           if loop
-0000b410: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000b400: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
+0000b410: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
 0000b420: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b440: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000b450: 2072 6573 6875 6666 6c65 3a0a 2020 2020   reshuffle:.    
+0000b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b450: 6966 2072 6573 6875 6666 6c65 3a0a 2020  if reshuffle:.  
 0000b460: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b470: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b490: 2020 2020 2020 2020 2020 2020 6e65 7874              next
-0000b4a0: 5f70 6c61 796c 6973 742e 696e 7365 7274  _playlist.insert
-0000b4b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000b490: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0000b4a0: 7874 5f70 6c61 796c 6973 742e 696e 7365  xt_playlist.inse
+0000b4b0: 7274 280a 2020 2020 2020 2020 2020 2020  rt(.            
 0000b4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4f0: 2020 2020 2020 7261 6e64 696e 7428 0a20        randint(. 
-0000b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4f0: 2020 2020 2020 2020 7261 6e64 696e 7428          randint(
+0000b500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b520: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b540: 2020 2020 2020 2030 2c0a 2020 2020 2020         0,.      
+0000b540: 2020 2020 2020 2020 2030 2c0a 2020 2020           0,.    
 0000b550: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b560: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b590: 2020 6c65 6e28 0a20 2020 2020 2020 2020    len(.         
+0000b590: 2020 2020 6c65 6e28 0a20 2020 2020 2020      len(.       
 0000b5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5e0: 2020 206e 6578 745f 706c 6179 6c69 7374     next_playlist
-0000b5f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b5e0: 2020 2020 206e 6578 745f 706c 6179 6c69       next_playli
+0000b5f0: 7374 0a20 2020 2020 2020 2020 2020 2020  st.             
 0000b600: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b630: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0000b630: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
 0000b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b660: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b680: 2020 202d 2031 2c0a 2020 2020 2020 2020     - 1,.        
+0000b680: 2020 2020 202d 2031 2c0a 2020 2020 2020       - 1,.      
 0000b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6c0: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-0000b6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b6c0: 2020 2020 2020 2020 2020 2020 2020 292c                ),
+0000b6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b710: 2020 2064 6574 6169 6c73 2c0a 2020 2020     details,.    
+0000b710: 2020 2020 2064 6574 6169 6c73 2c0a 2020       details,.  
 0000b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b730: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b750: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000b750: 2020 2020 2020 2020 2020 2020 2020 290a                ).
 0000b760: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b770: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b790: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0000b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b790: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000b7a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 0000b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7e0: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
+0000b7e0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
 0000b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b820: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-0000b830: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-0000b840: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+0000b820: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+0000b830: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+0000b840: 6e67 5b0a 2020 2020 2020 2020 2020 2020  ng[.            
 0000b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b860: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b880: 2020 2020 2020 2020 2020 320a 2020 2020            2.    
+0000b880: 2020 2020 2020 2020 2020 2020 320a 2020              2.  
 0000b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8d0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0000b8d0: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
 0000b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b910: 2020 2020 2020 3d3d 2063 6f6e 6669 672e        == config.
-0000b920: 5052 4f4d 5054 5f4d 4f44 4553 5b0a 2020  PROMPT_MODES[.  
+0000b910: 2020 2020 2020 2020 3d3d 2063 6f6e 6669          == confi
+0000b920: 672e 5052 4f4d 5054 5f4d 4f44 4553 5b0a  g.PROMPT_MODES[.
 0000b930: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b970: 2020 2020 2020 2269 6e73 6572 7422 0a20        "insert". 
-0000b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b970: 2020 2020 2020 2020 2269 6e73 6572 7422          "insert"
+0000b980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9c0: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
+0000b9c0: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
 0000b9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba00: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+0000ba00: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
 0000ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ba20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ba30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba40: 2020 2020 2020 2020 2020 2020 6e65 7874              next
-0000ba50: 5f70 6c61 796c 6973 742e 696e 7365 7274  _playlist.insert
-0000ba60: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000ba40: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0000ba50: 7874 5f70 6c61 796c 6973 742e 696e 7365  xt_playlist.inse
+0000ba60: 7274 280a 2020 2020 2020 2020 2020 2020  rt(.            
 0000ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baa0: 2020 2020 2020 2020 2020 706c 6179 6572            player
-0000bab0: 5f6f 7574 7075 742e 7363 726f 6c6c 6572  _output.scroller
-0000bac0: 2e70 6f73 0a20 2020 2020 2020 2020 2020  .pos.           
+0000baa0: 2020 2020 2020 2020 2020 2020 706c 6179              play
+0000bab0: 6572 5f6f 7574 7075 742e 7363 726f 6c6c  er_output.scroll
+0000bac0: 6572 2e70 6f73 0a20 2020 2020 2020 2020  er.pos.         
 0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb00: 2020 2020 2020 2020 2020 2020 202b 2031               + 1
-0000bb10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000bb00: 2020 2020 2020 2020 2020 2020 2020 202b                 +
+0000bb10: 2031 2c0a 2020 2020 2020 2020 2020 2020   1,.            
 0000bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb50: 2020 2020 2020 2020 2020 6465 7461 696c            detail
-0000bb60: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+0000bb50: 2020 2020 2020 2020 2020 2020 6465 7461              deta
+0000bb60: 696c 732c 0a20 2020 2020 2020 2020 2020  ils,.           
 0000bb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bba0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000bba0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
 0000bbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bbe0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0000bbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bbe0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000bbf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000bc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc30: 2020 206e 6578 745f 706c 6179 6c69 7374     next_playlist
-0000bc40: 2e61 7070 656e 6428 0a20 2020 2020 2020  .append(.       
+0000bc30: 2020 2020 206e 6578 745f 706c 6179 6c69       next_playli
+0000bc40: 7374 2e61 7070 656e 6428 0a20 2020 2020  st.append(.     
 0000bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc90: 2064 6574 6169 6c73 0a20 2020 2020 2020   details.       
+0000bc90: 2020 2064 6574 6169 6c73 0a20 2020 2020     details.     
 0000bca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bcd0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0000bce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bcd0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000bce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000bcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd10: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
-0000bd20: 7470 7574 2e73 6372 6f6c 6c65 722e 6e75  tput.scroller.nu
-0000bd30: 6d5f 6c69 6e65 7320 2b3d 2028 0a20 2020  m_lines += (.   
+0000bd10: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
+0000bd20: 6f75 7470 7574 2e73 6372 6f6c 6c65 722e  output.scroller.
+0000bd30: 6e75 6d5f 6c69 6e65 7320 2b3d 2028 0a20  num_lines += (. 
 0000bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd70: 2020 2020 2020 2020 2031 0a20 2020 2020           1.     
+0000bd70: 2020 2020 2020 2020 2020 2031 0a20 2020             1.   
 0000bd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bdb0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0000bdb0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 0000bdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bde0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-0000bdf0: 7965 725f 6f75 7470 7574 2e70 726f 6d70  yer_output.promp
-0000be00: 7469 6e67 203d 2028 0a20 2020 2020 2020  ting = (.       
+0000bde0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000bdf0: 6c61 7965 725f 6f75 7470 7574 2e70 726f  layer_output.pro
+0000be00: 6d70 7469 6e67 203d 2028 0a20 2020 2020  mpting = (.     
 0000be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000be20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000be30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be40: 2020 2020 204e 6f6e 650a 2020 2020 2020       None.      
+0000be40: 2020 2020 2020 204e 6f6e 650a 2020 2020         None.    
 0000be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be80: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0000be80: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
 0000be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000beb0: 2020 2020 2020 2020 2020 2020 6375 7273              curs
-0000bec0: 6573 2e63 7572 735f 7365 7428 4661 6c73  es.curs_set(Fals
-0000bed0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+0000beb0: 2020 2020 2020 2020 2020 2020 2020 6375                cu
+0000bec0: 7273 6573 2e63 7572 735f 7365 7428 4661  rses.curs_set(Fa
+0000bed0: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
 0000bee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf00: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-0000bf10: 725f 6f75 7470 7574 2e73 6372 6f6c 6c65  r_output.scrolle
-0000bf20: 722e 7265 7369 7a65 280a 2020 2020 2020  r.resize(.      
+0000bf00: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+0000bf10: 7965 725f 6f75 7470 7574 2e73 6372 6f6c  yer_output.scrol
+0000bf20: 6c65 722e 7265 7369 7a65 280a 2020 2020  ler.resize(.    
 0000bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf60: 2020 2020 2020 7363 7265 656e 5f73 697a        screen_siz
-0000bf70: 655b 305d 202d 2032 0a20 2020 2020 2020  e[0] - 2.       
+0000bf60: 2020 2020 2020 2020 7363 7265 656e 5f73          screen_s
+0000bf70: 697a 655b 305d 202d 2032 0a20 2020 2020  ize[0] - 2.     
 0000bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfb0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0000bfb0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
 0000bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfe0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-0000bff0: 725f 6f75 7470 7574 2e6f 7574 7075 7428  r_output.output(
-0000c000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bfe0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+0000bff0: 7965 725f 6f75 7470 7574 2e6f 7574 7075  yer_output.outpu
+0000c000: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
 0000c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c030: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
-0000c040: 7962 6163 6b2e 6375 7272 5f70 6f73 0a20  yback.curr_pos. 
-0000c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c030: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000c040: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
+0000c050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c080: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000c080: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
 0000c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0c0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+0000c0c0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
 0000c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0e0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0000c0f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000c0e0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0000c0f0: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
 0000c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c110: 2020 2020 2020 2020 2020 227c 2220 6e6f            "|" no
-0000c120: 7420 696e 2070 6c61 7965 725f 6f75 7470  t in player_outp
-0000c130: 7574 2e70 726f 6d70 7469 6e67 5b30 5d0a  ut.prompting[0].
-0000c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c110: 2020 2020 2020 2020 2020 2020 227c 2220              "|" 
+0000c120: 6e6f 7420 696e 2070 6c61 7965 725f 6f75  not in player_ou
+0000c130: 7470 7574 2e70 726f 6d70 7469 6e67 5b30  tput.prompting[0
+0000c140: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
 0000c150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c160: 2020 2020 2020 2020 616e 6420 706c 6179          and play
-0000c170: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
-0000c180: 696e 675b 325d 0a20 2020 2020 2020 2020  ing[2].         
+0000c160: 2020 2020 2020 2020 2020 616e 6420 706c            and pl
+0000c170: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
+0000c180: 7074 696e 675b 325d 0a20 2020 2020 2020  pting[2].       
 0000c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1a0: 2020 2020 2020 2020 2020 2020 2020 203d                 =
-0000c1b0: 3d20 636f 6e66 6967 2e50 524f 4d50 545f  = config.PROMPT_
-0000c1c0: 4d4f 4445 535b 2274 6167 225d 0a20 2020  MODES["tag"].   
+0000c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c1b0: 203d 3d20 636f 6e66 6967 2e50 524f 4d50   == config.PROMP
+0000c1c0: 545f 4d4f 4445 535b 2274 6167 225d 0a20  T_MODES["tag"]. 
 0000c1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1f0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+0000c1f0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
 0000c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c210: 2020 2020 2020 2020 2020 2020 7461 6773              tags
-0000c220: 203d 2070 6c61 7965 725f 6f75 7470 7574   = player_output
-0000c230: 2e70 726f 6d70 7469 6e67 5b30 5d2e 7370  .prompting[0].sp
-0000c240: 6c69 7428 0a20 2020 2020 2020 2020 2020  lit(.           
+0000c210: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+0000c220: 6773 203d 2070 6c61 7965 725f 6f75 7470  gs = player_outp
+0000c230: 7574 2e70 726f 6d70 7469 6e67 5b30 5d2e  ut.prompting[0].
+0000c240: 7370 6c69 7428 0a20 2020 2020 2020 2020  split(.         
 0000c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c270: 2022 2c22 0a20 2020 2020 2020 2020 2020   ",".           
+0000c270: 2020 2022 2c22 0a20 2020 2020 2020 2020     ",".         
 0000c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c290: 2020 2020 2020 2020 2020 2020 2029 0a0a               )..
-0000c2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c290: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000c2a0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0000c2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c2c0: 2020 2020 2020 2020 7461 6767 696e 675f          tagging_
-0000c2d0: 6964 7320 3d20 7b7d 0a20 2020 2020 2020  ids = {}.       
+0000c2c0: 2020 2020 2020 2020 2020 7461 6767 696e            taggin
+0000c2d0: 675f 6964 7320 3d20 7b7d 0a20 2020 2020  g_ids = {}.     
 0000c2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c300: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0000c310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c300: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+0000c310: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
 0000c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c330: 2020 2020 2020 2020 2020 2020 206c 656e               len
-0000c340: 2870 6c61 7965 725f 6f75 7470 7574 2e70  (player_output.p
-0000c350: 6c61 796c 6973 7429 0a20 2020 2020 2020  laylist).       
+0000c330: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0000c340: 656e 2870 6c61 7965 725f 6f75 7470 7574  en(player_output
+0000c350: 2e70 6c61 796c 6973 7429 0a20 2020 2020  .playlist).     
 0000c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c380: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+0000c380: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
 0000c390: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c3b0: 7461 6767 696e 675f 6964 735b 0a20 2020  tagging_ids[.   
+0000c3b0: 2020 7461 6767 696e 675f 6964 735b 0a20    tagging_ids[. 
 0000c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c3e0: 2020 2020 2020 2020 2020 2020 2069 6e74               int
-0000c3f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000c3e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000c3f0: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
 0000c400: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c420: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-0000c430: 7075 742e 706c 6179 6c69 7374 5b69 5d5b  put.playlist[i][
-0000c440: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
+0000c420: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+0000c430: 7574 7075 742e 706c 6179 6c69 7374 5b69  utput.playlist[i
+0000c440: 5d5b 305d 0a20 2020 2020 2020 2020 2020  ][0].           
 0000c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c470: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0000c470: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 0000c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c4a0: 205d 203d 2069 0a0a 2020 2020 2020 2020   ] = i..        
+0000c4a0: 2020 205d 203d 2069 0a0a 2020 2020 2020     ] = i..      
 0000c4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c4d0: 736f 6e67 735f 6669 6c65 203d 206f 7065  songs_file = ope
-0000c4e0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0000c4d0: 2020 736f 6e67 735f 6669 6c65 203d 206f    songs_file = o
+0000c4e0: 7065 6e28 0a20 2020 2020 2020 2020 2020  pen(.           
 0000c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c500: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000c510: 6f6e 6669 672e 534f 4e47 535f 494e 464f  onfig.SONGS_INFO
-0000c520: 5f50 4154 482c 0a20 2020 2020 2020 2020  _PATH,.         
+0000c500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c510: 2063 6f6e 6669 672e 534f 4e47 535f 494e   config.SONGS_IN
+0000c520: 464f 5f50 4154 482c 0a20 2020 2020 2020  FO_PATH,.       
 0000c530: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c550: 2020 2022 7222 2c0a 2020 2020 2020 2020     "r",.        
+0000c550: 2020 2020 2022 7222 2c0a 2020 2020 2020       "r",.      
 0000c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c580: 2020 2020 656e 636f 6469 6e67 3d22 7574      encoding="ut
-0000c590: 662d 3822 2c0a 2020 2020 2020 2020 2020  f-8",.          
+0000c580: 2020 2020 2020 656e 636f 6469 6e67 3d22        encoding="
+0000c590: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
 0000c5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c5b0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-0000c5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c5c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 0000c5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c5e0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
-0000c5f0: 736f 6e67 735f 6669 6c65 2e72 6561 6428  songs_file.read(
-0000c600: 292e 7370 6c69 746c 696e 6573 2829 0a20  ).splitlines(). 
-0000c610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c5e0: 2020 2020 2020 2020 2020 6c69 6e65 7320            lines 
+0000c5f0: 3d20 736f 6e67 735f 6669 6c65 2e72 6561  = songs_file.rea
+0000c600: 6428 292e 7370 6c69 746c 696e 6573 2829  d().splitlines()
+0000c610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c630: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0000c640: 7261 6e67 6528 6c65 6e28 6c69 6e65 7329  range(len(lines)
-0000c650: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000c630: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0000c640: 6e20 7261 6e67 6528 6c65 6e28 6c69 6e65  n range(len(line
+0000c650: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
 0000c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c670: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0000c680: 6574 6169 6c73 203d 2028 0a20 2020 2020  etails = (.     
+0000c670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c680: 2064 6574 6169 6c73 203d 2028 0a20 2020   details = (.   
 0000c690: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c6b0: 2020 2020 2020 2020 2020 206c 696e 6573             lines
-0000c6c0: 5b69 5d2e 7374 7269 7028 292e 7370 6c69  [i].strip().spli
-0000c6d0: 7428 227c 2229 0a20 2020 2020 2020 2020  t("|").         
+0000c6b0: 2020 2020 2020 2020 2020 2020 206c 696e               lin
+0000c6c0: 6573 5b69 5d2e 7374 7269 7028 292e 7370  es[i].strip().sp
+0000c6d0: 6c69 7428 227c 2229 0a20 2020 2020 2020  lit("|").       
 0000c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c700: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0000c700: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
 0000c710: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c730: 2073 6f6e 675f 6964 203d 2069 6e74 2864   song_id = int(d
-0000c740: 6574 6169 6c73 5b30 5d29 0a20 2020 2020  etails[0]).     
+0000c730: 2020 2073 6f6e 675f 6964 203d 2069 6e74     song_id = int
+0000c740: 2864 6574 6169 6c73 5b30 5d29 0a20 2020  (details[0]).   
 0000c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c770: 2020 2020 2020 2069 6620 736f 6e67 5f69         if song_i
-0000c780: 6420 696e 2074 6167 6769 6e67 5f69 6473  d in tagging_ids
-0000c790: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000c770: 2020 2020 2020 2020 2069 6620 736f 6e67           if song
+0000c780: 5f69 6420 696e 2074 6167 6769 6e67 5f69  _id in tagging_i
+0000c790: 6473 3a0a 2020 2020 2020 2020 2020 2020  ds:.            
 0000c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c7c0: 2020 6966 2064 6574 6169 6c73 5b32 5d3a    if details[2]:
-0000c7d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c7c0: 2020 2020 6966 2064 6574 6169 6c73 5b32      if details[2
+0000c7d0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
 0000c7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c800: 2020 2020 206e 6577 5f74 6167 7320 3d20       new_tags = 
-0000c810: 6465 7461 696c 735b 325d 2e73 706c 6974  details[2].split
-0000c820: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000c800: 2020 2020 2020 206e 6577 5f74 6167 7320         new_tags 
+0000c810: 3d20 6465 7461 696c 735b 325d 2e73 706c  = details[2].spl
+0000c820: 6974 280a 2020 2020 2020 2020 2020 2020  it(.            
 0000c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c850: 2020 2020 2020 2020 2020 222c 220a 2020            ",".  
+0000c850: 2020 2020 2020 2020 2020 2020 222c 220a              ",".
 0000c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c890: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0000c890: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
 0000c8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c8c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000c8c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
 0000c8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c8f0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0000c900: 775f 7461 6773 203d 205b 5d0a 2020 2020  w_tags = [].    
+0000c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c900: 6e65 775f 7461 6773 203d 205b 5d0a 2020  new_tags = [].  
 0000c910: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c930: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-0000c940: 7461 6773 202b 3d20 5b0a 2020 2020 2020  tags += [.      
+0000c930: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0000c940: 775f 7461 6773 202b 3d20 5b0a 2020 2020  w_tags += [.    
 0000c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c970: 2020 2020 2020 2020 2020 2020 2020 7461                ta
-0000c980: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+0000c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c980: 7461 670a 2020 2020 2020 2020 2020 2020  tag.            
 0000c990: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c9b0: 2020 2020 2020 666f 7220 7461 6720 696e        for tag in
-0000c9c0: 2074 6167 730a 2020 2020 2020 2020 2020   tags.          
+0000c9b0: 2020 2020 2020 2020 666f 7220 7461 6720          for tag 
+0000c9c0: 696e 2074 6167 730a 2020 2020 2020 2020  in tags.        
 0000c9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c9f0: 2020 2020 2020 2020 2020 6966 2074 6167            if tag
-0000ca00: 206e 6f74 2069 6e20 6e65 775f 7461 6773   not in new_tags
-0000ca10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c9f0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+0000ca00: 6167 206e 6f74 2069 6e20 6e65 775f 7461  ag not in new_ta
+0000ca10: 6773 0a20 2020 2020 2020 2020 2020 2020  gs.             
 0000ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca40: 205d 0a20 2020 2020 2020 2020 2020 2020   ].             
+0000ca40: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
 0000ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca70: 2020 2064 6574 6169 6c73 5b32 5d20 3d20     details[2] = 
-0000ca80: 222c 222e 6a6f 696e 286e 6577 5f74 6167  ",".join(new_tag
-0000ca90: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+0000ca70: 2020 2020 2064 6574 6169 6c73 5b32 5d20       details[2] 
+0000ca80: 3d20 222c 222e 6a6f 696e 286e 6577 5f74  = ",".join(new_t
+0000ca90: 6167 7329 0a20 2020 2020 2020 2020 2020  ags).           
 0000caa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cac0: 2020 206c 696e 6573 5b69 5d20 3d20 227c     lines[i] = "|
-0000cad0: 222e 6a6f 696e 2864 6574 6169 6c73 290a  ".join(details).
-0000cae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cac0: 2020 2020 206c 696e 6573 5b69 5d20 3d20       lines[i] = 
+0000cad0: 227c 222e 6a6f 696e 2864 6574 6169 6c73  "|".join(details
+0000cae0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 0000caf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cb10: 706c 6179 6572 5f6f 7574 7075 742e 706c  player_output.pl
-0000cb20: 6179 6c69 7374 5b0a 2020 2020 2020 2020  aylist[.        
+0000cb10: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
+0000cb20: 706c 6179 6c69 7374 5b0a 2020 2020 2020  playlist[.      
 0000cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cb50: 2020 2020 2020 2020 2020 2020 7461 6767              tagg
-0000cb60: 696e 675f 6964 735b 736f 6e67 5f69 645d  ing_ids[song_id]
-0000cb70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cb50: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+0000cb60: 6767 696e 675f 6964 735b 736f 6e67 5f69  gging_ids[song_i
+0000cb70: 645d 0a20 2020 2020 2020 2020 2020 2020  d].             
 0000cb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cba0: 205d 5b32 5d20 3d20 6465 7461 696c 735b   ][2] = details[
-0000cbb0: 325d 0a20 2020 2020 2020 2020 2020 2020  2].             
+0000cba0: 2020 205d 5b32 5d20 3d20 6465 7461 696c     ][2] = detail
+0000cbb0: 735b 325d 0a20 2020 2020 2020 2020 2020  s[2].           
 0000cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cbd0: 2020 2020 2020 2020 2020 2073 6f6e 6773             songs
-0000cbe0: 5f66 696c 652e 636c 6f73 6528 290a 0a20  _file.close().. 
-0000cbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cbd0: 2020 2020 2020 2020 2020 2020 2073 6f6e               son
+0000cbe0: 6773 5f66 696c 652e 636c 6f73 6528 290a  gs_file.close().
+0000cbf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000cc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc10: 2020 2020 2020 2073 6f6e 6773 5f66 696c         songs_fil
-0000cc20: 6520 3d20 6f70 656e 280a 2020 2020 2020  e = open(.      
+0000cc10: 2020 2020 2020 2020 2073 6f6e 6773 5f66           songs_f
+0000cc20: 696c 6520 3d20 6f70 656e 280a 2020 2020  ile = open(.    
 0000cc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc50: 2020 2020 2020 636f 6e66 6967 2e53 4f4e        config.SON
-0000cc60: 4753 5f49 4e46 4f5f 5041 5448 2c0a 2020  GS_INFO_PATH,.  
+0000cc50: 2020 2020 2020 2020 636f 6e66 6967 2e53          config.S
+0000cc60: 4f4e 4753 5f49 4e46 4f5f 5041 5448 2c0a  ONGS_INFO_PATH,.
 0000cc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc90: 2020 2020 2020 2020 2020 2277 222c 0a20            "w",. 
-0000cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cc90: 2020 2020 2020 2020 2020 2020 2277 222c              "w",
+0000cca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ccc0: 2020 2020 2020 2020 2020 2065 6e63 6f64             encod
-0000ccd0: 696e 673d 2275 7466 2d38 222c 0a20 2020  ing="utf-8",.   
+0000ccc0: 2020 2020 2020 2020 2020 2020 2065 6e63               enc
+0000ccd0: 6f64 696e 673d 2275 7466 2d38 222c 0a20  oding="utf-8",. 
 0000cce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd00: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0000cd00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
 0000cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd20: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000cd30: 6f6e 6773 5f66 696c 652e 7772 6974 6528  ongs_file.write(
-0000cd40: 225c 6e22 2e6a 6f69 6e28 6c69 6e65 7329  "\n".join(lines)
-0000cd50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd30: 2073 6f6e 6773 5f66 696c 652e 7772 6974   songs_file.writ
+0000cd40: 6528 225c 6e22 2e6a 6f69 6e28 6c69 6e65  e("\n".join(line
+0000cd50: 7329 290a 2020 2020 2020 2020 2020 2020  s)).            
 0000cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd70: 2020 2020 2020 2020 2020 736f 6e67 735f            songs_
-0000cd80: 6669 6c65 2e63 6c6f 7365 2829 0a0a 2020  file.close()..  
+0000cd70: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+0000cd80: 735f 6669 6c65 2e63 6c6f 7365 2829 0a0a  s_file.close()..
 0000cd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cdb0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-0000cdc0: 7075 742e 7072 6f6d 7074 696e 6720 3d20  put.prompting = 
-0000cdd0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000cdb0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+0000cdc0: 7574 7075 742e 7072 6f6d 7074 696e 6720  utput.prompting 
+0000cdd0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
 0000cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cdf0: 2020 2020 2020 2020 2020 2020 2063 7572               cur
-0000ce00: 7365 732e 6375 7273 5f73 6574 2846 616c  ses.curs_set(Fal
-0000ce10: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
+0000cdf0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000ce00: 7572 7365 732e 6375 7273 5f73 6574 2846  urses.curs_set(F
+0000ce10: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
 0000ce20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce30: 2020 2020 2020 2020 2020 2020 706c 6179              play
-0000ce40: 6572 5f6f 7574 7075 742e 6f75 7470 7574  er_output.output
-0000ce50: 2870 6c61 7962 6163 6b2e 6375 7272 5f70  (playback.curr_p
-0000ce60: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
+0000ce30: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+0000ce40: 6179 6572 5f6f 7574 7075 742e 6f75 7470  ayer_output.outp
+0000ce50: 7574 2870 6c61 7962 6163 6b2e 6375 7272  ut(playback.curr
+0000ce60: 5f70 6f73 290a 2020 2020 2020 2020 2020  _pos).          
 0000ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce80: 2020 2020 656c 6966 2063 2069 6e20 225c      elif c in "\
-0000ce90: 625c 7837 6622 3a0a 2020 2020 2020 2020  b\x7f":.        
+0000ce80: 2020 2020 2020 656c 6966 2063 2069 6e20        elif c in 
+0000ce90: 225c 625c 7837 6622 3a0a 2020 2020 2020  "\b\x7f":.      
 0000cea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ceb0: 2020 2020 2020 2020 2020 2020 2320 7079              # py
-0000cec0: 6c69 6e74 3a20 6469 7361 626c 653d 756e  lint: disable=un
-0000ced0: 7375 6273 6372 6970 7461 626c 652d 6f62  subscriptable-ob
-0000cee0: 6a65 6374 0a20 2020 2020 2020 2020 2020  ject.           
+0000ceb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000cec0: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
+0000ced0: 756e 7375 6273 6372 6970 7461 626c 652d  unsubscriptable-
+0000cee0: 6f62 6a65 6374 0a20 2020 2020 2020 2020  object.         
 0000cef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf00: 2020 2020 2020 2020 2069 6620 706c 6179           if play
-0000cf10: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
-0000cf20: 696e 675b 315d 203e 2030 3a0a 2020 2020  ing[1] > 0:.    
+0000cf00: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
+0000cf10: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
+0000cf20: 7074 696e 675b 315d 203e 2030 3a0a 2020  pting[1] > 0:.  
 0000cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf50: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
-0000cf60: 742e 7072 6f6d 7074 696e 6720 3d20 280a  t.prompting = (.
-0000cf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf50: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
+0000cf60: 7075 742e 7072 6f6d 7074 696e 6720 3d20  put.prompting = 
+0000cf70: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
 0000cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf90: 2020 2020 2020 2020 2020 2020 706c 6179              play
-0000cfa0: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
-0000cfb0: 696e 675b 305d 5b0a 2020 2020 2020 2020  ing[0][.        
+0000cf90: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+0000cfa0: 6179 6572 5f6f 7574 7075 742e 7072 6f6d  ayer_output.prom
+0000cfb0: 7074 696e 675b 305d 5b0a 2020 2020 2020  pting[0][.      
 0000cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cfe0: 2020 2020 2020 2020 3a20 706c 6179 6572          : player
-0000cff0: 5f6f 7574 7075 742e 7072 6f6d 7074 696e  _output.promptin
-0000d000: 675b 315d 202d 2031 0a20 2020 2020 2020  g[1] - 1.       
+0000cfe0: 2020 2020 2020 2020 2020 3a20 706c 6179            : play
+0000cff0: 6572 5f6f 7574 7075 742e 7072 6f6d 7074  er_output.prompt
+0000d000: 696e 675b 315d 202d 2031 0a20 2020 2020  ing[1] - 1.     
 0000d010: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d030: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
+0000d030: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
 0000d040: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d060: 2020 202b 2070 6c61 7965 725f 6f75 7470     + player_outp
-0000d070: 7574 2e70 726f 6d70 7469 6e67 5b30 5d5b  ut.prompting[0][
-0000d080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d060: 2020 2020 202b 2070 6c61 7965 725f 6f75       + player_ou
+0000d070: 7470 7574 2e70 726f 6d70 7469 6e67 5b30  tput.prompting[0
+0000d080: 5d5b 0a20 2020 2020 2020 2020 2020 2020  ][.             
 0000d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d0b0: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-0000d0c0: 726f 6d70 7469 6e67 5b31 5d20 3a0a 2020  rompting[1] :.  
+0000d0b0: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+0000d0c0: 2e70 726f 6d70 7469 6e67 5b31 5d20 3a0a  .prompting[1] :.
 0000d0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d0f0: 2020 2020 2020 2020 2020 5d2c 0a20 2020            ],.   
+0000d0f0: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
 0000d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d120: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
-0000d130: 6f75 7470 7574 2e70 726f 6d70 7469 6e67  output.prompting
-0000d140: 5b31 5d20 2d20 312c 0a20 2020 2020 2020  [1] - 1,.       
+0000d120: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
+0000d130: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
+0000d140: 6e67 5b31 5d20 2d20 312c 0a20 2020 2020  ng[1] - 1,.     
 0000d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d170: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
-0000d180: 7574 2e70 726f 6d70 7469 6e67 5b32 5d2c  ut.prompting[2],
-0000d190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d170: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
+0000d180: 7470 7574 2e70 726f 6d70 7469 6e67 5b32  tput.prompting[2
+0000d190: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
 0000d1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d1b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0000d1b0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
 0000d1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d1d0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000d1e0: 6c61 7965 725f 6f75 7470 7574 2e6f 7574  layer_output.out
-0000d1f0: 7075 7428 706c 6179 6261 636b 2e63 7572  put(playback.cur
-0000d200: 725f 706f 7329 0a20 2020 2020 2020 2020  r_pos).         
+0000d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d1e0: 2070 6c61 7965 725f 6f75 7470 7574 2e6f   player_output.o
+0000d1f0: 7574 7075 7428 706c 6179 6261 636b 2e63  utput(playback.c
+0000d200: 7572 725f 706f 7329 0a20 2020 2020 2020  urr_pos).       
 0000d210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d220: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000d220: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
 0000d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d250: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
-0000d260: 726f 6d70 7469 6e67 203d 2028 0a20 2020  rompting = (.   
+0000d250: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+0000d260: 2e70 726f 6d70 7469 6e67 203d 2028 0a20  .prompting = (. 
 0000d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d290: 2020 2020 2023 2070 796c 696e 743a 2064       # pylint: d
-0000d2a0: 6973 6162 6c65 3d75 6e73 7562 7363 7269  isable=unsubscri
-0000d2b0: 7074 6162 6c65 2d6f 626a 6563 740a 2020  ptable-object.  
+0000d290: 2020 2020 2020 2023 2070 796c 696e 743a         # pylint:
+0000d2a0: 2064 6973 6162 6c65 3d75 6e73 7562 7363   disable=unsubsc
+0000d2b0: 7269 7074 6162 6c65 2d6f 626a 6563 740a  riptable-object.
 0000d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d2e0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-0000d2f0: 7075 742e 7072 6f6d 7074 696e 675b 305d  put.prompting[0]
-0000d300: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+0000d2e0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+0000d2f0: 7574 7075 742e 7072 6f6d 7074 696e 675b  utput.prompting[
+0000d300: 305d 5b0a 2020 2020 2020 2020 2020 2020  0][.            
 0000d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d320: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
-0000d330: 706c 6179 6572 5f6f 7574 7075 742e 7072  player_output.pr
-0000d340: 6f6d 7074 696e 675b 315d 0a20 2020 2020  ompting[1].     
+0000d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d330: 3a20 706c 6179 6572 5f6f 7574 7075 742e  : player_output.
+0000d340: 7072 6f6d 7074 696e 675b 315d 0a20 2020  prompting[1].   
 0000d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d370: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
+0000d370: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
 0000d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d390: 2020 2020 2020 2020 2020 2020 202b 2063               + c
-0000d3a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d390: 2020 2020 2020 2020 2020 2020 2020 202b                 +
+0000d3a0: 2063 0a20 2020 2020 2020 2020 2020 2020   c.             
 0000d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d3c0: 2020 2020 2020 2020 202b 2070 6c61 7965           + playe
-0000d3d0: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
-0000d3e0: 6e67 5b30 5d5b 0a20 2020 2020 2020 2020  ng[0][.         
+0000d3c0: 2020 2020 2020 2020 2020 202b 2070 6c61             + pla
+0000d3d0: 7965 725f 6f75 7470 7574 2e70 726f 6d70  yer_output.promp
+0000d3e0: 7469 6e67 5b30 5d5b 0a20 2020 2020 2020  ting[0][.       
 0000d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d410: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-0000d420: 2e70 726f 6d70 7469 6e67 5b31 5d20 3a0a  .prompting[1] :.
-0000d430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d410: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+0000d420: 7574 2e70 726f 6d70 7469 6e67 5b31 5d20  ut.prompting[1] 
+0000d430: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
 0000d440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d450: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+0000d450: 2020 2020 2020 2020 2020 5d2c 0a20 2020            ],.   
 0000d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d480: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
-0000d490: 2e70 726f 6d70 7469 6e67 5b31 5d20 2b20  .prompting[1] + 
-0000d4a0: 312c 0a20 2020 2020 2020 2020 2020 2020  1,.             
+0000d480: 2020 2020 2070 6c61 7965 725f 6f75 7470       player_outp
+0000d490: 7574 2e70 726f 6d70 7469 6e67 5b31 5d20  ut.prompting[1] 
+0000d4a0: 2b20 312c 0a20 2020 2020 2020 2020 2020  + 1,.           
 0000d4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d4c0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-0000d4d0: 725f 6f75 7470 7574 2e70 726f 6d70 7469  r_output.prompti
-0000d4e0: 6e67 5b32 5d2c 0a20 2020 2020 2020 2020  ng[2],.         
+0000d4c0: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+0000d4d0: 7965 725f 6f75 7470 7574 2e70 726f 6d70  yer_output.promp
+0000d4e0: 7469 6e67 5b32 5d2c 0a20 2020 2020 2020  ting[2],.       
 0000d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d500: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000d500: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
 0000d510: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000d520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d530: 2070 6c61 7965 725f 6f75 7470 7574 2e6f   player_output.o
-0000d540: 7574 7075 7428 706c 6179 6261 636b 2e63  utput(playback.c
-0000d550: 7572 725f 706f 7329 0a20 2020 2020 2020  urr_pos).       
+0000d530: 2020 2070 6c61 7965 725f 6f75 7470 7574     player_output
+0000d540: 2e6f 7574 7075 7428 706c 6179 6261 636b  .output(playback
+0000d550: 2e63 7572 725f 706f 7329 0a20 2020 2020  .curr_pos).     
 0000d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d570: 2020 2020 2065 7863 6570 7420 2856 616c       except (Val
-0000d580: 7565 4572 726f 722c 204f 7665 7266 6c6f  ueError, Overflo
-0000d590: 7745 7272 6f72 293a 0a20 2020 2020 2020  wError):.       
+0000d570: 2020 2020 2020 2065 7863 6570 7420 2856         except (V
+0000d580: 616c 7565 4572 726f 722c 204f 7665 7266  alueError, Overf
+0000d590: 6c6f 7745 7272 6f72 293a 0a20 2020 2020  lowError):.     
 0000d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d5b0: 2020 2020 2020 2020 2070 6173 730a 0a20           pass.. 
-0000d5c0: 2020 2020 2020 2020 2020 2069 6620 7379             if sy
-0000d5d0: 732e 706c 6174 666f 726d 203d 3d20 2264  s.platform == "d
-0000d5e0: 6172 7769 6e22 2061 6e64 2063 616e 5f6d  arwin" and can_m
-0000d5f0: 6163 5f6e 6f77 5f70 6c61 7969 6e67 3a0a  ac_now_playing:.
-0000d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d610: 6966 2061 6273 286d 6163 5f6e 6f77 5f70  if abs(mac_now_p
-0000d620: 6c61 7969 6e67 2e70 6f73 202d 2070 6c61  laying.pos - pla
-0000d630: 7962 6163 6b2e 6375 7272 5f70 6f73 2920  yback.curr_pos) 
-0000d640: 3e20 323a 0a20 2020 2020 2020 2020 2020  > 2:.           
-0000d650: 2020 2020 2020 2020 2070 6c61 7962 6163           playbac
-0000d660: 6b2e 7365 656b 286d 6163 5f6e 6f77 5f70  k.seek(mac_now_p
-0000d670: 6c61 7969 6e67 2e70 6f73 290a 2020 2020  laying.pos).    
+0000d5b0: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+0000d5c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000d5d0: 7379 732e 706c 6174 666f 726d 203d 3d20  sys.platform == 
+0000d5e0: 2264 6172 7769 6e22 2061 6e64 2063 616e  "darwin" and can
+0000d5f0: 5f6d 6163 5f6e 6f77 5f70 6c61 7969 6e67  _mac_now_playing
+0000d600: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000d610: 2020 6966 2061 6273 286d 6163 5f6e 6f77    if abs(mac_now
+0000d620: 5f70 6c61 7969 6e67 2e70 6f73 202d 2070  _playing.pos - p
+0000d630: 6c61 7962 6163 6b2e 6375 7272 5f70 6f73  layback.curr_pos
+0000d640: 2920 3e20 323a 0a20 2020 2020 2020 2020  ) > 2:.         
+0000d650: 2020 2020 2020 2020 2020 2070 6c61 7962             playb
+0000d660: 6163 6b2e 7365 656b 286d 6163 5f6e 6f77  ack.seek(mac_now
+0000d670: 5f70 6c61 7969 6e67 2e70 6f73 290a 2020  _playing.pos).  
 0000d680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d690: 6c61 7374 5f74 696d 6573 7461 6d70 203d  last_timestamp =
-0000d6a0: 206d 6163 5f6e 6f77 5f70 6c61 7969 6e67   mac_now_playing
-0000d6b0: 2e70 6f73 0a20 2020 2020 2020 2020 2020  .pos.           
-0000d6c0: 2020 2020 2020 2020 2075 7064 6174 655f           update_
-0000d6d0: 6e6f 775f 706c 6179 696e 6720 3d20 5472  now_playing = Tr
-0000d6e0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-0000d6f0: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
-0000d700: 7470 7574 2e6f 7574 7075 7428 706c 6179  tput.output(play
-0000d710: 6261 636b 2e63 7572 725f 706f 7329 0a20  back.curr_pos). 
-0000d720: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000d730: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000d740: 2020 2020 2020 2020 206d 6163 5f6e 6f77           mac_now
-0000d750: 5f70 6c61 7969 6e67 2e70 6f73 203d 2072  _playing.pos = r
-0000d760: 6f75 6e64 2870 6c61 7962 6163 6b2e 6375  ound(playback.cu
-0000d770: 7272 5f70 6f73 290a 0a20 2020 2020 2020  rr_pos)..       
-0000d780: 2020 2020 2070 726f 6772 6573 735f 6261       progress_ba
-0000d790: 725f 7769 6474 6820 3d20 7374 6473 6372  r_width = stdscr
-0000d7a0: 2e67 6574 6d61 7879 7828 295b 315d 202d  .getmaxyx()[1] -
-0000d7b0: 2031 380a 2020 2020 2020 2020 2020 2020   18.            
-0000d7c0: 6672 616d 655f 6475 7261 7469 6f6e 203d  frame_duration =
-0000d7d0: 206d 696e 280a 2020 2020 2020 2020 2020   min(.          
-0000d7e0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
-0000d7f0: 2020 2020 2020 2020 2020 2020 310a 2020              1.  
+0000d690: 2020 6c61 7374 5f74 696d 6573 7461 6d70    last_timestamp
+0000d6a0: 203d 206d 6163 5f6e 6f77 5f70 6c61 7969   = mac_now_playi
+0000d6b0: 6e67 2e70 6f73 0a20 2020 2020 2020 2020  ng.pos.         
+0000d6c0: 2020 2020 2020 2020 2020 2075 7064 6174             updat
+0000d6d0: 655f 6e6f 775f 706c 6179 696e 6720 3d20  e_now_playing = 
+0000d6e0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+0000d6f0: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
+0000d700: 6f75 7470 7574 2e6f 7574 7075 7428 706c  output.output(pl
+0000d710: 6179 6261 636b 2e63 7572 725f 706f 7329  ayback.curr_pos)
+0000d720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d730: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000d740: 2020 2020 2020 2020 2020 206d 6163 5f6e             mac_n
+0000d750: 6f77 5f70 6c61 7969 6e67 2e70 6f73 203d  ow_playing.pos =
+0000d760: 2072 6f75 6e64 2870 6c61 7962 6163 6b2e   round(playback.
+0000d770: 6375 7272 5f70 6f73 290a 0a20 2020 2020  curr_pos)..     
+0000d780: 2020 2020 2020 2070 726f 6772 6573 735f         progress_
+0000d790: 6261 725f 7769 6474 6820 3d20 7374 6473  bar_width = stds
+0000d7a0: 6372 2e67 6574 6d61 7879 7828 295b 315d  cr.getmaxyx()[1]
+0000d7b0: 202d 2031 380a 2020 2020 2020 2020 2020   - 18.          
+0000d7c0: 2020 6672 616d 655f 6475 7261 7469 6f6e    frame_duration
+0000d7d0: 203d 206d 696e 280a 2020 2020 2020 2020   = min(.        
+0000d7e0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+0000d7f0: 2020 2020 2020 2020 2020 2020 2020 310a                1.
 0000d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d810: 2020 6966 2070 726f 6772 6573 735f 6261    if progress_ba
-0000d820: 725f 7769 6474 6820 3c20 636f 6e66 6967  r_width < config
-0000d830: 2e4d 494e 5f50 524f 4752 4553 535f 4241  .MIN_PROGRESS_BA
-0000d840: 525f 5749 4454 480a 2020 2020 2020 2020  R_WIDTH.        
-0000d850: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0000d860: 2070 6c61 7965 725f 6f75 7470 7574 2e64   player_output.d
-0000d870: 7572 6174 696f 6e20 2f20 2870 726f 6772  uration / (progr
-0000d880: 6573 735f 6261 725f 7769 6474 6820 2a20  ess_bar_width * 
-0000d890: 3829 0a20 2020 2020 2020 2020 2020 2020  8).             
-0000d8a0: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
-0000d8b0: 2020 2020 2020 3120 2f20 636f 6e66 6967        1 / config
-0000d8c0: 2e46 5053 2069 6620 706c 6179 6572 5f6f  .FPS if player_o
-0000d8d0: 7574 7075 742e 7669 7375 616c 697a 6520  utput.visualize 
-0000d8e0: 656c 7365 2031 2c0a 2020 2020 2020 2020  else 1,.        
-0000d8f0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000d900: 2020 6966 2061 6273 2870 6c61 7962 6163    if abs(playbac
-0000d910: 6b2e 6375 7272 5f70 6f73 202d 206c 6173  k.curr_pos - las
-0000d920: 745f 7469 6d65 7374 616d 7029 203e 2066  t_timestamp) > f
-0000d930: 7261 6d65 5f64 7572 6174 696f 6e3a 0a20  rame_duration:. 
-0000d940: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0000d950: 6173 745f 7469 6d65 7374 616d 7020 3d20  ast_timestamp = 
-0000d960: 706c 6179 6261 636b 2e63 7572 725f 706f  playback.curr_po
-0000d970: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-0000d980: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
-0000d990: 6f75 7470 7574 2870 6c61 7962 6163 6b2e  output(playback.
-0000d9a0: 6375 7272 5f70 6f73 290a 0a20 2020 2020  curr_pos)..     
-0000d9b0: 2020 2020 2020 2023 2073 6c65 6570 2830         # sleep(0
-0000d9c0: 2e30 3129 2020 2320 4e4f 5445 3a20 736f  .01)  # NOTE: so
-0000d9d0: 2043 5055 2075 7361 6765 2064 6f65 736e   CPU usage doesn
-0000d9e0: 2774 2066 6c79 2074 6872 6f75 6768 2074  't fly through t
-0000d9f0: 6865 2072 6f6f 660a 0a20 2020 2020 2020  he roof..       
-0000da00: 2023 2072 6567 696f 6e20 7374 6174 730a   # region stats.
-0000da10: 2020 2020 2020 2020 7469 6d65 5f6c 6973          time_lis
-0000da20: 7465 6e65 6420 3d20 7469 6d65 2829 202d  tened = time() -
-0000da30: 2073 7461 7274 5f74 696d 650a 2020 2020   start_time.    
-0000da40: 2020 2020 6966 2070 6c61 7965 725f 6f75      if player_ou
-0000da50: 7470 7574 2e70 6175 7365 643a 0a20 2020  tput.paused:.   
-0000da60: 2020 2020 2020 2020 2074 696d 655f 6c69           time_li
-0000da70: 7374 656e 6564 202d 3d20 7469 6d65 2829  stened -= time()
-0000da80: 202d 2070 6175 7365 5f73 7461 7274 0a0a   - pause_start..
-0000da90: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-0000daa0: 6e28 636f 6e66 6967 2e54 4f54 414c 5f53  n(config.TOTAL_S
-0000dab0: 5441 5453 5f50 4154 482c 2022 722b 222c  TATS_PATH, "r+",
-0000dac0: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-0000dad0: 2229 2061 7320 7374 6174 735f 6669 6c65  ") as stats_file
-0000dae0: 3a0a 2020 2020 2020 2020 2020 2020 6c69  :.            li
-0000daf0: 6e65 7320 3d20 7374 6174 735f 6669 6c65  nes = stats_file
-0000db00: 2e72 6561 646c 696e 6573 2829 0a20 2020  .readlines().   
-0000db10: 2020 2020 2020 2020 2066 6f72 206a 2069           for j i
-0000db20: 6e20 7261 6e67 6528 6c65 6e28 6c69 6e65  n range(len(line
-0000db30: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-0000db40: 2020 2020 2073 6f6e 675f 6964 2c20 6c69       song_id, li
-0000db50: 7374 656e 6564 203d 206c 696e 6573 5b6a  stened = lines[j
-0000db60: 5d2e 7374 7269 7028 292e 7370 6c69 7428  ].strip().split(
-0000db70: 227c 2229 0a20 2020 2020 2020 2020 2020  "|").           
-0000db80: 2020 2020 2069 6620 736f 6e67 5f69 6420       if song_id 
-0000db90: 3d3d 2070 6c61 7965 725f 6f75 7470 7574  == player_output
-0000dba0: 2e70 6c61 796c 6973 745b 706c 6179 6572  .playlist[player
-0000dbb0: 5f6f 7574 7075 742e 695d 5b30 5d3a 0a20  _output.i][0]:. 
-0000dbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dbd0: 2020 206c 6973 7465 6e65 6420 3d20 666c     listened = fl
-0000dbe0: 6f61 7428 6c69 7374 656e 6564 2920 2b20  oat(listened) + 
-0000dbf0: 7469 6d65 5f6c 6973 7465 6e65 640a 2020  time_listened.  
+0000d810: 2020 2020 6966 2070 726f 6772 6573 735f      if progress_
+0000d820: 6261 725f 7769 6474 6820 3c20 636f 6e66  bar_width < conf
+0000d830: 6967 2e4d 494e 5f50 524f 4752 4553 535f  ig.MIN_PROGRESS_
+0000d840: 4241 525f 5749 4454 480a 2020 2020 2020  BAR_WIDTH.      
+0000d850: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0000d860: 7365 2070 6c61 7965 725f 6f75 7470 7574  se player_output
+0000d870: 2e64 7572 6174 696f 6e20 2f20 2870 726f  .duration / (pro
+0000d880: 6772 6573 735f 6261 725f 7769 6474 6820  gress_bar_width 
+0000d890: 2a20 3829 0a20 2020 2020 2020 2020 2020  * 8).           
+0000d8a0: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+0000d8b0: 2020 2020 2020 2020 3120 2f20 636f 6e66          1 / conf
+0000d8c0: 6967 2e46 5053 2069 6620 706c 6179 6572  ig.FPS if player
+0000d8d0: 5f6f 7574 7075 742e 7669 7375 616c 697a  _output.visualiz
+0000d8e0: 6520 656c 7365 2031 2c0a 2020 2020 2020  e else 1,.      
+0000d8f0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000d900: 2020 2020 6966 2061 6273 2870 6c61 7962      if abs(playb
+0000d910: 6163 6b2e 6375 7272 5f70 6f73 202d 206c  ack.curr_pos - l
+0000d920: 6173 745f 7469 6d65 7374 616d 7029 203e  ast_timestamp) >
+0000d930: 2066 7261 6d65 5f64 7572 6174 696f 6e3a   frame_duration:
+0000d940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d950: 206c 6173 745f 7469 6d65 7374 616d 7020   last_timestamp 
+0000d960: 3d20 706c 6179 6261 636b 2e63 7572 725f  = playback.curr_
+0000d970: 706f 730a 2020 2020 2020 2020 2020 2020  pos.            
+0000d980: 2020 2020 706c 6179 6572 5f6f 7574 7075      player_outpu
+0000d990: 742e 6f75 7470 7574 2870 6c61 7962 6163  t.output(playbac
+0000d9a0: 6b2e 6375 7272 5f70 6f73 290a 0a20 2020  k.curr_pos)..   
+0000d9b0: 2020 2020 2020 2020 2023 2073 6c65 6570           # sleep
+0000d9c0: 2830 2e30 3129 2020 2320 4e4f 5445 3a20  (0.01)  # NOTE: 
+0000d9d0: 736f 2043 5055 2075 7361 6765 2064 6f65  so CPU usage doe
+0000d9e0: 736e 2774 2066 6c79 2074 6872 6f75 6768  sn't fly through
+0000d9f0: 2074 6865 2072 6f6f 660a 0a20 2020 2020   the roof..     
+0000da00: 2020 2023 2072 6567 696f 6e20 7374 6174     # region stat
+0000da10: 730a 2020 2020 2020 2020 7469 6d65 5f6c  s.        time_l
+0000da20: 6973 7465 6e65 6420 3d20 7469 6d65 2829  istened = time()
+0000da30: 202d 2073 7461 7274 5f74 696d 650a 2020   - start_time.  
+0000da40: 2020 2020 2020 6966 2070 6c61 7965 725f        if player_
+0000da50: 6f75 7470 7574 2e70 6175 7365 643a 0a20  output.paused:. 
+0000da60: 2020 2020 2020 2020 2020 2074 696d 655f             time_
+0000da70: 6c69 7374 656e 6564 202d 3d20 7469 6d65  listened -= time
+0000da80: 2829 202d 2070 6175 7365 5f73 7461 7274  () - pause_start
+0000da90: 0a0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
+0000daa0: 7065 6e28 636f 6e66 6967 2e54 4f54 414c  pen(config.TOTAL
+0000dab0: 5f53 5441 5453 5f50 4154 482c 2022 722b  _STATS_PATH, "r+
+0000dac0: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
+0000dad0: 2d38 2229 2061 7320 7374 6174 735f 6669  -8") as stats_fi
+0000dae0: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
+0000daf0: 6c69 6e65 7320 3d20 7374 6174 735f 6669  lines = stats_fi
+0000db00: 6c65 2e72 6561 646c 696e 6573 2829 0a20  le.readlines(). 
+0000db10: 2020 2020 2020 2020 2020 2066 6f72 206a             for j
+0000db20: 2069 6e20 7261 6e67 6528 6c65 6e28 6c69   in range(len(li
+0000db30: 6e65 7329 293a 0a20 2020 2020 2020 2020  nes)):.         
+0000db40: 2020 2020 2020 2073 6f6e 675f 6964 2c20         song_id, 
+0000db50: 6c69 7374 656e 6564 203d 206c 696e 6573  listened = lines
+0000db60: 5b6a 5d2e 7374 7269 7028 292e 7370 6c69  [j].strip().spli
+0000db70: 7428 227c 2229 0a20 2020 2020 2020 2020  t("|").         
+0000db80: 2020 2020 2020 2069 6620 736f 6e67 5f69         if song_i
+0000db90: 6420 3d3d 2070 6c61 7965 725f 6f75 7470  d == player_outp
+0000dba0: 7574 2e70 6c61 796c 6973 745b 706c 6179  ut.playlist[play
+0000dbb0: 6572 5f6f 7574 7075 742e 695d 5b30 5d3a  er_output.i][0]:
+0000dbc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dbd0: 2020 2020 206c 6973 7465 6e65 6420 3d20       listened = 
+0000dbe0: 666c 6f61 7428 6c69 7374 656e 6564 2920  float(listened) 
+0000dbf0: 2b20 7469 6d65 5f6c 6973 7465 6e65 640a  + time_listened.
 0000dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc10: 2020 6c69 6e65 735b 6a5d 203d 2066 227b    lines[j] = f"{
-0000dc20: 736f 6e67 5f69 647d 7c7b 6c69 7374 656e  song_id}|{listen
-0000dc30: 6564 7d5c 6e22 0a20 2020 2020 2020 2020  ed}\n".         
-0000dc40: 2020 2020 2020 2020 2020 2062 7265 616b             break
-0000dc50: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0000dc60: 7772 6974 6520 6f75 740a 2020 2020 2020  write out.      
-0000dc70: 2020 2020 2020 7374 6174 735f 6669 6c65        stats_file
-0000dc80: 2e73 6565 6b28 3029 0a20 2020 2020 2020  .seek(0).       
-0000dc90: 2020 2020 2073 7461 7473 5f66 696c 652e       stats_file.
-0000dca0: 7772 6974 6528 2222 2e6a 6f69 6e28 6c69  write("".join(li
-0000dcb0: 6e65 7329 290a 2020 2020 2020 2020 2020  nes)).          
-0000dcc0: 2020 7374 6174 735f 6669 6c65 2e74 7275    stats_file.tru
-0000dcd0: 6e63 6174 6528 290a 0a20 2020 2020 2020  ncate()..       
-0000dce0: 2077 6974 6820 6f70 656e 2863 6f6e 6669   with open(confi
-0000dcf0: 672e 4355 525f 5945 4152 5f53 5441 5453  g.CUR_YEAR_STATS
-0000dd00: 5f50 4154 482c 2022 722b 222c 2065 6e63  _PATH, "r+", enc
-0000dd10: 6f64 696e 673d 2275 7466 2d38 2229 2061  oding="utf-8") a
-0000dd20: 7320 7374 6174 735f 6669 6c65 3a0a 2020  s stats_file:.  
-0000dd30: 2020 2020 2020 2020 2020 6c69 6e65 7320            lines 
-0000dd40: 3d20 7374 6174 735f 6669 6c65 2e72 6561  = stats_file.rea
-0000dd50: 646c 696e 6573 2829 0a20 2020 2020 2020  dlines().       
-0000dd60: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
-0000dd70: 6e67 6528 6c65 6e28 6c69 6e65 7329 293a  nge(len(lines)):
-0000dd80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000dd90: 2073 6f6e 675f 6964 2c20 6c69 7374 656e   song_id, listen
-0000dda0: 6564 203d 206c 696e 6573 5b6a 5d2e 7374  ed = lines[j].st
-0000ddb0: 7269 7028 292e 7370 6c69 7428 227c 2229  rip().split("|")
-0000ddc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ddd0: 2069 6620 736f 6e67 5f69 6420 3d3d 2070   if song_id == p
-0000dde0: 6c61 7965 725f 6f75 7470 7574 2e70 6c61  layer_output.pla
-0000ddf0: 796c 6973 745b 706c 6179 6572 5f6f 7574  ylist[player_out
-0000de00: 7075 742e 695d 5b30 5d3a 0a20 2020 2020  put.i][0]:.     
-0000de10: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0000de20: 6973 7465 6e65 6420 3d20 666c 6f61 7428  istened = float(
-0000de30: 6c69 7374 656e 6564 2920 2b20 7469 6d65  listened) + time
-0000de40: 5f6c 6973 7465 6e65 640a 2020 2020 2020  _listened.      
-0000de50: 2020 2020 2020 2020 2020 2020 2020 6c69                li
-0000de60: 6e65 735b 6a5d 203d 2066 227b 736f 6e67  nes[j] = f"{song
-0000de70: 5f69 647d 7c7b 6c69 7374 656e 6564 7d5c  _id}|{listened}\
-0000de80: 6e22 0a20 2020 2020 2020 2020 2020 2020  n".             
-0000de90: 2020 2020 2020 2062 7265 616b 0a0a 2020         break..  
-0000dea0: 2020 2020 2020 2020 2020 2320 7772 6974            # writ
-0000deb0: 6520 6f75 740a 2020 2020 2020 2020 2020  e out.          
-0000dec0: 2020 7374 6174 735f 6669 6c65 2e73 6565    stats_file.see
-0000ded0: 6b28 3029 0a20 2020 2020 2020 2020 2020  k(0).           
-0000dee0: 2073 7461 7473 5f66 696c 652e 7772 6974   stats_file.writ
-0000def0: 6528 2222 2e6a 6f69 6e28 6c69 6e65 7329  e("".join(lines)
-0000df00: 290a 2020 2020 2020 2020 2020 2020 7374  ).            st
-0000df10: 6174 735f 6669 6c65 2e74 7275 6e63 6174  ats_file.truncat
-0000df20: 6528 290a 2020 2020 2020 2020 2320 656e  e().        # en
-0000df30: 6472 6567 696f 6e0a 0a20 2020 2020 2020  dregion..       
-0000df40: 2069 6620 706c 6179 6572 5f6f 7574 7075   if player_outpu
-0000df50: 742e 656e 6469 6e67 3a0a 2020 2020 2020  t.ending:.      
-0000df60: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
-0000df70: 2020 2020 2020 6966 206e 6578 745f 736f        if next_so
-0000df80: 6e67 203d 3d20 2d31 3a0a 2020 2020 2020  ng == -1:.      
-0000df90: 2020 2020 2020 6966 2070 6c61 7965 725f        if player_
-0000dfa0: 6f75 7470 7574 2e69 203d 3d20 706c 6179  output.i == play
-0000dfb0: 6572 5f6f 7574 7075 742e 7363 726f 6c6c  er_output.scroll
-0000dfc0: 6572 2e70 6f73 3a0a 2020 2020 2020 2020  er.pos:.        
-0000dfd0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
-0000dfe0: 7574 7075 742e 7363 726f 6c6c 6572 2e73  utput.scroller.s
-0000dff0: 6372 6f6c 6c5f 6261 636b 7761 7264 2829  croll_backward()
-0000e000: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
-0000e010: 7965 725f 6f75 7470 7574 2e69 202d 3d20  yer_output.i -= 
-0000e020: 310a 2020 2020 2020 2020 656c 6966 206e  1.        elif n
-0000e030: 6578 745f 736f 6e67 203d 3d20 313a 0a20  ext_song == 1:. 
-0000e040: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
-0000e050: 6179 6572 5f6f 7574 7075 742e 6920 3d3d  ayer_output.i ==
-0000e060: 206c 656e 2870 6c61 7965 725f 6f75 7470   len(player_outp
-0000e070: 7574 2e70 6c61 796c 6973 7429 202d 2031  ut.playlist) - 1
-0000e080: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000e090: 2020 6966 206c 6f6f 703a 0a20 2020 2020    if loop:.     
-0000e0a0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0000e0b0: 6578 745f 6e65 7874 5f70 6c61 796c 6973  ext_next_playlis
-0000e0c0: 7420 3d20 6e65 7874 5f70 6c61 796c 6973  t = next_playlis
-0000e0d0: 745b 3a5d 0a20 2020 2020 2020 2020 2020  t[:].           
-0000e0e0: 2020 2020 2020 2020 2069 6620 7265 7368           if resh
-0000e0f0: 7566 666c 653a 0a20 2020 2020 2020 2020  uffle:.         
-0000e100: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000e110: 6875 6666 6c65 286e 6578 745f 6e65 7874  huffle(next_next
-0000e120: 5f70 6c61 796c 6973 7429 0a20 2020 2020  _playlist).     
-0000e130: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000e140: 6c61 7965 725f 6f75 7470 7574 2e70 6c61  layer_output.pla
-0000e150: 796c 6973 742c 206e 6578 745f 706c 6179  ylist, next_play
-0000e160: 6c69 7374 203d 2028 0a20 2020 2020 2020  list = (.       
+0000dc10: 2020 2020 6c69 6e65 735b 6a5d 203d 2066      lines[j] = f
+0000dc20: 227b 736f 6e67 5f69 647d 7c7b 6c69 7374  "{song_id}|{list
+0000dc30: 656e 6564 7d5c 6e22 0a20 2020 2020 2020  ened}\n".       
+0000dc40: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0000dc50: 616b 0a0a 2020 2020 2020 2020 2020 2020  ak..            
+0000dc60: 2320 7772 6974 6520 6f75 740a 2020 2020  # write out.    
+0000dc70: 2020 2020 2020 2020 7374 6174 735f 6669          stats_fi
+0000dc80: 6c65 2e73 6565 6b28 3029 0a20 2020 2020  le.seek(0).     
+0000dc90: 2020 2020 2020 2073 7461 7473 5f66 696c         stats_fil
+0000dca0: 652e 7772 6974 6528 2222 2e6a 6f69 6e28  e.write("".join(
+0000dcb0: 6c69 6e65 7329 290a 2020 2020 2020 2020  lines)).        
+0000dcc0: 2020 2020 7374 6174 735f 6669 6c65 2e74      stats_file.t
+0000dcd0: 7275 6e63 6174 6528 290a 0a20 2020 2020  runcate()..     
+0000dce0: 2020 2077 6974 6820 6f70 656e 2863 6f6e     with open(con
+0000dcf0: 6669 672e 4355 525f 5945 4152 5f53 5441  fig.CUR_YEAR_STA
+0000dd00: 5453 5f50 4154 482c 2022 722b 222c 2065  TS_PATH, "r+", e
+0000dd10: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
+0000dd20: 2061 7320 7374 6174 735f 6669 6c65 3a0a   as stats_file:.
+0000dd30: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+0000dd40: 7320 3d20 7374 6174 735f 6669 6c65 2e72  s = stats_file.r
+0000dd50: 6561 646c 696e 6573 2829 0a20 2020 2020  eadlines().     
+0000dd60: 2020 2020 2020 2066 6f72 206a 2069 6e20         for j in 
+0000dd70: 7261 6e67 6528 6c65 6e28 6c69 6e65 7329  range(len(lines)
+0000dd80: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000dd90: 2020 2073 6f6e 675f 6964 2c20 6c69 7374     song_id, list
+0000dda0: 656e 6564 203d 206c 696e 6573 5b6a 5d2e  ened = lines[j].
+0000ddb0: 7374 7269 7028 292e 7370 6c69 7428 227c  strip().split("|
+0000ddc0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0000ddd0: 2020 2069 6620 736f 6e67 5f69 6420 3d3d     if song_id ==
+0000dde0: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
+0000ddf0: 6c61 796c 6973 745b 706c 6179 6572 5f6f  laylist[player_o
+0000de00: 7574 7075 742e 695d 5b30 5d3a 0a20 2020  utput.i][0]:.   
+0000de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de20: 206c 6973 7465 6e65 6420 3d20 666c 6f61   listened = floa
+0000de30: 7428 6c69 7374 656e 6564 2920 2b20 7469  t(listened) + ti
+0000de40: 6d65 5f6c 6973 7465 6e65 640a 2020 2020  me_listened.    
+0000de50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de60: 6c69 6e65 735b 6a5d 203d 2066 227b 736f  lines[j] = f"{so
+0000de70: 6e67 5f69 647d 7c7b 6c69 7374 656e 6564  ng_id}|{listened
+0000de80: 7d5c 6e22 0a20 2020 2020 2020 2020 2020  }\n".           
+0000de90: 2020 2020 2020 2020 2062 7265 616b 0a0a           break..
+0000dea0: 2020 2020 2020 2020 2020 2020 2320 7772              # wr
+0000deb0: 6974 6520 6f75 740a 2020 2020 2020 2020  ite out.        
+0000dec0: 2020 2020 7374 6174 735f 6669 6c65 2e73      stats_file.s
+0000ded0: 6565 6b28 3029 0a20 2020 2020 2020 2020  eek(0).         
+0000dee0: 2020 2073 7461 7473 5f66 696c 652e 7772     stats_file.wr
+0000def0: 6974 6528 2222 2e6a 6f69 6e28 6c69 6e65  ite("".join(line
+0000df00: 7329 290a 2020 2020 2020 2020 2020 2020  s)).            
+0000df10: 7374 6174 735f 6669 6c65 2e74 7275 6e63  stats_file.trunc
+0000df20: 6174 6528 290a 2020 2020 2020 2020 2320  ate().        # 
+0000df30: 656e 6472 6567 696f 6e0a 0a20 2020 2020  endregion..     
+0000df40: 2020 2069 6620 706c 6179 6572 5f6f 7574     if player_out
+0000df50: 7075 742e 656e 6469 6e67 3a0a 2020 2020  put.ending:.    
+0000df60: 2020 2020 2020 2020 7265 7475 726e 0a0a          return..
+0000df70: 2020 2020 2020 2020 6966 206e 6578 745f          if next_
+0000df80: 736f 6e67 203d 3d20 2d31 3a0a 2020 2020  song == -1:.    
+0000df90: 2020 2020 2020 2020 6966 2070 6c61 7965          if playe
+0000dfa0: 725f 6f75 7470 7574 2e69 203d 3d20 706c  r_output.i == pl
+0000dfb0: 6179 6572 5f6f 7574 7075 742e 7363 726f  ayer_output.scro
+0000dfc0: 6c6c 6572 2e70 6f73 3a0a 2020 2020 2020  ller.pos:.      
+0000dfd0: 2020 2020 2020 2020 2020 706c 6179 6572            player
+0000dfe0: 5f6f 7574 7075 742e 7363 726f 6c6c 6572  _output.scroller
+0000dff0: 2e73 6372 6f6c 6c5f 6261 636b 7761 7264  .scroll_backward
+0000e000: 2829 0a20 2020 2020 2020 2020 2020 2070  ().            p
+0000e010: 6c61 7965 725f 6f75 7470 7574 2e69 202d  layer_output.i -
+0000e020: 3d20 310a 2020 2020 2020 2020 656c 6966  = 1.        elif
+0000e030: 206e 6578 745f 736f 6e67 203d 3d20 313a   next_song == 1:
+0000e040: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000e050: 706c 6179 6572 5f6f 7574 7075 742e 6920  player_output.i 
+0000e060: 3d3d 206c 656e 2870 6c61 7965 725f 6f75  == len(player_ou
+0000e070: 7470 7574 2e70 6c61 796c 6973 7429 202d  tput.playlist) -
+0000e080: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
+0000e090: 2020 2020 6966 206c 6f6f 703a 0a20 2020      if loop:.   
+0000e0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e0b0: 206e 6578 745f 6e65 7874 5f70 6c61 796c   next_next_playl
+0000e0c0: 6973 7420 3d20 6e65 7874 5f70 6c61 796c  ist = next_playl
+0000e0d0: 6973 745b 3a5d 0a20 2020 2020 2020 2020  ist[:].         
+0000e0e0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+0000e0f0: 7368 7566 666c 653a 0a20 2020 2020 2020  shuffle:.       
+0000e100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e110: 2073 6875 6666 6c65 286e 6578 745f 6e65   shuffle(next_ne
+0000e120: 7874 5f70 6c61 796c 6973 7429 0a20 2020  xt_playlist).   
+0000e130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e140: 2070 6c61 7965 725f 6f75 7470 7574 2e70   player_output.p
+0000e150: 6c61 796c 6973 742c 206e 6578 745f 706c  laylist, next_pl
+0000e160: 6179 6c69 7374 203d 2028 0a20 2020 2020  aylist = (.     
 0000e170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e180: 206e 6578 745f 706c 6179 6c69 7374 2c0a   next_playlist,.
-0000e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e1a0: 2020 2020 2020 2020 6e65 7874 5f6e 6578          next_nex
-0000e1b0: 745f 706c 6179 6c69 7374 2c0a 2020 2020  t_playlist,.    
+0000e180: 2020 206e 6578 745f 706c 6179 6c69 7374     next_playlist
+0000e190: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000e1a0: 2020 2020 2020 2020 2020 6e65 7874 5f6e            next_n
+0000e1b0: 6578 745f 706c 6179 6c69 7374 2c0a 2020  ext_playlist,.  
 0000e1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e1d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000e1e0: 2020 2020 2020 706c 6179 6572 5f6f 7574        player_out
-0000e1f0: 7075 742e 6920 3d20 2d31 0a20 2020 2020  put.i = -1.     
-0000e200: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000e210: 6c61 7965 725f 6f75 7470 7574 2e73 6372  layer_output.scr
-0000e220: 6f6c 6c65 722e 706f 7320 3d20 300a 2020  oller.pos = 0.  
-0000e230: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0000e240: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000e250: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
-0000e260: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000e270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e280: 2069 6620 706c 6179 6572 5f6f 7574 7075   if player_outpu
-0000e290: 742e 6920 3d3d 2070 6c61 7965 725f 6f75  t.i == player_ou
-0000e2a0: 7470 7574 2e73 6372 6f6c 6c65 722e 706f  tput.scroller.po
-0000e2b0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-0000e2c0: 2020 2020 2020 2070 6c61 7965 725f 6f75         player_ou
-0000e2d0: 7470 7574 2e73 6372 6f6c 6c65 722e 7363  tput.scroller.sc
-0000e2e0: 726f 6c6c 5f66 6f72 7761 7264 2829 0a20  roll_forward(). 
-0000e2f0: 2020 2020 2020 2020 2020 2070 6c61 7965             playe
-0000e300: 725f 6f75 7470 7574 2e69 202b 3d20 310a  r_output.i += 1.
-0000e310: 2020 2020 2020 2020 656c 6966 206e 6578          elif nex
-0000e320: 745f 736f 6e67 203d 3d20 303a 0a20 2020  t_song == 0:.   
-0000e330: 2020 2020 2020 2020 2069 6620 706c 6179           if play
-0000e340: 6572 5f6f 7574 7075 742e 6c6f 6f70 696e  er_output.loopin
-0000e350: 675f 6375 7272 656e 745f 736f 6e67 203d  g_current_song =
-0000e360: 3d20 636f 6e66 6967 2e4c 4f4f 505f 4d4f  = config.LOOP_MO
-0000e370: 4445 535b 226f 6e65 225d 3a0a 2020 2020  DES["one"]:.    
-0000e380: 2020 2020 2020 2020 2020 2020 2320 6865              # he
-0000e390: 6c70 6572 732e 7072 696e 745f 746f 5f6c  lpers.print_to_l
-0000e3a0: 6f67 6669 6c65 280a 2020 2020 2020 2020  ogfile(.        
-0000e3b0: 2020 2020 2020 2020 2320 2020 2020 706c          #     pl
-0000e3c0: 6179 6572 5f6f 7574 7075 742e 6c6f 6f70  ayer_output.loop
-0000e3d0: 696e 675f 6375 7272 656e 745f 736f 6e67  ing_current_song
-0000e3e0: 2c20 636f 6e66 6967 2e4c 4f4f 505f 4d4f  , config.LOOP_MO
-0000e3f0: 4445 535b 226f 6e65 225d 0a20 2020 2020  DES["one"].     
-0000e400: 2020 2020 2020 2020 2020 2023 2029 0a20             # ). 
-0000e410: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000e420: 6c61 7965 725f 6f75 7470 7574 2e6c 6f6f  layer_output.loo
-0000e430: 7069 6e67 5f63 7572 7265 6e74 5f73 6f6e  ping_current_son
-0000e440: 6720 3d20 636f 6e66 6967 2e4c 4f4f 505f  g = config.LOOP_
-0000e450: 4d4f 4445 535b 226e 6f6e 6522 5d0a 2020  MODES["none"].  
-0000e460: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000e470: 6865 6c70 6572 732e 7072 696e 745f 746f  helpers.print_to
-0000e480: 5f6c 6f67 6669 6c65 280a 2020 2020 2020  _logfile(.      
-0000e490: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0000e4a0: 706c 6179 6572 5f6f 7574 7075 742e 6c6f  player_output.lo
-0000e4b0: 6f70 696e 675f 6375 7272 656e 745f 736f  oping_current_so
-0000e4c0: 6e67 2c20 636f 6e66 6967 2e4c 4f4f 505f  ng, config.LOOP_
-0000e4d0: 4d4f 4445 535b 226e 6f6e 6522 5d0a 2020  MODES["none"].  
-0000e4e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000e4f0: 290a 0a0a 2320 656e 6472 6567 696f 6e0a  )...# endregion.
-0000e500: 0a0a 4063 6c69 636b 2e67 726f 7570 2863  ..@click.group(c
-0000e510: 6f6e 7465 7874 5f73 6574 7469 6e67 733d  ontext_settings=
-0000e520: 6469 6374 2868 656c 705f 6f70 7469 6f6e  dict(help_option
-0000e530: 5f6e 616d 6573 3d5b 222d 6822 2c20 222d  _names=["-h", "-
-0000e540: 2d68 656c 7022 5d29 290a 6465 6620 636c  -help"])).def cl
-0000e550: 6928 293a 0a20 2020 2022 2222 4120 636f  i():.    """A co
-0000e560: 6d6d 616e 6420 6c69 6e65 2069 6e74 6572  mmand line inter
-0000e570: 6661 6365 2066 6f72 2070 6c61 7969 6e67  face for playing
-0000e580: 206d 7573 6963 2e22 2222 0a0a 2020 2020   music."""..    
-0000e590: 6966 206e 6f74 206f 732e 7061 7468 2e65  if not os.path.e
-0000e5a0: 7869 7374 7328 636f 6e66 6967 2e53 4554  xists(config.SET
-0000e5b0: 5449 4e47 535f 4649 4c45 293a 0a20 2020  TINGS_FILE):.   
-0000e5c0: 2020 2020 2077 6974 6820 6f70 656e 2863       with open(c
-0000e5d0: 6f6e 6669 672e 5345 5454 494e 4753 5f46  onfig.SETTINGS_F
-0000e5e0: 494c 452c 2022 7822 2c20 656e 636f 6469  ILE, "x", encodi
-0000e5f0: 6e67 3d22 7574 662d 3822 2920 6173 2066  ng="utf-8") as f
-0000e600: 3a0a 2020 2020 2020 2020 2020 2020 6a73  :.            js
-0000e610: 6f6e 2e64 756d 7028 7b22 736f 6e67 5f64  on.dump({"song_d
-0000e620: 6972 6563 746f 7279 223a 2063 6f6e 6669  irectory": confi
-0000e630: 672e 4445 4641 554c 545f 534f 4e47 535f  g.DEFAULT_SONGS_
-0000e640: 4449 527d 2c20 6629 0a20 2020 2020 2020  DIR}, f).       
-0000e650: 2020 2020 2063 6f6e 6669 672e 534f 4e47       config.SONG
-0000e660: 535f 4449 5220 3d20 636f 6e66 6967 2e44  S_DIR = config.D
-0000e670: 4546 4155 4c54 5f53 4f4e 4753 5f44 4952  EFAULT_SONGS_DIR
-0000e680: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0000e690: 2020 2077 6974 6820 6f70 656e 2863 6f6e     with open(con
-0000e6a0: 6669 672e 5345 5454 494e 4753 5f46 494c  fig.SETTINGS_FIL
-0000e6b0: 452c 2022 7222 2c20 656e 636f 6469 6e67  E, "r", encoding
-0000e6c0: 3d22 7574 662d 3822 2920 6173 2066 3a0a  ="utf-8") as f:.
-0000e6d0: 2020 2020 2020 2020 2020 2020 7365 7474              sett
-0000e6e0: 696e 6773 203d 206a 736f 6e2e 6c6f 6164  ings = json.load
-0000e6f0: 2866 290a 2020 2020 2020 2020 2020 2020  (f).            
-0000e700: 6966 2022 736f 6e67 5f64 6972 6563 746f  if "song_directo
-0000e710: 7279 2220 6e6f 7420 696e 2073 6574 7469  ry" not in setti
-0000e720: 6e67 733a 0a20 2020 2020 2020 2020 2020  ngs:.           
-0000e730: 2020 2020 2073 6574 7469 6e67 735b 2273       settings["s
-0000e740: 6f6e 675f 6469 7265 6374 6f72 7922 5d20  ong_directory"] 
-0000e750: 3d20 636f 6e66 6967 2e44 4546 4155 4c54  = config.DEFAULT
-0000e760: 5f53 4f4e 4753 5f44 4952 0a20 2020 2020  _SONGS_DIR.     
-0000e770: 2020 2020 2020 2020 2020 2077 6974 6820             with 
-0000e780: 6f70 656e 2863 6f6e 6669 672e 5345 5454  open(config.SETT
-0000e790: 494e 4753 5f46 494c 452c 2022 7722 2c20  INGS_FILE, "w", 
-0000e7a0: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
-0000e7b0: 2920 6173 2067 3a0a 2020 2020 2020 2020  ) as g:.        
-0000e7c0: 2020 2020 2020 2020 2020 2020 6a73 6f6e              json
-0000e7d0: 2e64 756d 7028 7365 7474 696e 6773 2c20  .dump(settings, 
-0000e7e0: 6729 0a20 2020 2020 2020 2020 2020 2065  g).            e
-0000e7f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000e800: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
-0000e810: 6174 682e 6578 6973 7473 2873 6574 7469  ath.exists(setti
-0000e820: 6e67 735b 2273 6f6e 675f 6469 7265 6374  ngs["song_direct
-0000e830: 6f72 7922 5d29 3a0a 2020 2020 2020 2020  ory"]):.        
-0000e840: 2020 2020 2020 2020 2020 2020 6f73 2e6d              os.m
-0000e850: 616b 6564 6972 7328 7365 7474 696e 6773  akedirs(settings
-0000e860: 5b22 736f 6e67 5f64 6972 6563 746f 7279  ["song_directory
-0000e870: 225d 290a 2020 2020 2020 2020 2020 2020  "]).            
-0000e880: 636f 6e66 6967 2e53 4f4e 4753 5f44 4952  config.SONGS_DIR
-0000e890: 203d 2073 6574 7469 6e67 735b 2273 6f6e   = settings["son
-0000e8a0: 675f 6469 7265 6374 6f72 7922 5d0a 0a20  g_directory"].. 
-0000e8b0: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
-0000e8c0: 682e 6578 6973 7473 2863 6f6e 6669 672e  h.exists(config.
-0000e8d0: 534f 4e47 535f 494e 464f 5f50 4154 4829  SONGS_INFO_PATH)
-0000e8e0: 3a0a 2020 2020 2020 2020 7769 7468 206f  :.        with o
-0000e8f0: 7065 6e28 636f 6e66 6967 2e53 4f4e 4753  pen(config.SONGS
-0000e900: 5f49 4e46 4f5f 5041 5448 2c20 2278 222c  _INFO_PATH, "x",
-0000e910: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-0000e920: 2229 2061 7320 5f3a 0a20 2020 2020 2020  ") as _:.       
-0000e930: 2020 2020 2070 6173 730a 0a20 2020 2069       pass..    i
-0000e940: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
-0000e950: 6973 7473 2863 6f6e 6669 672e 5354 4154  ists(config.STAT
-0000e960: 535f 4449 5229 3a0a 2020 2020 2020 2020  S_DIR):.        
-0000e970: 6f73 2e6d 616b 6564 6972 7328 636f 6e66  os.makedirs(conf
-0000e980: 6967 2e53 5441 5453 5f44 4952 290a 2020  ig.STATS_DIR).  
-0000e990: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-0000e9a0: 2e65 7869 7374 7328 636f 6e66 6967 2e54  .exists(config.T
-0000e9b0: 4f54 414c 5f53 5441 5453 5f50 4154 4829  OTAL_STATS_PATH)
-0000e9c0: 3a0a 2020 2020 2020 2020 7769 7468 2028  :.        with (
-0000e9d0: 0a20 2020 2020 2020 2020 2020 206f 7065  .            ope
-0000e9e0: 6e28 636f 6e66 6967 2e54 4f54 414c 5f53  n(config.TOTAL_S
-0000e9f0: 5441 5453 5f50 4154 482c 2022 7722 2c20  TATS_PATH, "w", 
-0000ea00: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
-0000ea10: 2920 6173 2066 2c0a 2020 2020 2020 2020  ) as f,.        
-0000ea20: 2020 2020 6f70 656e 2863 6f6e 6669 672e      open(config.
-0000ea30: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
-0000ea40: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
-0000ea50: 7574 662d 3822 2920 6173 2067 2c0a 2020  utf-8") as g,.  
-0000ea60: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-0000ea70: 2020 2020 2066 6f72 206c 696e 6520 696e       for line in
-0000ea80: 2067 3a0a 2020 2020 2020 2020 2020 2020   g:.            
-0000ea90: 2020 2020 662e 7772 6974 6528 6622 7b6c      f.write(f"{l
-0000eaa0: 696e 652e 7374 7269 7028 292e 7370 6c69  ine.strip().spli
-0000eab0: 7428 277c 2729 5b30 5d7d 7c30 5c6e 2229  t('|')[0]}|0\n")
-0000eac0: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
-0000ead0: 6174 682e 6578 6973 7473 2863 6f6e 6669  ath.exists(confi
-0000eae0: 672e 4355 525f 5945 4152 5f53 5441 5453  g.CUR_YEAR_STATS
-0000eaf0: 5f50 4154 4829 3a0a 2020 2020 2020 2020  _PATH):.        
-0000eb00: 7769 7468 2028 0a20 2020 2020 2020 2020  with (.         
-0000eb10: 2020 206f 7065 6e28 636f 6e66 6967 2e43     open(config.C
-0000eb20: 5552 5f59 4541 525f 5354 4154 535f 5041  UR_YEAR_STATS_PA
-0000eb30: 5448 2c20 2277 222c 2065 6e63 6f64 696e  TH, "w", encodin
-0000eb40: 673d 2275 7466 2d38 2229 2061 7320 662c  g="utf-8") as f,
-0000eb50: 0a20 2020 2020 2020 2020 2020 206f 7065  .            ope
-0000eb60: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f49  n(config.SONGS_I
-0000eb70: 4e46 4f5f 5041 5448 2c20 2272 222c 2065  NFO_PATH, "r", e
-0000eb80: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
-0000eb90: 2061 7320 672c 0a20 2020 2020 2020 2029   as g,.        )
-0000eba0: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
-0000ebb0: 7220 6c69 6e65 2069 6e20 673a 0a20 2020  r line in g:.   
-0000ebc0: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
-0000ebd0: 7269 7465 2866 227b 6c69 6e65 2e73 7472  rite(f"{line.str
-0000ebe0: 6970 2829 2e73 706c 6974 2827 7c27 295b  ip().split('|')[
-0000ebf0: 305d 7d7c 305c 6e22 290a 0a0a 4063 6c69  0]}|0\n")...@cli
-0000ec00: 2e63 6f6d 6d61 6e64 2829 0a40 636c 6963  .command().@clic
-0000ec10: 6b2e 6172 6775 6d65 6e74 2822 7061 7468  k.argument("path
-0000ec20: 5f22 2c20 6d65 7461 7661 723d 2250 4154  _", metavar="PAT
-0000ec30: 485f 4f52 5f55 524c 2229 0a40 636c 6963  H_OR_URL").@clic
-0000ec40: 6b2e 6172 6775 6d65 6e74 2822 7461 6773  k.argument("tags
-0000ec50: 222c 206e 6172 6773 3d2d 3129 0a40 636c  ", nargs=-1).@cl
-0000ec60: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
-0000ec70: 222d 4d2f 2d6e 4d22 2c0a 2020 2020 222d  "-M/-nM",.    "-
-0000ec80: 2d6d 6f76 652f 2d2d 6e6f 2d6d 6f76 6522  -move/--no-move"
-0000ec90: 2c0a 2020 2020 226d 6f76 655f 222c 0a20  ,.    "move_",. 
-0000eca0: 2020 2064 6566 6175 6c74 3d46 616c 7365     default=False
-0000ecb0: 2c0a 2020 2020 6865 6c70 3d22 4d6f 7665  ,.    help="Move
-0000ecc0: 2066 696c 6520 6672 6f6d 2050 4154 4820   file from PATH 
-0000ecd0: 746f 206d 6165 7374 726f 2773 2069 6e74  to maestro's int
-0000ece0: 6572 6e61 6c20 736f 6e67 2064 6174 6162  ernal song datab
-0000ecf0: 6173 6520 696e 7374 6561 6420 6f66 2063  ase instead of c
-0000ed00: 6f70 7969 6e67 2e22 2c0a 290a 4063 6c69  opying.",.).@cli
-0000ed10: 636b 2e6f 7074 696f 6e28 0a20 2020 2022  ck.option(.    "
-0000ed20: 2d6e 222c 0a20 2020 2022 2d2d 6e61 6d65  -n",.    "--name
-0000ed30: 222c 0a20 2020 2074 7970 653d 7374 722c  ",.    type=str,
-0000ed40: 0a20 2020 2068 656c 703d 2257 6861 7420  .    help="What 
-0000ed50: 746f 206e 616d 6520 7468 6520 736f 6e67  to name the song
-0000ed60: 2c20 6966 2079 6f75 2064 6f6e 2774 2077  , if you don't w
-0000ed70: 616e 7420 746f 2075 7365 2074 6865 2074  ant to use the t
-0000ed80: 6974 6c65 2066 726f 6d20 596f 7574 7562  itle from Youtub
-0000ed90: 652f 5370 6f74 6966 7920 6f72 2066 696c  e/Spotify or fil
-0000eda0: 656e 616d 652e 2044 6f20 6e6f 7420 696e  ename. Do not in
-0000edb0: 636c 7564 6520 616e 2065 7874 656e 7369  clude an extensi
-0000edc0: 6f6e 2028 652e 672e 2027 2e77 6176 2729  on (e.g. '.wav')
-0000edd0: 2e20 4967 6e6f 7265 6420 6966 2061 6464  . Ignored if add
-0000ede0: 696e 6720 6d75 6c74 6970 6c65 2073 6f6e  ing multiple son
-0000edf0: 6773 2e22 2c0a 290a 4063 6c69 636b 2e6f  gs.",.).@click.o
-0000ee00: 7074 696f 6e28 0a20 2020 2022 2d52 2c20  ption(.    "-R, 
-0000ee10: 2d6e 5222 2c0a 2020 2020 222d 2d72 6563  -nR",.    "--rec
-0000ee20: 7572 7369 7665 2f2d 2d6e 6f2d 7265 6375  ursive/--no-recu
-0000ee30: 7273 6976 6522 2c0a 2020 2020 2272 6563  rsive",.    "rec
-0000ee40: 7572 7365 222c 0a20 2020 2064 6566 6175  urse",.    defau
-0000ee50: 6c74 3d46 616c 7365 2c0a 2020 2020 6865  lt=False,.    he
-0000ee60: 6c70 3d22 4966 2050 4154 4820 6973 2061  lp="If PATH is a
-0000ee70: 2066 6f6c 6465 722c 2061 6464 2073 6f6e   folder, add son
-0000ee80: 6773 2069 6e20 7375 6266 6f6c 6465 7273  gs in subfolders
-0000ee90: 2e22 2c0a 290a 4063 6c69 636b 2e6f 7074  .",.).@click.opt
-0000eea0: 696f 6e28 0a20 2020 2022 2d59 2f2d 6e59  ion(.    "-Y/-nY
-0000eeb0: 222c 0a20 2020 2022 2d2d 796f 7574 7562  ",.    "--youtub
-0000eec0: 652f 2d2d 6e6f 2d79 6f75 7475 6265 222c  e/--no-youtube",
-0000eed0: 0a20 2020 2064 6566 6175 6c74 3d46 616c  .    default=Fal
-0000eee0: 7365 2c0a 2020 2020 6865 6c70 3d22 4164  se,.    help="Ad
-0000eef0: 6420 6120 736f 6e67 2066 726f 6d20 6120  d a song from a 
-0000ef00: 596f 7554 7562 6520 6f72 2059 6f75 5475  YouTube or YouTu
-0000ef10: 6265 204d 7573 6963 2055 524c 2e22 2c0a  be Music URL.",.
-0000ef20: 290a 4063 6c69 636b 2e6f 7074 696f 6e28  ).@click.option(
-0000ef30: 0a20 2020 2022 2d53 2f2d 6e53 222c 0a20  .    "-S/-nS",. 
-0000ef40: 2020 2022 2d2d 7370 6f74 6966 792f 2d2d     "--spotify/--
-0000ef50: 6e6f 2d73 706f 7469 6679 222c 0a20 2020  no-spotify",.   
-0000ef60: 2064 6566 6175 6c74 3d46 616c 7365 2c0a   default=False,.
-0000ef70: 2020 2020 6865 6c70 3d22 4164 6420 6120      help="Add a 
-0000ef80: 736f 6e67 2066 726f 6d20 5370 6f74 6966  song from Spotif
-0000ef90: 7920 2874 7261 636b 2055 524c 2c20 616c  y (track URL, al
-0000efa0: 6275 6d20 5552 4c2c 2070 6c61 796c 6973  bum URL, playlis
-0000efb0: 7420 5552 4c2c 2061 7274 6973 7420 5552  t URL, artist UR
-0000efc0: 4c2c 206f 7220 7365 6172 6368 2071 7565  L, or search que
-0000efd0: 7279 292e 222c 0a29 0a40 636c 6963 6b2e  ry).",.).@click.
-0000efe0: 6f70 7469 6f6e 280a 2020 2020 222d 6622  option(.    "-f"
-0000eff0: 2c0a 2020 2020 222d 2d66 6f72 6d61 7422  ,.    "--format"
-0000f000: 2c0a 2020 2020 2266 6f72 6d61 745f 222c  ,.    "format_",
-0000f010: 0a20 2020 2074 7970 653d 636c 6963 6b2e  .    type=click.
-0000f020: 4368 6f69 6365 285b 2277 6176 222c 2022  Choice(["wav", "
-0000f030: 6d70 3322 2c20 2266 6c61 6322 2c20 226f  mp3", "flac", "o
-0000f040: 6767 225d 292c 0a20 2020 2068 656c 703d  gg"]),.    help=
-0000f050: 2253 7065 6369 6679 2074 6865 2066 6f72  "Specify the for
-0000f060: 6d61 7420 6f66 2074 6865 2073 6f6e 6720  mat of the song 
-0000f070: 6966 2064 6f77 6e6c 6f61 6469 6e67 2066  if downloading f
-0000f080: 726f 6d20 596f 7554 7562 652c 2059 6f75  rom YouTube, You
-0000f090: 5475 6265 204d 7573 6963 2c20 6f72 2053  Tube Music, or S
-0000f0a0: 706f 7469 6679 2055 524c 2e22 2c0a 2020  potify URL.",.  
-0000f0b0: 2020 6465 6661 756c 743d 2266 6c61 6322    default="flac"
-0000f0c0: 2c0a 2020 2020 7368 6f77 5f64 6566 6175  ,.    show_defau
-0000f0d0: 6c74 3d54 7275 652c 0a29 0a40 636c 6963  lt=True,.).@clic
-0000f0e0: 6b2e 6f70 7469 6f6e 280a 2020 2020 222d  k.option(.    "-
-0000f0f0: 6322 2c0a 2020 2020 222d 2d63 6c69 7022  c",.    "--clip"
-0000f100: 2c0a 2020 2020 6e61 7267 733d 322c 0a20  ,.    nargs=2,. 
-0000f110: 2020 2074 7970 653d 666c 6f61 742c 0a20     type=float,. 
-0000f120: 2020 2068 656c 703d 2241 6464 2061 2063     help="Add a c
-0000f130: 6c69 702e 2049 676e 6f72 6564 2069 6620  lip. Ignored if 
-0000f140: 6164 6469 6e67 206d 756c 7469 706c 6520  adding multiple 
-0000f150: 736f 6e67 732e 222c 0a29 0a40 636c 6963  songs.",.).@clic
-0000f160: 6b2e 6f70 7469 6f6e 280a 2020 2020 222d  k.option(.    "-
-0000f170: 502f 2d6e 5022 2c0a 2020 2020 222d 2d70  P/-nP",.    "--p
-0000f180: 6c61 796c 6973 742f 2d2d 6e6f 2d70 6c61  laylist/--no-pla
-0000f190: 796c 6973 7422 2c0a 2020 2020 2270 6c61  ylist",.    "pla
-0000f1a0: 796c 6973 745f 222c 0a20 2020 2064 6566  ylist_",.    def
-0000f1b0: 6175 6c74 3d46 616c 7365 2c0a 2020 2020  ault=False,.    
-0000f1c0: 6865 6c70 3d22 4966 2073 6f6e 6720 5552  help="If song UR
-0000f1d0: 4c20 7061 7373 6564 2069 7320 6672 6f6d  L passed is from
-0000f1e0: 2061 2059 6f75 5475 6265 2070 6c61 796c   a YouTube playl
-0000f1f0: 6973 742c 2064 6f77 6e6c 6f61 6420 616c  ist, download al
-0000f200: 6c20 7468 6520 736f 6e67 732e 2049 6620  l the songs. If 
-0000f210: 7468 6520 5552 4c20 706f 696e 7473 2064  the URL points d
-0000f220: 6972 6563 746c 7920 746f 2061 2070 6c61  irectly to a pla
-0000f230: 796c 6973 742c 2074 6869 7320 666c 6167  ylist, this flag
-0000f240: 2069 7320 756e 6e63 6573 7361 7279 2e22   is unncessary."
-0000f250: 2c0a 290a 4063 6c69 636b 2e6f 7074 696f  ,.).@click.optio
-0000f260: 6e28 0a20 2020 2022 2d6d 222c 0a20 2020  n(.    "-m",.   
-0000f270: 2022 2d2d 6d65 7461 6461 7461 222c 0a20   "--metadata",. 
-0000f280: 2020 2022 6d65 7461 6461 7461 5f70 6169     "metadata_pai
-0000f290: 7273 222c 0a20 2020 2064 6566 6175 6c74  rs",.    default
-0000f2a0: 3d4e 6f6e 652c 0a20 2020 2068 656c 703d  =None,.    help=
-0000f2b0: 2241 6464 206d 6574 6164 6174 6120 746f  "Add metadata to
-0000f2c0: 2074 6865 2073 6f6e 672e 2049 676e 6f72   the song. Ignor
-0000f2d0: 6564 2069 6620 6164 6469 6e67 206d 756c  ed if adding mul
-0000f2e0: 7469 706c 6520 736f 6e67 732e 2054 6865  tiple songs. The
-0000f2f0: 2066 6f72 6d61 7420 6973 2027 6b65 7931   format is 'key1
-0000f300: 3a76 616c 7565 317c 6b65 7932 3a76 616c  :value1|key2:val
-0000f310: 7565 327c 2e2e 2e27 2e22 2c0a 290a 6465  ue2|...'.",.).de
-0000f320: 6620 6164 6428 0a20 2020 2070 6174 685f  f add(.    path_
-0000f330: 2c0a 2020 2020 7461 6773 2c0a 2020 2020  ,.    tags,.    
-0000f340: 6d6f 7665 5f2c 0a20 2020 206e 616d 652c  move_,.    name,
-0000f350: 0a20 2020 2072 6563 7572 7365 2c0a 2020  .    recurse,.  
-0000f360: 2020 796f 7574 7562 652c 0a20 2020 2073    youtube,.    s
-0000f370: 706f 7469 6679 2c0a 2020 2020 666f 726d  potify,.    form
-0000f380: 6174 5f2c 0a20 2020 2063 6c69 702c 0a20  at_,.    clip,. 
-0000f390: 2020 2070 6c61 796c 6973 745f 2c0a 2020     playlist_,.  
-0000f3a0: 2020 6d65 7461 6461 7461 5f70 6169 7273    metadata_pairs
-0000f3b0: 2c0a 293a 0a20 2020 2022 2222 0a20 2020  ,.):.    """.   
-0000f3c0: 2041 6464 2061 206e 6577 2073 6f6e 672e   Add a new song.
-0000f3d0: 0a0a 2020 2020 4164 6473 2074 6865 2061  ..    Adds the a
-0000f3e0: 7564 696f 2066 696c 6520 6c6f 6361 7465  udio file locate
-0000f3f0: 6420 6174 2050 4154 482e 2049 6620 5041  d at PATH. If PA
-0000f400: 5448 2069 7320 6120 666f 6c64 6572 2c20  TH is a folder, 
-0000f410: 6164 6473 2061 6c6c 2066 696c 6573 0a20  adds all files. 
-0000f420: 2020 2069 6e20 5041 5448 2028 696e 636c     in PATH (incl
-0000f430: 7564 696e 6720 6669 6c65 7320 696e 2073  uding files in s
-0000f440: 7562 666f 6c64 6572 7320 6966 2027 2d72  ubfolders if '-r
-0000f450: 2720 6973 2070 6173 7365 6429 2e20 5468  ' is passed). Th
-0000f460: 6520 6e61 6d65 206f 6620 6561 6368 0a20  e name of each. 
-0000f470: 2020 2073 6f6e 6720 7769 6c6c 2062 6520     song will be 
-0000f480: 7468 6520 6669 6c65 6e61 6d65 2028 756e  the filename (un
-0000f490: 6c65 7373 2027 2d6e 2720 6973 2070 6173  less '-n' is pas
-0000f4a0: 7365 6429 2e20 4669 6c65 6e61 6d65 7320  sed). Filenames 
-0000f4b0: 616e 6420 7461 6773 2063 616e 6e6f 740a  and tags cannot.
-0000f4c0: 2020 2020 636f 6e74 6169 6e20 7468 6520      contain the 
-0000f4d0: 6368 6172 6163 7465 7220 277c 272c 2061  character '|', a
-0000f4e0: 6e64 2074 6167 7320 6361 6e6e 6f74 2063  nd tags cannot c
-0000f4f0: 6f6e 7461 696e 2027 2c27 2e0a 0a20 2020  ontain ','...   
-0000f500: 2049 6620 7468 6520 272d 5927 206f 7220   If the '-Y' or 
-0000f510: 272d 2d79 6f75 7475 6265 2720 666c 6167  '--youtube' flag
-0000f520: 2069 7320 7061 7373 6564 2c20 5041 5448   is passed, PATH
-0000f530: 2069 7320 7472 6561 7465 6420 6173 2061   is treated as a
-0000f540: 2059 6f75 5475 6265 206f 720a 2020 2020   YouTube or.    
-0000f550: 596f 7554 7562 6520 4d75 7369 6320 5552  YouTube Music UR
-0000f560: 4c20 696e 7374 6561 6420 6f66 2061 2066  L instead of a f
-0000f570: 696c 6520 7061 7468 2e0a 0a20 2020 2049  ile path...    I
-0000f580: 6620 7468 6520 272d 5327 206f 7220 272d  f the '-S' or '-
-0000f590: 2d73 706f 7469 6679 2720 666c 6167 2069  -spotify' flag i
-0000f5a0: 7320 7061 7373 6564 2c20 5041 5448 2069  s passed, PATH i
-0000f5b0: 7320 7472 6561 7465 6420 6173 2061 2053  s treated as a S
-0000f5c0: 706f 7469 6679 0a20 2020 2074 7261 636b  potify.    track
-0000f5d0: 2055 524c 2c20 616c 6275 6d20 5552 4c2c   URL, album URL,
-0000f5e0: 2070 6c61 796c 6973 7420 5552 4c2c 2061   playlist URL, a
-0000f5f0: 7274 6973 7420 5552 4c2c 206f 7220 7365  rtist URL, or se
-0000f600: 6172 6368 2071 7565 7279 2069 6e73 7465  arch query inste
-0000f610: 6164 206f 660a 2020 2020 6120 6669 6c65  ad of.    a file
-0000f620: 2070 6174 682e 0a0a 2020 2020 5468 6520   path...    The 
-0000f630: 272d 632f 2d2d 636c 6970 2720 6f70 7469  '-c/--clip' opti
-0000f640: 6f6e 2063 616e 2062 6520 7573 6564 2074  on can be used t
-0000f650: 6f20 6164 6420 6120 636c 6970 2066 6f72  o add a clip for
-0000f660: 2074 6865 2073 6f6e 672e 2049 7420 7461   the song. It ta
-0000f670: 6b65 7320 7477 6f0a 2020 2020 6172 6775  kes two.    argu
-0000f680: 6d65 6e74 732c 2062 7574 2075 6e6c 696b  ments, but unlik
-0000f690: 6520 276d 6165 7374 726f 2063 6c69 7027  e 'maestro clip'
-0000f6a0: 2c20 796f 7520 6361 6e6e 6f74 2070 6173  , you cannot pas
-0000f6b0: 7320 6f6e 6c79 2074 6865 2073 7461 7274  s only the start
-0000f6c0: 2074 696d 650a 2020 2020 616e 6420 6e6f   time.    and no
-0000f6d0: 7420 7468 6520 656e 642e 2054 6f20 6765  t the end. To ge
-0000f6e0: 7420 6172 6f75 6e64 2074 6869 732c 2079  t around this, y
-0000f6f0: 6f75 2063 616e 2070 6173 7320 2d31 2061  ou can pass -1 a
-0000f700: 7320 7468 6520 656e 6420 7469 6d65 2c20  s the end time, 
-0000f710: 652e 672e 0a20 2020 2027 6d61 6573 7472  e.g..    'maestr
-0000f720: 6f20 6164 6420 2d63 2033 3020 2d31 2068  o add -c 30 -1 h
-0000f730: 7474 7073 3a2f 2f77 7777 2e79 6f75 7475  ttps://www.youtu
-0000f740: 6265 2e63 6f6d 2f77 6174 6368 3f76 3d33  be.com/watch?v=3
-0000f750: 5678 754d 4572 4364 2d45 202d 7927 2e20  VxuMErCd-E -y'. 
-0000f760: 4966 0a20 2020 2061 6464 696e 6720 6d75  If.    adding mu
-0000f770: 6c74 6970 6c65 2073 6f6e 6773 2c20 7468  ltiple songs, th
-0000f780: 6973 206f 7074 696f 6e20 6361 6e6e 6f74  is option cannot
-0000f790: 2062 6520 7573 6564 2e0a 0a20 2020 2054   be used...    T
-0000f7a0: 6865 2027 2d6d 2f2d 2d6d 6574 6164 6174  he '-m/--metadat
-0000f7b0: 6127 206f 7074 696f 6e20 6361 6e20 6265  a' option can be
-0000f7c0: 2075 7365 6420 746f 2061 6464 206d 6574   used to add met
-0000f7d0: 6164 6174 6120 746f 2074 6865 2073 6f6e  adata to the son
-0000f7e0: 672e 2049 7420 7461 6b65 730a 2020 2020  g. It takes.    
-0000f7f0: 6120 7374 7269 6e67 206f 6620 7468 6520  a string of the 
-0000f800: 666f 726d 6174 2027 6b65 7931 3a76 616c  format 'key1:val
-0000f810: 7565 317c 6b65 7932 3a76 616c 7565 327c  ue1|key2:value2|
-0000f820: 2e2e 2e27 2e20 4966 2061 6464 696e 6720  ...'. If adding 
-0000f830: 6d75 6c74 6970 6c65 0a20 2020 2073 6f6e  multiple.    son
-0000f840: 6773 2c20 7468 6973 206f 7074 696f 6e20  gs, this option 
-0000f850: 6361 6e6e 6f74 2062 6520 7573 6564 2e0a  cannot be used..
-0000f860: 0a20 2020 2050 6f73 7369 626c 6520 6564  .    Possible ed
-0000f870: 6974 6162 6c65 206d 6574 6164 6174 6120  itable metadata 
-0000f880: 6b65 7973 2061 7265 3a20 616c 6275 6d2c  keys are: album,
-0000f890: 2061 6c62 756d 6172 7469 7374 2c20 6172   albumartist, ar
-0000f8a0: 7469 7374 2c20 6172 7477 6f72 6b2c 0a20  tist, artwork,. 
-0000f8b0: 2020 2063 6f6d 6d65 6e74 2c20 636f 6d70     comment, comp
-0000f8c0: 696c 6174 696f 6e2c 2063 6f6d 706f 7365  ilation, compose
-0000f8d0: 722c 2064 6973 636e 756d 6265 722c 2067  r, discnumber, g
-0000f8e0: 656e 7265 2c20 6c79 7269 6373 2c20 746f  enre, lyrics, to
-0000f8f0: 7461 6c64 6973 6373 2c0a 2020 2020 746f  taldiscs,.    to
-0000f900: 7461 6c74 7261 636b 732c 2074 7261 636b  taltracks, track
-0000f910: 6e75 6d62 6572 2c20 7472 6163 6b74 6974  number, tracktit
-0000f920: 6c65 2c20 7965 6172 2c20 6973 7263 0a0a  le, year, isrc..
-0000f930: 2020 2020 4b65 7973 2061 7265 206e 6f74      Keys are not
-0000f940: 2063 6173 6520 7365 6e73 6974 6976 6520   case sensitive 
-0000f950: 616e 6420 6361 6e20 636f 6e74 6169 6e20  and can contain 
-0000f960: 6172 6269 7472 6172 7920 7768 6974 6573  arbitrary whites
-0000f970: 7061 6365 2c20 272d 272c 2061 6e64 0a20  pace, '-', and. 
-0000f980: 2020 2027 5f27 2063 6861 7261 6374 6572     '_' character
-0000f990: 732e 2049 6e20 6f74 6865 7220 776f 7264  s. In other word
-0000f9a0: 732c 2027 416c 6275 6d20 4172 7469 7374  s, 'Album Artist
-0000f9b0: 272c 2027 616c 6275 6d2d 6172 7469 7374  ', 'album-artist
-0000f9c0: 272c 2061 6e64 0a20 2020 2027 616c 6275  ', and.    'albu
-0000f9d0: 6d5f 6172 7469 7374 2720 6172 6520 616c  m_artist' are al
-0000f9e0: 6c20 7379 6e6f 6e79 6d73 2066 6f72 2027  l synonyms for '
-0000f9f0: 616c 6275 6d61 7274 6973 7427 2e20 416c  albumartist'. Al
-0000fa00: 736f 2c20 2764 6973 6b27 2069 730a 2020  so, 'disk' is.  
-0000fa10: 2020 7379 6e6f 6e79 6d6f 7573 2077 6974    synonymous wit
-0000fa20: 6820 2764 6973 6327 2e0a 2020 2020 2222  h 'disc'..    ""
-0000fa30: 220a 0a20 2020 2070 6174 6873 203d 204e  "..    paths = N
-0000fa40: 6f6e 650a 2020 2020 6966 206e 6f74 2028  one.    if not (
-0000fa50: 796f 7574 7562 6520 6f72 2073 706f 7469  youtube or spoti
-0000fa60: 6679 2920 616e 6420 6e6f 7420 6f73 2e70  fy) and not os.p
-0000fa70: 6174 682e 6578 6973 7473 2870 6174 685f  ath.exists(path_
-0000fa80: 293a 0a20 2020 2020 2020 2063 6c69 636b  ):.        click
-0000fa90: 2e73 6563 686f 280a 2020 2020 2020 2020  .secho(.        
-0000faa0: 2020 2020 6622 5468 6520 7061 7468 2027      f"The path '
-0000fab0: 7b70 6174 685f 7d27 2064 6f65 7320 6e6f  {path_}' does no
-0000fac0: 7420 6578 6973 742e 2054 6f20 646f 776e  t exist. To down
-0000fad0: 6c6f 6164 2066 726f 6d20 6120 596f 7554  load from a YouT
-0000fae0: 7562 6520 6f72 2059 6f75 5475 6265 204d  ube or YouTube M
-0000faf0: 7573 6963 2055 526c 2c20 7061 7373 2074  usic URl, pass t
-0000fb00: 6865 2027 2d59 2f2d 2d79 6f75 7475 6265  he '-Y/--youtube
-0000fb10: 2720 666c 6167 2e20 546f 2064 6f77 6e6c  ' flag. To downl
-0000fb20: 6f61 6420 6672 6f6d 2061 2053 706f 7469  oad from a Spoti
-0000fb30: 6679 2055 526c 2c20 7061 7373 2074 6865  fy URl, pass the
-0000fb40: 2027 2d53 2f2d 2d73 706f 7469 6679 2720   '-S/--spotify' 
-0000fb50: 666c 6167 2e22 2c0a 2020 2020 2020 2020  flag.",.        
-0000fb60: 2020 2020 6667 3d22 7265 6422 2c0a 2020      fg="red",.  
-0000fb70: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000fb80: 7265 7475 726e 0a0a 2020 2020 6966 2079  return..    if y
-0000fb90: 6f75 7475 6265 206f 7220 7370 6f74 6966  outube or spotif
-0000fba0: 793a 0a20 2020 2020 2020 2069 6620 796f  y:.        if yo
-0000fbb0: 7574 7562 6520 616e 6420 7370 6f74 6966  utube and spotif
-0000fbc0: 793a 0a20 2020 2020 2020 2020 2020 2063  y:.            c
-0000fbd0: 6c69 636b 2e73 6563 686f 280a 2020 2020  lick.secho(.    
-0000fbe0: 2020 2020 2020 2020 2020 2020 2243 616e              "Can
-0000fbf0: 6e6f 7420 7061 7373 2062 6f74 6820 272d  not pass both '-
-0000fc00: 792f 2d2d 796f 7574 7562 6527 2061 6e64  y/--youtube' and
-0000fc10: 2027 2d73 2f2d 2d73 706f 7469 6679 2720   '-s/--spotify' 
-0000fc20: 666c 6167 732e 222c 0a20 2020 2020 2020  flags.",.       
-0000fc30: 2020 2020 2020 2020 2066 673d 2272 6564           fg="red
-0000fc40: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
-0000fc50: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000fc60: 7572 6e0a 0a20 2020 2020 2020 2069 6620  urn..        if 
-0000fc70: 796f 7574 7562 653a 0a20 2020 2020 2020  youtube:.       
-0000fc80: 2020 2020 2069 6620 666f 726d 6174 5f20       if format_ 
-0000fc90: 3d3d 2022 6f67 6722 3a0a 2020 2020 2020  == "ogg":.      
-0000fca0: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
-0000fcb0: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
-0000fcc0: 2020 2020 2020 2020 2020 2022 4361 6e6e             "Cann
-0000fcd0: 6f74 2064 6f77 6e6c 6f61 6420 736f 6e67  ot download song
-0000fce0: 7320 6672 6f6d 2059 6f75 5475 6265 2061  s from YouTube a
-0000fcf0: 7320 272e 6f67 6727 2e20 506c 6561 7365  s '.ogg'. Please
-0000fd00: 2063 686f 6f73 6520 6120 6469 6666 6572   choose a differ
-0000fd10: 656e 7420 666f 726d 6174 2e22 2c0a 2020  ent format.",.  
+0000e1d0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0000e1e0: 2020 2020 2020 2020 706c 6179 6572 5f6f          player_o
+0000e1f0: 7574 7075 742e 6920 3d20 2d31 0a20 2020  utput.i = -1.   
+0000e200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e210: 2070 6c61 7965 725f 6f75 7470 7574 2e73   player_output.s
+0000e220: 6372 6f6c 6c65 722e 706f 7320 3d20 300a  croller.pos = 0.
+0000e230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e240: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000e250: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000e260: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0000e270: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000e280: 2020 2069 6620 706c 6179 6572 5f6f 7574     if player_out
+0000e290: 7075 742e 6920 3d3d 2070 6c61 7965 725f  put.i == player_
+0000e2a0: 6f75 7470 7574 2e73 6372 6f6c 6c65 722e  output.scroller.
+0000e2b0: 706f 733a 0a20 2020 2020 2020 2020 2020  pos:.           
+0000e2c0: 2020 2020 2020 2020 2070 6c61 7965 725f           player_
+0000e2d0: 6f75 7470 7574 2e73 6372 6f6c 6c65 722e  output.scroller.
+0000e2e0: 7363 726f 6c6c 5f66 6f72 7761 7264 2829  scroll_forward()
+0000e2f0: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
+0000e300: 7965 725f 6f75 7470 7574 2e69 202b 3d20  yer_output.i += 
+0000e310: 310a 2020 2020 2020 2020 656c 6966 206e  1.        elif n
+0000e320: 6578 745f 736f 6e67 203d 3d20 303a 0a20  ext_song == 0:. 
+0000e330: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
+0000e340: 6179 6572 5f6f 7574 7075 742e 6c6f 6f70  ayer_output.loop
+0000e350: 696e 675f 6375 7272 656e 745f 736f 6e67  ing_current_song
+0000e360: 203d 3d20 636f 6e66 6967 2e4c 4f4f 505f   == config.LOOP_
+0000e370: 4d4f 4445 535b 226f 6e65 225d 3a0a 2020  MODES["one"]:.  
+0000e380: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000e390: 6865 6c70 6572 732e 7072 696e 745f 746f  helpers.print_to
+0000e3a0: 5f6c 6f67 6669 6c65 280a 2020 2020 2020  _logfile(.      
+0000e3b0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0000e3c0: 706c 6179 6572 5f6f 7574 7075 742e 6c6f  player_output.lo
+0000e3d0: 6f70 696e 675f 6375 7272 656e 745f 736f  oping_current_so
+0000e3e0: 6e67 2c20 636f 6e66 6967 2e4c 4f4f 505f  ng, config.LOOP_
+0000e3f0: 4d4f 4445 535b 226f 6e65 225d 0a20 2020  MODES["one"].   
+0000e400: 2020 2020 2020 2020 2020 2020 2023 2029               # )
+0000e410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e420: 2070 6c61 7965 725f 6f75 7470 7574 2e6c   player_output.l
+0000e430: 6f6f 7069 6e67 5f63 7572 7265 6e74 5f73  ooping_current_s
+0000e440: 6f6e 6720 3d20 636f 6e66 6967 2e4c 4f4f  ong = config.LOO
+0000e450: 505f 4d4f 4445 535b 226e 6f6e 6522 5d0a  P_MODES["none"].
+0000e460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e470: 2320 6865 6c70 6572 732e 7072 696e 745f  # helpers.print_
+0000e480: 746f 5f6c 6f67 6669 6c65 280a 2020 2020  to_logfile(.    
+0000e490: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0000e4a0: 2020 706c 6179 6572 5f6f 7574 7075 742e    player_output.
+0000e4b0: 6c6f 6f70 696e 675f 6375 7272 656e 745f  looping_current_
+0000e4c0: 736f 6e67 2c20 636f 6e66 6967 2e4c 4f4f  song, config.LOO
+0000e4d0: 505f 4d4f 4445 535b 226e 6f6e 6522 5d0a  P_MODES["none"].
+0000e4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e4f0: 2320 290a 0a0a 2320 656e 6472 6567 696f  # )...# endregio
+0000e500: 6e0a 0a0a 4063 6c69 636b 2e67 726f 7570  n...@click.group
+0000e510: 2863 6f6e 7465 7874 5f73 6574 7469 6e67  (context_setting
+0000e520: 733d 6469 6374 2868 656c 705f 6f70 7469  s=dict(help_opti
+0000e530: 6f6e 5f6e 616d 6573 3d5b 222d 6822 2c20  on_names=["-h", 
+0000e540: 222d 2d68 656c 7022 5d29 290a 6465 6620  "--help"])).def 
+0000e550: 636c 6928 293a 0a20 2020 2022 2222 4120  cli():.    """A 
+0000e560: 636f 6d6d 616e 6420 6c69 6e65 2069 6e74  command line int
+0000e570: 6572 6661 6365 2066 6f72 2070 6c61 7969  erface for playi
+0000e580: 6e67 206d 7573 6963 2e22 2222 0a0a 2020  ng music."""..  
+0000e590: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+0000e5a0: 2e65 7869 7374 7328 636f 6e66 6967 2e53  .exists(config.S
+0000e5b0: 4554 5449 4e47 535f 4649 4c45 293a 0a20  ETTINGS_FILE):. 
+0000e5c0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+0000e5d0: 2863 6f6e 6669 672e 5345 5454 494e 4753  (config.SETTINGS
+0000e5e0: 5f46 494c 452c 2022 7822 2c20 656e 636f  _FILE, "x", enco
+0000e5f0: 6469 6e67 3d22 7574 662d 3822 2920 6173  ding="utf-8") as
+0000e600: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
+0000e610: 6a73 6f6e 2e64 756d 7028 7b22 736f 6e67  json.dump({"song
+0000e620: 5f64 6972 6563 746f 7279 223a 2063 6f6e  _directory": con
+0000e630: 6669 672e 4445 4641 554c 545f 534f 4e47  fig.DEFAULT_SONG
+0000e640: 535f 4449 527d 2c20 6629 0a20 2020 2020  S_DIR}, f).     
+0000e650: 2020 2020 2020 2063 6f6e 6669 672e 534f         config.SO
+0000e660: 4e47 535f 4449 5220 3d20 636f 6e66 6967  NGS_DIR = config
+0000e670: 2e44 4546 4155 4c54 5f53 4f4e 4753 5f44  .DEFAULT_SONGS_D
+0000e680: 4952 0a20 2020 2065 6c73 653a 0a20 2020  IR.    else:.   
+0000e690: 2020 2020 2077 6974 6820 6f70 656e 2863       with open(c
+0000e6a0: 6f6e 6669 672e 5345 5454 494e 4753 5f46  onfig.SETTINGS_F
+0000e6b0: 494c 452c 2022 7222 2c20 656e 636f 6469  ILE, "r", encodi
+0000e6c0: 6e67 3d22 7574 662d 3822 2920 6173 2066  ng="utf-8") as f
+0000e6d0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0000e6e0: 7474 696e 6773 203d 206a 736f 6e2e 6c6f  ttings = json.lo
+0000e6f0: 6164 2866 290a 2020 2020 2020 2020 2020  ad(f).          
+0000e700: 2020 6966 2022 736f 6e67 5f64 6972 6563    if "song_direc
+0000e710: 746f 7279 2220 6e6f 7420 696e 2073 6574  tory" not in set
+0000e720: 7469 6e67 733a 0a20 2020 2020 2020 2020  tings:.         
+0000e730: 2020 2020 2020 2073 6574 7469 6e67 735b         settings[
+0000e740: 2273 6f6e 675f 6469 7265 6374 6f72 7922  "song_directory"
+0000e750: 5d20 3d20 636f 6e66 6967 2e44 4546 4155  ] = config.DEFAU
+0000e760: 4c54 5f53 4f4e 4753 5f44 4952 0a20 2020  LT_SONGS_DIR.   
+0000e770: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+0000e780: 6820 6f70 656e 2863 6f6e 6669 672e 5345  h open(config.SE
+0000e790: 5454 494e 4753 5f46 494c 452c 2022 7722  TTINGS_FILE, "w"
+0000e7a0: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
+0000e7b0: 3822 2920 6173 2067 3a0a 2020 2020 2020  8") as g:.      
+0000e7c0: 2020 2020 2020 2020 2020 2020 2020 6a73                js
+0000e7d0: 6f6e 2e64 756d 7028 7365 7474 696e 6773  on.dump(settings
+0000e7e0: 2c20 6729 0a20 2020 2020 2020 2020 2020  , g).           
+0000e7f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000e800: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+0000e810: 2e70 6174 682e 6578 6973 7473 2873 6574  .path.exists(set
+0000e820: 7469 6e67 735b 2273 6f6e 675f 6469 7265  tings["song_dire
+0000e830: 6374 6f72 7922 5d29 3a0a 2020 2020 2020  ctory"]):.      
+0000e840: 2020 2020 2020 2020 2020 2020 2020 6f73                os
+0000e850: 2e6d 616b 6564 6972 7328 7365 7474 696e  .makedirs(settin
+0000e860: 6773 5b22 736f 6e67 5f64 6972 6563 746f  gs["song_directo
+0000e870: 7279 225d 290a 2020 2020 2020 2020 2020  ry"]).          
+0000e880: 2020 636f 6e66 6967 2e53 4f4e 4753 5f44    config.SONGS_D
+0000e890: 4952 203d 2073 6574 7469 6e67 735b 2273  IR = settings["s
+0000e8a0: 6f6e 675f 6469 7265 6374 6f72 7922 5d0a  ong_directory"].
+0000e8b0: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
+0000e8c0: 6174 682e 6578 6973 7473 2863 6f6e 6669  ath.exists(confi
+0000e8d0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+0000e8e0: 4829 3a0a 2020 2020 2020 2020 7769 7468  H):.        with
+0000e8f0: 206f 7065 6e28 636f 6e66 6967 2e53 4f4e   open(config.SON
+0000e900: 4753 5f49 4e46 4f5f 5041 5448 2c20 2278  GS_INFO_PATH, "x
+0000e910: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
+0000e920: 2d38 2229 2061 7320 5f3a 0a20 2020 2020  -8") as _:.     
+0000e930: 2020 2020 2020 2070 6173 730a 0a20 2020         pass..   
+0000e940: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+0000e950: 6578 6973 7473 2863 6f6e 6669 672e 5354  exists(config.ST
+0000e960: 4154 535f 4449 5229 3a0a 2020 2020 2020  ATS_DIR):.      
+0000e970: 2020 6f73 2e6d 616b 6564 6972 7328 636f    os.makedirs(co
+0000e980: 6e66 6967 2e53 5441 5453 5f44 4952 290a  nfig.STATS_DIR).
+0000e990: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
+0000e9a0: 7468 2e65 7869 7374 7328 636f 6e66 6967  th.exists(config
+0000e9b0: 2e54 4f54 414c 5f53 5441 5453 5f50 4154  .TOTAL_STATS_PAT
+0000e9c0: 4829 3a0a 2020 2020 2020 2020 7769 7468  H):.        with
+0000e9d0: 2028 0a20 2020 2020 2020 2020 2020 206f   (.            o
+0000e9e0: 7065 6e28 636f 6e66 6967 2e54 4f54 414c  pen(config.TOTAL
+0000e9f0: 5f53 5441 5453 5f50 4154 482c 2022 7722  _STATS_PATH, "w"
+0000ea00: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
+0000ea10: 3822 2920 6173 2066 2c0a 2020 2020 2020  8") as f,.      
+0000ea20: 2020 2020 2020 6f70 656e 2863 6f6e 6669        open(confi
+0000ea30: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+0000ea40: 482c 2022 7222 2c20 656e 636f 6469 6e67  H, "r", encoding
+0000ea50: 3d22 7574 662d 3822 2920 6173 2067 2c0a  ="utf-8") as g,.
+0000ea60: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0000ea70: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
+0000ea80: 696e 2067 3a0a 2020 2020 2020 2020 2020  in g:.          
+0000ea90: 2020 2020 2020 662e 7772 6974 6528 6622        f.write(f"
+0000eaa0: 7b6c 696e 652e 7374 7269 7028 292e 7370  {line.strip().sp
+0000eab0: 6c69 7428 277c 2729 5b30 5d7d 7c30 5c6e  lit('|')[0]}|0\n
+0000eac0: 2229 0a20 2020 2069 6620 6e6f 7420 6f73  ").    if not os
+0000ead0: 2e70 6174 682e 6578 6973 7473 2863 6f6e  .path.exists(con
+0000eae0: 6669 672e 4355 525f 5945 4152 5f53 5441  fig.CUR_YEAR_STA
+0000eaf0: 5453 5f50 4154 4829 3a0a 2020 2020 2020  TS_PATH):.      
+0000eb00: 2020 7769 7468 2028 0a20 2020 2020 2020    with (.       
+0000eb10: 2020 2020 206f 7065 6e28 636f 6e66 6967       open(config
+0000eb20: 2e43 5552 5f59 4541 525f 5354 4154 535f  .CUR_YEAR_STATS_
+0000eb30: 5041 5448 2c20 2277 222c 2065 6e63 6f64  PATH, "w", encod
+0000eb40: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
+0000eb50: 662c 0a20 2020 2020 2020 2020 2020 206f  f,.            o
+0000eb60: 7065 6e28 636f 6e66 6967 2e53 4f4e 4753  pen(config.SONGS
+0000eb70: 5f49 4e46 4f5f 5041 5448 2c20 2272 222c  _INFO_PATH, "r",
+0000eb80: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
+0000eb90: 2229 2061 7320 672c 0a20 2020 2020 2020  ") as g,.       
+0000eba0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+0000ebb0: 666f 7220 6c69 6e65 2069 6e20 673a 0a20  for line in g:. 
+0000ebc0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000ebd0: 2e77 7269 7465 2866 227b 6c69 6e65 2e73  .write(f"{line.s
+0000ebe0: 7472 6970 2829 2e73 706c 6974 2827 7c27  trip().split('|'
+0000ebf0: 295b 305d 7d7c 305c 6e22 290a 0a0a 4063  )[0]}|0\n")...@c
+0000ec00: 6c69 2e63 6f6d 6d61 6e64 2829 0a40 636c  li.command().@cl
+0000ec10: 6963 6b2e 6172 6775 6d65 6e74 2822 7061  ick.argument("pa
+0000ec20: 7468 5f22 2c20 6d65 7461 7661 723d 2250  th_", metavar="P
+0000ec30: 4154 485f 4f52 5f55 524c 2229 0a40 636c  ATH_OR_URL").@cl
+0000ec40: 6963 6b2e 6172 6775 6d65 6e74 2822 7461  ick.argument("ta
+0000ec50: 6773 222c 206e 6172 6773 3d2d 3129 0a40  gs", nargs=-1).@
+0000ec60: 636c 6963 6b2e 6f70 7469 6f6e 280a 2020  click.option(.  
+0000ec70: 2020 222d 4d2f 2d6e 4d22 2c0a 2020 2020    "-M/-nM",.    
+0000ec80: 222d 2d6d 6f76 652f 2d2d 6e6f 2d6d 6f76  "--move/--no-mov
+0000ec90: 6522 2c0a 2020 2020 226d 6f76 655f 222c  e",.    "move_",
+0000eca0: 0a20 2020 2064 6566 6175 6c74 3d46 616c  .    default=Fal
+0000ecb0: 7365 2c0a 2020 2020 6865 6c70 3d22 4d6f  se,.    help="Mo
+0000ecc0: 7665 2066 696c 6520 6672 6f6d 2050 4154  ve file from PAT
+0000ecd0: 4820 746f 206d 6165 7374 726f 2773 2069  H to maestro's i
+0000ece0: 6e74 6572 6e61 6c20 736f 6e67 2064 6174  nternal song dat
+0000ecf0: 6162 6173 6520 696e 7374 6561 6420 6f66  abase instead of
+0000ed00: 2063 6f70 7969 6e67 2e22 2c0a 290a 4063   copying.",.).@c
+0000ed10: 6c69 636b 2e6f 7074 696f 6e28 0a20 2020  lick.option(.   
+0000ed20: 2022 2d6e 222c 0a20 2020 2022 2d2d 6e61   "-n",.    "--na
+0000ed30: 6d65 222c 0a20 2020 2074 7970 653d 7374  me",.    type=st
+0000ed40: 722c 0a20 2020 2068 656c 703d 2257 6861  r,.    help="Wha
+0000ed50: 7420 746f 206e 616d 6520 7468 6520 736f  t to name the so
+0000ed60: 6e67 2c20 6966 2079 6f75 2064 6f6e 2774  ng, if you don't
+0000ed70: 2077 616e 7420 746f 2075 7365 2074 6865   want to use the
+0000ed80: 2074 6974 6c65 2066 726f 6d20 596f 7574   title from Yout
+0000ed90: 7562 652f 5370 6f74 6966 7920 6f72 2066  ube/Spotify or f
+0000eda0: 696c 656e 616d 652e 2044 6f20 6e6f 7420  ilename. Do not 
+0000edb0: 696e 636c 7564 6520 616e 2065 7874 656e  include an exten
+0000edc0: 7369 6f6e 2028 652e 672e 2027 2e77 6176  sion (e.g. '.wav
+0000edd0: 2729 2e20 4967 6e6f 7265 6420 6966 2061  '). Ignored if a
+0000ede0: 6464 696e 6720 6d75 6c74 6970 6c65 2073  dding multiple s
+0000edf0: 6f6e 6773 2e22 2c0a 290a 4063 6c69 636b  ongs.",.).@click
+0000ee00: 2e6f 7074 696f 6e28 0a20 2020 2022 2d52  .option(.    "-R
+0000ee10: 2c20 2d6e 5222 2c0a 2020 2020 222d 2d72  , -nR",.    "--r
+0000ee20: 6563 7572 7369 7665 2f2d 2d6e 6f2d 7265  ecursive/--no-re
+0000ee30: 6375 7273 6976 6522 2c0a 2020 2020 2272  cursive",.    "r
+0000ee40: 6563 7572 7365 222c 0a20 2020 2064 6566  ecurse",.    def
+0000ee50: 6175 6c74 3d46 616c 7365 2c0a 2020 2020  ault=False,.    
+0000ee60: 6865 6c70 3d22 4966 2050 4154 4820 6973  help="If PATH is
+0000ee70: 2061 2066 6f6c 6465 722c 2061 6464 2073   a folder, add s
+0000ee80: 6f6e 6773 2069 6e20 7375 6266 6f6c 6465  ongs in subfolde
+0000ee90: 7273 2e22 2c0a 290a 4063 6c69 636b 2e6f  rs.",.).@click.o
+0000eea0: 7074 696f 6e28 0a20 2020 2022 2d59 2f2d  ption(.    "-Y/-
+0000eeb0: 6e59 222c 0a20 2020 2022 2d2d 796f 7574  nY",.    "--yout
+0000eec0: 7562 652f 2d2d 6e6f 2d79 6f75 7475 6265  ube/--no-youtube
+0000eed0: 222c 0a20 2020 2064 6566 6175 6c74 3d46  ",.    default=F
+0000eee0: 616c 7365 2c0a 2020 2020 6865 6c70 3d22  alse,.    help="
+0000eef0: 4164 6420 6120 736f 6e67 2066 726f 6d20  Add a song from 
+0000ef00: 6120 596f 7554 7562 6520 6f72 2059 6f75  a YouTube or You
+0000ef10: 5475 6265 204d 7573 6963 2055 524c 2e22  Tube Music URL."
+0000ef20: 2c0a 290a 4063 6c69 636b 2e6f 7074 696f  ,.).@click.optio
+0000ef30: 6e28 0a20 2020 2022 2d53 2f2d 6e53 222c  n(.    "-S/-nS",
+0000ef40: 0a20 2020 2022 2d2d 7370 6f74 6966 792f  .    "--spotify/
+0000ef50: 2d2d 6e6f 2d73 706f 7469 6679 222c 0a20  --no-spotify",. 
+0000ef60: 2020 2064 6566 6175 6c74 3d46 616c 7365     default=False
+0000ef70: 2c0a 2020 2020 6865 6c70 3d22 4164 6420  ,.    help="Add 
+0000ef80: 6120 736f 6e67 2066 726f 6d20 5370 6f74  a song from Spot
+0000ef90: 6966 7920 2874 7261 636b 2055 524c 2c20  ify (track URL, 
+0000efa0: 616c 6275 6d20 5552 4c2c 2070 6c61 796c  album URL, playl
+0000efb0: 6973 7420 5552 4c2c 2061 7274 6973 7420  ist URL, artist 
+0000efc0: 5552 4c2c 206f 7220 7365 6172 6368 2071  URL, or search q
+0000efd0: 7565 7279 292e 222c 0a29 0a40 636c 6963  uery).",.).@clic
+0000efe0: 6b2e 6f70 7469 6f6e 280a 2020 2020 222d  k.option(.    "-
+0000eff0: 6622 2c0a 2020 2020 222d 2d66 6f72 6d61  f",.    "--forma
+0000f000: 7422 2c0a 2020 2020 2266 6f72 6d61 745f  t",.    "format_
+0000f010: 222c 0a20 2020 2074 7970 653d 636c 6963  ",.    type=clic
+0000f020: 6b2e 4368 6f69 6365 285b 2277 6176 222c  k.Choice(["wav",
+0000f030: 2022 6d70 3322 2c20 2266 6c61 6322 2c20   "mp3", "flac", 
+0000f040: 226f 6767 225d 292c 0a20 2020 2068 656c  "ogg"]),.    hel
+0000f050: 703d 2253 7065 6369 6679 2074 6865 2066  p="Specify the f
+0000f060: 6f72 6d61 7420 6f66 2074 6865 2073 6f6e  ormat of the son
+0000f070: 6720 6966 2064 6f77 6e6c 6f61 6469 6e67  g if downloading
+0000f080: 2066 726f 6d20 596f 7554 7562 652c 2059   from YouTube, Y
+0000f090: 6f75 5475 6265 204d 7573 6963 2c20 6f72  ouTube Music, or
+0000f0a0: 2053 706f 7469 6679 2055 524c 2e22 2c0a   Spotify URL.",.
+0000f0b0: 2020 2020 6465 6661 756c 743d 2266 6c61      default="fla
+0000f0c0: 6322 2c0a 2020 2020 7368 6f77 5f64 6566  c",.    show_def
+0000f0d0: 6175 6c74 3d54 7275 652c 0a29 0a40 636c  ault=True,.).@cl
+0000f0e0: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
+0000f0f0: 222d 6322 2c0a 2020 2020 222d 2d63 6c69  "-c",.    "--cli
+0000f100: 7022 2c0a 2020 2020 6e61 7267 733d 322c  p",.    nargs=2,
+0000f110: 0a20 2020 2074 7970 653d 666c 6f61 742c  .    type=float,
+0000f120: 0a20 2020 2068 656c 703d 2241 6464 2061  .    help="Add a
+0000f130: 2063 6c69 702e 2049 676e 6f72 6564 2069   clip. Ignored i
+0000f140: 6620 6164 6469 6e67 206d 756c 7469 706c  f adding multipl
+0000f150: 6520 736f 6e67 732e 222c 0a29 0a40 636c  e songs.",.).@cl
+0000f160: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
+0000f170: 222d 502f 2d6e 5022 2c0a 2020 2020 222d  "-P/-nP",.    "-
+0000f180: 2d70 6c61 796c 6973 742f 2d2d 6e6f 2d70  -playlist/--no-p
+0000f190: 6c61 796c 6973 7422 2c0a 2020 2020 2270  laylist",.    "p
+0000f1a0: 6c61 796c 6973 745f 222c 0a20 2020 2064  laylist_",.    d
+0000f1b0: 6566 6175 6c74 3d46 616c 7365 2c0a 2020  efault=False,.  
+0000f1c0: 2020 6865 6c70 3d22 4966 2073 6f6e 6720    help="If song 
+0000f1d0: 5552 4c20 7061 7373 6564 2069 7320 6672  URL passed is fr
+0000f1e0: 6f6d 2061 2059 6f75 5475 6265 2070 6c61  om a YouTube pla
+0000f1f0: 796c 6973 742c 2064 6f77 6e6c 6f61 6420  ylist, download 
+0000f200: 616c 6c20 7468 6520 736f 6e67 732e 2049  all the songs. I
+0000f210: 6620 7468 6520 5552 4c20 706f 696e 7473  f the URL points
+0000f220: 2064 6972 6563 746c 7920 746f 2061 2070   directly to a p
+0000f230: 6c61 796c 6973 742c 2074 6869 7320 666c  laylist, this fl
+0000f240: 6167 2069 7320 756e 6e63 6573 7361 7279  ag is unncessary
+0000f250: 2e22 2c0a 290a 4063 6c69 636b 2e6f 7074  .",.).@click.opt
+0000f260: 696f 6e28 0a20 2020 2022 2d6d 222c 0a20  ion(.    "-m",. 
+0000f270: 2020 2022 2d2d 6d65 7461 6461 7461 222c     "--metadata",
+0000f280: 0a20 2020 2022 6d65 7461 6461 7461 5f70  .    "metadata_p
+0000f290: 6169 7273 222c 0a20 2020 2064 6566 6175  airs",.    defau
+0000f2a0: 6c74 3d4e 6f6e 652c 0a20 2020 2068 656c  lt=None,.    hel
+0000f2b0: 703d 2241 6464 206d 6574 6164 6174 6120  p="Add metadata 
+0000f2c0: 746f 2074 6865 2073 6f6e 672e 2049 676e  to the song. Ign
+0000f2d0: 6f72 6564 2069 6620 6164 6469 6e67 206d  ored if adding m
+0000f2e0: 756c 7469 706c 6520 736f 6e67 732e 2054  ultiple songs. T
+0000f2f0: 6865 2066 6f72 6d61 7420 6973 2027 6b65  he format is 'ke
+0000f300: 7931 3a76 616c 7565 317c 6b65 7932 3a76  y1:value1|key2:v
+0000f310: 616c 7565 327c 2e2e 2e27 2e22 2c0a 290a  alue2|...'.",.).
+0000f320: 6465 6620 6164 6428 0a20 2020 2070 6174  def add(.    pat
+0000f330: 685f 2c0a 2020 2020 7461 6773 2c0a 2020  h_,.    tags,.  
+0000f340: 2020 6d6f 7665 5f2c 0a20 2020 206e 616d    move_,.    nam
+0000f350: 652c 0a20 2020 2072 6563 7572 7365 2c0a  e,.    recurse,.
+0000f360: 2020 2020 796f 7574 7562 652c 0a20 2020      youtube,.   
+0000f370: 2073 706f 7469 6679 2c0a 2020 2020 666f   spotify,.    fo
+0000f380: 726d 6174 5f2c 0a20 2020 2063 6c69 702c  rmat_,.    clip,
+0000f390: 0a20 2020 2070 6c61 796c 6973 745f 2c0a  .    playlist_,.
+0000f3a0: 2020 2020 6d65 7461 6461 7461 5f70 6169      metadata_pai
+0000f3b0: 7273 2c0a 293a 0a20 2020 2022 2222 0a20  rs,.):.    """. 
+0000f3c0: 2020 2041 6464 2061 206e 6577 2073 6f6e     Add a new son
+0000f3d0: 672e 0a0a 2020 2020 4164 6473 2074 6865  g...    Adds the
+0000f3e0: 2061 7564 696f 2066 696c 6520 6c6f 6361   audio file loca
+0000f3f0: 7465 6420 6174 2050 4154 482e 2049 6620  ted at PATH. If 
+0000f400: 5041 5448 2069 7320 6120 666f 6c64 6572  PATH is a folder
+0000f410: 2c20 6164 6473 2061 6c6c 2066 696c 6573  , adds all files
+0000f420: 0a20 2020 2069 6e20 5041 5448 2028 696e  .    in PATH (in
+0000f430: 636c 7564 696e 6720 6669 6c65 7320 696e  cluding files in
+0000f440: 2073 7562 666f 6c64 6572 7320 6966 2027   subfolders if '
+0000f450: 2d72 2720 6973 2070 6173 7365 6429 2e20  -r' is passed). 
+0000f460: 5468 6520 6e61 6d65 206f 6620 6561 6368  The name of each
+0000f470: 0a20 2020 2073 6f6e 6720 7769 6c6c 2062  .    song will b
+0000f480: 6520 7468 6520 6669 6c65 6e61 6d65 2028  e the filename (
+0000f490: 756e 6c65 7373 2027 2d6e 2720 6973 2070  unless '-n' is p
+0000f4a0: 6173 7365 6429 2e20 4669 6c65 6e61 6d65  assed). Filename
+0000f4b0: 7320 616e 6420 7461 6773 2063 616e 6e6f  s and tags canno
+0000f4c0: 740a 2020 2020 636f 6e74 6169 6e20 7468  t.    contain th
+0000f4d0: 6520 6368 6172 6163 7465 7220 277c 272c  e character '|',
+0000f4e0: 2061 6e64 2074 6167 7320 6361 6e6e 6f74   and tags cannot
+0000f4f0: 2063 6f6e 7461 696e 2027 2c27 2e0a 0a20   contain ','... 
+0000f500: 2020 2049 6620 7468 6520 272d 5927 206f     If the '-Y' o
+0000f510: 7220 272d 2d79 6f75 7475 6265 2720 666c  r '--youtube' fl
+0000f520: 6167 2069 7320 7061 7373 6564 2c20 5041  ag is passed, PA
+0000f530: 5448 2069 7320 7472 6561 7465 6420 6173  TH is treated as
+0000f540: 2061 2059 6f75 5475 6265 206f 720a 2020   a YouTube or.  
+0000f550: 2020 596f 7554 7562 6520 4d75 7369 6320    YouTube Music 
+0000f560: 5552 4c20 696e 7374 6561 6420 6f66 2061  URL instead of a
+0000f570: 2066 696c 6520 7061 7468 2e0a 0a20 2020   file path...   
+0000f580: 2049 6620 7468 6520 272d 5327 206f 7220   If the '-S' or 
+0000f590: 272d 2d73 706f 7469 6679 2720 666c 6167  '--spotify' flag
+0000f5a0: 2069 7320 7061 7373 6564 2c20 5041 5448   is passed, PATH
+0000f5b0: 2069 7320 7472 6561 7465 6420 6173 2061   is treated as a
+0000f5c0: 2053 706f 7469 6679 0a20 2020 2074 7261   Spotify.    tra
+0000f5d0: 636b 2055 524c 2c20 616c 6275 6d20 5552  ck URL, album UR
+0000f5e0: 4c2c 2070 6c61 796c 6973 7420 5552 4c2c  L, playlist URL,
+0000f5f0: 2061 7274 6973 7420 5552 4c2c 206f 7220   artist URL, or 
+0000f600: 7365 6172 6368 2071 7565 7279 2069 6e73  search query ins
+0000f610: 7465 6164 206f 660a 2020 2020 6120 6669  tead of.    a fi
+0000f620: 6c65 2070 6174 682e 0a0a 2020 2020 5468  le path...    Th
+0000f630: 6520 272d 632f 2d2d 636c 6970 2720 6f70  e '-c/--clip' op
+0000f640: 7469 6f6e 2063 616e 2062 6520 7573 6564  tion can be used
+0000f650: 2074 6f20 6164 6420 6120 636c 6970 2066   to add a clip f
+0000f660: 6f72 2074 6865 2073 6f6e 672e 2049 7420  or the song. It 
+0000f670: 7461 6b65 7320 7477 6f0a 2020 2020 6172  takes two.    ar
+0000f680: 6775 6d65 6e74 732c 2062 7574 2075 6e6c  guments, but unl
+0000f690: 696b 6520 276d 6165 7374 726f 2063 6c69  ike 'maestro cli
+0000f6a0: 7027 2c20 796f 7520 6361 6e6e 6f74 2070  p', you cannot p
+0000f6b0: 6173 7320 6f6e 6c79 2074 6865 2073 7461  ass only the sta
+0000f6c0: 7274 2074 696d 650a 2020 2020 616e 6420  rt time.    and 
+0000f6d0: 6e6f 7420 7468 6520 656e 642e 2054 6f20  not the end. To 
+0000f6e0: 6765 7420 6172 6f75 6e64 2074 6869 732c  get around this,
+0000f6f0: 2079 6f75 2063 616e 2070 6173 7320 2d31   you can pass -1
+0000f700: 2061 7320 7468 6520 656e 6420 7469 6d65   as the end time
+0000f710: 2c20 652e 672e 0a20 2020 2027 6d61 6573  , e.g..    'maes
+0000f720: 7472 6f20 6164 6420 2d63 2033 3020 2d31  tro add -c 30 -1
+0000f730: 2068 7474 7073 3a2f 2f77 7777 2e79 6f75   https://www.you
+0000f740: 7475 6265 2e63 6f6d 2f77 6174 6368 3f76  tube.com/watch?v
+0000f750: 3d33 5678 754d 4572 4364 2d45 202d 7927  =3VxuMErCd-E -y'
+0000f760: 2e20 4966 0a20 2020 2061 6464 696e 6720  . If.    adding 
+0000f770: 6d75 6c74 6970 6c65 2073 6f6e 6773 2c20  multiple songs, 
+0000f780: 7468 6973 206f 7074 696f 6e20 6361 6e6e  this option cann
+0000f790: 6f74 2062 6520 7573 6564 2e0a 0a20 2020  ot be used...   
+0000f7a0: 2054 6865 2027 2d6d 2f2d 2d6d 6574 6164   The '-m/--metad
+0000f7b0: 6174 6127 206f 7074 696f 6e20 6361 6e20  ata' option can 
+0000f7c0: 6265 2075 7365 6420 746f 2061 6464 206d  be used to add m
+0000f7d0: 6574 6164 6174 6120 746f 2074 6865 2073  etadata to the s
+0000f7e0: 6f6e 672e 2049 7420 7461 6b65 730a 2020  ong. It takes.  
+0000f7f0: 2020 6120 7374 7269 6e67 206f 6620 7468    a string of th
+0000f800: 6520 666f 726d 6174 2027 6b65 7931 3a76  e format 'key1:v
+0000f810: 616c 7565 317c 6b65 7932 3a76 616c 7565  alue1|key2:value
+0000f820: 327c 2e2e 2e27 2e20 4966 2061 6464 696e  2|...'. If addin
+0000f830: 6720 6d75 6c74 6970 6c65 0a20 2020 2073  g multiple.    s
+0000f840: 6f6e 6773 2c20 7468 6973 206f 7074 696f  ongs, this optio
+0000f850: 6e20 6361 6e6e 6f74 2062 6520 7573 6564  n cannot be used
+0000f860: 2e0a 0a20 2020 2050 6f73 7369 626c 6520  ...    Possible 
+0000f870: 6564 6974 6162 6c65 206d 6574 6164 6174  editable metadat
+0000f880: 6120 6b65 7973 2061 7265 3a20 616c 6275  a keys are: albu
+0000f890: 6d2c 2061 6c62 756d 6172 7469 7374 2c20  m, albumartist, 
+0000f8a0: 6172 7469 7374 2c20 6172 7477 6f72 6b2c  artist, artwork,
+0000f8b0: 0a20 2020 2063 6f6d 6d65 6e74 2c20 636f  .    comment, co
+0000f8c0: 6d70 696c 6174 696f 6e2c 2063 6f6d 706f  mpilation, compo
+0000f8d0: 7365 722c 2064 6973 636e 756d 6265 722c  ser, discnumber,
+0000f8e0: 2067 656e 7265 2c20 6c79 7269 6373 2c20   genre, lyrics, 
+0000f8f0: 746f 7461 6c64 6973 6373 2c0a 2020 2020  totaldiscs,.    
+0000f900: 746f 7461 6c74 7261 636b 732c 2074 7261  totaltracks, tra
+0000f910: 636b 6e75 6d62 6572 2c20 7472 6163 6b74  cknumber, trackt
+0000f920: 6974 6c65 2c20 7965 6172 2c20 6973 7263  itle, year, isrc
+0000f930: 0a0a 2020 2020 4b65 7973 2061 7265 206e  ..    Keys are n
+0000f940: 6f74 2063 6173 6520 7365 6e73 6974 6976  ot case sensitiv
+0000f950: 6520 616e 6420 6361 6e20 636f 6e74 6169  e and can contai
+0000f960: 6e20 6172 6269 7472 6172 7920 7768 6974  n arbitrary whit
+0000f970: 6573 7061 6365 2c20 272d 272c 2061 6e64  espace, '-', and
+0000f980: 0a20 2020 2027 5f27 2063 6861 7261 6374  .    '_' charact
+0000f990: 6572 732e 2049 6e20 6f74 6865 7220 776f  ers. In other wo
+0000f9a0: 7264 732c 2027 416c 6275 6d20 4172 7469  rds, 'Album Arti
+0000f9b0: 7374 272c 2027 616c 6275 6d2d 6172 7469  st', 'album-arti
+0000f9c0: 7374 272c 2061 6e64 0a20 2020 2027 616c  st', and.    'al
+0000f9d0: 6275 6d5f 6172 7469 7374 2720 6172 6520  bum_artist' are 
+0000f9e0: 616c 6c20 7379 6e6f 6e79 6d73 2066 6f72  all synonyms for
+0000f9f0: 2027 616c 6275 6d61 7274 6973 7427 2e20   'albumartist'. 
+0000fa00: 416c 736f 2c20 2764 6973 6b27 2069 730a  Also, 'disk' is.
+0000fa10: 2020 2020 7379 6e6f 6e79 6d6f 7573 2077      synonymous w
+0000fa20: 6974 6820 2764 6973 6327 2e0a 2020 2020  ith 'disc'..    
+0000fa30: 2222 220a 0a20 2020 2070 6174 6873 203d  """..    paths =
+0000fa40: 204e 6f6e 650a 2020 2020 6966 206e 6f74   None.    if not
+0000fa50: 2028 796f 7574 7562 6520 6f72 2073 706f   (youtube or spo
+0000fa60: 7469 6679 2920 616e 6420 6e6f 7420 6f73  tify) and not os
+0000fa70: 2e70 6174 682e 6578 6973 7473 2870 6174  .path.exists(pat
+0000fa80: 685f 293a 0a20 2020 2020 2020 2063 6c69  h_):.        cli
+0000fa90: 636b 2e73 6563 686f 280a 2020 2020 2020  ck.secho(.      
+0000faa0: 2020 2020 2020 6622 5468 6520 7061 7468        f"The path
+0000fab0: 2027 7b70 6174 685f 7d27 2064 6f65 7320   '{path_}' does 
+0000fac0: 6e6f 7420 6578 6973 742e 2054 6f20 646f  not exist. To do
+0000fad0: 776e 6c6f 6164 2066 726f 6d20 6120 596f  wnload from a Yo
+0000fae0: 7554 7562 6520 6f72 2059 6f75 5475 6265  uTube or YouTube
+0000faf0: 204d 7573 6963 2055 526c 2c20 7061 7373   Music URl, pass
+0000fb00: 2074 6865 2027 2d59 2f2d 2d79 6f75 7475   the '-Y/--youtu
+0000fb10: 6265 2720 666c 6167 2e20 546f 2064 6f77  be' flag. To dow
+0000fb20: 6e6c 6f61 6420 6672 6f6d 2061 2053 706f  nload from a Spo
+0000fb30: 7469 6679 2055 526c 2c20 7061 7373 2074  tify URl, pass t
+0000fb40: 6865 2027 2d53 2f2d 2d73 706f 7469 6679  he '-S/--spotify
+0000fb50: 2720 666c 6167 2e22 2c0a 2020 2020 2020  ' flag.",.      
+0000fb60: 2020 2020 2020 6667 3d22 7265 6422 2c0a        fg="red",.
+0000fb70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000fb80: 2020 7265 7475 726e 0a0a 2020 2020 6966    return..    if
+0000fb90: 2079 6f75 7475 6265 206f 7220 7370 6f74   youtube or spot
+0000fba0: 6966 793a 0a20 2020 2020 2020 2069 6620  ify:.        if 
+0000fbb0: 796f 7574 7562 6520 616e 6420 7370 6f74  youtube and spot
+0000fbc0: 6966 793a 0a20 2020 2020 2020 2020 2020  ify:.           
+0000fbd0: 2063 6c69 636b 2e73 6563 686f 280a 2020   click.secho(.  
+0000fbe0: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+0000fbf0: 616e 6e6f 7420 7061 7373 2062 6f74 6820  annot pass both 
+0000fc00: 272d 792f 2d2d 796f 7574 7562 6527 2061  '-y/--youtube' a
+0000fc10: 6e64 2027 2d73 2f2d 2d73 706f 7469 6679  nd '-s/--spotify
+0000fc20: 2720 666c 6167 732e 222c 0a20 2020 2020  ' flags.",.     
+0000fc30: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
+0000fc40: 6564 222c 0a20 2020 2020 2020 2020 2020  ed",.           
+0000fc50: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
+0000fc60: 6574 7572 6e0a 0a20 2020 2020 2020 2069  eturn..        i
+0000fc70: 6620 796f 7574 7562 653a 0a20 2020 2020  f youtube:.     
+0000fc80: 2020 2020 2020 2069 6620 666f 726d 6174         if format
+0000fc90: 5f20 3d3d 2022 6f67 6722 3a0a 2020 2020  _ == "ogg":.    
+0000fca0: 2020 2020 2020 2020 2020 2020 636c 6963              clic
+0000fcb0: 6b2e 7365 6368 6f28 0a20 2020 2020 2020  k.secho(.       
+0000fcc0: 2020 2020 2020 2020 2020 2020 2022 4361               "Ca
+0000fcd0: 6e6e 6f74 2064 6f77 6e6c 6f61 6420 736f  nnot download so
+0000fce0: 6e67 7320 6672 6f6d 2059 6f75 5475 6265  ngs from YouTube
+0000fcf0: 2061 7320 272e 6f67 6727 2e20 506c 6561   as '.ogg'. Plea
+0000fd00: 7365 2063 686f 6f73 6520 6120 6469 6666  se choose a diff
+0000fd10: 6572 656e 7420 666f 726d 6174 2e22 2c0a  erent format.",.
 0000fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd30: 2020 6667 3d22 7265 6422 2c0a 2020 2020    fg="red",.    
-0000fd40: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000fd50: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0000fd60: 7475 726e 0a20 2020 2020 2020 2020 2020  turn.           
-0000fd70: 2073 7562 7072 6f63 6573 732e 7275 6e28   subprocess.run(
-0000fd80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fd90: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
-0000fda0: 2020 2020 2020 2022 7974 2d64 6c70 222c         "yt-dlp",
-0000fdb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fdc0: 2020 2020 2070 6174 685f 2c0a 2020 2020       path_,.    
+0000fd30: 2020 2020 6667 3d22 7265 6422 2c0a 2020      fg="red",.  
+0000fd40: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0000fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fd60: 7265 7475 726e 0a20 2020 2020 2020 2020  return.         
+0000fd70: 2020 2073 7562 7072 6f63 6573 732e 7275     subprocess.ru
+0000fd80: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0000fd90: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
+0000fda0: 2020 2020 2020 2020 2022 7974 2d64 6c70           "yt-dlp
+0000fdb0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0000fdc0: 2020 2020 2020 2070 6174 685f 2c0a 2020         path_,.  
 0000fdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fde0: 222d 7822 2c20 2023 2065 7874 7261 6374  "-x",  # extract
-0000fdf0: 2061 7564 696f 2028 6e65 6365 7373 6172   audio (necessar
-0000fe00: 792c 206e 6565 6473 2066 666d 7065 6729  y, needs ffmpeg)
-0000fe10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fe20: 2020 2020 2022 2d2d 6175 6469 6f2d 666f       "--audio-fo
-0000fe30: 726d 6174 222c 0a20 2020 2020 2020 2020  rmat",.         
-0000fe40: 2020 2020 2020 2020 2020 2066 6f72 6d61             forma
-0000fe50: 745f 2c0a 2020 2020 2020 2020 2020 2020  t_,.            
-0000fe60: 2020 2020 2020 2020 222d 2d6e 6f2d 706c          "--no-pl
-0000fe70: 6179 6c69 7374 2220 6966 206e 6f74 2070  aylist" if not p
-0000fe80: 6c61 796c 6973 745f 2065 6c73 6520 2222  laylist_ else ""
-0000fe90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000fea0: 2020 2020 2020 222d 2d65 6d62 6564 2d6d        "--embed-m
-0000feb0: 6574 6164 6174 6122 2c0a 2020 2020 2020  etadata",.      
-0000fec0: 2020 2020 2020 2020 2020 2020 2020 222d                "-
-0000fed0: 6f22 2c0a 2020 2020 2020 2020 2020 2020  o",.            
-0000fee0: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
-0000fef0: 6a6f 696e 2863 6f6e 6669 672e 4d41 4553  join(config.MAES
-0000ff00: 5452 4f5f 4449 522c 2022 2528 7469 746c  TRO_DIR, "%(titl
-0000ff10: 6529 732e 2528 6578 7429 7322 292c 0a20  e)s.%(ext)s"),. 
-0000ff20: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-0000ff30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000ff40: 2020 6368 6563 6b3d 5472 7565 2c0a 2020    check=True,.  
-0000ff50: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0000ff60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000ff70: 2020 2020 2020 6966 2066 6f72 6d61 745f        if format_
-0000ff80: 203d 3d20 2277 6176 223a 0a20 2020 2020   == "wav":.     
-0000ff90: 2020 2020 2020 2020 2020 2063 6c69 636b             click
-0000ffa0: 2e73 6563 686f 280a 2020 2020 2020 2020  .secho(.        
-0000ffb0: 2020 2020 2020 2020 2020 2020 2243 616e              "Can
-0000ffc0: 6e6f 7420 646f 776e 6c6f 6164 2073 6f6e  not download son
-0000ffd0: 6773 2066 726f 6d20 5370 6f74 6966 7920  gs from Spotify 
-0000ffe0: 6173 2027 2e77 6176 272e 2050 6c65 6173  as '.wav'. Pleas
-0000fff0: 6520 6368 6f6f 7365 2061 2064 6966 6665  e choose a diffe
-00010000: 7265 6e74 2066 6f72 6d61 742e 222c 0a20  rent format.",. 
-00010010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010020: 2020 2066 673d 2272 6564 222c 0a20 2020     fg="red",.   
-00010030: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00010040: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00010050: 6574 7572 6e0a 0a20 2020 2020 2020 2020  eturn..         
-00010060: 2020 2063 7764 203d 206f 732e 6765 7463     cwd = os.getc
-00010070: 7764 2829 0a20 2020 2020 2020 2020 2020  wd().           
-00010080: 206f 732e 6368 6469 7228 636f 6e66 6967   os.chdir(config
-00010090: 2e4d 4145 5354 524f 5f44 4952 290a 2020  .MAESTRO_DIR).  
-000100a0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-000100b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000100c0: 7562 7072 6f63 6573 732e 7275 6e28 0a20  ubprocess.run(. 
-000100d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000100e0: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
-000100f0: 2020 2020 2020 2020 2020 2020 2022 7370               "sp
-00010100: 6f74 646c 222c 0a20 2020 2020 2020 2020  otdl",.         
-00010110: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00010120: 646f 776e 6c6f 6164 222c 0a20 2020 2020  download",.     
+0000fde0: 2020 222d 7822 2c20 2023 2065 7874 7261    "-x",  # extra
+0000fdf0: 6374 2061 7564 696f 2028 6e65 6365 7373  ct audio (necess
+0000fe00: 6172 792c 206e 6565 6473 2066 666d 7065  ary, needs ffmpe
+0000fe10: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0000fe20: 2020 2020 2020 2022 2d2d 6175 6469 6f2d         "--audio-
+0000fe30: 666f 726d 6174 222c 0a20 2020 2020 2020  format",.       
+0000fe40: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0000fe50: 6d61 745f 2c0a 2020 2020 2020 2020 2020  mat_,.          
+0000fe60: 2020 2020 2020 2020 2020 222d 2d6e 6f2d            "--no-
+0000fe70: 706c 6179 6c69 7374 2220 6966 206e 6f74  playlist" if not
+0000fe80: 2070 6c61 796c 6973 745f 2065 6c73 6520   playlist_ else 
+0000fe90: 2222 2c0a 2020 2020 2020 2020 2020 2020  "",.            
+0000fea0: 2020 2020 2020 2020 222d 2d65 6d62 6564          "--embed
+0000feb0: 2d6d 6574 6164 6174 6122 2c0a 2020 2020  -metadata",.    
+0000fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fed0: 222d 6f22 2c0a 2020 2020 2020 2020 2020  "-o",.          
+0000fee0: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+0000fef0: 682e 6a6f 696e 2863 6f6e 6669 672e 4d41  h.join(config.MA
+0000ff00: 4553 5452 4f5f 4449 522c 2022 2528 7469  ESTRO_DIR, "%(ti
+0000ff10: 746c 6529 732e 2528 6578 7429 7322 292c  tle)s.%(ext)s"),
+0000ff20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ff30: 205d 2c0a 2020 2020 2020 2020 2020 2020   ],.            
+0000ff40: 2020 2020 6368 6563 6b3d 5472 7565 2c0a      check=True,.
+0000ff50: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000ff60: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000ff70: 2020 2020 2020 2020 6966 2066 6f72 6d61          if forma
+0000ff80: 745f 203d 3d20 2277 6176 223a 0a20 2020  t_ == "wav":.   
+0000ff90: 2020 2020 2020 2020 2020 2020 2063 6c69               cli
+0000ffa0: 636b 2e73 6563 686f 280a 2020 2020 2020  ck.secho(.      
+0000ffb0: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+0000ffc0: 616e 6e6f 7420 646f 776e 6c6f 6164 2073  annot download s
+0000ffd0: 6f6e 6773 2066 726f 6d20 5370 6f74 6966  ongs from Spotif
+0000ffe0: 7920 6173 2027 2e77 6176 272e 2050 6c65  y as '.wav'. Ple
+0000fff0: 6173 6520 6368 6f6f 7365 2061 2064 6966  ase choose a dif
+00010000: 6665 7265 6e74 2066 6f72 6d61 742e 222c  ferent format.",
+00010010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010020: 2020 2020 2066 673d 2272 6564 222c 0a20       fg="red",. 
+00010030: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00010040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010050: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
+00010060: 2020 2020 2063 7764 203d 206f 732e 6765       cwd = os.ge
+00010070: 7463 7764 2829 0a20 2020 2020 2020 2020  tcwd().         
+00010080: 2020 206f 732e 6368 6469 7228 636f 6e66     os.chdir(conf
+00010090: 6967 2e4d 4145 5354 524f 5f44 4952 290a  ig.MAESTRO_DIR).
+000100a0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+000100b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000100c0: 2073 7562 7072 6f63 6573 732e 7275 6e28   subprocess.run(
+000100d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000100e0: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+000100f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00010100: 7370 6f74 646c 222c 0a20 2020 2020 2020  spotdl",.       
+00010110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010120: 2022 646f 776e 6c6f 6164 222c 0a20 2020   "download",.   
 00010130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010140: 2020 2070 6174 685f 2c0a 2020 2020 2020     path_,.      
+00010140: 2020 2020 2070 6174 685f 2c0a 2020 2020       path_,.    
 00010150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010160: 2020 222d 2d6f 7574 7075 7422 2c0a 2020    "--output",.  
+00010160: 2020 2020 222d 2d6f 7574 7075 7422 2c0a      "--output",.
 00010170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010180: 2020 2020 2020 227b 7469 746c 657d 2e7b        "{title}.{
-00010190: 6f75 7470 7574 2d65 7874 7d22 2c0a 2020  output-ext}",.  
+00010180: 2020 2020 2020 2020 227b 7469 746c 657d          "{title}
+00010190: 2e7b 6f75 7470 7574 2d65 7874 7d22 2c0a  .{output-ext}",.
 000101a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000101b0: 2020 2020 2020 222d 2d66 6f72 6d61 7422        "--format"
-000101c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000101d0: 2020 2020 2020 2020 2020 666f 726d 6174            format
-000101e0: 5f2c 0a20 2020 2020 2020 2020 2020 2020  _,.             
-000101f0: 2020 2020 2020 2020 2020 2022 2d2d 6865             "--he
-00010200: 6164 6c65 7373 222c 0a20 2020 2020 2020  adless",.       
-00010210: 2020 2020 2020 2020 2020 2020 205d 2c0a               ],.
-00010220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010230: 2020 2020 6368 6563 6b3d 5472 7565 2c0a      check=True,.
-00010240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010250: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-00010260: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-00010270: 7320 6572 723a 0a20 2020 2020 2020 2020  s err:.         
-00010280: 2020 2020 2020 206f 732e 6368 6469 7228         os.chdir(
-00010290: 6377 6429 0a20 2020 2020 2020 2020 2020  cwd).           
-000102a0: 2020 2020 2072 6169 7365 2065 7272 0a0a       raise err..
-000102b0: 2020 2020 2020 2020 7061 7468 7320 3d20          paths = 
-000102c0: 5b5d 0a20 2020 2020 2020 2066 6f72 2066  [].        for f
-000102d0: 6e61 6d65 2069 6e20 6f73 2e6c 6973 7464  name in os.listd
-000102e0: 6972 2863 6f6e 6669 672e 4d41 4553 5452  ir(config.MAESTR
-000102f0: 4f5f 4449 5229 3a0a 2020 2020 2020 2020  O_DIR):.        
-00010300: 2020 2020 666f 7220 6620 696e 205b 222e      for f in [".
-00010310: 7761 7622 2c20 222e 6d70 3322 2c20 222e  wav", ".mp3", ".
-00010320: 666c 6163 222c 2022 2e6f 6767 225d 3a0a  flac", ".ogg"]:.
-00010330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010340: 6966 2066 6e61 6d65 2e65 6e64 7377 6974  if fname.endswit
-00010350: 6828 6629 3a0a 2020 2020 2020 2020 2020  h(f):.          
-00010360: 2020 2020 2020 2020 2020 7261 775f 7061            raw_pa
-00010370: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
-00010380: 6e28 636f 6e66 6967 2e4d 4145 5354 524f  n(config.MAESTRO
-00010390: 5f44 4952 2c20 666e 616d 6529 0a20 2020  _DIR, fname).   
+000101b0: 2020 2020 2020 2020 222d 2d66 6f72 6d61          "--forma
+000101c0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+000101d0: 2020 2020 2020 2020 2020 2020 666f 726d              form
+000101e0: 6174 5f2c 0a20 2020 2020 2020 2020 2020  at_,.           
+000101f0: 2020 2020 2020 2020 2020 2020 2022 2d2d               "--
+00010200: 6865 6164 6c65 7373 222c 0a20 2020 2020  headless",.     
+00010210: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00010220: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00010230: 2020 2020 2020 6368 6563 6b3d 5472 7565        check=True
+00010240: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00010250: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00010260: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00010270: 2061 7320 6572 723a 0a20 2020 2020 2020   as err:.       
+00010280: 2020 2020 2020 2020 206f 732e 6368 6469           os.chdi
+00010290: 7228 6377 6429 0a20 2020 2020 2020 2020  r(cwd).         
+000102a0: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
+000102b0: 0a0a 2020 2020 2020 2020 7061 7468 7320  ..        paths 
+000102c0: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
+000102d0: 2066 6e61 6d65 2069 6e20 6f73 2e6c 6973   fname in os.lis
+000102e0: 7464 6972 2863 6f6e 6669 672e 4d41 4553  tdir(config.MAES
+000102f0: 5452 4f5f 4449 5229 3a0a 2020 2020 2020  TRO_DIR):.      
+00010300: 2020 2020 2020 666f 7220 6620 696e 205b        for f in [
+00010310: 222e 7761 7622 2c20 222e 6d70 3322 2c20  ".wav", ".mp3", 
+00010320: 222e 666c 6163 222c 2022 2e6f 6767 225d  ".flac", ".ogg"]
+00010330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010340: 2020 6966 2066 6e61 6d65 2e65 6e64 7377    if fname.endsw
+00010350: 6974 6828 6629 3a0a 2020 2020 2020 2020  ith(f):.        
+00010360: 2020 2020 2020 2020 2020 2020 7261 775f              raw_
+00010370: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
+00010380: 6f69 6e28 636f 6e66 6967 2e4d 4145 5354  oin(config.MAEST
+00010390: 524f 5f44 4952 2c20 666e 616d 6529 0a20  RO_DIR, fname). 
 000103a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000103b0: 2073 616e 6974 697a 6564 5f70 6174 6820   sanitized_path 
-000103c0: 3d20 7261 775f 7061 7468 2e72 6570 6c61  = raw_path.repla
-000103d0: 6365 2822 7c22 2c20 222d 2229 0a0a 2020  ce("|", "-")..  
+000103b0: 2020 2073 616e 6974 697a 6564 5f70 6174     sanitized_pat
+000103c0: 6820 3d20 7261 775f 7061 7468 2e72 6570  h = raw_path.rep
+000103d0: 6c61 6365 2822 7c22 2c20 222d 2229 0a0a  lace("|", "-")..
 000103e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000103f0: 2020 6f73 2e72 656e 616d 6528 7261 775f    os.rename(raw_
-00010400: 7061 7468 2c20 7361 6e69 7469 7a65 645f  path, sanitized_
-00010410: 7061 7468 290a 0a20 2020 2020 2020 2020  path)..         
-00010420: 2020 2020 2020 2020 2020 2070 6174 6873             paths
-00010430: 2e61 7070 656e 6428 7361 6e69 7469 7a65  .append(sanitize
-00010440: 645f 7061 7468 290a 2020 2020 2020 2020  d_path).        
-00010450: 2020 2020 6966 2066 6e61 6d65 2e65 6e64      if fname.end
-00010460: 7377 6974 6828 222e 7061 7274 2229 3a20  swith(".part"): 
-00010470: 2023 2064 656c 6574 6520 696e 636f 6d70   # delete incomp
-00010480: 6c65 7465 2064 6f77 6e6c 6f61 6473 0a20  lete downloads. 
-00010490: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-000104a0: 732e 7265 6d6f 7665 286f 732e 7061 7468  s.remove(os.path
-000104b0: 2e6a 6f69 6e28 636f 6e66 6967 2e4d 4145  .join(config.MAE
-000104c0: 5354 524f 5f44 4952 2c20 666e 616d 6529  STRO_DIR, fname)
-000104d0: 290a 0a20 2020 2020 2020 206d 6f76 655f  )..        move_
-000104e0: 203d 2054 7275 650a 0a20 2020 2069 6620   = True..    if 
-000104f0: 7061 7468 7320 6973 204e 6f6e 653a 0a20  paths is None:. 
-00010500: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
-00010510: 682e 6973 6469 7228 7061 7468 5f29 3a0a  h.isdir(path_):.
-00010520: 2020 2020 2020 2020 2020 2020 7061 7468              path
-00010530: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
-00010540: 2020 2069 6620 7265 6375 7273 653a 0a20     if recurse:. 
-00010550: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00010560: 6f72 2064 6972 7061 7468 2c20 5f2c 2066  or dirpath, _, f
-00010570: 6e61 6d65 7320 696e 206f 732e 7761 6c6b  names in os.walk
-00010580: 2870 6174 685f 293a 0a20 2020 2020 2020  (path_):.       
-00010590: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000105a0: 2066 6e61 6d65 2069 6e20 666e 616d 6573   fname in fnames
-000105b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000105c0: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
-000105d0: 7061 7468 2e73 706c 6974 6578 7428 666e  path.splitext(fn
-000105e0: 616d 6529 5b31 5d20 696e 2063 6f6e 6669  ame)[1] in confi
-000105f0: 672e 4558 5453 3a0a 2020 2020 2020 2020  g.EXTS:.        
+000103f0: 2020 2020 6f73 2e72 656e 616d 6528 7261      os.rename(ra
+00010400: 775f 7061 7468 2c20 7361 6e69 7469 7a65  w_path, sanitize
+00010410: 645f 7061 7468 290a 0a20 2020 2020 2020  d_path)..       
+00010420: 2020 2020 2020 2020 2020 2020 2070 6174               pat
+00010430: 6873 2e61 7070 656e 6428 7361 6e69 7469  hs.append(saniti
+00010440: 7a65 645f 7061 7468 290a 2020 2020 2020  zed_path).      
+00010450: 2020 2020 2020 6966 2066 6e61 6d65 2e65        if fname.e
+00010460: 6e64 7377 6974 6828 222e 7061 7274 2229  ndswith(".part")
+00010470: 3a20 2023 2064 656c 6574 6520 696e 636f  :  # delete inco
+00010480: 6d70 6c65 7465 2064 6f77 6e6c 6f61 6473  mplete downloads
+00010490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000104a0: 206f 732e 7265 6d6f 7665 286f 732e 7061   os.remove(os.pa
+000104b0: 7468 2e6a 6f69 6e28 636f 6e66 6967 2e4d  th.join(config.M
+000104c0: 4145 5354 524f 5f44 4952 2c20 666e 616d  AESTRO_DIR, fnam
+000104d0: 6529 290a 0a20 2020 2020 2020 206d 6f76  e))..        mov
+000104e0: 655f 203d 2054 7275 650a 0a20 2020 2069  e_ = True..    i
+000104f0: 6620 7061 7468 7320 6973 204e 6f6e 653a  f paths is None:
+00010500: 0a20 2020 2020 2020 2069 6620 6f73 2e70  .        if os.p
+00010510: 6174 682e 6973 6469 7228 7061 7468 5f29  ath.isdir(path_)
+00010520: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
+00010530: 7468 7320 3d20 5b5d 0a20 2020 2020 2020  ths = [].       
+00010540: 2020 2020 2069 6620 7265 6375 7273 653a       if recurse:
+00010550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010560: 2066 6f72 2064 6972 7061 7468 2c20 5f2c   for dirpath, _,
+00010570: 2066 6e61 6d65 7320 696e 206f 732e 7761   fnames in os.wa
+00010580: 6c6b 2870 6174 685f 293a 0a20 2020 2020  lk(path_):.     
+00010590: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000105a0: 6f72 2066 6e61 6d65 2069 6e20 666e 616d  or fname in fnam
+000105b0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+000105c0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+000105d0: 732e 7061 7468 2e73 706c 6974 6578 7428  s.path.splitext(
+000105e0: 666e 616d 6529 5b31 5d20 696e 2063 6f6e  fname)[1] in con
+000105f0: 6669 672e 4558 5453 3a0a 2020 2020 2020  fig.EXTS:.      
 00010600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010610: 2020 2020 7061 7468 732e 6170 7065 6e64      paths.append
-00010620: 286f 732e 7061 7468 2e6a 6f69 6e28 6469  (os.path.join(di
-00010630: 7270 6174 682c 2066 6e61 6d65 2929 0a20  rpath, fname)). 
-00010640: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00010650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010660: 2066 6f72 2066 6e61 6d65 2069 6e20 6f73   for fname in os
-00010670: 2e6c 6973 7464 6972 2870 6174 685f 293a  .listdir(path_):
-00010680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010690: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-000106a0: 7370 6c69 7465 7874 2866 6e61 6d65 295b  splitext(fname)[
-000106b0: 315d 2069 6e20 636f 6e66 6967 2e45 5854  1] in config.EXT
-000106c0: 533a 0a20 2020 2020 2020 2020 2020 2020  S:.             
-000106d0: 2020 2020 2020 2020 2020 2066 756c 6c5f             full_
-000106e0: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
-000106f0: 6f69 6e28 7061 7468 5f2c 2066 6e61 6d65  oin(path_, fname
-00010700: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00010710: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
-00010720: 7061 7468 2e69 7366 696c 6528 6675 6c6c  path.isfile(full
-00010730: 5f70 6174 6829 3a0a 2020 2020 2020 2020  _path):.        
+00010610: 2020 2020 2020 7061 7468 732e 6170 7065        paths.appe
+00010620: 6e64 286f 732e 7061 7468 2e6a 6f69 6e28  nd(os.path.join(
+00010630: 6469 7270 6174 682c 2066 6e61 6d65 2929  dirpath, fname))
+00010640: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00010650: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00010660: 2020 2066 6f72 2066 6e61 6d65 2069 6e20     for fname in 
+00010670: 6f73 2e6c 6973 7464 6972 2870 6174 685f  os.listdir(path_
+00010680: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00010690: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
+000106a0: 682e 7370 6c69 7465 7874 2866 6e61 6d65  h.splitext(fname
+000106b0: 295b 315d 2069 6e20 636f 6e66 6967 2e45  )[1] in config.E
+000106c0: 5854 533a 0a20 2020 2020 2020 2020 2020  XTS:.           
+000106d0: 2020 2020 2020 2020 2020 2020 2066 756c               ful
+000106e0: 6c5f 7061 7468 203d 206f 732e 7061 7468  l_path = os.path
+000106f0: 2e6a 6f69 6e28 7061 7468 5f2c 2066 6e61  .join(path_, fna
+00010700: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+00010710: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+00010720: 732e 7061 7468 2e69 7366 696c 6528 6675  s.path.isfile(fu
+00010730: 6c6c 5f70 6174 6829 3a0a 2020 2020 2020  ll_path):.      
 00010740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010750: 2020 2020 7061 7468 732e 6170 7065 6e64      paths.append
-00010760: 2866 756c 6c5f 7061 7468 290a 2020 2020  (full_path).    
-00010770: 2020 2020 2020 2020 6966 206c 656e 2870          if len(p
-00010780: 6174 6873 2920 3d3d 2030 3a0a 2020 2020  aths) == 0:.    
-00010790: 2020 2020 2020 2020 2020 2020 636c 6963              clic
-000107a0: 6b2e 7365 6368 6f28 0a20 2020 2020 2020  k.secho(.       
-000107b0: 2020 2020 2020 2020 2020 2020 2066 224e               f"N
-000107c0: 6f20 736f 6e67 7320 666f 756e 6420 696e  o songs found in
-000107d0: 2027 7b70 6174 685f 7d27 2e22 2c0a 2020   '{path_}'.",.  
+00010750: 2020 2020 2020 7061 7468 732e 6170 7065        paths.appe
+00010760: 6e64 2866 756c 6c5f 7061 7468 290a 2020  nd(full_path).  
+00010770: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00010780: 2870 6174 6873 2920 3d3d 2030 3a0a 2020  (paths) == 0:.  
+00010790: 2020 2020 2020 2020 2020 2020 2020 636c                cl
+000107a0: 6963 6b2e 7365 6368 6f28 0a20 2020 2020  ick.secho(.     
+000107b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000107c0: 224e 6f20 736f 6e67 7320 666f 756e 6420  "No songs found 
+000107d0: 696e 2027 7b70 6174 685f 7d27 2e22 2c0a  in '{path_}'.",.
 000107e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000107f0: 2020 6667 3d22 7265 6422 2c0a 2020 2020    fg="red",.    
-00010800: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00010810: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00010820: 7475 726e 0a20 2020 2020 2020 2065 6c73  turn.        els
-00010830: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-00010840: 6174 6873 203d 205b 7061 7468 5f5d 0a0a  aths = [path_]..
-00010850: 2020 2020 6966 206c 656e 2870 6174 6873      if len(paths
-00010860: 2920 3e20 313a 0a20 2020 2020 2020 2069  ) > 1:.        i
-00010870: 6620 636c 6970 2069 7320 6e6f 7420 4e6f  f clip is not No
-00010880: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00010890: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-000108a0: 2020 2020 2020 2020 2020 2020 2022 4361               "Ca
-000108b0: 6e6e 6f74 2070 6173 7320 272d 632f 2d2d  nnot pass '-c/--
-000108c0: 636c 6970 2720 6f70 7469 6f6e 2077 6865  clip' option whe
-000108d0: 6e20 6164 6469 6e67 206d 756c 7469 706c  n adding multipl
-000108e0: 6520 736f 6e67 732e 222c 0a20 2020 2020  e songs.",.     
-000108f0: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
-00010900: 6564 222c 0a20 2020 2020 2020 2020 2020  ed",.           
-00010910: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
-00010920: 6574 7572 6e0a 0a20 2020 2020 2020 2069  eturn..        i
-00010930: 6620 6e61 6d65 2069 7320 6e6f 7420 4e6f  f name is not No
-00010940: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00010950: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-00010960: 2020 2020 2020 2020 2020 2020 2022 4361               "Ca
-00010970: 6e6e 6f74 2070 6173 7320 272d 6e2f 2d2d  nnot pass '-n/--
-00010980: 6e61 6d65 2720 6f70 7469 6f6e 2077 6865  name' option whe
-00010990: 6e20 6164 6469 6e67 206d 756c 7469 706c  n adding multipl
-000109a0: 6520 736f 6e67 732e 222c 0a20 2020 2020  e songs.",.     
-000109b0: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
-000109c0: 6564 222c 0a20 2020 2020 2020 2020 2020  ed",.           
-000109d0: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
-000109e0: 6574 7572 6e0a 0a20 2020 2069 6620 6c65  eturn..    if le
-000109f0: 6e28 7061 7468 7329 203d 3d20 3120 616e  n(paths) == 1 an
-00010a00: 6420 6e61 6d65 2069 7320 6e6f 7420 4e6f  d name is not No
-00010a10: 6e65 3a0a 2020 2020 2020 2020 6e65 775f  ne:.        new_
-00010a20: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
-00010a30: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-00010a40: 2063 6f6e 6669 672e 4d41 4553 5452 4f5f   config.MAESTRO_
-00010a50: 4449 522c 206e 616d 6520 2b20 6f73 2e70  DIR, name + os.p
-00010a60: 6174 682e 7370 6c69 7465 7874 2870 6174  ath.splitext(pat
-00010a70: 6873 5b30 5d29 5b31 5d0a 2020 2020 2020  hs[0])[1].      
-00010a80: 2020 290a 2020 2020 2020 2020 2320 6d6f    ).        # mo
-00010a90: 7665 2f63 6f70 7920 746f 2063 6f6e 6669  ve/copy to confi
-00010aa0: 672e 4d41 4553 5452 4f5f 4449 5220 2861  g.MAESTRO_DIR (a
-00010ab0: 766f 6964 206e 616d 6520 636f 6e66 6c69  void name confli
-00010ac0: 6374 7329 0a20 2020 2020 2020 2069 6620  cts).        if 
-00010ad0: 6d6f 7665 5f3a 0a20 2020 2020 2020 2020  move_:.         
-00010ae0: 2020 206d 6f76 6528 7061 7468 735b 305d     move(paths[0]
-00010af0: 2c20 6e65 775f 7061 7468 290a 2020 2020  , new_path).    
-00010b00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00010b10: 2020 2020 2020 636f 7079 2870 6174 6873        copy(paths
-00010b20: 5b30 5d2c 206e 6577 5f70 6174 6829 0a20  [0], new_path). 
-00010b30: 2020 2020 2020 2070 6174 6873 203d 205b         paths = [
-00010b40: 6e65 775f 7061 7468 5d0a 2020 2020 2020  new_path].      
-00010b50: 2020 6d6f 7665 5f20 3d20 5472 7565 2020    move_ = True  
-00010b60: 2320 616c 7761 7973 206d 6f76 6520 2866  # always move (f
-00010b70: 726f 6d20 7465 6d70 206c 6f63 2069 6e20  rom temp loc in 
-00010b80: 636f 6e66 6967 2e4d 4145 5354 524f 5f44  config.MAESTRO_D
-00010b90: 4952 2920 6966 2072 656e 616d 696e 670a  IR) if renaming.
-00010ba0: 0a20 2020 2069 6620 636c 6970 2069 7320  .    if clip is 
-00010bb0: 6e6f 7420 4e6f 6e65 2061 6e64 206c 656e  not None and len
-00010bc0: 2870 6174 6873 2920 3d3d 2031 3a0a 2020  (paths) == 1:.  
-00010bd0: 2020 2020 2020 736f 6e67 5f64 7572 6174        song_durat
-00010be0: 696f 6e20 3d20 6d75 7369 635f 7461 672e  ion = music_tag.
-00010bf0: 6c6f 6164 5f66 696c 6528 7061 7468 735b  load_file(paths[
-00010c00: 305d 295b 2223 6c65 6e67 7468 225d 2e76  0])["#length"].v
-00010c10: 616c 7565 0a0a 2020 2020 2020 2020 7374  alue..        st
-00010c20: 6172 742c 2065 6e64 203d 2063 6c69 700a  art, end = clip.
-00010c30: 2020 2020 2020 2020 6966 2073 7461 7274          if start
-00010c40: 203c 2030 3a0a 2020 2020 2020 2020 2020   < 0:.          
-00010c50: 2020 636c 6963 6b2e 7365 6368 6f28 2243    click.secho("C
-00010c60: 6c69 7020 7374 6172 7420 7469 6d65 2063  lip start time c
-00010c70: 616e 6e6f 7420 6265 206e 6567 6174 6976  annot be negativ
-00010c80: 652e 222c 2066 673d 2272 6564 2229 0a20  e.", fg="red"). 
-00010c90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00010ca0: 6e0a 2020 2020 2020 2020 6966 2073 7461  n.        if sta
-00010cb0: 7274 203e 2073 6f6e 675f 6475 7261 7469  rt > song_durati
-00010cc0: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
-00010cd0: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-00010ce0: 2020 2020 2020 2020 2020 2020 2022 436c               "Cl
-00010cf0: 6970 2073 7461 7274 2074 696d 6520 6361  ip start time ca
-00010d00: 6e6e 6f74 2062 6520 6772 6561 7465 7220  nnot be greater 
-00010d10: 7468 616e 2074 6865 2073 6f6e 6720 6475  than the song du
-00010d20: 7261 7469 6f6e 2e22 2c0a 2020 2020 2020  ration.",.      
-00010d30: 2020 2020 2020 2020 2020 6667 3d22 7265            fg="re
-00010d40: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
-00010d50: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00010d60: 7475 726e 0a0a 2020 2020 2020 2020 6966  turn..        if
-00010d70: 2065 6e64 203d 3d20 2d31 3a0a 2020 2020   end == -1:.    
-00010d80: 2020 2020 2020 2020 656e 6420 3d20 736f          end = so
-00010d90: 6e67 5f64 7572 6174 696f 6e0a 2020 2020  ng_duration.    
-00010da0: 2020 2020 656c 6966 2065 6e64 203c 2073      elif end < s
-00010db0: 7461 7274 3a0a 2020 2020 2020 2020 2020  tart:.          
-00010dc0: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
-00010dd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00010de0: 436c 6970 2065 6e64 2074 696d 6520 6361  Clip end time ca
-00010df0: 6e6e 6f74 2062 6520 6c65 7373 2074 6861  nnot be less tha
-00010e00: 6e20 7468 6520 636c 6970 2073 7461 7274  n the clip start
-00010e10: 2074 696d 652e 222c 0a20 2020 2020 2020   time.",.       
-00010e20: 2020 2020 2020 2020 2066 673d 2272 6564           fg="red
-00010e30: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
-00010e40: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00010e50: 7572 6e0a 2020 2020 2020 2020 656c 6966  urn.        elif
-00010e60: 2065 6e64 203e 2073 6f6e 675f 6475 7261   end > song_dura
-00010e70: 7469 6f6e 3a0a 2020 2020 2020 2020 2020  tion:.          
-00010e80: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
-00010e90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00010ea0: 436c 6970 2065 6e64 2074 696d 6520 6361  Clip end time ca
-00010eb0: 6e6e 6f74 2062 6520 6772 6561 7465 7220  nnot be greater 
-00010ec0: 7468 616e 2074 6865 2073 6f6e 6720 6475  than the song du
-00010ed0: 7261 7469 6f6e 2e22 2c0a 2020 2020 2020  ration.",.      
-00010ee0: 2020 2020 2020 2020 2020 6667 3d22 7265            fg="re
-00010ef0: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
-00010f00: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00010f10: 7475 726e 0a20 2020 2065 6c73 653a 0a20  turn.    else:. 
-00010f20: 2020 2020 2020 2073 7461 7274 203d 2065         start = e
-00010f30: 6e64 203d 204e 6f6e 650a 0a20 2020 2069  nd = None..    i
-00010f40: 6620 6d65 7461 6461 7461 5f70 6169 7273  f metadata_pairs
-00010f50: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-00010f60: 206c 656e 2870 6174 6873 2920 3d3d 2031   len(paths) == 1
-00010f70: 3a0a 2020 2020 2020 2020 2320 636f 6e76  :.        # conv
-00010f80: 6572 7420 6672 6f6d 2022 6b65 793a 7661  ert from "key:va
-00010f90: 6c75 652c 6b65 793a 7661 6c75 6522 2074  lue,key:value" t
-00010fa0: 6f20 5b28 226b 6579 222c 2022 7661 6c75  o [("key", "valu
-00010fb0: 6522 295d 0a20 2020 2020 2020 206d 6574  e")].        met
-00010fc0: 6164 6174 615f 7061 6972 7320 3d20 5b0a  adata_pairs = [.
-00010fd0: 2020 2020 2020 2020 2020 2020 7475 706c              tupl
-00010fe0: 6528 7061 6972 2e73 7472 6970 2829 2e73  e(pair.strip().s
-00010ff0: 706c 6974 2822 3a22 2929 2066 6f72 2070  plit(":")) for p
-00011000: 6169 7220 696e 206d 6574 6164 6174 615f  air in metadata_
-00011010: 7061 6972 732e 7370 6c69 7428 227c 2229  pairs.split("|")
-00011020: 0a20 2020 2020 2020 205d 0a20 2020 2020  .        ].     
-00011030: 2020 2073 6f6e 675f 6461 7461 203d 206d     song_data = m
-00011040: 7573 6963 5f74 6167 2e6c 6f61 645f 6669  usic_tag.load_fi
-00011050: 6c65 2870 6174 6873 5b30 5d29 0a20 2020  le(paths[0]).   
-00011060: 2020 2020 2066 6f72 206b 6579 2c20 7661       for key, va
-00011070: 6c75 6520 696e 206d 6574 6164 6174 615f  lue in metadata_
-00011080: 7061 6972 733a 0a20 2020 2020 2020 2020  pairs:.         
-00011090: 2020 2069 6620 6b65 7920 6e6f 7420 696e     if key not in
-000110a0: 2063 6f6e 6669 672e 4d45 5441 4441 5441   config.METADATA
-000110b0: 5f4b 4559 5320 6f72 206b 6579 2e73 7461  _KEYS or key.sta
-000110c0: 7274 7377 6974 6828 2223 2229 3a0a 2020  rtswith("#"):.  
-000110d0: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-000110e0: 6963 6b2e 7365 6368 6f28 0a20 2020 2020  ick.secho(.     
-000110f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011100: 2227 7b6b 6579 7d27 2069 7320 6e6f 7420  "'{key}' is not 
-00011110: 6120 7661 6c69 6420 6564 6974 6162 6c65  a valid editable
-00011120: 206d 6574 6164 6174 6120 6b65 792e 222c   metadata key.",
-00011130: 2066 673d 2272 6564 220a 2020 2020 2020   fg="red".      
-00011140: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00011150: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00011160: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-00011170: 2073 6f6e 675f 6461 7461 5b6b 6579 5d20   song_data[key] 
-00011180: 3d20 7661 6c75 650a 2020 2020 2020 2020  = value.        
-00011190: 736f 6e67 5f64 6174 612e 7361 7665 2829  song_data.save()
-000111a0: 0a0a 2020 2020 666f 7220 7061 7468 2069  ..    for path i
-000111b0: 6e20 7061 7468 733a 0a20 2020 2020 2020  n paths:.       
-000111c0: 2065 7874 203d 206f 732e 7061 7468 2e73   ext = os.path.s
-000111d0: 706c 6974 6578 7428 7061 7468 295b 315d  plitext(path)[1]
-000111e0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000111f0: 6f73 2e70 6174 682e 6973 6469 7228 7061  os.path.isdir(pa
-00011200: 7468 2920 616e 6420 6578 7420 6e6f 7420  th) and ext not 
-00011210: 696e 2063 6f6e 6669 672e 4558 5453 3a0a  in config.EXTS:.
-00011220: 2020 2020 2020 2020 2020 2020 636c 6963              clic
-00011230: 6b2e 7365 6368 6f28 6622 277b 6578 747d  k.secho(f"'{ext}
-00011240: 2720 6973 206e 6f74 2073 7570 706f 7274  ' is not support
-00011250: 6564 2e22 2c20 6667 3d22 7265 6422 290a  ed.", fg="red").
-00011260: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011270: 726e 0a0a 2020 2020 2020 2020 666f 7220  rn..        for 
-00011280: 7461 6720 696e 2074 6167 733a 0a20 2020  tag in tags:.   
-00011290: 2020 2020 2020 2020 2069 6620 222c 2220           if "," 
-000112a0: 696e 2074 6167 206f 7220 227c 2220 696e  in tag or "|" in
-000112b0: 2074 6167 3a0a 2020 2020 2020 2020 2020   tag:.          
-000112c0: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
-000112d0: 6f28 2254 6167 7320 6361 6e6e 6f74 2063  o("Tags cannot c
-000112e0: 6f6e 7461 696e 2027 2c27 206f 7220 277c  ontain ',' or '|
-000112f0: 272e 222c 2066 673d 2272 6564 2229 0a20  '.", fg="red"). 
-00011300: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011310: 6574 7572 6e0a 0a20 2020 2020 2020 2077  eturn..        w
-00011320: 6974 6820 6f70 656e 2863 6f6e 6669 672e  ith open(config.
-00011330: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
-00011340: 2022 612b 222c 2065 6e63 6f64 696e 673d   "a+", encoding=
-00011350: 2275 7466 2d38 2229 2061 7320 736f 6e67  "utf-8") as song
-00011360: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
-00011370: 2020 2020 736f 6e67 735f 6669 6c65 2e73      songs_file.s
-00011380: 6565 6b28 3029 2020 2320 7374 6172 7420  eek(0)  # start 
-00011390: 7265 6164 696e 6720 6672 6f6d 2062 6567  reading from beg
-000113a0: 696e 6e69 6e67 0a0a 2020 2020 2020 2020  inning..        
-000113b0: 2020 2020 6c69 6e65 7320 3d20 736f 6e67      lines = song
-000113c0: 735f 6669 6c65 2e72 6561 646c 696e 6573  s_file.readlines
-000113d0: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-000113e0: 736f 6e67 5f69 6420 3d20 310a 2020 2020  song_id = 1.    
-000113f0: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
-00011400: 2069 6e20 6c69 6e65 733a 0a20 2020 2020   in lines:.     
-00011410: 2020 2020 2020 2020 2020 2073 6f6e 675f             song_
-00011420: 6964 203d 206d 6178 2873 6f6e 675f 6964  id = max(song_id
-00011430: 2c20 696e 7428 6c69 6e65 2e73 706c 6974  , int(line.split
-00011440: 2822 7c22 295b 305d 2920 2b20 3129 0a0a  ("|")[0]) + 1)..
-00011450: 2020 2020 2020 2020 2020 2020 7072 6570              prep
-00011460: 656e 645f 6e65 776c 696e 6520 3d20 6c69  end_newline = li
-00011470: 6e65 7320 616e 6420 6c69 6e65 735b 2d31  nes and lines[-1
-00011480: 5d5b 2d31 5d20 213d 2022 5c6e 220a 0a20  ][-1] != "\n".. 
-00011490: 2020 2020 2020 2020 2020 2068 656c 7065             helpe
-000114a0: 7273 2e61 6464 5f73 6f6e 6728 0a20 2020  rs.add_song(.   
-000114b0: 2020 2020 2020 2020 2020 2020 2070 6174               pat
-000114c0: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
-000114d0: 2020 2074 6167 732c 0a20 2020 2020 2020     tags,.       
-000114e0: 2020 2020 2020 2020 206d 6f76 655f 2c0a           move_,.
-000114f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011500: 736f 6e67 735f 6669 6c65 2c0a 2020 2020  songs_file,.    
-00011510: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-00011520: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-00011530: 2020 2073 6f6e 675f 6964 2c0a 2020 2020     song_id,.    
-00011540: 2020 2020 2020 2020 2020 2020 7072 6570              prep
-00011550: 656e 645f 6e65 776c 696e 652c 0a20 2020  end_newline,.   
-00011560: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-00011570: 7274 2c0a 2020 2020 2020 2020 2020 2020  rt,.            
-00011580: 2020 2020 656e 642c 0a20 2020 2020 2020      end,.       
-00011590: 2020 2020 2029 0a0a 0a40 636c 692e 636f       )...@cli.co
-000115a0: 6d6d 616e 6428 290a 4063 6c69 636b 2e61  mmand().@click.a
-000115b0: 7267 756d 656e 7428 2241 5247 5322 2c20  rgument("ARGS", 
-000115c0: 7265 7175 6972 6564 3d54 7275 652c 206e  required=True, n
-000115d0: 6172 6773 3d2d 3129 0a40 636c 6963 6b2e  args=-1).@click.
-000115e0: 6f70 7469 6f6e 280a 2020 2020 222d 462f  option(.    "-F/
-000115f0: 2d6e 4622 2c20 222d 2d66 6f72 6365 2f2d  -nF", "--force/-
-00011600: 2d6e 6f2d 666f 7263 6522 2c20 6465 6661  -no-force", defa
-00011610: 756c 743d 4661 6c73 652c 2068 656c 703d  ult=False, help=
-00011620: 2246 6f72 6365 2064 656c 6574 696f 6e2e  "Force deletion.
-00011630: 220a 290a 4063 6c69 636b 2e6f 7074 696f  ".).@click.optio
-00011640: 6e28 0a20 2020 2022 2d54 2f2d 6e54 222c  n(.    "-T/-nT",
-00011650: 0a20 2020 2022 2d2d 7461 672f 2d2d 6e6f  .    "--tag/--no
-00011660: 2d74 6167 222c 0a20 2020 2064 6566 6175  -tag",.    defau
-00011670: 6c74 3d46 616c 7365 2c0a 2020 2020 6865  lt=False,.    he
-00011680: 6c70 3d22 4966 2070 6173 7365 642c 2074  lp="If passed, t
-00011690: 7265 6174 2061 6c6c 2061 7267 756d 656e  reat all argumen
-000116a0: 7473 2061 7320 7461 6773 2c20 6465 6c65  ts as tags, dele
-000116b0: 7469 6e67 2065 7665 7279 206f 6375 7272  ting every ocurr
-000116c0: 656e 6365 206f 6620 6561 6368 2074 6167  ence of each tag
-000116d0: 2e22 2c0a 290a 6465 6620 7265 6d6f 7665  .",.).def remove
-000116e0: 2861 7267 732c 2066 6f72 6365 2c20 7461  (args, force, ta
-000116f0: 6729 3a0a 2020 2020 2222 2252 656d 6f76  g):.    """Remov
-00011700: 6520 6569 7468 6572 2074 6167 2873 2920  e either tag(s) 
-00011710: 6f72 2073 6f6e 6728 7329 2070 6173 7365  or song(s) passe
-00011720: 6420 6173 2049 4428 7329 2e22 2222 0a20  d as ID(s).""". 
-00011730: 2020 2069 6620 6e6f 7420 7461 673a 0a20     if not tag:. 
-00011740: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-00011750: 2020 2020 2020 2020 736f 6e67 5f69 6473          song_ids
-00011760: 203d 207b 696e 7428 736f 6e67 5f69 6429   = {int(song_id)
-00011770: 2066 6f72 2073 6f6e 675f 6964 2069 6e20   for song_id in 
-00011780: 6172 6773 7d0a 2020 2020 2020 2020 2020  args}.          
-00011790: 2020 7265 6d61 696e 696e 675f 736f 6e67    remaining_song
-000117a0: 5f69 6473 203d 207b 6e20 666f 7220 6e20  _ids = {n for n 
-000117b0: 696e 2073 6f6e 675f 6964 737d 0a20 2020  in song_ids}.   
-000117c0: 2020 2020 2065 7863 6570 7420 5661 6c75       except Valu
-000117d0: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
-000117e0: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
-000117f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011800: 2022 536f 6e67 2049 4473 206d 7573 7420   "Song IDs must 
-00011810: 6265 2069 6e74 6567 6572 732e 2054 6f20  be integers. To 
-00011820: 6465 6c65 7465 2074 6167 732c 2070 6173  delete tags, pas
-00011830: 7320 7468 6520 272d 542f 2d2d 7461 6727  s the '-T/--tag'
-00011840: 2066 6c61 672e 222c 0a20 2020 2020 2020   flag.",.       
-00011850: 2020 2020 2020 2020 2066 673d 2272 6564           fg="red
-00011860: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
-00011870: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00011880: 7572 6e0a 0a20 2020 2020 2020 2069 6620  urn..        if 
-00011890: 6e6f 7420 666f 7263 653a 0a20 2020 2020  not force:.     
-000118a0: 2020 2020 2020 2063 6861 7220 3d20 696e         char = in
-000118b0: 7075 7428 0a20 2020 2020 2020 2020 2020  put(.           
-000118c0: 2020 2020 2066 2241 7265 2079 6f75 2073       f"Are you s
-000118d0: 7572 6520 796f 7520 7761 6e74 2074 6f20  ure you want to 
-000118e0: 6465 6c65 7465 207b 6c65 6e28 736f 6e67  delete {len(song
-000118f0: 5f69 6473 297d 2073 6f6e 6728 7329 3f20  _ids)} song(s)? 
-00011900: 5b79 2f6e 5d20 220a 2020 2020 2020 2020  [y/n] ".        
-00011910: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
-00011920: 2020 2069 6620 6368 6172 2e6c 6f77 6572     if char.lower
-00011930: 2829 2021 3d20 2279 223a 0a20 2020 2020  () != "y":.     
-00011940: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00011950: 2822 4469 6420 6e6f 7420 6465 6c65 7465  ("Did not delete
-00011960: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
-00011970: 2020 2020 7265 7475 726e 0a0a 2020 2020      return..    
-00011980: 2020 2020 7769 7468 206f 7065 6e28 636f      with open(co
-00011990: 6e66 6967 2e53 4f4e 4753 5f49 4e46 4f5f  nfig.SONGS_INFO_
-000119a0: 5041 5448 2c20 2272 222c 2065 6e63 6f64  PATH, "r", encod
-000119b0: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
-000119c0: 736f 6e67 735f 6669 6c65 3a0a 2020 2020  songs_file:.    
-000119d0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
-000119e0: 736f 6e67 735f 6669 6c65 2e72 6561 6428  songs_file.read(
-000119f0: 292e 7370 6c69 746c 696e 6573 2829 0a0a  ).splitlines()..
-00011a00: 2020 2020 2020 2020 2020 2020 746f 5f62              to_b
-00011a10: 655f 6465 6c65 7465 6420 3d20 5b5d 0a20  e_deleted = []. 
-00011a20: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-00011a30: 2069 6e20 7261 6e67 6528 6c65 6e28 6c69   in range(len(li
-00011a40: 6e65 7329 293a 0a20 2020 2020 2020 2020  nes)):.         
-00011a50: 2020 2020 2020 2064 6574 6169 6c73 203d         details =
-00011a60: 206c 696e 6573 5b69 5d2e 7374 7269 7028   lines[i].strip(
-00011a70: 292e 7370 6c69 7428 227c 2229 0a20 2020  ).split("|").   
-00011a80: 2020 2020 2020 2020 2020 2020 2073 6f6e               son
-00011a90: 675f 6964 203d 2069 6e74 2864 6574 6169  g_id = int(detai
-00011aa0: 6c73 5b30 5d29 0a20 2020 2020 2020 2020  ls[0]).         
-00011ab0: 2020 2020 2020 2069 6620 736f 6e67 5f69         if song_i
-00011ac0: 6420 696e 2072 656d 6169 6e69 6e67 5f73  d in remaining_s
-00011ad0: 6f6e 675f 6964 733a 0a20 2020 2020 2020  ong_ids:.       
-00011ae0: 2020 2020 2020 2020 2020 2020 2072 656d               rem
-00011af0: 6169 6e69 6e67 5f73 6f6e 675f 6964 732e  aining_song_ids.
-00011b00: 7265 6d6f 7665 2873 6f6e 675f 6964 290a  remove(song_id).
-00011b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b20: 2020 2020 746f 5f62 655f 6465 6c65 7465      to_be_delete
-00011b30: 642e 6170 7065 6e64 2869 290a 0a20 2020  d.append(i)..   
+000107f0: 2020 2020 6667 3d22 7265 6422 2c0a 2020      fg="red",.  
+00010800: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00010810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010820: 7265 7475 726e 0a20 2020 2020 2020 2065  return.        e
+00010830: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00010840: 2070 6174 6873 203d 205b 7061 7468 5f5d   paths = [path_]
+00010850: 0a0a 2020 2020 6966 206c 656e 2870 6174  ..    if len(pat
+00010860: 6873 2920 3e20 313a 0a20 2020 2020 2020  hs) > 1:.       
+00010870: 2069 6620 636c 6970 2069 7320 6e6f 7420   if clip is not 
+00010880: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00010890: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
+000108a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000108b0: 4361 6e6e 6f74 2070 6173 7320 272d 632f  Cannot pass '-c/
+000108c0: 2d2d 636c 6970 2720 6f70 7469 6f6e 2077  --clip' option w
+000108d0: 6865 6e20 6164 6469 6e67 206d 756c 7469  hen adding multi
+000108e0: 706c 6520 736f 6e67 732e 222c 0a20 2020  ple songs.",.   
+000108f0: 2020 2020 2020 2020 2020 2020 2066 673d               fg=
+00010900: 2272 6564 222c 0a20 2020 2020 2020 2020  "red",.         
+00010910: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00010920: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
+00010930: 2069 6620 6e61 6d65 2069 7320 6e6f 7420   if name is not 
+00010940: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00010950: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
+00010960: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00010970: 4361 6e6e 6f74 2070 6173 7320 272d 6e2f  Cannot pass '-n/
+00010980: 2d2d 6e61 6d65 2720 6f70 7469 6f6e 2077  --name' option w
+00010990: 6865 6e20 6164 6469 6e67 206d 756c 7469  hen adding multi
+000109a0: 706c 6520 736f 6e67 732e 222c 0a20 2020  ple songs.",.   
+000109b0: 2020 2020 2020 2020 2020 2020 2066 673d               fg=
+000109c0: 2272 6564 222c 0a20 2020 2020 2020 2020  "red",.         
+000109d0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+000109e0: 2072 6574 7572 6e0a 0a20 2020 2069 6620   return..    if 
+000109f0: 6c65 6e28 7061 7468 7329 203d 3d20 3120  len(paths) == 1 
+00010a00: 616e 6420 6e61 6d65 2069 7320 6e6f 7420  and name is not 
+00010a10: 4e6f 6e65 3a0a 2020 2020 2020 2020 6e65  None:.        ne
+00010a20: 775f 7061 7468 203d 206f 732e 7061 7468  w_path = os.path
+00010a30: 2e6a 6f69 6e28 0a20 2020 2020 2020 2020  .join(.         
+00010a40: 2020 2063 6f6e 6669 672e 4d41 4553 5452     config.MAESTR
+00010a50: 4f5f 4449 522c 206e 616d 6520 2b20 6f73  O_DIR, name + os
+00010a60: 2e70 6174 682e 7370 6c69 7465 7874 2870  .path.splitext(p
+00010a70: 6174 6873 5b30 5d29 5b31 5d0a 2020 2020  aths[0])[1].    
+00010a80: 2020 2020 290a 2020 2020 2020 2020 2320      ).        # 
+00010a90: 6d6f 7665 2f63 6f70 7920 746f 2063 6f6e  move/copy to con
+00010aa0: 6669 672e 4d41 4553 5452 4f5f 4449 5220  fig.MAESTRO_DIR 
+00010ab0: 2861 766f 6964 206e 616d 6520 636f 6e66  (avoid name conf
+00010ac0: 6c69 6374 7329 0a20 2020 2020 2020 2069  licts).        i
+00010ad0: 6620 6d6f 7665 5f3a 0a20 2020 2020 2020  f move_:.       
+00010ae0: 2020 2020 206d 6f76 6528 7061 7468 735b       move(paths[
+00010af0: 305d 2c20 6e65 775f 7061 7468 290a 2020  0], new_path).  
+00010b00: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00010b10: 2020 2020 2020 2020 636f 7079 2870 6174          copy(pat
+00010b20: 6873 5b30 5d2c 206e 6577 5f70 6174 6829  hs[0], new_path)
+00010b30: 0a20 2020 2020 2020 2070 6174 6873 203d  .        paths =
+00010b40: 205b 6e65 775f 7061 7468 5d0a 2020 2020   [new_path].    
+00010b50: 2020 2020 6d6f 7665 5f20 3d20 5472 7565      move_ = True
+00010b60: 2020 2320 616c 7761 7973 206d 6f76 6520    # always move 
+00010b70: 2866 726f 6d20 7465 6d70 206c 6f63 2069  (from temp loc i
+00010b80: 6e20 636f 6e66 6967 2e4d 4145 5354 524f  n config.MAESTRO
+00010b90: 5f44 4952 2920 6966 2072 656e 616d 696e  _DIR) if renamin
+00010ba0: 670a 0a20 2020 2069 6620 636c 6970 2069  g..    if clip i
+00010bb0: 7320 6e6f 7420 4e6f 6e65 2061 6e64 206c  s not None and l
+00010bc0: 656e 2870 6174 6873 2920 3d3d 2031 3a0a  en(paths) == 1:.
+00010bd0: 2020 2020 2020 2020 736f 6e67 5f64 7572          song_dur
+00010be0: 6174 696f 6e20 3d20 6d75 7369 635f 7461  ation = music_ta
+00010bf0: 672e 6c6f 6164 5f66 696c 6528 7061 7468  g.load_file(path
+00010c00: 735b 305d 295b 2223 6c65 6e67 7468 225d  s[0])["#length"]
+00010c10: 2e76 616c 7565 0a0a 2020 2020 2020 2020  .value..        
+00010c20: 7374 6172 742c 2065 6e64 203d 2063 6c69  start, end = cli
+00010c30: 700a 2020 2020 2020 2020 6966 2073 7461  p.        if sta
+00010c40: 7274 203c 2030 3a0a 2020 2020 2020 2020  rt < 0:.        
+00010c50: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
+00010c60: 2243 6c69 7020 7374 6172 7420 7469 6d65  "Clip start time
+00010c70: 2063 616e 6e6f 7420 6265 206e 6567 6174   cannot be negat
+00010c80: 6976 652e 222c 2066 673d 2272 6564 2229  ive.", fg="red")
+00010c90: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00010ca0: 7572 6e0a 2020 2020 2020 2020 6966 2073  urn.        if s
+00010cb0: 7461 7274 203e 2073 6f6e 675f 6475 7261  tart > song_dura
+00010cc0: 7469 6f6e 3a0a 2020 2020 2020 2020 2020  tion:.          
+00010cd0: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
+00010ce0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00010cf0: 436c 6970 2073 7461 7274 2074 696d 6520  Clip start time 
+00010d00: 6361 6e6e 6f74 2062 6520 6772 6561 7465  cannot be greate
+00010d10: 7220 7468 616e 2074 6865 2073 6f6e 6720  r than the song 
+00010d20: 6475 7261 7469 6f6e 2e22 2c0a 2020 2020  duration.",.    
+00010d30: 2020 2020 2020 2020 2020 2020 6667 3d22              fg="
+00010d40: 7265 6422 2c0a 2020 2020 2020 2020 2020  red",.          
+00010d50: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00010d60: 7265 7475 726e 0a0a 2020 2020 2020 2020  return..        
+00010d70: 6966 2065 6e64 203d 3d20 2d31 3a0a 2020  if end == -1:.  
+00010d80: 2020 2020 2020 2020 2020 656e 6420 3d20            end = 
+00010d90: 736f 6e67 5f64 7572 6174 696f 6e0a 2020  song_duration.  
+00010da0: 2020 2020 2020 656c 6966 2065 6e64 203c        elif end <
+00010db0: 2073 7461 7274 3a0a 2020 2020 2020 2020   start:.        
+00010dc0: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
+00010dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010de0: 2022 436c 6970 2065 6e64 2074 696d 6520   "Clip end time 
+00010df0: 6361 6e6e 6f74 2062 6520 6c65 7373 2074  cannot be less t
+00010e00: 6861 6e20 7468 6520 636c 6970 2073 7461  han the clip sta
+00010e10: 7274 2074 696d 652e 222c 0a20 2020 2020  rt time.",.     
+00010e20: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
+00010e30: 6564 222c 0a20 2020 2020 2020 2020 2020  ed",.           
+00010e40: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
+00010e50: 6574 7572 6e0a 2020 2020 2020 2020 656c  eturn.        el
+00010e60: 6966 2065 6e64 203e 2073 6f6e 675f 6475  if end > song_du
+00010e70: 7261 7469 6f6e 3a0a 2020 2020 2020 2020  ration:.        
+00010e80: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
+00010e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010ea0: 2022 436c 6970 2065 6e64 2074 696d 6520   "Clip end time 
+00010eb0: 6361 6e6e 6f74 2062 6520 6772 6561 7465  cannot be greate
+00010ec0: 7220 7468 616e 2074 6865 2073 6f6e 6720  r than the song 
+00010ed0: 6475 7261 7469 6f6e 2e22 2c0a 2020 2020  duration.",.    
+00010ee0: 2020 2020 2020 2020 2020 2020 6667 3d22              fg="
+00010ef0: 7265 6422 2c0a 2020 2020 2020 2020 2020  red",.          
+00010f00: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00010f10: 7265 7475 726e 0a20 2020 2065 6c73 653a  return.    else:
+00010f20: 0a20 2020 2020 2020 2073 7461 7274 203d  .        start =
+00010f30: 2065 6e64 203d 204e 6f6e 650a 0a20 2020   end = None..   
+00010f40: 2069 6620 6d65 7461 6461 7461 5f70 6169   if metadata_pai
+00010f50: 7273 2069 7320 6e6f 7420 4e6f 6e65 2061  rs is not None a
+00010f60: 6e64 206c 656e 2870 6174 6873 2920 3d3d  nd len(paths) ==
+00010f70: 2031 3a0a 2020 2020 2020 2020 2320 636f   1:.        # co
+00010f80: 6e76 6572 7420 6672 6f6d 2022 6b65 793a  nvert from "key:
+00010f90: 7661 6c75 652c 6b65 793a 7661 6c75 6522  value,key:value"
+00010fa0: 2074 6f20 5b28 226b 6579 222c 2022 7661   to [("key", "va
+00010fb0: 6c75 6522 295d 0a20 2020 2020 2020 206d  lue")].        m
+00010fc0: 6574 6164 6174 615f 7061 6972 7320 3d20  etadata_pairs = 
+00010fd0: 5b0a 2020 2020 2020 2020 2020 2020 7475  [.            tu
+00010fe0: 706c 6528 7061 6972 2e73 7472 6970 2829  ple(pair.strip()
+00010ff0: 2e73 706c 6974 2822 3a22 2929 2066 6f72  .split(":")) for
+00011000: 2070 6169 7220 696e 206d 6574 6164 6174   pair in metadat
+00011010: 615f 7061 6972 732e 7370 6c69 7428 227c  a_pairs.split("|
+00011020: 2229 0a20 2020 2020 2020 205d 0a20 2020  ").        ].   
+00011030: 2020 2020 2073 6f6e 675f 6461 7461 203d       song_data =
+00011040: 206d 7573 6963 5f74 6167 2e6c 6f61 645f   music_tag.load_
+00011050: 6669 6c65 2870 6174 6873 5b30 5d29 0a20  file(paths[0]). 
+00011060: 2020 2020 2020 2066 6f72 206b 6579 2c20         for key, 
+00011070: 7661 6c75 6520 696e 206d 6574 6164 6174  value in metadat
+00011080: 615f 7061 6972 733a 0a20 2020 2020 2020  a_pairs:.       
+00011090: 2020 2020 2069 6620 6b65 7920 6e6f 7420       if key not 
+000110a0: 696e 2063 6f6e 6669 672e 4d45 5441 4441  in config.METADA
+000110b0: 5441 5f4b 4559 5320 6f72 206b 6579 2e73  TA_KEYS or key.s
+000110c0: 7461 7274 7377 6974 6828 2223 2229 3a0a  tartswith("#"):.
+000110d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000110e0: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
+000110f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011100: 2066 2227 7b6b 6579 7d27 2069 7320 6e6f   f"'{key}' is no
+00011110: 7420 6120 7661 6c69 6420 6564 6974 6162  t a valid editab
+00011120: 6c65 206d 6574 6164 6174 6120 6b65 792e  le metadata key.
+00011130: 222c 2066 673d 2272 6564 220a 2020 2020  ", fg="red".    
+00011140: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00011150: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00011160: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00011170: 2020 2073 6f6e 675f 6461 7461 5b6b 6579     song_data[key
+00011180: 5d20 3d20 7661 6c75 650a 2020 2020 2020  ] = value.      
+00011190: 2020 736f 6e67 5f64 6174 612e 7361 7665    song_data.save
+000111a0: 2829 0a0a 2020 2020 666f 7220 7061 7468  ()..    for path
+000111b0: 2069 6e20 7061 7468 733a 0a20 2020 2020   in paths:.     
+000111c0: 2020 2065 7874 203d 206f 732e 7061 7468     ext = os.path
+000111d0: 2e73 706c 6974 6578 7428 7061 7468 295b  .splitext(path)[
+000111e0: 315d 0a20 2020 2020 2020 2069 6620 6e6f  1].        if no
+000111f0: 7420 6f73 2e70 6174 682e 6973 6469 7228  t os.path.isdir(
+00011200: 7061 7468 2920 616e 6420 6578 7420 6e6f  path) and ext no
+00011210: 7420 696e 2063 6f6e 6669 672e 4558 5453  t in config.EXTS
+00011220: 3a0a 2020 2020 2020 2020 2020 2020 636c  :.            cl
+00011230: 6963 6b2e 7365 6368 6f28 6622 277b 6578  ick.secho(f"'{ex
+00011240: 747d 2720 6973 206e 6f74 2073 7570 706f  t}' is not suppo
+00011250: 7274 6564 2e22 2c20 6667 3d22 7265 6422  rted.", fg="red"
+00011260: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00011270: 7475 726e 0a0a 2020 2020 2020 2020 666f  turn..        fo
+00011280: 7220 7461 6720 696e 2074 6167 733a 0a20  r tag in tags:. 
+00011290: 2020 2020 2020 2020 2020 2069 6620 222c             if ",
+000112a0: 2220 696e 2074 6167 206f 7220 227c 2220  " in tag or "|" 
+000112b0: 696e 2074 6167 3a0a 2020 2020 2020 2020  in tag:.        
+000112c0: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
+000112d0: 6368 6f28 2254 6167 7320 6361 6e6e 6f74  cho("Tags cannot
+000112e0: 2063 6f6e 7461 696e 2027 2c27 206f 7220   contain ',' or 
+000112f0: 277c 272e 222c 2066 673d 2272 6564 2229  '|'.", fg="red")
+00011300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011310: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
+00011320: 2077 6974 6820 6f70 656e 2863 6f6e 6669   with open(confi
+00011330: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+00011340: 482c 2022 612b 222c 2065 6e63 6f64 696e  H, "a+", encodin
+00011350: 673d 2275 7466 2d38 2229 2061 7320 736f  g="utf-8") as so
+00011360: 6e67 735f 6669 6c65 3a0a 2020 2020 2020  ngs_file:.      
+00011370: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
+00011380: 2e73 6565 6b28 3029 2020 2320 7374 6172  .seek(0)  # star
+00011390: 7420 7265 6164 696e 6720 6672 6f6d 2062  t reading from b
+000113a0: 6567 696e 6e69 6e67 0a0a 2020 2020 2020  eginning..      
+000113b0: 2020 2020 2020 6c69 6e65 7320 3d20 736f        lines = so
+000113c0: 6e67 735f 6669 6c65 2e72 6561 646c 696e  ngs_file.readlin
+000113d0: 6573 2829 0a0a 2020 2020 2020 2020 2020  es()..          
+000113e0: 2020 736f 6e67 5f69 6420 3d20 310a 2020    song_id = 1.  
+000113f0: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
+00011400: 6e65 2069 6e20 6c69 6e65 733a 0a20 2020  ne in lines:.   
+00011410: 2020 2020 2020 2020 2020 2020 2073 6f6e               son
+00011420: 675f 6964 203d 206d 6178 2873 6f6e 675f  g_id = max(song_
+00011430: 6964 2c20 696e 7428 6c69 6e65 2e73 706c  id, int(line.spl
+00011440: 6974 2822 7c22 295b 305d 2920 2b20 3129  it("|")[0]) + 1)
+00011450: 0a0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00011460: 6570 656e 645f 6e65 776c 696e 6520 3d20  epend_newline = 
+00011470: 6c69 6e65 7320 616e 6420 6c69 6e65 735b  lines and lines[
+00011480: 2d31 5d5b 2d31 5d20 213d 2022 5c6e 220a  -1][-1] != "\n".
+00011490: 0a20 2020 2020 2020 2020 2020 2068 656c  .            hel
+000114a0: 7065 7273 2e61 6464 5f73 6f6e 6728 0a20  pers.add_song(. 
+000114b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000114c0: 6174 682c 0a20 2020 2020 2020 2020 2020  ath,.           
+000114d0: 2020 2020 2074 6167 732c 0a20 2020 2020       tags,.     
+000114e0: 2020 2020 2020 2020 2020 206d 6f76 655f             move_
+000114f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011500: 2020 736f 6e67 735f 6669 6c65 2c0a 2020    songs_file,.  
+00011510: 2020 2020 2020 2020 2020 2020 2020 6c69                li
+00011520: 6e65 732c 0a20 2020 2020 2020 2020 2020  nes,.           
+00011530: 2020 2020 2073 6f6e 675f 6964 2c0a 2020       song_id,.  
+00011540: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00011550: 6570 656e 645f 6e65 776c 696e 652c 0a20  epend_newline,. 
+00011560: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00011570: 7461 7274 2c0a 2020 2020 2020 2020 2020  tart,.          
+00011580: 2020 2020 2020 656e 642c 0a20 2020 2020        end,.     
+00011590: 2020 2020 2020 2029 0a0a 0a40 636c 692e         )...@cli.
+000115a0: 636f 6d6d 616e 6428 290a 4063 6c69 636b  command().@click
+000115b0: 2e61 7267 756d 656e 7428 2241 5247 5322  .argument("ARGS"
+000115c0: 2c20 7265 7175 6972 6564 3d54 7275 652c  , required=True,
+000115d0: 206e 6172 6773 3d2d 3129 0a40 636c 6963   nargs=-1).@clic
+000115e0: 6b2e 6f70 7469 6f6e 280a 2020 2020 222d  k.option(.    "-
+000115f0: 462f 2d6e 4622 2c20 222d 2d66 6f72 6365  F/-nF", "--force
+00011600: 2f2d 2d6e 6f2d 666f 7263 6522 2c20 6465  /--no-force", de
+00011610: 6661 756c 743d 4661 6c73 652c 2068 656c  fault=False, hel
+00011620: 703d 2246 6f72 6365 2064 656c 6574 696f  p="Force deletio
+00011630: 6e2e 220a 290a 4063 6c69 636b 2e6f 7074  n.".).@click.opt
+00011640: 696f 6e28 0a20 2020 2022 2d54 2f2d 6e54  ion(.    "-T/-nT
+00011650: 222c 0a20 2020 2022 2d2d 7461 672f 2d2d  ",.    "--tag/--
+00011660: 6e6f 2d74 6167 222c 0a20 2020 2064 6566  no-tag",.    def
+00011670: 6175 6c74 3d46 616c 7365 2c0a 2020 2020  ault=False,.    
+00011680: 6865 6c70 3d22 4966 2070 6173 7365 642c  help="If passed,
+00011690: 2074 7265 6174 2061 6c6c 2061 7267 756d   treat all argum
+000116a0: 656e 7473 2061 7320 7461 6773 2c20 6465  ents as tags, de
+000116b0: 6c65 7469 6e67 2065 7665 7279 206f 6375  leting every ocu
+000116c0: 7272 656e 6365 206f 6620 6561 6368 2074  rrence of each t
+000116d0: 6167 2e22 2c0a 290a 6465 6620 7265 6d6f  ag.",.).def remo
+000116e0: 7665 2861 7267 732c 2066 6f72 6365 2c20  ve(args, force, 
+000116f0: 7461 6729 3a0a 2020 2020 2222 2252 656d  tag):.    """Rem
+00011700: 6f76 6520 6569 7468 6572 2074 6167 2873  ove either tag(s
+00011710: 2920 6f72 2073 6f6e 6728 7329 2070 6173  ) or song(s) pas
+00011720: 7365 6420 6173 2049 4428 7329 2e22 2222  sed as ID(s)."""
+00011730: 0a20 2020 2069 6620 6e6f 7420 7461 673a  .    if not tag:
+00011740: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+00011750: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
+00011760: 6473 203d 207b 696e 7428 736f 6e67 5f69  ds = {int(song_i
+00011770: 6429 2066 6f72 2073 6f6e 675f 6964 2069  d) for song_id i
+00011780: 6e20 6172 6773 7d0a 2020 2020 2020 2020  n args}.        
+00011790: 2020 2020 7265 6d61 696e 696e 675f 736f      remaining_so
+000117a0: 6e67 5f69 6473 203d 207b 6e20 666f 7220  ng_ids = {n for 
+000117b0: 6e20 696e 2073 6f6e 675f 6964 737d 0a20  n in song_ids}. 
+000117c0: 2020 2020 2020 2065 7863 6570 7420 5661         except Va
+000117d0: 6c75 6545 7272 6f72 3a0a 2020 2020 2020  lueError:.      
+000117e0: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
+000117f0: 6f28 0a20 2020 2020 2020 2020 2020 2020  o(.             
+00011800: 2020 2022 536f 6e67 2049 4473 206d 7573     "Song IDs mus
+00011810: 7420 6265 2069 6e74 6567 6572 732e 2054  t be integers. T
+00011820: 6f20 6465 6c65 7465 2074 6167 732c 2070  o delete tags, p
+00011830: 6173 7320 7468 6520 272d 542f 2d2d 7461  ass the '-T/--ta
+00011840: 6727 2066 6c61 672e 222c 0a20 2020 2020  g' flag.",.     
+00011850: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
+00011860: 6564 222c 0a20 2020 2020 2020 2020 2020  ed",.           
+00011870: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
+00011880: 6574 7572 6e0a 0a20 2020 2020 2020 2069  eturn..        i
+00011890: 6620 6e6f 7420 666f 7263 653a 0a20 2020  f not force:.   
+000118a0: 2020 2020 2020 2020 2063 6861 7220 3d20           char = 
+000118b0: 696e 7075 7428 0a20 2020 2020 2020 2020  input(.         
+000118c0: 2020 2020 2020 2066 2241 7265 2079 6f75         f"Are you
+000118d0: 2073 7572 6520 796f 7520 7761 6e74 2074   sure you want t
+000118e0: 6f20 6465 6c65 7465 207b 6c65 6e28 736f  o delete {len(so
+000118f0: 6e67 5f69 6473 297d 2073 6f6e 6728 7329  ng_ids)} song(s)
+00011900: 3f20 5b79 2f6e 5d20 220a 2020 2020 2020  ? [y/n] ".      
+00011910: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00011920: 2020 2020 2069 6620 6368 6172 2e6c 6f77       if char.low
+00011930: 6572 2829 2021 3d20 2279 223a 0a20 2020  er() != "y":.   
+00011940: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00011950: 6e74 2822 4469 6420 6e6f 7420 6465 6c65  nt("Did not dele
+00011960: 7465 2e22 290a 2020 2020 2020 2020 2020  te.").          
+00011970: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
+00011980: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00011990: 636f 6e66 6967 2e53 4f4e 4753 5f49 4e46  config.SONGS_INF
+000119a0: 4f5f 5041 5448 2c20 2272 222c 2065 6e63  O_PATH, "r", enc
+000119b0: 6f64 696e 673d 2275 7466 2d38 2229 2061  oding="utf-8") a
+000119c0: 7320 736f 6e67 735f 6669 6c65 3a0a 2020  s songs_file:.  
+000119d0: 2020 2020 2020 2020 2020 6c69 6e65 7320            lines 
+000119e0: 3d20 736f 6e67 735f 6669 6c65 2e72 6561  = songs_file.rea
+000119f0: 6428 292e 7370 6c69 746c 696e 6573 2829  d().splitlines()
+00011a00: 0a0a 2020 2020 2020 2020 2020 2020 746f  ..            to
+00011a10: 5f62 655f 6465 6c65 7465 6420 3d20 5b5d  _be_deleted = []
+00011a20: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00011a30: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+00011a40: 6c69 6e65 7329 293a 0a20 2020 2020 2020  lines)):.       
+00011a50: 2020 2020 2020 2020 2064 6574 6169 6c73           details
+00011a60: 203d 206c 696e 6573 5b69 5d2e 7374 7269   = lines[i].stri
+00011a70: 7028 292e 7370 6c69 7428 227c 2229 0a20  p().split("|"). 
+00011a80: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00011a90: 6f6e 675f 6964 203d 2069 6e74 2864 6574  ong_id = int(det
+00011aa0: 6169 6c73 5b30 5d29 0a20 2020 2020 2020  ails[0]).       
+00011ab0: 2020 2020 2020 2020 2069 6620 736f 6e67           if song
+00011ac0: 5f69 6420 696e 2072 656d 6169 6e69 6e67  _id in remaining
+00011ad0: 5f73 6f6e 675f 6964 733a 0a20 2020 2020  _song_ids:.     
+00011ae0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00011af0: 656d 6169 6e69 6e67 5f73 6f6e 675f 6964  emaining_song_id
+00011b00: 732e 7265 6d6f 7665 2873 6f6e 675f 6964  s.remove(song_id
+00011b10: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
+00011b20: 2020 2020 2020 2073 6f6e 675f 6e61 6d65         song_name
+00011b30: 203d 2064 6574 6169 6c73 5b31 5d0a 2020   = details[1].  
 00011b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b50: 2073 6f6e 675f 6e61 6d65 203d 2064 6574   song_name = det
-00011b60: 6169 6c73 5b31 5d0a 2020 2020 2020 2020  ails[1].        
-00011b70: 2020 2020 2020 2020 2020 2020 6f73 2e72              os.r
-00011b80: 656d 6f76 6528 2020 2320 7265 6d6f 7665  emove(  # remove
-00011b90: 2061 6374 7561 6c20 736f 6e67 0a20 2020   actual song.   
-00011ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011bb0: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
-00011bc0: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f44  n(config.SONGS_D
-00011bd0: 4952 2c20 736f 6e67 5f6e 616d 6529 0a20  IR, song_name). 
-00011be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011bf0: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
-00011c00: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
-00011c10: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
-00011c20: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011c30: 2252 656d 6f76 6564 2073 6f6e 6720 277b  "Removed song '{
-00011c40: 736f 6e67 5f6e 616d 657d 2720 7769 7468  song_name}' with
-00011c50: 2049 4420 7b73 6f6e 675f 6964 7d2e 222c   ID {song_id}.",
-00011c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011c70: 2020 2020 2020 2020 2066 673d 2267 7265           fg="gre
-00011c80: 656e 222c 0a20 2020 2020 2020 2020 2020  en",.           
-00011c90: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-00011ca0: 2020 2020 666f 7220 6920 696e 2072 6576      for i in rev
-00011cb0: 6572 7365 6428 746f 5f62 655f 6465 6c65  ersed(to_be_dele
-00011cc0: 7465 6429 3a0a 2020 2020 2020 2020 2020  ted):.          
-00011cd0: 2020 6465 6c20 6c69 6e65 735b 695d 0a0a    del lines[i]..
-00011ce0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00011cf0: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f49  n(config.SONGS_I
-00011d00: 4e46 4f5f 5041 5448 2c20 2277 222c 2065  NFO_PATH, "w", e
-00011d10: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
-00011d20: 2061 7320 736f 6e67 735f 6669 6c65 3a0a   as songs_file:.
-00011d30: 2020 2020 2020 2020 2020 2020 736f 6e67              song
-00011d40: 735f 6669 6c65 2e77 7269 7465 2822 5c6e  s_file.write("\n
-00011d50: 222e 6a6f 696e 286c 696e 6573 2929 0a0a  ".join(lines))..
-00011d60: 2020 2020 2020 2020 666f 7220 7374 6174          for stat
-00011d70: 735f 6669 6c65 2069 6e20 6f73 2e6c 6973  s_file in os.lis
-00011d80: 7464 6972 2863 6f6e 6669 672e 5354 4154  tdir(config.STAT
-00011d90: 535f 4449 5229 3a0a 2020 2020 2020 2020  S_DIR):.        
-00011da0: 2020 2020 6966 206e 6f74 2073 7461 7473      if not stats
-00011db0: 5f66 696c 652e 656e 6473 7769 7468 2822  _file.endswith("
-00011dc0: 2e74 7874 2229 3a0a 2020 2020 2020 2020  .txt"):.        
-00011dd0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00011de0: 0a0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-00011df0: 6174 735f 7061 7468 203d 206f 732e 7061  ats_path = os.pa
-00011e00: 7468 2e6a 6f69 6e28 636f 6e66 6967 2e53  th.join(config.S
-00011e10: 5441 5453 5f44 4952 2c20 7374 6174 735f  TATS_DIR, stats_
-00011e20: 6669 6c65 290a 2020 2020 2020 2020 2020  file).          
-00011e30: 2020 7769 7468 206f 7065 6e28 7374 6174    with open(stat
-00011e40: 735f 7061 7468 2c20 2272 222c 2065 6e63  s_path, "r", enc
-00011e50: 6f64 696e 673d 2275 7466 2d38 2229 2061  oding="utf-8") a
-00011e60: 7320 7374 6174 735f 6669 6c65 3a0a 2020  s stats_file:.  
-00011e70: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00011e80: 6174 735f 6c69 6e65 7320 3d20 7374 6174  ats_lines = stat
-00011e90: 735f 6669 6c65 2e72 6561 6428 292e 7370  s_file.read().sp
-00011ea0: 6c69 746c 696e 6573 2829 0a0a 2020 2020  litlines()..    
-00011eb0: 2020 2020 2020 2020 2020 2020 746f 5f62              to_b
-00011ec0: 655f 6465 6c65 7465 6420 3d20 5b5d 0a20  e_deleted = []. 
-00011ed0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011ee0: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-00011ef0: 6e28 7374 6174 735f 6c69 6e65 7329 293a  n(stats_lines)):
-00011f00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011f10: 2020 2020 2064 6574 6169 6c73 203d 2073       details = s
-00011f20: 7461 7473 5f6c 696e 6573 5b69 5d2e 7374  tats_lines[i].st
-00011f30: 7269 7028 292e 7370 6c69 7428 227c 2229  rip().split("|")
-00011f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011f50: 2020 2020 2073 6f6e 675f 6964 203d 2069       song_id = i
-00011f60: 6e74 2864 6574 6169 6c73 5b30 5d29 0a20  nt(details[0]). 
-00011f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f80: 2020 2069 6620 736f 6e67 5f69 6420 696e     if song_id in
-00011f90: 2073 6f6e 675f 6964 733a 0a20 2020 2020   song_ids:.     
-00011fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fb0: 2020 2074 6f5f 6265 5f64 656c 6574 6564     to_be_deleted
-00011fc0: 2e61 7070 656e 6428 6929 0a0a 2020 2020  .append(i)..    
-00011fd0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00011fe0: 2072 6576 6572 7365 6428 746f 5f62 655f   reversed(to_be_
-00011ff0: 6465 6c65 7465 6429 3a0a 2020 2020 2020  deleted):.      
-00012000: 2020 2020 2020 2020 2020 6465 6c20 7374            del st
-00012010: 6174 735f 6c69 6e65 735b 695d 0a0a 2020  ats_lines[i]..  
-00012020: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-00012030: 7065 6e28 7374 6174 735f 7061 7468 2c20  pen(stats_path, 
-00012040: 2277 222c 2065 6e63 6f64 696e 673d 2275  "w", encoding="u
-00012050: 7466 2d38 2229 2061 7320 7374 6174 735f  tf-8") as stats_
-00012060: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
-00012070: 2020 2020 2020 7374 6174 735f 6669 6c65        stats_file
-00012080: 2e77 7269 7465 2822 5c6e 222e 6a6f 696e  .write("\n".join
-00012090: 2873 7461 7473 5f6c 696e 6573 2929 0a0a  (stats_lines))..
-000120a0: 2020 2020 2020 2020 6966 2072 656d 6169          if remai
-000120b0: 6e69 6e67 5f73 6f6e 675f 6964 733a 0a20  ning_song_ids:. 
-000120c0: 2020 2020 2020 2020 2020 2063 6c69 636b             click
-000120d0: 2e73 6563 686f 280a 2020 2020 2020 2020  .secho(.        
-000120e0: 2020 2020 2020 2020 6622 436f 756c 6420          f"Could 
-000120f0: 6e6f 7420 6669 6e64 2074 6865 2066 6f6c  not find the fol
-00012100: 6c6f 7769 6e67 2073 6f6e 6720 4944 733a  lowing song IDs:
-00012110: 207b 272c 2027 2e6a 6f69 6e28 6d61 7028   {', '.join(map(
-00012120: 7374 722c 2072 656d 6169 6e69 6e67 5f73  str, remaining_s
-00012130: 6f6e 675f 6964 7329 297d 2e22 2c0a 2020  ong_ids))}.",.  
-00012140: 2020 2020 2020 2020 2020 2020 2020 6667                fg
-00012150: 3d22 7265 6422 2c0a 2020 2020 2020 2020  ="red",.        
-00012160: 2020 2020 290a 2020 2020 656c 7365 3a0a      ).    else:.
-00012170: 2020 2020 2020 2020 7461 6773 5f74 6f5f          tags_to_
-00012180: 7265 6d6f 7665 203d 2073 6574 2861 7267  remove = set(arg
-00012190: 7329 0a20 2020 2020 2020 2069 6620 6e6f  s).        if no
-000121a0: 7420 666f 7263 653a 0a20 2020 2020 2020  t force:.       
-000121b0: 2020 2020 2063 6861 7220 3d20 696e 7075       char = inpu
-000121c0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-000121d0: 2020 2066 2241 7265 2079 6f75 2073 7572     f"Are you sur
-000121e0: 6520 796f 7520 7761 6e74 2074 6f20 6465  e you want to de
-000121f0: 6c65 7465 207b 6c65 6e28 7461 6773 5f74  lete {len(tags_t
-00012200: 6f5f 7265 6d6f 7665 297d 2074 6167 2873  o_remove)} tag(s
-00012210: 293f 205b 792f 6e5d 2022 0a20 2020 2020  )? [y/n] ".     
-00012220: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00012230: 2020 2020 2020 6966 2063 6861 722e 6c6f        if char.lo
-00012240: 7765 7228 2920 213d 2022 7922 3a0a 2020  wer() != "y":.  
-00012250: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00012260: 696e 7428 2244 6964 206e 6f74 2064 656c  int("Did not del
-00012270: 6574 652e 2229 0a20 2020 2020 2020 2020  ete.").         
-00012280: 2020 2020 2020 2072 6574 7572 6e0a 0a20         return.. 
-00012290: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-000122a0: 2863 6f6e 6669 672e 534f 4e47 535f 494e  (config.SONGS_IN
-000122b0: 464f 5f50 4154 482c 2022 7222 2c20 656e  FO_PATH, "r", en
-000122c0: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
-000122d0: 6173 2073 6f6e 6773 5f66 696c 653a 0a20  as songs_file:. 
-000122e0: 2020 2020 2020 2020 2020 206c 696e 6573             lines
-000122f0: 203d 2073 6f6e 6773 5f66 696c 652e 7265   = songs_file.re
-00012300: 6164 2829 2e73 706c 6974 6c69 6e65 7328  ad().splitlines(
-00012310: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
-00012320: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
-00012330: 286c 696e 6573 2929 3a0a 2020 2020 2020  (lines)):.      
-00012340: 2020 2020 2020 2020 2020 6465 7461 696c            detail
-00012350: 7320 3d20 6c69 6e65 735b 695d 2e73 7472  s = lines[i].str
-00012360: 6970 2829 2e73 706c 6974 2822 7c22 290a  ip().split("|").
-00012370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012380: 7461 6773 203d 2064 6574 6169 6c73 5b32  tags = details[2
-00012390: 5d2e 7370 6c69 7428 222c 2229 0a20 2020  ].split(",").   
-000123a0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000123b0: 206a 2069 6e20 7261 6e67 6528 6c65 6e28   j in range(len(
-000123c0: 7461 6773 2929 3a0a 2020 2020 2020 2020  tags)):.        
-000123d0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-000123e0: 6167 735b 6a5d 2069 6e20 7461 6773 5f74  ags[j] in tags_t
-000123f0: 6f5f 7265 6d6f 7665 3a0a 2020 2020 2020  o_remove:.      
-00012400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012410: 2020 6465 6c20 7461 6773 5b6a 5d0a 2020    del tags[j].  
-00012420: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00012430: 7461 696c 735b 325d 203d 2022 2c22 2e6a  tails[2] = ",".j
-00012440: 6f69 6e28 7461 6773 290a 2020 2020 2020  oin(tags).      
-00012450: 2020 2020 2020 2020 2020 6c69 6e65 735b            lines[
-00012460: 695d 203d 2022 7c22 2e6a 6f69 6e28 6465  i] = "|".join(de
-00012470: 7461 696c 7329 0a0a 2020 2020 2020 2020  tails)..        
-00012480: 7769 7468 206f 7065 6e28 636f 6e66 6967  with open(config
-00012490: 2e53 4f4e 4753 5f49 4e46 4f5f 5041 5448  .SONGS_INFO_PATH
-000124a0: 2c20 2277 222c 2065 6e63 6f64 696e 673d  , "w", encoding=
-000124b0: 2275 7466 2d38 2229 2061 7320 736f 6e67  "utf-8") as song
-000124c0: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
-000124d0: 2020 2020 736f 6e67 735f 6669 6c65 2e77      songs_file.w
-000124e0: 7269 7465 2822 5c6e 222e 6a6f 696e 286c  rite("\n".join(l
-000124f0: 696e 6573 2929 0a0a 2020 2020 2020 2020  ines))..        
-00012500: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-00012510: 2020 2020 2020 2020 2066 2244 656c 6574           f"Delet
-00012520: 6564 2061 6c6c 206f 6363 7572 7265 6e63  ed all occurrenc
-00012530: 6573 206f 6620 7b6c 656e 2874 6167 735f  es of {len(tags_
-00012540: 746f 5f72 656d 6f76 6529 7d20 7461 6728  to_remove)} tag(
-00012550: 7329 2e22 2c0a 2020 2020 2020 2020 2020  s).",.          
-00012560: 2020 6667 3d22 6772 6565 6e22 2c0a 2020    fg="green",.  
-00012570: 2020 2020 2020 290a 0a0a 4063 6c69 2e63        )...@cli.c
-00012580: 6f6d 6d61 6e64 286e 616d 653d 2274 6167  ommand(name="tag
-00012590: 2229 0a40 636c 6963 6b2e 6172 6775 6d65  ").@click.argume
-000125a0: 6e74 2822 736f 6e67 5f69 6473 222c 2074  nt("song_ids", t
-000125b0: 7970 653d 636c 6963 6b2e 494e 542c 2072  ype=click.INT, r
-000125c0: 6571 7569 7265 643d 5472 7565 2c20 6e61  equired=True, na
-000125d0: 7267 733d 2d31 290a 4063 6c69 636b 2e6f  rgs=-1).@click.o
-000125e0: 7074 696f 6e28 0a20 2020 2022 2d74 222c  ption(.    "-t",
-000125f0: 0a20 2020 2022 2d2d 7461 6722 2c0a 2020  .    "--tag",.  
-00012600: 2020 2274 6167 7322 2c0a 2020 2020 6865    "tags",.    he
-00012610: 6c70 3d22 5461 6773 2074 6f20 6164 642e  lp="Tags to add.
-00012620: 222c 0a20 2020 206d 756c 7469 706c 653d  ",.    multiple=
-00012630: 5472 7565 2c0a 290a 6465 6620 7461 675f  True,.).def tag_
-00012640: 2873 6f6e 675f 6964 732c 2074 6167 7329  (song_ids, tags)
-00012650: 3a0a 2020 2020 2222 2241 6464 2074 6167  :.    """Add tag
-00012660: 7320 746f 2061 2073 6f6e 6720 2870 6173  s to a song (pas
-00012670: 7365 6420 6173 2049 4429 2e20 5461 6773  sed as ID). Tags
-00012680: 2063 616e 6e6f 7420 636f 6e74 6169 6e20   cannot contain 
-00012690: 7468 6520 6368 6172 6163 7465 7273 0a20  the characters. 
-000126a0: 2020 2027 2c27 206f 7220 277c 272e 2222     ',' or '|'.""
-000126b0: 220a 2020 2020 736f 6e67 5f69 6473 203d  ".    song_ids =
-000126c0: 2073 6574 2873 6f6e 675f 6964 7329 0a20   set(song_ids). 
-000126d0: 2020 206e 756d 5f73 6f6e 6773 203d 206c     num_songs = l
-000126e0: 656e 2873 6f6e 675f 6964 7329 0a20 2020  en(song_ids).   
-000126f0: 2074 6167 7320 3d20 7365 7428 7461 6773   tags = set(tags
-00012700: 290a 2020 2020 666f 7220 7461 6720 696e  ).    for tag in
-00012710: 2074 6167 733a 0a20 2020 2020 2020 2069   tags:.        i
-00012720: 6620 222c 2220 696e 2074 6167 206f 7220  f "," in tag or 
-00012730: 227c 2220 696e 2074 6167 3a0a 2020 2020  "|" in tag:.    
-00012740: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
-00012750: 6368 6f28 2254 6167 7320 6361 6e6e 6f74  cho("Tags cannot
-00012760: 2063 6f6e 7461 696e 2027 2c27 206f 7220   contain ',' or 
-00012770: 277c 272e 222c 2066 673d 2272 6564 2229  '|'.", fg="red")
-00012780: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00012790: 7572 6e0a 2020 2020 6966 2074 6167 733a  urn.    if tags:
-000127a0: 0a20 2020 2020 2020 2073 6f6e 6773 5f66  .        songs_f
-000127b0: 696c 6520 3d20 6f70 656e 2863 6f6e 6669  ile = open(confi
-000127c0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
-000127d0: 482c 2022 7222 2c20 656e 636f 6469 6e67  H, "r", encoding
-000127e0: 3d22 7574 662d 3822 290a 2020 2020 2020  ="utf-8").      
-000127f0: 2020 6c69 6e65 7320 3d20 736f 6e67 735f    lines = songs_
-00012800: 6669 6c65 2e72 6561 6428 292e 7370 6c69  file.read().spli
-00012810: 746c 696e 6573 2829 0a20 2020 2020 2020  tlines().       
-00012820: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-00012830: 6c65 6e28 6c69 6e65 7329 293a 0a20 2020  len(lines)):.   
-00012840: 2020 2020 2020 2020 2064 6574 6169 6c73           details
-00012850: 203d 206c 696e 6573 5b69 5d2e 7374 7269   = lines[i].stri
-00012860: 7028 292e 7370 6c69 7428 227c 2229 0a20  p().split("|"). 
-00012870: 2020 2020 2020 2020 2020 2073 6f6e 675f             song_
-00012880: 6964 203d 2069 6e74 2864 6574 6169 6c73  id = int(details
-00012890: 5b30 5d29 0a20 2020 2020 2020 2020 2020  [0]).           
-000128a0: 2069 6620 736f 6e67 5f69 6420 696e 2073   if song_id in s
-000128b0: 6f6e 675f 6964 733a 0a20 2020 2020 2020  ong_ids:.       
-000128c0: 2020 2020 2020 2020 2073 6f6e 675f 6964           song_id
-000128d0: 732e 7265 6d6f 7665 2873 6f6e 675f 6964  s.remove(song_id
-000128e0: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-000128f0: 2020 2069 6620 6465 7461 696c 735b 325d     if details[2]
-00012900: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00012910: 2020 2020 2020 6e65 775f 7461 6773 203d        new_tags =
-00012920: 2064 6574 6169 6c73 5b32 5d2e 7370 6c69   details[2].spli
-00012930: 7428 222c 2229 0a20 2020 2020 2020 2020  t(",").         
-00012940: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00012950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012960: 206e 6577 5f74 6167 7320 3d20 5b5d 0a20   new_tags = []. 
-00012970: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00012980: 6577 5f74 6167 7320 2b3d 205b 7461 6720  ew_tags += [tag 
-00012990: 666f 7220 7461 6720 696e 2074 6167 7320  for tag in tags 
-000129a0: 6966 2074 6167 206e 6f74 2069 6e20 6e65  if tag not in ne
-000129b0: 775f 7461 6773 5d0a 2020 2020 2020 2020  w_tags].        
-000129c0: 2020 2020 2020 2020 6465 7461 696c 735b          details[
-000129d0: 325d 203d 2022 2c22 2e6a 6f69 6e28 6e65  2] = ",".join(ne
-000129e0: 775f 7461 6773 290a 2020 2020 2020 2020  w_tags).        
-000129f0: 2020 2020 2020 2020 6c69 6e65 735b 695d          lines[i]
-00012a00: 203d 2022 7c22 2e6a 6f69 6e28 6465 7461   = "|".join(deta
-00012a10: 696c 7329 0a20 2020 2020 2020 2073 6f6e  ils).        son
-00012a20: 6773 5f66 696c 652e 636c 6f73 6528 290a  gs_file.close().
-00012a30: 0a20 2020 2020 2020 2073 6f6e 6773 5f66  .        songs_f
-00012a40: 696c 6520 3d20 6f70 656e 2863 6f6e 6669  ile = open(confi
-00012a50: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
-00012a60: 482c 2022 7722 2c20 656e 636f 6469 6e67  H, "w", encoding
-00012a70: 3d22 7574 662d 3822 290a 2020 2020 2020  ="utf-8").      
-00012a80: 2020 736f 6e67 735f 6669 6c65 2e77 7269    songs_file.wri
-00012a90: 7465 2822 5c6e 222e 6a6f 696e 286c 696e  te("\n".join(lin
-00012aa0: 6573 2929 0a20 2020 2020 2020 2073 6f6e  es)).        son
-00012ab0: 6773 5f66 696c 652e 636c 6f73 6528 290a  gs_file.close().
-00012ac0: 0a20 2020 2020 2020 2069 6620 736f 6e67  .        if song
-00012ad0: 5f69 6473 3a0a 2020 2020 2020 2020 2020  _ids:.          
-00012ae0: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
-00012af0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00012b00: 2243 6f75 6c64 206e 6f74 2066 696e 6420  "Could not find 
-00012b10: 736f 6e67 2873 2920 7769 7468 2049 4428  song(s) with ID(
-00012b20: 7329 207b 272c 2027 2e6a 6f69 6e28 6d61  s) {', '.join(ma
-00012b30: 7028 7374 722c 2073 6f6e 675f 6964 7329  p(str, song_ids)
-00012b40: 297d 2e22 2c0a 2020 2020 2020 2020 2020  )}.",.          
-00012b50: 2020 2020 2020 6667 3d22 7265 6422 2c0a        fg="red",.
-00012b60: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00012b70: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00012b80: 2873 6f6e 675f 6964 7329 203d 3d20 6e75  (song_ids) == nu
-00012b90: 6d5f 736f 6e67 733a 0a20 2020 2020 2020  m_songs:.       
-00012ba0: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-00012bb0: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
-00012bc0: 6368 6f28 0a20 2020 2020 2020 2020 2020  cho(.           
-00012bd0: 2066 2241 6464 6564 207b 6c65 6e28 7461   f"Added {len(ta
-00012be0: 6773 297d 2074 6167 2873 2920 746f 207b  gs)} tag(s) to {
-00012bf0: 6e75 6d5f 736f 6e67 7320 2d20 6c65 6e28  num_songs - len(
-00012c00: 736f 6e67 5f69 6473 297d 2073 6f6e 6728  song_ids)} song(
-00012c10: 7329 2e22 2c0a 2020 2020 2020 2020 2020  s).",.          
-00012c20: 2020 6667 3d22 6772 6565 6e22 2c0a 2020    fg="green",.  
-00012c30: 2020 2020 2020 290a 2020 2020 656c 7365        ).    else
-00012c40: 3a0a 2020 2020 2020 2020 636c 6963 6b2e  :.        click.
-00012c50: 7365 6368 6f28 224e 6f20 7461 6773 2070  secho("No tags p
-00012c60: 6173 7365 642e 222c 2066 673d 2272 6564  assed.", fg="red
-00012c70: 2229 0a0a 0a40 636c 692e 636f 6d6d 616e  ")...@cli.comman
-00012c80: 6428 290a 4063 6c69 636b 2e61 7267 756d  d().@click.argum
-00012c90: 656e 7428 2273 6f6e 675f 6964 7322 2c20  ent("song_ids", 
-00012ca0: 7479 7065 3d63 6c69 636b 2e49 4e54 2c20  type=click.INT, 
-00012cb0: 7265 7175 6972 6564 3d54 7275 652c 206e  required=True, n
-00012cc0: 6172 6773 3d2d 3129 0a40 636c 6963 6b2e  args=-1).@click.
-00012cd0: 6f70 7469 6f6e 280a 2020 2020 222d 7422  option(.    "-t"
-00012ce0: 2c0a 2020 2020 222d 2d74 6167 222c 0a20  ,.    "--tag",. 
-00012cf0: 2020 2022 7461 6773 222c 0a20 2020 2068     "tags",.    h
-00012d00: 656c 703d 2254 6167 7320 746f 2072 656d  elp="Tags to rem
-00012d10: 6f76 652e 222c 0a20 2020 206d 756c 7469  ove.",.    multi
-00012d20: 706c 653d 5472 7565 2c0a 290a 4063 6c69  ple=True,.).@cli
-00012d30: 636b 2e6f 7074 696f 6e28 222d 412f 2d6e  ck.option("-A/-n
-00012d40: 4122 2c20 222d 2d61 6c6c 2f2d 2d6e 6f2d  A", "--all/--no-
-00012d50: 616c 6c22 2c20 2261 6c6c 5f22 2c20 6465  all", "all_", de
-00012d60: 6661 756c 743d 4661 6c73 6529 0a64 6566  fault=False).def
-00012d70: 2075 6e74 6167 2873 6f6e 675f 6964 732c   untag(song_ids,
-00012d80: 2074 6167 732c 2061 6c6c 5f29 3a0a 2020   tags, all_):.  
-00012d90: 2020 2222 2252 656d 6f76 6520 7461 6773    """Remove tags
-00012da0: 2066 726f 6d20 6120 7370 6563 6966 6963   from a specific
-00012db0: 2073 6f6e 6720 2870 6173 7365 6420 6173   song (passed as
-00012dc0: 2049 4429 2e20 5461 6773 2074 6861 7420   ID). Tags that 
-00012dd0: 7468 6520 736f 6e67 0a20 2020 2064 6f65  the song.    doe
-00012de0: 736e 2774 2068 6176 6520 7769 6c6c 2062  sn't have will b
-00012df0: 6520 6967 6e6f 7265 642e 0a0a 2020 2020  e ignored...    
-00012e00: 5061 7373 696e 6720 7468 6520 272d 412f  Passing the '-A/
-00012e10: 2d2d 616c 6c27 2066 6c61 6720 7769 6c6c  --all' flag will
-00012e20: 2072 656d 6f76 6520 616c 6c20 7461 6773   remove all tags
-00012e30: 2066 726f 6d20 7468 6520 736f 6e67 2c20   from the song, 
-00012e40: 756e 6c65 7373 2054 4147 530a 2020 2020  unless TAGS.    
-00012e50: 6973 2070 6173 7365 6420 2869 6e20 7768  is passed (in wh
-00012e60: 6963 6820 6361 7365 2074 6865 2066 6c61  ich case the fla
-00012e70: 6720 6973 2069 676e 6f72 6564 292e 2222  g is ignored).""
-00012e80: 220a 2020 2020 736f 6e67 5f69 6473 203d  ".    song_ids =
-00012e90: 2073 6574 2873 6f6e 675f 6964 7329 0a20   set(song_ids). 
-00012ea0: 2020 206e 756d 5f73 6f6e 6773 203d 206c     num_songs = l
-00012eb0: 656e 2873 6f6e 675f 6964 7329 0a20 2020  en(song_ids).   
-00012ec0: 2074 6167 7320 3d20 7365 7428 7461 6773   tags = set(tags
-00012ed0: 290a 2020 2020 6966 2074 6167 733a 0a20  ).    if tags:. 
-00012ee0: 2020 2020 2020 2073 6f6e 6773 5f66 696c         songs_fil
-00012ef0: 6520 3d20 6f70 656e 2863 6f6e 6669 672e  e = open(config.
-00012f00: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
-00012f10: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
-00012f20: 7574 662d 3822 290a 2020 2020 2020 2020  utf-8").        
-00012f30: 6c69 6e65 7320 3d20 736f 6e67 735f 6669  lines = songs_fi
-00012f40: 6c65 2e72 6561 6428 292e 7370 6c69 746c  le.read().splitl
-00012f50: 696e 6573 2829 0a20 2020 2020 2020 2066  ines().        f
-00012f60: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-00012f70: 6e28 6c69 6e65 7329 293a 0a20 2020 2020  n(lines)):.     
-00012f80: 2020 2020 2020 2064 6574 6169 6c73 203d         details =
-00012f90: 206c 696e 6573 5b69 5d2e 7374 7269 7028   lines[i].strip(
-00012fa0: 292e 7370 6c69 7428 227c 2229 0a20 2020  ).split("|").   
-00012fb0: 2020 2020 2020 2020 2073 6f6e 675f 6964           song_id
-00012fc0: 203d 2069 6e74 2864 6574 6169 6c73 5b30   = int(details[0
-00012fd0: 5d29 0a20 2020 2020 2020 2020 2020 2069  ]).            i
-00012fe0: 6620 736f 6e67 5f69 6420 696e 2073 6f6e  f song_id in son
-00012ff0: 675f 6964 733a 0a20 2020 2020 2020 2020  g_ids:.         
-00013000: 2020 2020 2020 2073 6f6e 675f 6964 732e         song_ids.
-00013010: 7265 6d6f 7665 2873 6f6e 675f 6964 290a  remove(song_id).
-00013020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013030: 2074 6167 735f 746f 5f6b 6565 7020 3d20   tags_to_keep = 
-00013040: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
-00013050: 2020 2020 2020 7461 6720 666f 7220 7461        tag for ta
-00013060: 6720 696e 2064 6574 6169 6c73 5b32 5d2e  g in details[2].
-00013070: 7370 6c69 7428 222c 2229 2069 6620 7461  split(",") if ta
-00013080: 6720 6e6f 7420 696e 2074 6167 730a 2020  g not in tags.  
-00013090: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
-000130a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000130b0: 6c69 6e65 735b 695d 203d 2022 7c22 2e6a  lines[i] = "|".j
-000130c0: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-000130d0: 2020 2020 2020 2020 2064 6574 6169 6c73           details
-000130e0: 5b3a 325d 202b 205b 222c 222e 6a6f 696e  [:2] + [",".join
-000130f0: 2874 6167 735f 746f 5f6b 6565 7029 5d20  (tags_to_keep)] 
-00013100: 2b20 6465 7461 696c 735b 333a 5d0a 2020  + details[3:].  
-00013110: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00013120: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
-00013130: 6c65 2e63 6c6f 7365 2829 0a0a 2020 2020  le.close()..    
-00013140: 2020 2020 736f 6e67 735f 6669 6c65 203d      songs_file =
-00013150: 206f 7065 6e28 636f 6e66 6967 2e53 4f4e   open(config.SON
-00013160: 4753 5f49 4e46 4f5f 5041 5448 2c20 2277  GS_INFO_PATH, "w
-00013170: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
-00013180: 2d38 2229 0a20 2020 2020 2020 2073 6f6e  -8").        son
-00013190: 6773 5f66 696c 652e 7772 6974 6528 225c  gs_file.write("\
-000131a0: 6e22 2e6a 6f69 6e28 6c69 6e65 7329 290a  n".join(lines)).
-000131b0: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
-000131c0: 6c65 2e63 6c6f 7365 2829 0a0a 2020 2020  le.close()..    
-000131d0: 2020 2020 6966 2073 6f6e 675f 6964 733a      if song_ids:
-000131e0: 0a20 2020 2020 2020 2020 2020 2063 6c69  .            cli
-000131f0: 636b 2e73 6563 686f 280a 2020 2020 2020  ck.secho(.      
-00013200: 2020 2020 2020 2020 2020 6622 436f 756c            f"Coul
-00013210: 6420 6e6f 7420 6669 6e64 2073 6f6e 6728  d not find song(
-00013220: 7329 2077 6974 6820 4944 2873 2920 7b27  s) with ID(s) {'
-00013230: 2c20 272e 6a6f 696e 286d 6170 2873 7472  , '.join(map(str
-00013240: 2c20 736f 6e67 5f69 6473 2929 7d2e 222c  , song_ids))}.",
-00013250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013260: 2066 673d 2272 6564 222c 0a20 2020 2020   fg="red",.     
-00013270: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00013280: 2020 2020 2069 6620 6c65 6e28 736f 6e67       if len(song
-00013290: 5f69 6473 2920 3d3d 206e 756d 5f73 6f6e  _ids) == num_son
-000132a0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-000132b0: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
-000132c0: 2020 2063 6c69 636b 2e73 6563 686f 280a     click.secho(.
-000132d0: 2020 2020 2020 2020 2020 2020 6622 5265              f"Re
-000132e0: 6d6f 7665 6420 616e 7920 6f63 6375 7272  moved any occurr
-000132f0: 656e 6365 7320 6f66 207b 6c65 6e28 7461  ences of {len(ta
-00013300: 6773 297d 2074 6167 2873 2920 6672 6f6d  gs)} tag(s) from
-00013310: 207b 6e75 6d5f 736f 6e67 7320 2d20 6c65   {num_songs - le
-00013320: 6e28 736f 6e67 5f69 6473 297d 2073 6f6e  n(song_ids)} son
-00013330: 6728 7329 2e22 2c0a 2020 2020 2020 2020  g(s).",.        
-00013340: 2020 2020 6667 3d22 6772 6565 6e22 2c0a      fg="green",.
-00013350: 2020 2020 2020 2020 290a 2020 2020 656c          ).    el
-00013360: 7365 3a0a 2020 2020 2020 2020 6966 206e  se:.        if n
-00013370: 6f74 2061 6c6c 5f3a 0a20 2020 2020 2020  ot all_:.       
-00013380: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-00013390: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000133a0: 2020 224e 6f20 7461 6773 2070 6173 7365    "No tags passe
-000133b0: 64e2 8094 746f 2072 656d 6f76 6520 616c  d...to remove al
-000133c0: 6c20 7461 6773 2c20 7061 7373 2074 6865  l tags, pass the
-000133d0: 2027 2d41 2f2d 2d61 6c6c 2720 666c 6167   '-A/--all' flag
-000133e0: 2e22 2c0a 2020 2020 2020 2020 2020 2020  .",.            
-000133f0: 2020 2020 6667 3d22 7265 6422 2c0a 2020      fg="red",.  
-00013400: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00013410: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00013420: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
-00013430: 203d 206f 7065 6e28 636f 6e66 6967 2e53   = open(config.S
-00013440: 4f4e 4753 5f49 4e46 4f5f 5041 5448 2c20  ONGS_INFO_PATH, 
-00013450: 2272 222c 2065 6e63 6f64 696e 673d 2275  "r", encoding="u
-00013460: 7466 2d38 2229 0a20 2020 2020 2020 2020  tf-8").         
-00013470: 2020 206c 696e 6573 203d 2073 6f6e 6773     lines = songs
-00013480: 5f66 696c 652e 7265 6164 2829 2e73 706c  _file.read().spl
-00013490: 6974 6c69 6e65 7328 290a 2020 2020 2020  itlines().      
-000134a0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-000134b0: 616e 6765 286c 656e 286c 696e 6573 2929  ange(len(lines))
-000134c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000134d0: 2020 6c69 6e65 203d 206c 696e 6573 5b69    line = lines[i
-000134e0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000134f0: 2020 6465 7461 696c 7320 3d20 6c69 6e65    details = line
-00013500: 2e73 7472 6970 2829 2e73 706c 6974 2822  .strip().split("
-00013510: 7c22 290a 2020 2020 2020 2020 2020 2020  |").            
-00013520: 2020 2020 6966 2069 6e74 2864 6574 6169      if int(detai
-00013530: 6c73 5b30 5d29 2069 6e20 736f 6e67 5f69  ls[0]) in song_i
-00013540: 6473 3a0a 2020 2020 2020 2020 2020 2020  ds:.            
-00013550: 2020 2020 2020 2020 6c69 6e65 735b 695d          lines[i]
-00013560: 203d 2022 7c22 2e6a 6f69 6e28 6465 7461   = "|".join(deta
-00013570: 696c 735b 3a32 5d20 2b20 5b22 225d 202b  ils[:2] + [""] +
-00013580: 2064 6574 6169 6c73 5b33 3a5d 290a 2020   details[3:]).  
-00013590: 2020 2020 2020 2020 2020 736f 6e67 735f            songs_
-000135a0: 6669 6c65 2e63 6c6f 7365 2829 0a0a 2020  file.close()..  
-000135b0: 2020 2020 2020 2020 2020 736f 6e67 735f            songs_
-000135c0: 6669 6c65 203d 206f 7065 6e28 636f 6e66  file = open(conf
-000135d0: 6967 2e53 4f4e 4753 5f49 4e46 4f5f 5041  ig.SONGS_INFO_PA
-000135e0: 5448 2c20 2277 222c 2065 6e63 6f64 696e  TH, "w", encodin
-000135f0: 673d 2275 7466 2d38 2229 0a20 2020 2020  g="utf-8").     
-00013600: 2020 2020 2020 2073 6f6e 6773 5f66 696c         songs_fil
-00013610: 652e 7772 6974 6528 225c 6e22 2e6a 6f69  e.write("\n".joi
-00013620: 6e28 6c69 6e65 7329 290a 2020 2020 2020  n(lines)).      
-00013630: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
-00013640: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
-00013650: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
-00013660: 6f28 0a20 2020 2020 2020 2020 2020 2020  o(.             
-00013670: 2020 2066 2252 656d 6f76 6564 207b 6c65     f"Removed {le
-00013680: 6e28 7461 6773 297d 2074 6167 2873 2920  n(tags)} tag(s) 
-00013690: 6672 6f6d 207b 6c65 6e28 736f 6e67 5f69  from {len(song_i
-000136a0: 6473 297d 2073 6f6e 6728 7329 2e22 2c0a  ds)} song(s).",.
-000136b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136c0: 6667 3d22 6772 6565 6e22 2c0a 2020 2020  fg="green",.    
-000136d0: 2020 2020 2020 2020 290a 0a0a 4063 6c69          )...@cli
-000136e0: 2e63 6f6d 6d61 6e64 2829 0a40 636c 6963  .command().@clic
-000136f0: 6b2e 6172 6775 6d65 6e74 2822 7461 6773  k.argument("tags
-00013700: 222c 206e 6172 6773 3d2d 3129 0a40 636c  ", nargs=-1).@cl
-00013710: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
-00013720: 222d 7322 2c0a 2020 2020 222d 2d73 6875  "-s",.    "--shu
-00013730: 6666 6c65 222c 0a20 2020 2022 7368 7566  ffle",.    "shuf
-00013740: 666c 655f 222c 0a20 2020 2074 7970 653d  fle_",.    type=
-00013750: 636c 6963 6b2e 496e 7452 616e 6765 2830  click.IntRange(0
-00013760: 2c20 3229 2c0a 2020 2020 6865 6c70 3d22  , 2),.    help="
-00013770: 303a 2073 6875 6666 6c65 206f 6e63 652c  0: shuffle once,
-00013780: 2031 3a20 7368 7566 666c 6520 6576 6572   1: shuffle ever
-00013790: 7920 6c6f 6f70 2c20 323a 2073 6875 6666  y loop, 2: shuff
-000137a0: 6c65 2065 7665 7279 206c 6f6f 7020 6578  le every loop ex
-000137b0: 6365 7074 2066 6f72 2074 6865 2066 6972  cept for the fir
-000137c0: 7374 206f 6e65 2e22 2c0a 290a 4063 6c69  st one.",.).@cli
-000137d0: 636b 2e6f 7074 696f 6e28 0a20 2020 2022  ck.option(.    "
-000137e0: 2d52 2f2d 6e52 222c 0a20 2020 2022 2d2d  -R/-nR",.    "--
-000137f0: 7265 7665 7273 652f 2d2d 6e6f 2d72 6576  reverse/--no-rev
-00013800: 6572 7365 222c 0a20 2020 2022 7265 7665  erse",.    "reve
-00013810: 7273 6522 2c0a 2020 2020 6465 6661 756c  rse",.    defaul
-00013820: 743d 4661 6c73 652c 0a20 2020 2068 656c  t=False,.    hel
-00013830: 703d 2250 6c61 7920 736f 6e67 7320 696e  p="Play songs in
-00013840: 2072 6576 6572 7365 2028 6d6f 7374 2072   reverse (most r
-00013850: 6563 656e 746c 7920 6164 6465 6420 6669  ecently added fi
-00013860: 7273 7429 2e22 2c0a 290a 4063 6c69 636b  rst).",.).@click
-00013870: 2e6f 7074 696f 6e28 0a20 2020 2022 2d6f  .option(.    "-o
-00013880: 222c 0a20 2020 2022 2d2d 6f6e 6c79 222c  ",.    "--only",
-00013890: 0a20 2020 2022 6f6e 6c79 222c 0a20 2020  .    "only",.   
-000138a0: 2074 7970 653d 636c 6963 6b2e 494e 542c   type=click.INT,
-000138b0: 0a20 2020 206d 756c 7469 706c 653d 5472  .    multiple=Tr
-000138c0: 7565 2c0a 2020 2020 6865 6c70 3d22 506c  ue,.    help="Pl
-000138d0: 6179 206f 6e6c 7920 7468 6973 2f74 6865  ay only this/the
-000138e0: 7365 2073 6f6e 6728 7329 2028 6361 6e20  se song(s) (can 
-000138f0: 6265 2070 6173 7365 6420 6d75 6c74 6970  be passed multip
-00013900: 6c65 2074 696d 6573 2c20 652e 672e 2027  le times, e.g. '
-00013910: 6d61 6573 7472 6f20 706c 6179 202d 6f20  maestro play -o 
-00013920: 3120 2d6f 2031 3727 292e 222c 0a29 0a40  1 -o 17').",.).@
-00013930: 636c 6963 6b2e 6f70 7469 6f6e 280a 2020  click.option(.  
-00013940: 2020 222d 7622 2c0a 2020 2020 222d 2d76    "-v",.    "--v
-00013950: 6f6c 756d 6522 2c0a 2020 2020 2276 6f6c  olume",.    "vol
-00013960: 756d 6522 2c0a 2020 2020 7479 7065 3d63  ume",.    type=c
-00013970: 6c69 636b 2e49 6e74 5261 6e67 6528 302c  lick.IntRange(0,
-00013980: 2031 3030 292c 0a20 2020 2064 6566 6175   100),.    defau
-00013990: 6c74 3d31 3030 2c0a 2020 2020 7368 6f77  lt=100,.    show
-000139a0: 5f64 6566 6175 6c74 3d54 7275 652c 0a29  _default=True,.)
-000139b0: 0a40 636c 6963 6b2e 6f70 7469 6f6e 280a  .@click.option(.
-000139c0: 2020 2020 222d 4c2f 2d6e 4c22 2c0a 2020      "-L/-nL",.  
-000139d0: 2020 222d 2d6c 6f6f 702f 2d2d 6e6f 2d6c    "--loop/--no-l
-000139e0: 6f6f 7022 2c0a 2020 2020 226c 6f6f 7022  oop",.    "loop"
-000139f0: 2c0a 2020 2020 6465 6661 756c 743d 4661  ,.    default=Fa
-00013a00: 6c73 652c 0a20 2020 2068 656c 703d 224c  lse,.    help="L
-00013a10: 6f6f 7020 7468 6520 706c 6179 6c69 7374  oop the playlist
-00013a20: 2e22 2c0a 290a 4063 6c69 636b 2e6f 7074  .",.).@click.opt
-00013a30: 696f 6e28 0a20 2020 2022 2d43 2f2d 6e43  ion(.    "-C/-nC
-00013a40: 222c 0a20 2020 2022 2d2d 636c 6970 732f  ",.    "--clips/
-00013a50: 2d2d 6e6f 2d63 6c69 7073 222c 0a20 2020  --no-clips",.   
-00013a60: 2022 636c 6970 7322 2c0a 2020 2020 6465   "clips",.    de
-00013a70: 6661 756c 743d 4661 6c73 652c 0a20 2020  fault=False,.   
-00013a80: 2068 656c 703d 2253 7461 7274 2069 6e20   help="Start in 
-00013a90: 636c 6970 206d 6f64 652e 2043 616e 2062  clip mode. Can b
-00013aa0: 6520 746f 6767 6c65 6420 7769 7468 2027  e toggled with '
-00013ab0: 6327 2e22 2c0a 290a 4063 6c69 636b 2e6f  c'.",.).@click.o
-00013ac0: 7074 696f 6e28 0a20 2020 2022 2d44 2f2d  ption(.    "-D/-
-00013ad0: 6e44 222c 0a20 2020 2022 2d2d 6469 7363  nD",.    "--disc
-00013ae0: 6f72 642f 2d2d 6e6f 2d64 6973 636f 7264  ord/--no-discord
-00013af0: 222c 0a20 2020 2022 6469 7363 6f72 6422  ",.    "discord"
-00013b00: 2c0a 2020 2020 6465 6661 756c 743d 4661  ,.    default=Fa
-00013b10: 6c73 652c 0a20 2020 2068 656c 703d 2244  lse,.    help="D
-00013b20: 6973 636f 7264 2072 6963 6820 7072 6573  iscord rich pres
-00013b30: 656e 6365 2e20 4967 6e6f 7265 6420 6966  ence. Ignored if
-00013b40: 2072 6571 7569 7265 6420 6465 7065 6e64   required depend
-00013b50: 656e 6369 6573 2061 7265 206e 6f74 2069  encies are not i
-00013b60: 6e73 7461 6c6c 6564 2e20 5769 6c6c 2066  nstalled. Will f
-00013b70: 6169 6c20 7369 6c65 6e74 6c79 2061 6e64  ail silently and
-00013b80: 2072 6574 7279 2065 7665 7279 2074 696d   retry every tim
-00013b90: 6520 7468 6520 736f 6e67 2063 6861 6e67  e the song chang
-00013ba0: 6573 2069 6620 4469 7363 6f72 6420 636f  es if Discord co
-00013bb0: 6e6e 6563 7469 6f6e 2066 6169 6c73 2028  nnection fails (
-00013bc0: 652e 672e 2044 6973 636f 7264 206e 6f74  e.g. Discord not
-00013bd0: 206f 7065 6e29 2e22 2c0a 290a 4063 6c69   open).",.).@cli
-00013be0: 636b 2e6f 7074 696f 6e28 0a20 2020 2022  ck.option(.    "
-00013bf0: 2d4d 2f2d 6e4d 222c 0a20 2020 2022 2d2d  -M/-nM",.    "--
-00013c00: 6d61 7463 682d 616c 6c2f 2d2d 6e6f 2d6d  match-all/--no-m
-00013c10: 6174 6368 2d61 6c6c 222c 0a20 2020 2022  atch-all",.    "
-00013c20: 6d61 7463 685f 616c 6c22 2c0a 2020 2020  match_all",.    
-00013c30: 6465 6661 756c 743d 4661 6c73 652c 0a20  default=False,. 
-00013c40: 2020 2068 656c 703d 2250 6c61 7920 736f     help="Play so
-00013c50: 6e67 7320 7468 6174 206d 6174 6368 2061  ngs that match a
-00013c60: 6c6c 2074 6167 732c 206e 6f74 2061 6e79  ll tags, not any
-00013c70: 2e22 2c0a 290a 4063 6c69 636b 2e6f 7074  .",.).@click.opt
-00013c80: 696f 6e28 0a20 2020 2022 2d56 2f2d 6e56  ion(.    "-V/-nV
-00013c90: 222c 0a20 2020 2022 2d2d 7669 7375 616c  ",.    "--visual
-00013ca0: 697a 652f 2d2d 6e6f 2d76 6973 7561 6c69  ize/--no-visuali
-00013cb0: 7a65 222c 0a20 2020 2022 7669 7375 616c  ze",.    "visual
-00013cc0: 697a 6522 2c0a 2020 2020 6465 6661 756c  ize",.    defaul
-00013cd0: 743d 4661 6c73 652c 0a20 2020 2068 656c  t=False,.    hel
-00013ce0: 703d 2256 6973 7561 6c69 7a65 2074 6865  p="Visualize the
-00013cf0: 2073 6f6e 6720 6265 696e 6720 706c 6179   song being play
-00013d00: 6564 2e20 4967 6e6f 7265 6420 6966 2072  ed. Ignored if r
-00013d10: 6571 7569 7265 6420 6465 7065 6e64 656e  equired dependen
-00013d20: 6369 6573 2061 7265 206e 6f74 2069 6e73  cies are not ins
-00013d30: 7461 6c6c 6564 2e22 2c0a 290a 6465 6620  talled.",.).def 
-00013d40: 706c 6179 280a 2020 2020 7461 6773 2c0a  play(.    tags,.
-00013d50: 2020 2020 7368 7566 666c 655f 2c0a 2020      shuffle_,.  
-00013d60: 2020 7265 7665 7273 652c 0a20 2020 206f    reverse,.    o
-00013d70: 6e6c 792c 0a20 2020 2076 6f6c 756d 652c  nly,.    volume,
-00013d80: 0a20 2020 206c 6f6f 702c 0a20 2020 2063  .    loop,.    c
-00013d90: 6c69 7073 2c0a 2020 2020 6469 7363 6f72  lips,.    discor
-00013da0: 642c 0a20 2020 206d 6174 6368 5f61 6c6c  d,.    match_all
-00013db0: 2c0a 2020 2020 7669 7375 616c 697a 652c  ,.    visualize,
-00013dc0: 0a29 3a0a 2020 2020 2222 2250 6c61 7920  .):.    """Play 
-00013dd0: 796f 7572 2073 6f6e 6773 2e20 4966 2074  your songs. If t
-00013de0: 6167 7320 6172 6520 7061 7373 6564 2c20  ags are passed, 
-00013df0: 616e 7920 736f 6e67 206d 6174 6368 696e  any song matchin
-00013e00: 6720 616e 7920 7461 6720 7769 6c6c 2062  g any tag will b
-00013e10: 6520 696e 0a20 2020 2079 6f75 7220 706c  e in.    your pl
-00013e20: 6179 6c69 7374 2c20 756e 6c65 7373 2074  aylist, unless t
-00013e30: 6865 2027 2d4d 2f2d 2d6d 6174 6368 2d61  he '-M/--match-a
-00013e40: 6c6c 2720 666c 6167 2069 7320 7061 7373  ll' flag is pass
-00013e50: 6564 2c20 696e 2077 6869 6368 2063 6173  ed, in which cas
-00013e60: 650a 2020 2020 6576 6572 7920 7461 6720  e.    every tag 
-00013e70: 6d75 7374 2062 6520 6d61 7463 6865 642e  must be matched.
-00013e80: 0a0a 2020 2020 5c62 0a20 2020 205c 7831  ..    \b.    \x1
-00013e90: 625b 316d 5350 4143 455c 7831 625b 306d  b[1mSPACE\x1b[0m
-00013ea0: 2020 746f 2070 6175 7365 2f70 6c61 790a    to pause/play.
-00013eb0: 2020 2020 5c78 3162 5b31 6d62 5c78 3162      \x1b[1mb\x1b
-00013ec0: 5b30 6d20 2074 6f20 676f 205b 625d 6163  [0m  to go [b]ac
-00013ed0: 6b20 746f 2070 7265 7669 6f75 7320 736f  k to previous so
-00013ee0: 6e67 0a20 2020 205c 7831 625b 316d 725c  ng.    \x1b[1mr\
-00013ef0: 7831 625b 306d 2020 746f 205b 725d 6570  x1b[0m  to [r]ep
-00013f00: 6c61 7920 736f 6e67 0a20 2020 205c 7831  lay song.    \x1
-00013f10: 625b 316d 6e5c 7831 625b 306d 2020 746f  b[1mn\x1b[0m  to
-00013f20: 2073 6b69 7020 746f 205b 6e5d 6578 7420   skip to [n]ext 
-00013f30: 736f 6e67 0a20 2020 205c 7831 625b 316d  song.    \x1b[1m
-00013f40: 6c5c 7831 625b 306d 2020 746f 205b 6c5d  l\x1b[0m  to [l]
-00013f50: 6f6f 7020 7468 6520 6375 7272 656e 7420  oop the current 
-00013f60: 736f 6e67 206f 6e63 6520 2827 6c27 2069  song once ('l' i
-00013f70: 6e20 7374 6174 7573 2062 6172 292e 2070  n status bar). p
-00013f80: 7265 7373 2061 6761 696e 2074 6f20 6c6f  ress again to lo
-00013f90: 6f70 2069 6e66 696e 6974 656c 7920 2827  op infinitely ('
-00013fa0: 4c27 2069 6e20 7374 6174 7573 2062 6172  L' in status bar
-00013fb0: 292e 2070 7265 7373 206f 6e63 6520 6167  ). press once ag
-00013fc0: 6169 6e20 746f 2074 7572 6e20 6f66 6620  ain to turn off 
-00013fd0: 6c6f 6f70 696e 670a 2020 2020 5c78 3162  looping.    \x1b
-00013fe0: 5b31 6d63 5c78 3162 5b30 6d20 2074 6f20  [1mc\x1b[0m  to 
-00013ff0: 746f 6767 6c65 205b 635d 6c69 7020 6d6f  toggle [c]lip mo
-00014000: 6465 0a20 2020 205c 7831 625b 316d 765c  de.    \x1b[1mv\
-00014010: 7831 625b 306d 2020 746f 2074 6f67 676c  x1b[0m  to toggl
-00014020: 6520 5b76 5d69 7375 616c 697a 6174 696f  e [v]isualizatio
-00014030: 6e0a 2020 2020 5c78 3162 5b31 6d4c 4546  n.    \x1b[1mLEF
-00014040: 545c 7831 625b 306d 2020 746f 2072 6577  T\x1b[0m  to rew
-00014050: 696e 6420 3573 0a20 2020 205c 7831 625b  ind 5s.    \x1b[
-00014060: 316d 5249 4748 545c 7831 625b 306d 2020  1mRIGHT\x1b[0m  
-00014070: 746f 2066 6173 7420 666f 7277 6172 6420  to fast forward 
-00014080: 3573 0a20 2020 205c 7831 625b 316d 5b5c  5s.    \x1b[1m[\
-00014090: 7831 625b 306d 2020 746f 2064 6563 7265  x1b[0m  to decre
-000140a0: 6173 6520 766f 6c75 6d65 0a20 2020 205c  ase volume.    \
-000140b0: 7831 625b 316d 5d5c 7831 625b 306d 2020  x1b[1m]\x1b[0m  
-000140c0: 746f 2069 6e63 7265 6173 6520 766f 6c75  to increase volu
-000140d0: 6d65 0a20 2020 205c 7831 625b 316d 6d5c  me.    \x1b[1mm\
-000140e0: 7831 625b 306d 2020 746f 205b 6d5d 7574  x1b[0m  to [m]ut
-000140f0: 652f 756e 6d75 7465 0a20 2020 205c 7831  e/unmute.    \x1
-00014100: 625b 316d 655c 7831 625b 306d 2020 746f  b[1me\x1b[0m  to
-00014110: 205b 655d 6e64 2074 6865 2073 6f6e 6720   [e]nd the song 
-00014120: 706c 6179 6572 2061 6674 6572 2074 6865  player after the
-00014130: 2063 7572 7265 6e74 2073 6f6e 6720 6669   current song fi
-00014140: 6e69 7368 6573 2028 696e 6469 6361 746f  nishes (indicato
-00014150: 7220 696e 2073 7461 7475 7320 6261 722c  r in status bar,
-00014160: 2027 6527 2074 6f20 6361 6e63 656c 290a   'e' to cancel).
-00014170: 2020 2020 5c78 3162 5b31 6d71 5c78 3162      \x1b[1mq\x1b
-00014180: 5b30 6d20 2074 6f20 5b71 5d75 6974 2074  [0m  to [q]uit t
-00014190: 6865 2073 6f6e 6720 706c 6179 6572 2069  he song player i
-000141a0: 6d6d 6564 6961 7465 6c79 0a20 2020 205c  mmediately.    \
-000141b0: 7831 625b 316d 5550 2f44 4f57 4e5c 7831  x1b[1mUP/DOWN\x1
-000141c0: 625b 306d 2020 746f 2073 6372 6f6c 6c20  b[0m  to scroll 
-000141d0: 7468 726f 7567 6820 7468 6520 706c 6179  through the play
-000141e0: 6c69 7374 2028 6d6f 7573 6520 7363 726f  list (mouse scro
-000141f0: 6c6c 696e 6720 7368 6f75 6c64 2061 6c73  lling should als
-00014200: 6f20 776f 726b 290a 2020 2020 5c78 3162  o work).    \x1b
-00014210: 5b31 6d70 5c78 3162 5b30 6d20 2074 6f20  [1mp\x1b[0m  to 
-00014220: 736e 615b 705d 2062 6163 6b20 746f 2074  sna[p] back to t
-00014230: 6865 2063 7572 7265 6e74 6c79 2070 6c61  he currently pla
-00014240: 7969 6e67 2073 6f6e 670a 2020 2020 5c78  ying song.    \x
-00014250: 3162 5b31 6d67 5c78 3162 5b30 6d20 2074  1b[1mg\x1b[0m  t
-00014260: 6f20 676f 2074 6f20 7468 6520 6e65 7874  o go to the next
-00014270: 2070 615b 675d 652f 6c6f 6f70 206f 6620   pa[g]e/loop of 
-00014280: 7468 6520 706c 6179 6c69 7374 2028 6967  the playlist (ig
-00014290: 6e6f 7265 6420 6966 206e 6f74 2072 6570  nored if not rep
-000142a0: 6561 7469 6e67 2070 6c61 796c 6973 7429  eating playlist)
-000142b0: 0a20 2020 205c 7831 625b 316d 4241 434b  .    \x1b[1mBACK
-000142c0: 5350 4143 452f 4445 4c45 5445 5c78 3162  SPACE/DELETE\x1b
-000142d0: 5b30 6d20 2064 656c 6574 6520 7468 6520  [0m  delete the 
-000142e0: 7365 6c65 6374 6564 2028 6e6f 7420 6e65  selected (not ne
-000142f0: 6365 7373 6172 696c 7920 6375 7272 656e  cessarily curren
-00014300: 746c 7920 706c 6179 696e 6721 2920 736f  tly playing!) so
-00014310: 6e67 2066 726f 6d20 7468 6520 7175 6575  ng from the queu
-00014320: 650a 2020 2020 5c78 3162 5b31 6d64 5c78  e.    \x1b[1md\x
-00014330: 3162 5b30 6d20 2074 6f20 746f 6767 6c65  1b[0m  to toggle
-00014340: 205b 445d 6973 636f 7264 2072 6963 6820   [D]iscord rich 
-00014350: 7072 6573 656e 6365 0a20 2020 205c 7831  presence.    \x1
-00014360: 625b 316d 615c 7831 625b 306d 2020 746f  b[1ma\x1b[0m  to
-00014370: 2061 6464 2061 2073 6f6e 6720 2862 7920   add a song (by 
-00014380: 4944 2920 746f 2074 6865 2065 6e64 206f  ID) to the end o
-00014390: 6620 7468 6520 706c 6179 6c69 7374 2e20  f the playlist. 
-000143a0: 4f70 656e 7320 6120 7072 6f6d 7074 2074  Opens a prompt t
-000143b0: 6f20 656e 7465 7220 7468 6520 4944 3a20  o enter the ID: 
-000143c0: 454e 5445 5220 746f 2063 6f6e 6669 726d  ENTER to confirm
-000143d0: 2c20 4553 4320 746f 2063 616e 6365 6c2e  , ESC to cancel.
-000143e0: 0a20 2020 205c 7831 625b 316d 695c 7831  .    \x1b[1mi\x1
-000143f0: 625b 306d 2020 746f 2069 6e73 6572 7420  b[0m  to insert 
-00014400: 6120 736f 6e67 2028 6279 2049 4429 2069  a song (by ID) i
-00014410: 6e20 7468 6520 706c 6179 6c69 7374 2061  n the playlist a
-00014420: 6674 6572 2074 6865 2073 656c 6563 7465  fter the selecte
-00014430: 6420 736f 6e67 2e20 4f70 656e 7320 6120  d song. Opens a 
-00014440: 7072 6f6d 7074 206c 696b 6520 2761 272e  prompt like 'a'.
-00014450: 0a20 2020 205c 7831 625b 316d 745c 7831  .    \x1b[1mt\x1
-00014460: 625b 306d 2020 746f 2061 6464 2061 2074  b[0m  to add a t
-00014470: 6167 2074 6f20 616c 6c20 736f 6e67 7320  ag to all songs 
-00014480: 696e 2074 6865 2070 6c61 796c 6973 742e  in the playlist.
-00014490: 204f 7065 6e73 2061 2070 726f 6d70 7420   Opens a prompt 
-000144a0: 746f 2065 6e74 6572 2074 6865 2074 6167  to enter the tag
-000144b0: 3a20 454e 5445 5220 746f 2063 6f6e 6669  : ENTER to confi
-000144c0: 726d 2c20 4553 4320 746f 2063 616e 6365  rm, ESC to cance
-000144d0: 6c2e 0a0a 2020 2020 5c62 0a20 2020 2073  l...    \b.    s
-000144e0: 6f6e 6720 636f 6c6f 7220 696e 6469 6361  ong color indica
-000144f0: 7465 7320 6d6f 6465 3a0a 2020 2020 2020  tes mode:.      
-00014500: 2020 5c78 3162 5b31 3b33 346d 626c 7565    \x1b[1;34mblue
-00014510: 5c78 3162 5b30 6d20 2020 2020 6e6f 726d  \x1b[0m     norm
-00014520: 616c 0a20 2020 2020 2020 205c 7831 625b  al.        \x1b[
-00014530: 313b 3333 6d79 656c 6c6f 775c 7831 625b  1;33myellow\x1b[
-00014540: 306d 2020 206c 6f6f 7069 6e67 2063 7572  0m   looping cur
-00014550: 7265 6e74 2073 6f6e 6720 286f 6e63 6520  rent song (once 
-00014560: 6f72 2072 6570 6561 7465 646c 7929 0a0a  or repeatedly)..
-00014570: 2020 2020 5c62 0a20 2020 2070 726f 6772      \b.    progr
-00014580: 6573 7320 6261 7220 636f 6c6f 7220 696e  ess bar color in
-00014590: 6469 6361 7465 7320 7374 6174 7573 3a0a  dicates status:.
-000145a0: 2020 2020 2020 2020 5c78 3162 5b31 3b33          \x1b[1;3
-000145b0: 336d 7965 6c6c 6f77 5c78 3162 5b30 6d20  3myellow\x1b[0m 
-000145c0: 2020 6e6f 726d 616c 2028 6f72 2063 7572    normal (or cur
-000145d0: 7265 6e74 2073 6f6e 6720 646f 6573 6e27  rent song doesn'
-000145e0: 7420 6861 7665 2061 2063 6c69 7029 0a20  t have a clip). 
-000145f0: 2020 2020 2020 205c 7831 625b 313b 3335         \x1b[1;35
-00014600: 6d6d 6167 656e 7461 5c78 3162 5b30 6d20  mmagenta\x1b[0m 
-00014610: 2070 6c61 7969 6e67 2063 6c69 700a 0a20   playing clip.. 
-00014620: 2020 2046 6f72 2074 6865 2063 6f6c 6f72     For the color
-00014630: 2076 6973 696f 6e20 6465 6669 6369 656e   vision deficien
-00014640: 742c 2062 6f74 6820 6d6f 6465 7320 616c  t, both modes al
-00014650: 736f 2068 6176 6520 696e 6469 6361 746f  so have indicato
-00014660: 7273 2069 6e20 7468 6520 7374 6174 7573  rs in the status
-00014670: 2062 6172 2e0a 2020 2020 2222 220a 2020   bar..    """.  
-00014680: 2020 706c 6179 6c69 7374 203d 205b 5d0a    playlist = [].
-00014690: 2020 2020 736f 6e67 735f 6e6f 745f 666f      songs_not_fo
-000146a0: 756e 6420 3d20 5b5d 0a0a 2020 2020 6966  und = []..    if
-000146b0: 206f 6e6c 793a 0a20 2020 2020 2020 206f   only:.        o
-000146c0: 6e6c 7920 3d20 7365 7428 6f6e 6c79 290a  nly = set(only).
-000146d0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-000146e0: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f49  n(config.SONGS_I
-000146f0: 4e46 4f5f 5041 5448 2c20 2272 222c 2065  NFO_PATH, "r", e
-00014700: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
-00014710: 2061 7320 736f 6e67 735f 6669 6c65 3a0a   as songs_file:.
-00014720: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00014730: 6c69 6e65 2069 6e20 736f 6e67 735f 6669  line in songs_fi
-00014740: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
-00014750: 2020 2020 6465 7461 696c 7320 3d20 6c69      details = li
-00014760: 6e65 2e73 7472 6970 2829 2e73 706c 6974  ne.strip().split
-00014770: 2822 7c22 290a 2020 2020 2020 2020 2020  ("|").          
-00014780: 2020 2020 2020 736f 6e67 5f69 6420 3d20        song_id = 
-00014790: 696e 7428 6465 7461 696c 735b 305d 290a  int(details[0]).
-000147a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000147b0: 6966 206e 6f74 206f 732e 7061 7468 2e65  if not os.path.e
-000147c0: 7869 7374 7328 6f73 2e70 6174 682e 6a6f  xists(os.path.jo
-000147d0: 696e 2863 6f6e 6669 672e 534f 4e47 535f  in(config.SONGS_
-000147e0: 4449 522c 2064 6574 6169 6c73 5b31 5d29  DIR, details[1])
-000147f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00014800: 2020 2020 2020 2073 6f6e 6773 5f6e 6f74         songs_not
-00014810: 5f66 6f75 6e64 2e61 7070 656e 6428 6465  _found.append(de
-00014820: 7461 696c 7329 0a20 2020 2020 2020 2020  tails).         
-00014830: 2020 2020 2020 2065 6c69 6620 736f 6e67         elif song
-00014840: 5f69 6420 696e 206f 6e6c 793a 0a20 2020  _id in only:.   
-00014850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014860: 2070 6c61 796c 6973 742e 6170 7065 6e64   playlist.append
-00014870: 2864 6574 6169 6c73 290a 0a20 2020 2020  (details)..     
-00014880: 2020 2069 6620 6e6f 7420 706c 6179 6c69     if not playli
-00014890: 7374 3a0a 2020 2020 2020 2020 2020 2020  st:.            
-000148a0: 636c 6963 6b2e 7365 6368 6f28 224e 6f20  click.secho("No 
-000148b0: 736f 6e67 7320 666f 756e 6420 7769 7468  songs found with
-000148c0: 2074 6865 2067 6976 656e 2049 4473 2e22   the given IDs."
-000148d0: 2c20 6667 3d22 7265 6422 290a 2020 2020  , fg="red").    
-000148e0: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
-000148f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00014900: 2069 6620 6e6f 7420 7461 6773 3a0a 2020   if not tags:.  
-00014910: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-00014920: 7065 6e28 636f 6e66 6967 2e53 4f4e 4753  pen(config.SONGS
-00014930: 5f49 4e46 4f5f 5041 5448 2c20 2272 222c  _INFO_PATH, "r",
-00014940: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-00014950: 2229 2061 7320 736f 6e67 735f 6669 6c65  ") as songs_file
-00014960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00014970: 2020 666f 7220 6c69 6e65 2069 6e20 736f    for line in so
-00014980: 6e67 735f 6669 6c65 3a0a 2020 2020 2020  ngs_file:.      
-00014990: 2020 2020 2020 2020 2020 2020 2020 6465                de
-000149a0: 7461 696c 7320 3d20 6c69 6e65 2e73 7472  tails = line.str
-000149b0: 6970 2829 2e73 706c 6974 2822 7c22 290a  ip().split("|").
-000149c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000149d0: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
-000149e0: 7468 2e65 7869 7374 7328 6f73 2e70 6174  th.exists(os.pat
-000149f0: 682e 6a6f 696e 2863 6f6e 6669 672e 534f  h.join(config.SO
-00014a00: 4e47 535f 4449 522c 2064 6574 6169 6c73  NGS_DIR, details
-00014a10: 5b31 5d29 293a 0a20 2020 2020 2020 2020  [1])):.         
-00014a20: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00014a30: 6f6e 6773 5f6e 6f74 5f66 6f75 6e64 2e61  ongs_not_found.a
-00014a40: 7070 656e 6428 6465 7461 696c 7329 0a20  ppend(details). 
-00014a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00014a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a80: 2070 6c61 796c 6973 742e 6170 7065 6e64   playlist.append
-00014a90: 2864 6574 6169 6c73 290a 2020 2020 2020  (details).      
-00014aa0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00014ab0: 2020 2020 7461 6773 203d 2073 6574 2874      tags = set(t
-00014ac0: 6167 7329 0a20 2020 2020 2020 2020 2020  ags).           
-00014ad0: 2077 6974 6820 6f70 656e 2863 6f6e 6669   with open(confi
-00014ae0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
-00014af0: 482c 2022 7222 2c20 656e 636f 6469 6e67  H, "r", encoding
-00014b00: 3d22 7574 662d 3822 2920 6173 2073 6f6e  ="utf-8") as son
-00014b10: 6773 5f66 696c 653a 0a20 2020 2020 2020  gs_file:.       
-00014b20: 2020 2020 2020 2020 2066 6f72 206c 696e           for lin
-00014b30: 6520 696e 2073 6f6e 6773 5f66 696c 653a  e in songs_file:
-00014b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014b50: 2020 2020 2064 6574 6169 6c73 203d 206c       details = l
-00014b60: 696e 652e 7374 7269 7028 292e 7370 6c69  ine.strip().spli
-00014b70: 7428 227c 2229 0a20 2020 2020 2020 2020  t("|").         
-00014b80: 2020 2020 2020 2020 2020 2073 6f6e 675f             song_
-00014b90: 7461 6773 203d 2073 6574 2864 6574 6169  tags = set(detai
-00014ba0: 6c73 5b32 5d2e 7370 6c69 7428 222c 2229  ls[2].split(",")
-00014bb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014bc0: 2020 2020 2020 6966 206e 6f74 206f 732e        if not os.
-00014bd0: 7061 7468 2e65 7869 7374 7328 6f73 2e70  path.exists(os.p
-00014be0: 6174 682e 6a6f 696e 2863 6f6e 6669 672e  ath.join(config.
-00014bf0: 534f 4e47 535f 4449 522c 2064 6574 6169  SONGS_DIR, detai
-00014c00: 6c73 5b31 5d29 293a 0a20 2020 2020 2020  ls[1])):.       
-00014c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c20: 2073 6f6e 6773 5f6e 6f74 5f66 6f75 6e64   songs_not_found
-00014c30: 2e61 7070 656e 6428 6465 7461 696c 7329  .append(details)
-00014c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014c50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00014c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c70: 2020 2069 6620 6e6f 7420 6d61 7463 685f     if not match_
-00014c80: 616c 6c3a 0a20 2020 2020 2020 2020 2020  all:.           
-00014c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ca0: 2069 6620 7461 6773 2026 2073 6f6e 675f   if tags & song_
-00014cb0: 7461 6773 3a20 2023 2069 6e74 6572 7365  tags:  # interse
-00014cc0: 6374 696f 6e0a 2020 2020 2020 2020 2020  ction.          
-00014cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ce0: 2020 2020 2020 706c 6179 6c69 7374 2e61        playlist.a
-00014cf0: 7070 656e 6428 6465 7461 696c 7329 0a20  ppend(details). 
-00014d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00014d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d30: 2020 2020 2020 2020 2069 6620 7461 6773           if tags
-00014d40: 203c 3d20 736f 6e67 5f74 6167 733a 2020   <= song_tags:  
-00014d50: 2320 7375 6273 6574 0a20 2020 2020 2020  # subset.       
-00014d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d70: 2020 2020 2020 2020 2070 6c61 796c 6973           playlis
-00014d80: 742e 6170 7065 6e64 2864 6574 6169 6c73  t.append(details
-00014d90: 290a 0a20 2020 2066 6f72 2064 6574 6169  )..    for detai
-00014da0: 6c73 2069 6e20 706c 6179 6c69 7374 3a0a  ls in playlist:.
-00014db0: 2020 2020 2020 2020 736f 6e67 5f64 6174          song_dat
-00014dc0: 6120 3d20 6d75 7369 635f 7461 672e 6c6f  a = music_tag.lo
-00014dd0: 6164 5f66 696c 6528 6f73 2e70 6174 682e  ad_file(os.path.
-00014de0: 6a6f 696e 2863 6f6e 6669 672e 534f 4e47  join(config.SONG
-00014df0: 535f 4449 522c 2064 6574 6169 6c73 5b31  S_DIR, details[1
-00014e00: 5d29 290a 2020 2020 2020 2020 6465 7461  ])).        deta
-00014e10: 696c 7320 2b3d 205b 0a20 2020 2020 2020  ils += [.       
-00014e20: 2020 2020 2028 736f 6e67 5f64 6174 615b       (song_data[
-00014e30: 2261 7274 6973 7422 5d2e 7661 6c75 6520  "artist"].value 
-00014e40: 6f72 2022 556e 6b6e 6f77 6e20 4172 7469  or "Unknown Arti
-00014e50: 7374 2229 2c0a 2020 2020 2020 2020 2020  st"),.          
-00014e60: 2020 2873 6f6e 675f 6461 7461 5b22 616c    (song_data["al
-00014e70: 6275 6d22 5d2e 7661 6c75 6520 6f72 2022  bum"].value or "
-00014e80: 556e 6b6e 6f77 6e20 416c 6275 6d22 292c  Unknown Album"),
-00014e90: 0a20 2020 2020 2020 2020 2020 2028 736f  .            (so
-00014ea0: 6e67 5f64 6174 615b 2261 6c62 756d 6172  ng_data["albumar
-00014eb0: 7469 7374 225d 2e76 616c 7565 206f 7220  tist"].value or 
-00014ec0: 2255 6e6b 6e6f 776e 2041 6c62 756d 2041  "Unknown Album A
-00014ed0: 7274 6973 7422 292c 0a20 2020 2020 2020  rtist"),.       
-00014ee0: 205d 0a0a 2020 2020 6966 2073 6875 6666   ]..    if shuff
-00014ef0: 6c65 5f20 3d3d 2030 3a0a 2020 2020 2020  le_ == 0:.      
-00014f00: 2020 7368 7566 666c 655f 203d 2054 7275    shuffle_ = Tru
-00014f10: 650a 2020 2020 2020 2020 7265 7368 7566  e.        reshuf
-00014f20: 666c 6520 3d20 4661 6c73 650a 2020 2020  fle = False.    
-00014f30: 656c 6966 2073 6875 6666 6c65 5f20 3d3d  elif shuffle_ ==
-00014f40: 2031 3a0a 2020 2020 2020 2020 7368 7566   1:.        shuf
-00014f50: 666c 655f 203d 2054 7275 650a 2020 2020  fle_ = True.    
-00014f60: 2020 2020 7265 7368 7566 666c 6520 3d20      reshuffle = 
-00014f70: 5472 7565 0a20 2020 2065 6c69 6620 7368  True.    elif sh
-00014f80: 7566 666c 655f 203d 3d20 323a 0a20 2020  uffle_ == 2:.   
-00014f90: 2020 2020 2073 6875 6666 6c65 5f20 3d20       shuffle_ = 
-00014fa0: 4661 6c73 650a 2020 2020 2020 2020 7265  False.        re
-00014fb0: 7368 7566 666c 6520 3d20 5472 7565 0a20  shuffle = True. 
-00014fc0: 2020 2065 6c73 653a 2020 2320 7368 7566     else:  # shuf
-00014fd0: 666c 655f 203d 204e 6f6e 650a 2020 2020  fle_ = None.    
-00014fe0: 2020 2020 7368 7566 666c 655f 203d 2046      shuffle_ = F
-00014ff0: 616c 7365 0a20 2020 2020 2020 2072 6573  alse.        res
-00015000: 6875 6666 6c65 203d 2046 616c 7365 0a0a  huffle = False..
-00015010: 2020 2020 6966 2073 6875 6666 6c65 5f3a      if shuffle_:
-00015020: 0a20 2020 2020 2020 2073 6875 6666 6c65  .        shuffle
-00015030: 2870 6c61 796c 6973 7429 0a20 2020 2065  (playlist).    e
-00015040: 6c69 6620 7265 7665 7273 653a 0a20 2020  lif reverse:.   
-00015050: 2020 2020 2070 6c61 796c 6973 742e 7265       playlist.re
-00015060: 7665 7273 6528 290a 0a20 2020 2069 6620  verse()..    if 
-00015070: 6e6f 7420 706c 6179 6c69 7374 3a0a 2020  not playlist:.  
-00015080: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
-00015090: 6f28 224e 6f20 736f 6e67 7320 666f 756e  o("No songs foun
-000150a0: 6420 6d61 7463 6869 6e67 2074 6167 2063  d matching tag c
-000150b0: 7269 7465 7269 612e 222c 2066 673d 2272  riteria.", fg="r
-000150c0: 6564 2229 0a20 2020 2065 6c73 653a 0a20  ed").    else:. 
-000150d0: 2020 2020 2020 2076 6f6c 756d 6520 2f3d         volume /=
-000150e0: 2031 3030 0a20 2020 2020 2020 2063 7572   100.        cur
-000150f0: 7365 732e 7772 6170 7065 7228 0a20 2020  ses.wrapper(.   
-00015100: 2020 2020 2020 2020 205f 706c 6179 2c0a           _play,.
-00015110: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00015120: 6c69 7374 2c0a 2020 2020 2020 2020 2020  list,.          
-00015130: 2020 766f 6c75 6d65 2c0a 2020 2020 2020    volume,.      
-00015140: 2020 2020 2020 6c6f 6f70 2c0a 2020 2020        loop,.    
-00015150: 2020 2020 2020 2020 636c 6970 732c 0a20          clips,. 
-00015160: 2020 2020 2020 2020 2020 2072 6573 6875             reshu
-00015170: 6666 6c65 2c0a 2020 2020 2020 2020 2020  ffle,.          
-00015180: 2020 6469 7363 6f72 6420 616e 6420 6361    discord and ca
-00015190: 6e5f 7570 6461 7465 5f64 6973 636f 7264  n_update_discord
-000151a0: 2c0a 2020 2020 2020 2020 2020 2020 7669  ,.            vi
-000151b0: 7375 616c 697a 652c 0a20 2020 2020 2020  sualize,.       
-000151c0: 2029 0a0a 2020 2020 6966 2073 6f6e 6773   )..    if songs
-000151d0: 5f6e 6f74 5f66 6f75 6e64 3a0a 2020 2020  _not_found:.    
-000151e0: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
-000151f0: 2253 6f6e 6720 6669 6c65 7320 6e6f 7420  "Song files not 
-00015200: 666f 756e 643a 222c 2066 673d 2272 6564  found:", fg="red
-00015210: 2229 0a20 2020 2020 2020 2066 6f72 2064  ").        for d
-00015220: 6574 6169 6c73 2069 6e20 736f 6e67 735f  etails in songs_
-00015230: 6e6f 745f 666f 756e 643a 0a20 2020 2020  not_found:.     
-00015240: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
-00015250: 686f 2866 225c 747b 6465 7461 696c 735b  ho(f"\t{details[
-00015260: 315d 7d20 2849 4420 7b64 6574 6169 6c73  1]} (ID {details
-00015270: 5b30 5d7d 2922 2c20 6667 3d22 7265 6422  [0]})", fg="red"
-00015280: 290a 0a0a 4063 6c69 2e63 6f6d 6d61 6e64  )...@cli.command
-00015290: 2829 0a40 636c 6963 6b2e 6f70 7469 6f6e  ().@click.option
-000152a0: 280a 2020 2020 222d 542f 2d6e 5422 2c0a  (.    "-T/-nT",.
-000152b0: 2020 2020 222d 2d74 6167 2f2d 2d6e 6f2d      "--tag/--no-
-000152c0: 7461 6722 2c0a 2020 2020 2272 656e 616d  tag",.    "renam
-000152d0: 696e 675f 7461 6722 2c0a 2020 2020 6465  ing_tag",.    de
-000152e0: 6661 756c 743d 4661 6c73 652c 0a20 2020  fault=False,.   
-000152f0: 2068 656c 703d 2249 6620 7061 7373 6564   help="If passed
-00015300: 2c20 7265 6e61 6d65 2074 6167 2069 6e73  , rename tag ins
-00015310: 7465 6164 206f 6620 736f 6e67 2028 7472  tead of song (tr
-00015320: 6561 7420 7468 6520 6172 6775 6d65 6e74  eat the argument
-00015330: 7320 6173 2074 6167 7329 2e22 2c0a 290a  s as tags).",.).
-00015340: 4063 6c69 636b 2e61 7267 756d 656e 7428  @click.argument(
-00015350: 226f 7269 6769 6e61 6c22 290a 4063 6c69  "original").@cli
-00015360: 636b 2e61 7267 756d 656e 7428 226e 6577  ck.argument("new
-00015370: 5f6e 616d 6522 290a 6465 6620 7265 6e61  _name").def rena
-00015380: 6d65 286f 7269 6769 6e61 6c2c 206e 6577  me(original, new
-00015390: 5f6e 616d 652c 2072 656e 616d 696e 675f  _name, renaming_
-000153a0: 7461 6729 3a0a 2020 2020 2222 220a 2020  tag):.    """.  
-000153b0: 2020 5265 6e61 6d65 2061 2073 6f6e 672e    Rename a song.
-000153c0: 0a0a 2020 2020 5265 6e61 6d65 7320 7468  ..    Renames th
-000153d0: 6520 736f 6e67 2077 6974 6820 7468 6520  e song with the 
-000153e0: 4944 204f 5249 4749 4e41 4c20 746f 204e  ID ORIGINAL to N
-000153f0: 4557 5f4e 414d 452e 2054 6865 2065 7874  EW_NAME. The ext
-00015400: 656e 7369 6f6e 206f 6620 7468 650a 2020  ension of the.  
-00015410: 2020 736f 6e67 2028 652e 672e 2027 2e77    song (e.g. '.w
-00015420: 6176 272c 2027 2e6d 7033 2729 2069 7320  av', '.mp3') is 
-00015430: 7072 6573 6572 7665 64e2 8094 646f 206e  preserved...do n
-00015440: 6f74 2069 6e63 6c75 6465 2069 7420 696e  ot include it in
-00015450: 2074 6865 206e 616d 652e 0a0a 2020 2020   the name...    
-00015460: 4966 2074 6865 2027 2d54 2f2d 2d74 6167  If the '-T/--tag
-00015470: 2720 666c 6167 2069 7320 7061 7373 6564  ' flag is passed
-00015480: 2c20 7472 6561 7473 204f 5249 4749 4e41  , treats ORIGINA
-00015490: 4c20 6173 2061 2074 6167 2c20 7265 6e61  L as a tag, rena
-000154a0: 6d69 6e67 2061 6c6c 0a20 2020 206f 6375  ming all.    ocu
-000154b0: 7272 656e 6365 7320 6f66 2069 7420 746f  rrences of it to
-000154c0: 204e 4557 5f4e 414d 45e2 8094 646f 6573   NEW_NAME...does
-000154d0: 6e27 7420 6368 6563 6b20 6966 2074 6865  n't check if the
-000154e0: 2074 6167 204e 4557 5f4e 414d 4520 616c   tag NEW_NAME al
-000154f0: 7265 6164 792c 0a20 2020 2065 7869 7374  ready,.    exist
-00015500: 732c 2073 6f20 6265 2063 6172 6566 756c  s, so be careful
-00015510: 210a 2020 2020 2222 220a 2020 2020 736f  !.    """.    so
-00015520: 6e67 735f 6669 6c65 203d 206f 7065 6e28  ngs_file = open(
-00015530: 636f 6e66 6967 2e53 4f4e 4753 5f49 4e46  config.SONGS_INF
-00015540: 4f5f 5041 5448 2c20 2272 222c 2065 6e63  O_PATH, "r", enc
-00015550: 6f64 696e 673d 2275 7466 2d38 2229 0a20  oding="utf-8"). 
-00015560: 2020 206c 696e 6573 203d 2073 6f6e 6773     lines = songs
-00015570: 5f66 696c 652e 7265 6164 2829 2e73 706c  _file.read().spl
-00015580: 6974 6c69 6e65 7328 290a 2020 2020 6966  itlines().    if
-00015590: 206e 6f74 2072 656e 616d 696e 675f 7461   not renaming_ta
-000155a0: 673a 0a20 2020 2020 2020 2069 6620 6e6f  g:.        if no
-000155b0: 7420 6f72 6967 696e 616c 2e69 736e 756d  t original.isnum
-000155c0: 6572 6963 2829 3a0a 2020 2020 2020 2020  eric():.        
-000155d0: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
-000155e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000155f0: 2022 536f 6e67 2049 4420 6d75 7374 2062   "Song ID must b
-00015600: 6520 616e 2069 6e74 6567 6572 2e20 546f  e an integer. To
-00015610: 2072 656e 616d 6520 6120 7461 672c 2070   rename a tag, p
-00015620: 6173 7320 7468 6520 272d 542f 2d2d 7461  ass the '-T/--ta
-00015630: 6727 2066 6c61 672e 222c 0a20 2020 2020  g' flag.",.     
-00015640: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
-00015650: 6564 222c 0a20 2020 2020 2020 2020 2020  ed",.           
-00015660: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
-00015670: 6574 7572 6e0a 0a20 2020 2020 2020 2066  eturn..        f
-00015680: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-00015690: 6e28 6c69 6e65 7329 293a 0a20 2020 2020  n(lines)):.     
-000156a0: 2020 2020 2020 2064 6574 6169 6c73 203d         details =
-000156b0: 206c 696e 6573 5b69 5d2e 7374 7269 7028   lines[i].strip(
-000156c0: 292e 7370 6c69 7428 227c 2229 0a20 2020  ).split("|").   
-000156d0: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
-000156e0: 6174 682e 7370 6c69 7465 7874 2864 6574  ath.splitext(det
-000156f0: 6169 6c73 5b31 5d29 5b30 5d20 3d3d 206e  ails[1])[0] == n
-00015700: 6577 5f6e 616d 653a 0a20 2020 2020 2020  ew_name:.       
-00015710: 2020 2020 2020 2020 2063 6c69 636b 2e73           click.s
-00015720: 6563 686f 280a 2020 2020 2020 2020 2020  echo(.          
-00015730: 2020 2020 2020 2020 2020 6622 4120 736f            f"A so
-00015740: 6e67 2077 6974 6820 7468 6520 6e61 6d65  ng with the name
-00015750: 2027 7b6e 6577 5f6e 616d 657d 2720 616c   '{new_name}' al
-00015760: 7265 6164 7920 6578 6973 7473 2e20 506c  ready exists. Pl
-00015770: 6561 7365 2063 686f 6f73 6520 616e 6f74  ease choose anot
-00015780: 6865 7220 6e61 6d65 2e22 2c0a 2020 2020  her name.",.    
-00015790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157a0: 6667 3d22 7265 6422 2c0a 2020 2020 2020  fg="red",.      
-000157b0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-000157c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000157d0: 726e 0a0a 2020 2020 2020 2020 6f72 6967  rn..        orig
-000157e0: 696e 616c 203d 2069 6e74 286f 7269 6769  inal = int(origi
-000157f0: 6e61 6c29 0a20 2020 2020 2020 2066 6f72  nal).        for
-00015800: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
-00015810: 6c69 6e65 7329 293a 0a20 2020 2020 2020  lines)):.       
-00015820: 2020 2020 2064 6574 6169 6c73 203d 206c       details = l
-00015830: 696e 6573 5b69 5d2e 7374 7269 7028 292e  ines[i].strip().
-00015840: 7370 6c69 7428 227c 2229 0a20 2020 2020  split("|").     
-00015850: 2020 2020 2020 2069 6620 696e 7428 6465         if int(de
-00015860: 7461 696c 735b 305d 2920 3d3d 206f 7269  tails[0]) == ori
-00015870: 6769 6e61 6c3a 0a20 2020 2020 2020 2020  ginal:.         
-00015880: 2020 2020 2020 206f 6c64 5f70 6174 6820         old_path 
-00015890: 3d20 6465 7461 696c 735b 315d 0a20 2020  = details[1].   
-000158a0: 2020 2020 2020 2020 2020 2020 2064 6574               det
-000158b0: 6169 6c73 5b31 5d20 3d20 6e65 775f 6e61  ails[1] = new_na
-000158c0: 6d65 202b 206f 732e 7061 7468 2e73 706c  me + os.path.spl
-000158d0: 6974 6578 7428 6f6c 645f 7061 7468 295b  itext(old_path)[
-000158e0: 315d 0a0a 2020 2020 2020 2020 2020 2020  1]..            
-000158f0: 2020 2020 6c69 6e65 735b 695d 203d 2022      lines[i] = "
-00015900: 7c22 2e6a 6f69 6e28 6465 7461 696c 7329  |".join(details)
-00015910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015920: 2073 6f6e 6773 5f66 696c 652e 636c 6f73   songs_file.clos
-00015930: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
-00015940: 2020 2020 736f 6e67 735f 6669 6c65 203d      songs_file =
-00015950: 206f 7065 6e28 636f 6e66 6967 2e53 4f4e   open(config.SON
-00015960: 4753 5f49 4e46 4f5f 5041 5448 2c20 2277  GS_INFO_PATH, "w
-00015970: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
-00015980: 2d38 2229 0a20 2020 2020 2020 2020 2020  -8").           
-00015990: 2020 2020 2073 6f6e 6773 5f66 696c 652e       songs_file.
-000159a0: 7772 6974 6528 225c 6e22 2e6a 6f69 6e28  write("\n".join(
-000159b0: 6c69 6e65 7329 290a 0a20 2020 2020 2020  lines))..       
-000159c0: 2020 2020 2020 2020 206f 732e 7265 6e61           os.rena
-000159d0: 6d65 280a 2020 2020 2020 2020 2020 2020  me(.            
-000159e0: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
-000159f0: 6a6f 696e 2863 6f6e 6669 672e 534f 4e47  join(config.SONG
-00015a00: 535f 4449 522c 206f 6c64 5f70 6174 6829  S_DIR, old_path)
-00015a10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00015a20: 2020 2020 2020 6f73 2e70 6174 682e 6a6f        os.path.jo
-00015a30: 696e 2863 6f6e 6669 672e 534f 4e47 535f  in(config.SONGS_
-00015a40: 4449 522c 2064 6574 6169 6c73 5b31 5d29  DIR, details[1])
-00015a50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00015a60: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-00015a70: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-00015a80: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00015a90: 2020 2020 2020 6622 5265 6e61 6d65 6420        f"Renamed 
-00015aa0: 736f 6e67 2027 7b6f 6c64 5f70 6174 687d  song '{old_path}
-00015ab0: 2720 7769 7468 2049 4420 7b6f 7269 6769  ' with ID {origi
-00015ac0: 6e61 6c7d 2074 6f20 277b 6465 7461 696c  nal} to '{detail
-00015ad0: 735b 315d 7d27 2e22 2c0a 2020 2020 2020  s[1]}'.",.      
-00015ae0: 2020 2020 2020 2020 2020 2020 2020 6667                fg
-00015af0: 3d22 6772 6565 6e22 2c0a 2020 2020 2020  ="green",.      
-00015b00: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-00015b10: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-00015b20: 616b 0a20 2020 2020 2020 2065 6c73 653a  ak.        else:
-00015b30: 0a20 2020 2020 2020 2020 2020 2063 6c69  .            cli
-00015b40: 636b 2e73 6563 686f 2866 2253 6f6e 6720  ck.secho(f"Song 
-00015b50: 7769 7468 2049 4420 7b6f 7269 6769 6e61  with ID {origina
-00015b60: 6c7d 206e 6f74 2066 6f75 6e64 2e22 2c20  l} not found.", 
-00015b70: 6667 3d22 7265 6422 290a 2020 2020 2020  fg="red").      
-00015b80: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
-00015b90: 2e63 6c6f 7365 2829 0a20 2020 2065 6c73  .close().    els
-00015ba0: 653a 0a20 2020 2020 2020 2066 6f72 2069  e:.        for i
-00015bb0: 2069 6e20 7261 6e67 6528 6c65 6e28 6c69   in range(len(li
-00015bc0: 6e65 7329 293a 0a20 2020 2020 2020 2020  nes)):.         
-00015bd0: 2020 2064 6574 6169 6c73 203d 206c 696e     details = lin
-00015be0: 6573 5b69 5d2e 7374 7269 7028 292e 7370  es[i].strip().sp
-00015bf0: 6c69 7428 227c 2229 0a20 2020 2020 2020  lit("|").       
-00015c00: 2020 2020 2074 6167 7320 3d20 6465 7461       tags = deta
-00015c10: 696c 735b 325d 2e73 706c 6974 2822 2c22  ils[2].split(","
-00015c20: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
-00015c30: 7220 7420 696e 2072 616e 6765 286c 656e  r t in range(len
-00015c40: 2874 6167 7329 293a 0a20 2020 2020 2020  (tags)):.       
-00015c50: 2020 2020 2020 2020 2069 6620 7461 6773           if tags
-00015c60: 5b74 5d20 3d3d 206f 7269 6769 6e61 6c3a  [t] == original:
-00015c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015c80: 2020 2020 2074 6167 735b 745d 203d 206e       tags[t] = n
-00015c90: 6577 5f6e 616d 650a 2020 2020 2020 2020  ew_name.        
-00015ca0: 2020 2020 2020 2020 2020 2020 6465 7461              deta
-00015cb0: 696c 735b 325d 203d 2022 2c22 2e6a 6f69  ils[2] = ",".joi
-00015cc0: 6e28 7461 6773 290a 0a20 2020 2020 2020  n(tags)..       
-00015cd0: 2020 2020 2020 2020 2020 2020 206c 696e               lin
-00015ce0: 6573 5b69 5d20 3d20 227c 222e 6a6f 696e  es[i] = "|".join
-00015cf0: 2864 6574 6169 6c73 290a 2020 2020 2020  (details).      
-00015d00: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00015d10: 6561 6b0a 0a20 2020 2020 2020 2073 6f6e  eak..        son
-00015d20: 6773 5f66 696c 652e 636c 6f73 6528 290a  gs_file.close().
-00015d30: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
-00015d40: 6c65 203d 206f 7065 6e28 636f 6e66 6967  le = open(config
-00015d50: 2e53 4f4e 4753 5f49 4e46 4f5f 5041 5448  .SONGS_INFO_PATH
-00015d60: 2c20 2277 222c 2065 6e63 6f64 696e 673d  , "w", encoding=
-00015d70: 2275 7466 2d38 2229 0a20 2020 2020 2020  "utf-8").       
-00015d80: 2073 6f6e 6773 5f66 696c 652e 7772 6974   songs_file.writ
-00015d90: 6528 225c 6e22 2e6a 6f69 6e28 6c69 6e65  e("\n".join(line
-00015da0: 7329 290a 0a20 2020 2020 2020 2063 6c69  s))..        cli
-00015db0: 636b 2e73 6563 686f 280a 2020 2020 2020  ck.secho(.      
-00015dc0: 2020 2020 2020 6622 5265 706c 6163 6564        f"Replaced
-00015dd0: 2061 6c6c 206f 6375 7272 656e 6365 7320   all ocurrences 
-00015de0: 6f66 2074 6167 2027 7b6f 7269 6769 6e61  of tag '{origina
-00015df0: 6c7d 2720 746f 2027 7b6e 6577 5f6e 616d  l}' to '{new_nam
-00015e00: 657d 272e 222c 0a20 2020 2020 2020 2020  e}'.",.         
-00015e10: 2020 2066 673d 2267 7265 656e 222c 0a20     fg="green",. 
-00015e20: 2020 2020 2020 2029 0a0a 0a40 636c 692e         )...@cli.
-00015e30: 636f 6d6d 616e 6428 290a 4063 6c69 636b  command().@click
-00015e40: 2e61 7267 756d 656e 7428 2270 6872 6173  .argument("phras
-00015e50: 6522 290a 4063 6c69 636b 2e6f 7074 696f  e").@click.optio
-00015e60: 6e28 0a20 2020 2022 2d54 2f2d 6e54 222c  n(.    "-T/-nT",
-00015e70: 0a20 2020 2022 2d2d 7461 672f 2d2d 6e6f  .    "--tag/--no
-00015e80: 2d74 6167 222c 0a20 2020 2022 7365 6172  -tag",.    "sear
-00015e90: 6368 696e 675f 666f 725f 7461 6773 222c  ching_for_tags",
-00015ea0: 0a20 2020 2064 6566 6175 6c74 3d46 616c  .    default=Fal
-00015eb0: 7365 2c0a 2020 2020 6865 6c70 3d22 5365  se,.    help="Se
-00015ec0: 6172 6368 6573 2066 6f72 206d 6174 6368  arches for match
-00015ed0: 696e 6720 7461 6773 2069 6e73 7465 6164  ing tags instead
-00015ee0: 206f 6620 736f 6e67 206e 616d 6573 2e22   of song names."
-00015ef0: 2c0a 290a 6465 6620 7365 6172 6368 2870  ,.).def search(p
-00015f00: 6872 6173 652c 2073 6561 7263 6869 6e67  hrase, searching
-00015f10: 5f66 6f72 5f74 6167 7329 3a0a 2020 2020  _for_tags):.    
-00015f20: 2222 2253 6561 7263 6865 7320 666f 7220  """Searches for 
-00015f30: 736f 6e67 7320 7468 6174 2063 6f6e 7461  songs that conta
-00015f40: 696e 2050 4852 4153 452e 2041 6c6c 2073  in PHRASE. All s
-00015f50: 6f6e 6773 2073 7461 7274 696e 6720 7769  ongs starting wi
-00015f60: 7468 2050 4852 4153 450a 2020 2020 7769  th PHRASE.    wi
-00015f70: 6c6c 2061 7070 6561 7220 6265 666f 7265  ll appear before
-00015f80: 2073 6f6e 6773 2063 6f6e 7461 696e 696e   songs containin
-00015f90: 6720 6275 7420 6e6f 7420 7374 6172 7469  g but not starti
-00015fa0: 6e67 2077 6974 6820 5048 5241 5345 2e20  ng with PHRASE. 
-00015fb0: 5468 6973 0a20 2020 2073 6561 7263 6820  This.    search 
-00015fc0: 6973 2063 6173 652d 696e 7365 6e73 6974  is case-insensit
-00015fd0: 6976 652e 0a0a 2020 2020 4966 2074 6865  ive...    If the
-00015fe0: 2027 2d54 2720 666c 6167 2069 7320 7061   '-T' flag is pa
-00015ff0: 7373 6564 2c20 7365 6172 6368 6573 2066  ssed, searches f
-00016000: 6f72 2074 6167 7320 696e 7374 6561 6420  or tags instead 
-00016010: 6f66 2073 6f6e 6720 6e61 6d65 732e 2222  of song names.""
-00016020: 220a 2020 2020 7068 7261 7365 203d 2070  ".    phrase = p
-00016030: 6872 6173 652e 6c6f 7765 7228 290a 2020  hrase.lower().  
-00016040: 2020 7769 7468 206f 7065 6e28 636f 6e66    with open(conf
-00016050: 6967 2e53 4f4e 4753 5f49 4e46 4f5f 5041  ig.SONGS_INFO_PA
-00016060: 5448 2c20 2272 222c 2065 6e63 6f64 696e  TH, "r", encodin
-00016070: 673d 2275 7466 2d38 2229 2061 7320 736f  g="utf-8") as so
-00016080: 6e67 735f 6669 6c65 3a0a 2020 2020 2020  ngs_file:.      
-00016090: 2020 6966 206e 6f74 2073 6561 7263 6869    if not searchi
-000160a0: 6e67 5f66 6f72 5f74 6167 733a 0a20 2020  ng_for_tags:.   
-000160b0: 2020 2020 2020 2020 2072 6573 756c 7473           results
-000160c0: 203d 205b 5d2c 205b 5d20 2023 2073 7461   = [], []  # sta
-000160d0: 7274 732c 2063 6f6e 7461 696e 7320 6275  rts, contains bu
-000160e0: 7420 646f 6573 206e 6f74 2073 7461 7274  t does not start
-000160f0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00016100: 206c 696e 6520 696e 2073 6f6e 6773 5f66   line in songs_f
-00016110: 696c 653a 0a20 2020 2020 2020 2020 2020  ile:.           
-00016120: 2020 2020 2073 6f6e 675f 6964 2c20 736f       song_id, so
-00016130: 6e67 5f6e 616d 652c 2074 6167 732c 202a  ng_name, tags, *
-00016140: 5f20 3d20 6c69 6e65 2e73 7472 6970 2829  _ = line.strip()
-00016150: 2e73 706c 6974 2822 7c22 290a 2020 2020  .split("|").    
-00016160: 2020 2020 2020 2020 2020 2020 736f 6e67              song
-00016170: 5f69 6420 3d20 696e 7428 736f 6e67 5f69  _id = int(song_i
-00016180: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-00016190: 2020 2073 6f6e 675f 6e61 6d65 203d 2073     song_name = s
-000161a0: 6f6e 675f 6e61 6d65 2e6c 6f77 6572 2829  ong_name.lower()
-000161b0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000161c0: 2020 6966 2073 6f6e 675f 6e61 6d65 2e73    if song_name.s
-000161d0: 7461 7274 7377 6974 6828 7068 7261 7365  tartswith(phrase
-000161e0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000161f0: 2020 2020 2020 2072 6573 756c 7473 5b30         results[0
-00016200: 5d2e 6170 7065 6e64 2873 6f6e 675f 6964  ].append(song_id
-00016210: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00016220: 2020 656c 6966 2070 6872 6173 6520 696e    elif phrase in
-00016230: 2073 6f6e 675f 6e61 6d65 3a0a 2020 2020   song_name:.    
-00016240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016250: 7265 7375 6c74 735b 315d 2e61 7070 656e  results[1].appen
-00016260: 6428 736f 6e67 5f69 6429 0a0a 2020 2020  d(song_id)..    
-00016270: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
-00016280: 6e79 2872 6573 756c 7473 293a 0a20 2020  ny(results):.   
-00016290: 2020 2020 2020 2020 2020 2020 2063 6c69               cli
-000162a0: 636b 2e73 6563 686f 2822 4e6f 2072 6573  ck.secho("No res
-000162b0: 756c 7473 2066 6f75 6e64 2e22 2c20 6667  ults found.", fg
-000162c0: 3d22 7265 6422 290a 2020 2020 2020 2020  ="red").        
-000162d0: 2020 2020 2020 2020 7265 7475 726e 0a0a          return..
-000162e0: 2020 2020 2020 2020 2020 2020 736f 6e67              song
-000162f0: 735f 6669 6c65 2e73 6565 6b28 3029 0a20  s_file.seek(0). 
-00016300: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
-00016310: 696e 6520 696e 2073 6f6e 6773 5f66 696c  ine in songs_fil
-00016320: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00016330: 2020 2064 6574 6169 6c73 203d 206c 696e     details = lin
-00016340: 652e 7374 7269 7028 292e 7370 6c69 7428  e.strip().split(
-00016350: 227c 2229 0a20 2020 2020 2020 2020 2020  "|").           
-00016360: 2020 2020 2069 6620 696e 7428 6465 7461       if int(deta
-00016370: 696c 735b 305d 2920 696e 2072 6573 756c  ils[0]) in resul
-00016380: 7473 5b30 5d3a 0a20 2020 2020 2020 2020  ts[0]:.         
-00016390: 2020 2020 2020 2020 2020 2068 656c 7065             helpe
-000163a0: 7273 2e70 7269 6e74 5f65 6e74 7279 2864  rs.print_entry(d
-000163b0: 6574 6169 6c73 2c20 7068 7261 7365 290a  etails, phrase).
-000163c0: 0a20 2020 2020 2020 2020 2020 2073 6f6e  .            son
-000163d0: 6773 5f66 696c 652e 7365 656b 2830 290a  gs_file.seek(0).
-000163e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-000163f0: 6c69 6e65 2069 6e20 736f 6e67 735f 6669  line in songs_fi
-00016400: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
-00016410: 2020 2020 6465 7461 696c 7320 3d20 6c69      details = li
-00016420: 6e65 2e73 7472 6970 2829 2e73 706c 6974  ne.strip().split
-00016430: 2822 7c22 290a 2020 2020 2020 2020 2020  ("|").          
-00016440: 2020 2020 2020 6966 2069 6e74 2864 6574        if int(det
-00016450: 6169 6c73 5b30 5d29 2069 6e20 7265 7375  ails[0]) in resu
-00016460: 6c74 735b 315d 3a0a 2020 2020 2020 2020  lts[1]:.        
-00016470: 2020 2020 2020 2020 2020 2020 6865 6c70              help
-00016480: 6572 732e 7072 696e 745f 656e 7472 7928  ers.print_entry(
-00016490: 6465 7461 696c 732c 2070 6872 6173 6529  details, phrase)
-000164a0: 0a0a 2020 2020 2020 2020 2020 2020 636c  ..            cl
-000164b0: 6963 6b2e 7365 6368 6f28 0a20 2020 2020  ick.secho(.     
-000164c0: 2020 2020 2020 2020 2020 2066 2246 6f75             f"Fou
-000164d0: 6e64 207b 6c65 6e28 7265 7375 6c74 735b  nd {len(results[
-000164e0: 305d 2920 2b20 6c65 6e28 7265 7375 6c74  0]) + len(result
-000164f0: 735b 315d 297d 2073 6f6e 6728 7329 2e22  s[1])} song(s)."
-00016500: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00016510: 2020 6667 3d22 6772 6565 6e22 2c0a 2020    fg="green",.  
-00016520: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00016530: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00016540: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
-00016550: 7365 7428 292c 2073 6574 2829 2020 2320  set(), set()  # 
-00016560: 7374 6172 7473 2c20 636f 6e74 6169 6e73  starts, contains
-00016570: 2062 7574 2064 6f65 7320 6e6f 7420 7374   but does not st
-00016580: 6172 740a 2020 2020 2020 2020 2020 2020  art.            
-00016590: 666f 7220 6c69 6e65 2069 6e20 736f 6e67  for line in song
-000165a0: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
-000165b0: 2020 2020 2020 2020 736f 6e67 5f69 642c          song_id,
-000165c0: 2073 6f6e 675f 6e61 6d65 2c20 7461 6773   song_name, tags
-000165d0: 2c20 2a5f 203d 206c 696e 652e 7374 7269  , *_ = line.stri
-000165e0: 7028 292e 7370 6c69 7428 227c 2229 0a20  p().split("|"). 
-000165f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00016600: 6620 7461 6773 3a0a 2020 2020 2020 2020  f tags:.        
-00016610: 2020 2020 2020 2020 2020 2020 7461 6773              tags
-00016620: 203d 2074 6167 732e 7370 6c69 7428 222c   = tags.split(",
-00016630: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
-00016640: 2020 2020 2020 2020 666f 7220 7461 6720          for tag 
-00016650: 696e 2074 6167 733a 0a20 2020 2020 2020  in tags:.       
-00016660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016670: 2074 6167 5f6c 6f77 6572 203d 2074 6167   tag_lower = tag
-00016680: 2e6c 6f77 6572 2829 0a20 2020 2020 2020  .lower().       
-00016690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166a0: 2069 6620 7461 675f 6c6f 7765 722e 7374   if tag_lower.st
-000166b0: 6172 7473 7769 7468 2870 6872 6173 6529  artswith(phrase)
-000166c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000166d0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000166e0: 7375 6c74 735b 305d 2e61 6464 2874 6167  sults[0].add(tag
-000166f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00016700: 2020 2020 2020 2020 2020 656c 6966 2070            elif p
-00016710: 6872 6173 6520 696e 2074 6167 5f6c 6f77  hrase in tag_low
-00016720: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00016730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016740: 7265 7375 6c74 735b 315d 2e61 6464 2874  results[1].add(t
-00016750: 6167 290a 0a20 2020 2020 2020 2020 2020  ag)..           
-00016760: 2069 6620 6e6f 7420 616e 7928 7265 7375   if not any(resu
-00016770: 6c74 7329 3a0a 2020 2020 2020 2020 2020  lts):.          
-00016780: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
-00016790: 6f28 224e 6f20 7265 7375 6c74 7320 666f  o("No results fo
-000167a0: 756e 642e 222c 2066 673d 2272 6564 2229  und.", fg="red")
-000167b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000167c0: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
-000167d0: 2020 2020 2066 6f72 2074 6167 2069 6e20       for tag in 
-000167e0: 7265 7375 6c74 735b 305d 3a0a 2020 2020  results[0]:.    
-000167f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00016800: 7428 7461 6729 0a0a 2020 2020 2020 2020  t(tag)..        
-00016810: 2020 2020 666f 7220 7461 6720 696e 2072      for tag in r
-00016820: 6573 756c 7473 5b31 5d3a 0a20 2020 2020  esults[1]:.     
-00016830: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00016840: 2874 6167 290a 0a20 2020 2020 2020 2020  (tag)..         
-00016850: 2020 2063 6c69 636b 2e73 6563 686f 280a     click.secho(.
-00016860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016870: 6622 466f 756e 6420 7b6c 656e 2872 6573  f"Found {len(res
-00016880: 756c 7473 5b30 5d29 202b 206c 656e 2872  ults[0]) + len(r
-00016890: 6573 756c 7473 5b31 5d29 7d20 7461 6728  esults[1])} tag(
-000168a0: 7329 2e22 2c20 6667 3d22 6772 6565 6e22  s).", fg="green"
-000168b0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-000168c0: 0a40 636c 692e 636f 6d6d 616e 6428 6e61  .@cli.command(na
-000168d0: 6d65 3d22 6c69 7374 2229 0a40 636c 6963  me="list").@clic
-000168e0: 6b2e 6172 6775 6d65 6e74 2822 7365 6172  k.argument("sear
-000168f0: 6368 5f74 6167 7322 2c20 6d65 7461 7661  ch_tags", metava
-00016900: 723d 2254 4147 5322 2c20 6e61 7267 733d  r="TAGS", nargs=
-00016910: 2d31 290a 4063 6c69 636b 2e6f 7074 696f  -1).@click.optio
-00016920: 6e28 0a20 2020 2022 2d73 222c 0a20 2020  n(.    "-s",.   
-00016930: 2022 2d2d 736f 7274 222c 0a20 2020 2022   "--sort",.    "
-00016940: 736f 7274 5f22 2c0a 2020 2020 7479 7065  sort_",.    type
-00016950: 3d63 6c69 636b 2e43 686f 6963 6528 0a20  =click.Choice(. 
-00016960: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
-00016970: 2020 2020 2022 6e6f 6e65 222c 0a20 2020       "none",.   
-00016980: 2020 2020 2020 2020 2022 6e61 6d65 222c           "name",
-00016990: 0a20 2020 2020 2020 2020 2020 2022 6e22  .            "n"
-000169a0: 2c0a 2020 2020 2020 2020 2020 2020 2273  ,.            "s
-000169b0: 6563 732d 6c69 7374 656e 6564 222c 0a20  ecs-listened",. 
-000169c0: 2020 2020 2020 2020 2020 2022 7322 2c0a             "s",.
-000169d0: 2020 2020 2020 2020 2020 2020 2264 7572              "dur
-000169e0: 6174 696f 6e22 2c0a 2020 2020 2020 2020  ation",.        
-000169f0: 2020 2020 2264 222c 0a20 2020 2020 2020      "d",.       
-00016a00: 2020 2020 2022 7469 6d65 732d 6c69 7374       "times-list
-00016a10: 656e 6564 222c 0a20 2020 2020 2020 2020  ened",.         
-00016a20: 2020 2022 7422 2c0a 2020 2020 2020 2020     "t",.        
-00016a30: 290a 2020 2020 292c 0a20 2020 2068 656c  ).    ),.    hel
-00016a40: 703d 2253 6f72 7420 6279 206e 616d 652c  p="Sort by name,
-00016a50: 2073 6563 6f6e 6473 206c 6973 7465 6e65   seconds listene
-00016a60: 642c 206f 7220 7469 6d65 7320 6c69 7374  d, or times list
-00016a70: 656e 6564 2028 7365 636f 6e64 732f 736f  ened (seconds/so
-00016a80: 6e67 2064 7572 6174 696f 6e29 2e20 4772  ng duration). Gr
-00016a90: 6561 7465 7374 2066 6972 7374 2e22 2c0a  eatest first.",.
-00016aa0: 2020 2020 6465 6661 756c 743d 226e 6f6e      default="non
-00016ab0: 6522 2c0a 2020 2020 7368 6f77 5f64 6566  e",.    show_def
-00016ac0: 6175 6c74 3d54 7275 652c 0a29 0a40 636c  ault=True,.).@cl
-00016ad0: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
-00016ae0: 222d 522f 2d6e 5222 2c0a 2020 2020 222d  "-R/-nR",.    "-
-00016af0: 2d72 6576 6572 7365 2f2d 2d6e 6f2d 7265  -reverse/--no-re
-00016b00: 7665 7273 6522 2c0a 2020 2020 2272 6576  verse",.    "rev
-00016b10: 6572 7365 5f22 2c0a 2020 2020 6465 6661  erse_",.    defa
-00016b20: 756c 743d 4661 6c73 652c 0a20 2020 2068  ult=False,.    h
-00016b30: 656c 703d 2252 6576 6572 7365 2074 6865  elp="Reverse the
-00016b40: 2073 6f72 7469 6e67 206f 7264 6572 2028   sorting order (
-00016b50: 6772 6561 7465 7374 2066 6972 7374 292e  greatest first).
-00016b60: 222c 0a29 0a40 636c 6963 6b2e 6f70 7469  ",.).@click.opti
-00016b70: 6f6e 280a 2020 2020 222d 542f 2d6e 5422  on(.    "-T/-nT"
-00016b80: 2c0a 2020 2020 222d 2d74 6167 2f2d 2d6e  ,.    "--tag/--n
-00016b90: 6f2d 7461 6722 2c0a 2020 2020 226c 6973  o-tag",.    "lis
-00016ba0: 7469 6e67 5f74 6167 7322 2c0a 2020 2020  ting_tags",.    
-00016bb0: 6465 6661 756c 743d 4661 6c73 652c 0a20  default=False,. 
-00016bc0: 2020 2068 656c 703d 224c 6973 7420 7461     help="List ta
-00016bd0: 6773 206d 6174 6368 696e 6720 5441 4753  gs matching TAGS
-00016be0: 2069 6e73 7465 6164 206f 6620 736f 6e67   instead of song
-00016bf0: 732e 222c 0a29 0a40 636c 6963 6b2e 6f70  s.",.).@click.op
-00016c00: 7469 6f6e 280a 2020 2020 222d 7922 2c0a  tion(.    "-y",.
-00016c10: 2020 2020 222d 2d79 6561 7222 2c0a 2020      "--year",.  
-00016c20: 2020 2279 6561 7222 2c0a 2020 2020 6865    "year",.    he
-00016c30: 6c70 3d22 5368 6f77 2074 696d 6520 6c69  lp="Show time li
-00016c40: 7374 656e 6564 2066 6f72 2061 2073 7065  stened for a spe
-00016c50: 6369 6669 6320 7965 6172 2c20 696e 7374  cific year, inst
-00016c60: 6561 6420 6f66 2074 6865 2074 6f74 616c  ead of the total
-00016c70: 2e20 5061 7373 696e 6720 2763 7572 2720  . Passing 'cur' 
-00016c80: 7769 6c6c 2073 686f 7720 7468 6520 7469  will show the ti
-00016c90: 6d65 206c 6973 7465 6e65 6420 666f 7220  me listened for 
-00016ca0: 7468 6520 6375 7272 656e 7420 7965 6172  the current year
-00016cb0: 2e22 2c0a 290a 4063 6c69 636b 2e6f 7074  .",.).@click.opt
-00016cc0: 696f 6e28 222d 7422 2c20 222d 2d74 6f70  ion("-t", "--top
-00016cd0: 222c 2022 746f 7022 2c20 7479 7065 3d69  ", "top", type=i
-00016ce0: 6e74 2c20 6865 6c70 3d22 5368 6f77 2074  nt, help="Show t
-00016cf0: 6865 2074 6f70 206e 2073 6f6e 6773 2f74  he top n songs/t
-00016d00: 6167 732e 2229 0a40 636c 6963 6b2e 6f70  ags.").@click.op
-00016d10: 7469 6f6e 280a 2020 2020 222d 4d2f 2d6e  tion(.    "-M/-n
-00016d20: 4d22 2c0a 2020 2020 222d 2d6d 6174 6368  M",.    "--match
-00016d30: 2d61 6c6c 2f2d 2d6e 6f2d 6d61 7463 682d  -all/--no-match-
-00016d40: 616c 6c22 2c0a 2020 2020 226d 6174 6368  all",.    "match
-00016d50: 5f61 6c6c 222c 0a20 2020 2064 6566 6175  _all",.    defau
-00016d60: 6c74 3d46 616c 7365 2c0a 2020 2020 6865  lt=False,.    he
-00016d70: 6c70 3d22 5368 6f77 7320 736f 6e67 7320  lp="Shows songs 
-00016d80: 7468 6174 206d 6174 6368 2061 6c6c 2074  that match all t
-00016d90: 6167 7320 696e 7374 6561 6420 6f66 2061  ags instead of a
-00016da0: 6e79 2074 6167 2e20 4967 6e6f 7265 6420  ny tag. Ignored 
-00016db0: 6966 2027 2d74 2f2d 2d74 6167 2720 6973  if '-t/--tag' is
-00016dc0: 2070 6173 7365 642e 222c 0a29 0a64 6566   passed.",.).def
-00016dd0: 206c 6973 745f 2873 6561 7263 685f 7461   list_(search_ta
-00016de0: 6773 2c20 6c69 7374 696e 675f 7461 6773  gs, listing_tags
-00016df0: 2c20 7965 6172 2c20 736f 7274 5f2c 2074  , year, sort_, t
-00016e00: 6f70 2c20 7265 7665 7273 655f 2c20 6d61  op, reverse_, ma
-00016e10: 7463 685f 616c 6c29 3a0a 2020 2020 2222  tch_all):.    ""
-00016e20: 224c 6973 7420 7468 6520 656e 7472 6965  "List the entrie
-00016e30: 7320 666f 7220 616c 6c20 736f 6e67 732e  s for all songs.
-00016e40: 0a0a 2020 2020 4f75 7470 7574 2066 6f72  ..    Output for
-00016e50: 6d61 743a 2049 442c 206e 616d 652c 2064  mat: ID, name, d
-00016e60: 7572 6174 696f 6e2c 206c 6973 7465 6e20  uration, listen 
-00016e70: 7469 6d65 2c20 7469 6d65 7320 6c69 7374  time, times list
-00016e80: 656e 6564 2c20 5b63 6c69 702d 7374 6172  ened, [clip-star
-00016e90: 742c 2063 6c69 702d 656e 645d 2069 6620  t, clip-end] if 
-00016ea0: 636c 6970 2065 7869 7374 732c 2063 6f6d  clip exists, com
-00016eb0: 6d61 2d73 6570 6172 6174 6564 2074 6167  ma-separated tag
-00016ec0: 7320 6966 2061 6e79 0a0a 2020 2020 4966  s if any..    If
-00016ed0: 2074 6865 2027 2d54 2720 666c 6167 2069   the '-T' flag i
-00016ee0: 7320 7061 7373 6564 2c20 7461 6773 2077  s passed, tags w
-00016ef0: 696c 6c20 6265 206c 6973 7465 6420 696e  ill be listed in
-00016f00: 7374 6561 6420 6f66 2073 6f6e 6773 2e0a  stead of songs..
-00016f10: 0a20 2020 204f 7574 7075 7420 666f 726d  .    Output form
-00016f20: 6174 3a20 7461 672c 2064 7572 6174 696f  at: tag, duratio
-00016f30: 6e2c 206c 6973 7465 6e20 7469 6d65 2c20  n, listen time, 
-00016f40: 7469 6d65 7320 6c69 7374 656e 6564 0a0a  times listened..
-00016f50: 2020 2020 4966 2054 4147 5320 6172 6520      If TAGS are 
-00016f60: 7061 7373 6564 2c20 616e 7920 7461 672f  passed, any tag/
-00016f70: 736f 6e67 206d 6174 6368 696e 6720 616e  song matching an
-00016f80: 7920 7461 6720 696e 2054 4147 5320 7769  y tag in TAGS wi
-00016f90: 6c6c 2062 6520 6c69 7374 6564 2c0a 2020  ll be listed,.  
-00016fa0: 2020 756e 6c65 7373 2074 6865 2027 2d4d    unless the '-M
-00016fb0: 2f2d 2d6d 6174 6368 2d61 6c6c 2720 666c  /--match-all' fl
-00016fc0: 6167 2069 7320 7061 7373 6564 2c20 696e  ag is passed, in
-00016fd0: 2077 6869 6368 2063 6173 6520 6576 6572   which case ever
-00016fe0: 7920 7461 6720 6d75 7374 0a20 2020 2062  y tag must.    b
-00016ff0: 6520 6d61 7463 6865 6420 2869 676e 6f72  e matched (ignor
-00017000: 6564 2069 6620 6c69 7374 696e 6720 7461  ed if listing ta
-00017010: 6773 292e 0a20 2020 2022 2222 0a20 2020  gs)..    """.   
-00017020: 2069 6620 746f 7020 6973 206e 6f74 204e   if top is not N
-00017030: 6f6e 653a 0a20 2020 2020 2020 2069 6620  one:.        if 
-00017040: 746f 7020 3c20 313a 0a20 2020 2020 2020  top < 1:.       
-00017050: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-00017060: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00017070: 2020 2254 6865 206f 7074 696f 6e20 272d    "The option '-
-00017080: 742f 2d2d 746f 7027 206d 7573 7420 6265  t/--top' must be
-00017090: 2061 2070 6f73 6974 6976 6520 6e75 6d62   a positive numb
-000170a0: 6572 2e22 2c20 6667 3d22 7265 6422 0a20  er.", fg="red". 
-000170b0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-000170c0: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-000170d0: 0a20 2020 2069 6620 7965 6172 2069 7320  .    if year is 
-000170e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7374  None:.        st
-000170f0: 6174 735f 7061 7468 203d 2063 6f6e 6669  ats_path = confi
-00017100: 672e 544f 5441 4c5f 5354 4154 535f 5041  g.TOTAL_STATS_PA
-00017110: 5448 0a20 2020 2065 6c73 653a 0a20 2020  TH.    else:.   
-00017120: 2020 2020 2069 6620 7965 6172 203d 3d20       if year == 
-00017130: 2263 7572 223a 0a20 2020 2020 2020 2020  "cur":.         
-00017140: 2020 2079 6561 7220 3d20 636f 6e66 6967     year = config
-00017150: 2e43 5552 5f59 4541 520a 2020 2020 2020  .CUR_YEAR.      
-00017160: 2020 2020 2020 7374 6174 735f 7061 7468        stats_path
-00017170: 203d 2063 6f6e 6669 672e 4355 525f 5945   = config.CUR_YE
-00017180: 4152 5f53 5441 5453 5f50 4154 480a 2020  AR_STATS_PATH.  
-00017190: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000171a0: 2020 2020 2020 2020 6966 206e 6f74 2079          if not y
-000171b0: 6561 722e 6973 6469 6769 7428 293a 0a20  ear.isdigit():. 
-000171c0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000171d0: 6c69 636b 2e73 6563 686f 2822 5965 6172  lick.secho("Year
-000171e0: 206d 7573 7420 6265 2061 206e 756d 6265   must be a numbe
-000171f0: 7220 6f72 2027 6375 7227 2e22 2c20 6667  r or 'cur'.", fg
-00017200: 3d22 7265 6422 290a 2020 2020 2020 2020  ="red").        
-00017210: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
-00017220: 2020 2020 2020 2020 2020 2073 7461 7473             stats
-00017230: 5f70 6174 6820 3d20 6f73 2e70 6174 682e  _path = os.path.
-00017240: 6a6f 696e 2863 6f6e 6669 672e 5354 4154  join(config.STAT
-00017250: 535f 4449 522c 2066 227b 7965 6172 7d2e  S_DIR, f"{year}.
-00017260: 7478 7422 290a 2020 2020 2020 2020 2020  txt").          
-00017270: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-00017280: 2e65 7869 7374 7328 7374 6174 735f 7061  .exists(stats_pa
-00017290: 7468 293a 0a20 2020 2020 2020 2020 2020  th):.           
-000172a0: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-000172b0: 2866 224e 6f20 7374 6174 7320 666f 756e  (f"No stats foun
-000172c0: 6420 666f 7220 7965 6172 207b 7965 6172  d for year {year
-000172d0: 7d2e 222c 2066 673d 2272 6564 2229 0a20  }.", fg="red"). 
-000172e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000172f0: 6574 7572 6e0a 0a20 2020 2069 6620 7365  eturn..    if se
-00017300: 6172 6368 5f74 6167 733a 0a20 2020 2020  arch_tags:.     
-00017310: 2020 2073 6561 7263 685f 7461 6773 203d     search_tags =
-00017320: 2073 6574 2873 6561 7263 685f 7461 6773   set(search_tags
-00017330: 290a 0a20 2020 206e 756d 5f6c 696e 6573  )..    num_lines
-00017340: 203d 2030 0a20 2020 2073 6f6e 6773 5f6e   = 0.    songs_n
-00017350: 6f74 5f66 6f75 6e64 203d 205b 5d0a 0a20  ot_found = [].. 
-00017360: 2020 2069 6620 6c69 7374 696e 675f 7461     if listing_ta
-00017370: 6773 3a0a 2020 2020 2020 2020 7769 7468  gs:.        with
-00017380: 2028 0a20 2020 2020 2020 2020 2020 206f   (.            o
-00017390: 7065 6e28 636f 6e66 6967 2e53 4f4e 4753  pen(config.SONGS
-000173a0: 5f49 4e46 4f5f 5041 5448 2c20 2272 222c  _INFO_PATH, "r",
-000173b0: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-000173c0: 2229 2061 7320 736f 6e67 735f 6669 6c65  ") as songs_file
-000173d0: 2c0a 2020 2020 2020 2020 2020 2020 6f70  ,.            op
-000173e0: 656e 2873 7461 7473 5f70 6174 682c 2022  en(stats_path, "
-000173f0: 7222 2c20 656e 636f 6469 6e67 3d22 7574  r", encoding="ut
-00017400: 662d 3822 2920 6173 2073 7461 7473 5f66  f-8") as stats_f
-00017410: 696c 652c 0a20 2020 2020 2020 2029 3a0a  ile,.        ):.
-00017420: 2020 2020 2020 2020 2020 2020 736f 6e67              song
-00017430: 735f 6c69 6e65 7320 3d20 736f 6e67 735f  s_lines = songs_
-00017440: 6669 6c65 2e72 6561 646c 696e 6573 2829  file.readlines()
-00017450: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
-00017460: 7473 203d 2064 6963 7428 0a20 2020 2020  ts = dict(.     
-00017470: 2020 2020 2020 2020 2020 206d 6170 280a             map(.
-00017480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017490: 2020 2020 6c61 6d62 6461 2074 3a20 2869      lambda t: (i
-000174a0: 6e74 2874 5b30 5d29 2c29 202b 2074 5b31  nt(t[0]),) + t[1
-000174b0: 3a5d 2c0a 2020 2020 2020 2020 2020 2020  :],.            
-000174c0: 2020 2020 2020 2020 6d61 7028 0a20 2020          map(.   
-000174d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000174e0: 2020 2020 206c 616d 6264 6120 783a 2074       lambda x: t
-000174f0: 7570 6c65 286d 6170 2866 6c6f 6174 2c20  uple(map(float, 
-00017500: 782e 7374 7269 7028 292e 7370 6c69 7428  x.strip().split(
-00017510: 227c 2229 2929 2c0a 2020 2020 2020 2020  "|"))),.        
-00017520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017530: 7374 6174 735f 6669 6c65 2e72 6561 646c  stats_file.readl
-00017540: 696e 6573 2829 2c0a 2020 2020 2020 2020  ines(),.        
-00017550: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-00017560: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00017570: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00017580: 2020 2020 2020 2020 2020 2020 7461 6773              tags
-00017590: 203d 2064 6566 6175 6c74 6469 6374 286c   = defaultdict(l
-000175a0: 616d 6264 613a 2028 302e 302c 2030 2e30  ambda: (0.0, 0.0
-000175b0: 2929 0a20 2020 2020 2020 2020 2020 2066  )).            f
-000175c0: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-000175d0: 6e28 736f 6e67 735f 6c69 6e65 7329 293a  n(songs_lines)):
-000175e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000175f0: 2073 6f6e 675f 6964 2c20 736f 6e67 5f6e   song_id, song_n
-00017600: 616d 652c 2074 6167 5f73 7472 696e 6720  ame, tag_string 
-00017610: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-00017620: 2020 2020 2020 2020 736f 6e67 735f 6c69          songs_li
-00017630: 6e65 735b 695d 2e73 7472 6970 2829 2e73  nes[i].strip().s
-00017640: 706c 6974 2822 7c22 295b 303a 335d 0a20  plit("|")[0:3]. 
-00017650: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00017660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017670: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
-00017680: 6578 6973 7473 286f 732e 7061 7468 2e6a  exists(os.path.j
-00017690: 6f69 6e28 636f 6e66 6967 2e53 4f4e 4753  oin(config.SONGS
-000176a0: 5f44 4952 2c20 736f 6e67 5f6e 616d 6529  _DIR, song_name)
-000176b0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000176c0: 2020 2020 2020 2073 6f6e 6773 5f6e 6f74         songs_not
-000176d0: 5f66 6f75 6e64 2e61 7070 656e 6428 2873  _found.append((s
-000176e0: 6f6e 675f 6964 2c20 736f 6e67 5f6e 616d  ong_id, song_nam
-000176f0: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
-00017700: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00017710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017720: 2073 6f6e 675f 6964 203d 2069 6e74 2873   song_id = int(s
-00017730: 6f6e 675f 6964 290a 2020 2020 2020 2020  ong_id).        
-00017740: 2020 2020 2020 2020 6966 2074 6167 5f73          if tag_s
-00017750: 7472 696e 673a 0a20 2020 2020 2020 2020  tring:.         
-00017760: 2020 2020 2020 2020 2020 2066 6f72 2074             for t
-00017770: 6167 2069 6e20 7461 675f 7374 7269 6e67  ag in tag_string
-00017780: 2e73 706c 6974 2822 2c22 293a 0a20 2020  .split(","):.   
-00017790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000177a0: 2020 2020 2069 6620 6e6f 7420 7365 6172       if not sear
-000177b0: 6368 5f74 6167 7320 6f72 2074 6167 2069  ch_tags or tag i
-000177c0: 6e20 7365 6172 6368 5f74 6167 733a 0a20  n search_tags:. 
-000177d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000177e0: 2020 2020 2020 2020 2020 2074 6167 735b             tags[
-000177f0: 7461 675d 203d 2028 0a20 2020 2020 2020  tag] = (.       
+00011b50: 2020 736f 6e67 5f70 6174 6820 3d20 6f73    song_path = os
+00011b60: 2e70 6174 682e 6a6f 696e 2863 6f6e 6669  .path.join(confi
+00011b70: 672e 534f 4e47 535f 4449 522c 2073 6f6e  g.SONGS_DIR, son
+00011b80: 675f 6e61 6d65 290a 2020 2020 2020 2020  g_name).        
+00011b90: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+00011ba0: 732e 7061 7468 2e65 7869 7374 7328 736f  s.path.exists(so
+00011bb0: 6e67 5f70 6174 6829 3a0a 2020 2020 2020  ng_path):.      
+00011bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011bd0: 2020 6f73 2e72 656d 6f76 6528 736f 6e67    os.remove(song
+00011be0: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
+00011bf0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00011c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011c10: 2020 2020 2020 2020 2063 6c69 636b 2e73           click.s
+00011c20: 6563 686f 280a 2020 2020 2020 2020 2020  echo(.          
+00011c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c40: 2020 6622 5761 726e 696e 673a 2053 6f6e    f"Warning: Son
+00011c50: 6720 6669 6c65 2027 7b73 6f6e 675f 6e61  g file '{song_na
+00011c60: 6d65 7d27 2028 4944 207b 736f 6e67 5f69  me}' (ID {song_i
+00011c70: 647d 2920 6e6f 7420 666f 756e 642e 2057  d}) not found. W
+00011c80: 6f75 6c64 2079 6f75 2073 7469 6c6c 206c  ould you still l
+00011c90: 696b 6520 746f 2064 656c 6574 6520 7468  ike to delete th
+00011ca0: 6520 736f 6e67 2066 726f 6d20 7468 6520  e song from the 
+00011cb0: 6461 7461 6261 7365 3f20 5b79 2f6e 5d20  database? [y/n] 
+00011cc0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00011cd0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00011ce0: 673d 2279 656c 6c6f 7722 2c0a 2020 2020  g="yellow",.    
+00011cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d00: 2020 2020 2020 2020 6e6c 3d46 616c 7365          nl=False
+00011d10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011d20: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00011d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d40: 2020 2020 6966 2069 6e70 7574 2829 2e6c      if input().l
+00011d50: 6f77 6572 2829 2021 3d20 2279 223a 0a20  ower() != "y":. 
+00011d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d70: 2020 2020 2020 2020 2020 2063 6c69 636b             click
+00011d80: 2e65 6368 6f28 0a20 2020 2020 2020 2020  .echo(.         
+00011d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011da0: 2020 2020 2020 2066 2253 6b69 7070 696e         f"Skippin
+00011db0: 6720 736f 6e67 2027 7b73 6f6e 675f 6e61  g song '{song_na
+00011dc0: 6d65 7d27 2028 4944 207b 736f 6e67 5f69  me}' (ID {song_i
+00011dd0: 647d 292e 220a 2020 2020 2020 2020 2020  d}).".          
+00011de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011df0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00011e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e10: 636f 6e74 696e 7565 0a0a 2020 2020 2020  continue..      
+00011e20: 2020 2020 2020 2020 2020 2020 2020 746f                to
+00011e30: 5f62 655f 6465 6c65 7465 642e 6170 7065  _be_deleted.appe
+00011e40: 6e64 2869 290a 0a20 2020 2020 2020 2020  nd(i)..         
+00011e50: 2020 2020 2020 2020 2020 2063 6c69 636b             click
+00011e60: 2e73 6563 686f 280a 2020 2020 2020 2020  .secho(.        
+00011e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e80: 6622 5265 6d6f 7665 6420 736f 6e67 2027  f"Removed song '
+00011e90: 7b73 6f6e 675f 6e61 6d65 7d27 2077 6974  {song_name}' wit
+00011ea0: 6820 4944 207b 736f 6e67 5f69 647d 2e22  h ID {song_id}."
+00011eb0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011ec0: 2020 2020 2020 2020 2020 6667 3d22 6772            fg="gr
+00011ed0: 6565 6e22 2c0a 2020 2020 2020 2020 2020  een",.          
+00011ee0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00011ef0: 2020 2020 2066 6f72 2069 2069 6e20 7265       for i in re
+00011f00: 7665 7273 6564 2874 6f5f 6265 5f64 656c  versed(to_be_del
+00011f10: 6574 6564 293a 0a20 2020 2020 2020 2020  eted):.         
+00011f20: 2020 2064 656c 206c 696e 6573 5b69 5d0a     del lines[i].
+00011f30: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+00011f40: 656e 2863 6f6e 6669 672e 534f 4e47 535f  en(config.SONGS_
+00011f50: 494e 464f 5f50 4154 482c 2022 7722 2c20  INFO_PATH, "w", 
+00011f60: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+00011f70: 2920 6173 2073 6f6e 6773 5f66 696c 653a  ) as songs_file:
+00011f80: 0a20 2020 2020 2020 2020 2020 2073 6f6e  .            son
+00011f90: 6773 5f66 696c 652e 7772 6974 6528 225c  gs_file.write("\
+00011fa0: 6e22 2e6a 6f69 6e28 6c69 6e65 7329 290a  n".join(lines)).
+00011fb0: 0a20 2020 2020 2020 2066 6f72 2073 7461  .        for sta
+00011fc0: 7473 5f66 696c 6520 696e 206f 732e 6c69  ts_file in os.li
+00011fd0: 7374 6469 7228 636f 6e66 6967 2e53 5441  stdir(config.STA
+00011fe0: 5453 5f44 4952 293a 0a20 2020 2020 2020  TS_DIR):.       
+00011ff0: 2020 2020 2069 6620 6e6f 7420 7374 6174       if not stat
+00012000: 735f 6669 6c65 2e65 6e64 7377 6974 6828  s_file.endswith(
+00012010: 222e 7478 7422 293a 0a20 2020 2020 2020  ".txt"):.       
+00012020: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00012030: 650a 0a20 2020 2020 2020 2020 2020 2073  e..            s
+00012040: 7461 7473 5f70 6174 6820 3d20 6f73 2e70  tats_path = os.p
+00012050: 6174 682e 6a6f 696e 2863 6f6e 6669 672e  ath.join(config.
+00012060: 5354 4154 535f 4449 522c 2073 7461 7473  STATS_DIR, stats
+00012070: 5f66 696c 6529 0a20 2020 2020 2020 2020  _file).         
+00012080: 2020 2077 6974 6820 6f70 656e 2873 7461     with open(sta
+00012090: 7473 5f70 6174 682c 2022 7222 2c20 656e  ts_path, "r", en
+000120a0: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
+000120b0: 6173 2073 7461 7473 5f66 696c 653a 0a20  as stats_file:. 
+000120c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000120d0: 7461 7473 5f6c 696e 6573 203d 2073 7461  tats_lines = sta
+000120e0: 7473 5f66 696c 652e 7265 6164 2829 2e73  ts_file.read().s
+000120f0: 706c 6974 6c69 6e65 7328 290a 0a20 2020  plitlines()..   
+00012100: 2020 2020 2020 2020 2020 2020 2074 6f5f               to_
+00012110: 6265 5f64 656c 6574 6564 203d 205b 5d0a  be_deleted = [].
+00012120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012130: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
+00012140: 656e 2873 7461 7473 5f6c 696e 6573 2929  en(stats_lines))
+00012150: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00012160: 2020 2020 2020 6465 7461 696c 7320 3d20        details = 
+00012170: 7374 6174 735f 6c69 6e65 735b 695d 2e73  stats_lines[i].s
+00012180: 7472 6970 2829 2e73 706c 6974 2822 7c22  trip().split("|"
+00012190: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000121a0: 2020 2020 2020 736f 6e67 5f69 6420 3d20        song_id = 
+000121b0: 696e 7428 6465 7461 696c 735b 305d 290a  int(details[0]).
+000121c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121d0: 2020 2020 6966 2073 6f6e 675f 6964 2069      if song_id i
+000121e0: 6e20 736f 6e67 5f69 6473 3a0a 2020 2020  n song_ids:.    
+000121f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012200: 2020 2020 746f 5f62 655f 6465 6c65 7465      to_be_delete
+00012210: 642e 6170 7065 6e64 2869 290a 0a20 2020  d.append(i)..   
+00012220: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00012230: 6e20 7265 7665 7273 6564 2874 6f5f 6265  n reversed(to_be
+00012240: 5f64 656c 6574 6564 293a 0a20 2020 2020  _deleted):.     
+00012250: 2020 2020 2020 2020 2020 2064 656c 2073             del s
+00012260: 7461 7473 5f6c 696e 6573 5b69 5d0a 0a20  tats_lines[i].. 
+00012270: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+00012280: 6f70 656e 2873 7461 7473 5f70 6174 682c  open(stats_path,
+00012290: 2022 7722 2c20 656e 636f 6469 6e67 3d22   "w", encoding="
+000122a0: 7574 662d 3822 2920 6173 2073 7461 7473  utf-8") as stats
+000122b0: 5f66 696c 653a 0a20 2020 2020 2020 2020  _file:.         
+000122c0: 2020 2020 2020 2073 7461 7473 5f66 696c         stats_fil
+000122d0: 652e 7772 6974 6528 225c 6e22 2e6a 6f69  e.write("\n".joi
+000122e0: 6e28 7374 6174 735f 6c69 6e65 7329 290a  n(stats_lines)).
+000122f0: 0a20 2020 2020 2020 2069 6620 7265 6d61  .        if rema
+00012300: 696e 696e 675f 736f 6e67 5f69 6473 3a0a  ining_song_ids:.
+00012310: 2020 2020 2020 2020 2020 2020 636c 6963              clic
+00012320: 6b2e 7365 6368 6f28 0a20 2020 2020 2020  k.secho(.       
+00012330: 2020 2020 2020 2020 2066 2243 6f75 6c64           f"Could
+00012340: 206e 6f74 2066 696e 6420 7468 6520 666f   not find the fo
+00012350: 6c6c 6f77 696e 6720 736f 6e67 2049 4473  llowing song IDs
+00012360: 3a20 7b27 2c20 272e 6a6f 696e 286d 6170  : {', '.join(map
+00012370: 2873 7472 2c20 7265 6d61 696e 696e 675f  (str, remaining_
+00012380: 736f 6e67 5f69 6473 2929 7d2e 222c 0a20  song_ids))}.",. 
+00012390: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000123a0: 673d 2272 6564 222c 0a20 2020 2020 2020  g="red",.       
+000123b0: 2020 2020 2029 0a20 2020 2065 6c73 653a       ).    else:
+000123c0: 0a20 2020 2020 2020 2074 6167 735f 746f  .        tags_to
+000123d0: 5f72 656d 6f76 6520 3d20 7365 7428 6172  _remove = set(ar
+000123e0: 6773 290a 2020 2020 2020 2020 6966 206e  gs).        if n
+000123f0: 6f74 2066 6f72 6365 3a0a 2020 2020 2020  ot force:.      
+00012400: 2020 2020 2020 6368 6172 203d 2069 6e70        char = inp
+00012410: 7574 280a 2020 2020 2020 2020 2020 2020  ut(.            
+00012420: 2020 2020 6622 4172 6520 796f 7520 7375      f"Are you su
+00012430: 7265 2079 6f75 2077 616e 7420 746f 2064  re you want to d
+00012440: 656c 6574 6520 7b6c 656e 2874 6167 735f  elete {len(tags_
+00012450: 746f 5f72 656d 6f76 6529 7d20 7461 6728  to_remove)} tag(
+00012460: 7329 3f20 5b79 2f6e 5d20 220a 2020 2020  s)? [y/n] ".    
+00012470: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00012480: 2020 2020 2020 2069 6620 6368 6172 2e6c         if char.l
+00012490: 6f77 6572 2829 2021 3d20 2279 223a 0a20  ower() != "y":. 
+000124a0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000124b0: 7269 6e74 2822 4469 6420 6e6f 7420 6465  rint("Did not de
+000124c0: 6c65 7465 2e22 290a 2020 2020 2020 2020  lete.").        
+000124d0: 2020 2020 2020 2020 7265 7475 726e 0a0a          return..
+000124e0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+000124f0: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f49  n(config.SONGS_I
+00012500: 4e46 4f5f 5041 5448 2c20 2272 222c 2065  NFO_PATH, "r", e
+00012510: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
+00012520: 2061 7320 736f 6e67 735f 6669 6c65 3a0a   as songs_file:.
+00012530: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+00012540: 7320 3d20 736f 6e67 735f 6669 6c65 2e72  s = songs_file.r
+00012550: 6561 6428 292e 7370 6c69 746c 696e 6573  ead().splitlines
+00012560: 2829 0a20 2020 2020 2020 2020 2020 2066  ().            f
+00012570: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
+00012580: 6e28 6c69 6e65 7329 293a 0a20 2020 2020  n(lines)):.     
+00012590: 2020 2020 2020 2020 2020 2064 6574 6169             detai
+000125a0: 6c73 203d 206c 696e 6573 5b69 5d2e 7374  ls = lines[i].st
+000125b0: 7269 7028 292e 7370 6c69 7428 227c 2229  rip().split("|")
+000125c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000125d0: 2074 6167 7320 3d20 6465 7461 696c 735b   tags = details[
+000125e0: 325d 2e73 706c 6974 2822 2c22 290a 2020  2].split(",").  
+000125f0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00012600: 7220 6a20 696e 2072 616e 6765 286c 656e  r j in range(len
+00012610: 2874 6167 7329 293a 0a20 2020 2020 2020  (tags)):.       
+00012620: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00012630: 7461 6773 5b6a 5d20 696e 2074 6167 735f  tags[j] in tags_
+00012640: 746f 5f72 656d 6f76 653a 0a20 2020 2020  to_remove:.     
+00012650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012660: 2020 2064 656c 2074 6167 735b 6a5d 0a20     del tags[j]. 
+00012670: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00012680: 6574 6169 6c73 5b32 5d20 3d20 222c 222e  etails[2] = ",".
+00012690: 6a6f 696e 2874 6167 7329 0a20 2020 2020  join(tags).     
+000126a0: 2020 2020 2020 2020 2020 206c 696e 6573             lines
+000126b0: 5b69 5d20 3d20 227c 222e 6a6f 696e 2864  [i] = "|".join(d
+000126c0: 6574 6169 6c73 290a 0a20 2020 2020 2020  etails)..       
+000126d0: 2077 6974 6820 6f70 656e 2863 6f6e 6669   with open(confi
+000126e0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+000126f0: 482c 2022 7722 2c20 656e 636f 6469 6e67  H, "w", encoding
+00012700: 3d22 7574 662d 3822 2920 6173 2073 6f6e  ="utf-8") as son
+00012710: 6773 5f66 696c 653a 0a20 2020 2020 2020  gs_file:.       
+00012720: 2020 2020 2073 6f6e 6773 5f66 696c 652e       songs_file.
+00012730: 7772 6974 6528 225c 6e22 2e6a 6f69 6e28  write("\n".join(
+00012740: 6c69 6e65 7329 290a 0a20 2020 2020 2020  lines))..       
+00012750: 2063 6c69 636b 2e73 6563 686f 280a 2020   click.secho(.  
+00012760: 2020 2020 2020 2020 2020 6622 4465 6c65            f"Dele
+00012770: 7465 6420 616c 6c20 6f63 6375 7272 656e  ted all occurren
+00012780: 6365 7320 6f66 207b 6c65 6e28 7461 6773  ces of {len(tags
+00012790: 5f74 6f5f 7265 6d6f 7665 297d 2074 6167  _to_remove)} tag
+000127a0: 2873 292e 222c 0a20 2020 2020 2020 2020  (s).",.         
+000127b0: 2020 2066 673d 2267 7265 656e 222c 0a20     fg="green",. 
+000127c0: 2020 2020 2020 2029 0a0a 0a40 636c 692e         )...@cli.
+000127d0: 636f 6d6d 616e 6428 6e61 6d65 3d22 7461  command(name="ta
+000127e0: 6722 290a 4063 6c69 636b 2e61 7267 756d  g").@click.argum
+000127f0: 656e 7428 2273 6f6e 675f 6964 7322 2c20  ent("song_ids", 
+00012800: 7479 7065 3d63 6c69 636b 2e49 4e54 2c20  type=click.INT, 
+00012810: 7265 7175 6972 6564 3d54 7275 652c 206e  required=True, n
+00012820: 6172 6773 3d2d 3129 0a40 636c 6963 6b2e  args=-1).@click.
+00012830: 6f70 7469 6f6e 280a 2020 2020 222d 7422  option(.    "-t"
+00012840: 2c0a 2020 2020 222d 2d74 6167 222c 0a20  ,.    "--tag",. 
+00012850: 2020 2022 7461 6773 222c 0a20 2020 2068     "tags",.    h
+00012860: 656c 703d 2254 6167 7320 746f 2061 6464  elp="Tags to add
+00012870: 2e22 2c0a 2020 2020 6d75 6c74 6970 6c65  .",.    multiple
+00012880: 3d54 7275 652c 0a29 0a64 6566 2074 6167  =True,.).def tag
+00012890: 5f28 736f 6e67 5f69 6473 2c20 7461 6773  _(song_ids, tags
+000128a0: 293a 0a20 2020 2022 2222 4164 6420 7461  ):.    """Add ta
+000128b0: 6773 2074 6f20 6120 736f 6e67 2028 7061  gs to a song (pa
+000128c0: 7373 6564 2061 7320 4944 292e 2054 6167  ssed as ID). Tag
+000128d0: 7320 6361 6e6e 6f74 2063 6f6e 7461 696e  s cannot contain
+000128e0: 2074 6865 2063 6861 7261 6374 6572 730a   the characters.
+000128f0: 2020 2020 272c 2720 6f72 2027 7c27 2e22      ',' or '|'."
+00012900: 2222 0a20 2020 2073 6f6e 675f 6964 7320  "".    song_ids 
+00012910: 3d20 7365 7428 736f 6e67 5f69 6473 290a  = set(song_ids).
+00012920: 2020 2020 6e75 6d5f 736f 6e67 7320 3d20      num_songs = 
+00012930: 6c65 6e28 736f 6e67 5f69 6473 290a 2020  len(song_ids).  
+00012940: 2020 7461 6773 203d 2073 6574 2874 6167    tags = set(tag
+00012950: 7329 0a20 2020 2066 6f72 2074 6167 2069  s).    for tag i
+00012960: 6e20 7461 6773 3a0a 2020 2020 2020 2020  n tags:.        
+00012970: 6966 2022 2c22 2069 6e20 7461 6720 6f72  if "," in tag or
+00012980: 2022 7c22 2069 6e20 7461 673a 0a20 2020   "|" in tag:.   
+00012990: 2020 2020 2020 2020 2063 6c69 636b 2e73           click.s
+000129a0: 6563 686f 2822 5461 6773 2063 616e 6e6f  echo("Tags canno
+000129b0: 7420 636f 6e74 6169 6e20 272c 2720 6f72  t contain ',' or
+000129c0: 2027 7c27 2e22 2c20 6667 3d22 7265 6422   '|'.", fg="red"
+000129d0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+000129e0: 7475 726e 0a20 2020 2069 6620 7461 6773  turn.    if tags
+000129f0: 3a0a 2020 2020 2020 2020 736f 6e67 735f  :.        songs_
+00012a00: 6669 6c65 203d 206f 7065 6e28 636f 6e66  file = open(conf
+00012a10: 6967 2e53 4f4e 4753 5f49 4e46 4f5f 5041  ig.SONGS_INFO_PA
+00012a20: 5448 2c20 2272 222c 2065 6e63 6f64 696e  TH, "r", encodin
+00012a30: 673d 2275 7466 2d38 2229 0a20 2020 2020  g="utf-8").     
+00012a40: 2020 206c 696e 6573 203d 2073 6f6e 6773     lines = songs
+00012a50: 5f66 696c 652e 7265 6164 2829 2e73 706c  _file.read().spl
+00012a60: 6974 6c69 6e65 7328 290a 2020 2020 2020  itlines().      
+00012a70: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00012a80: 286c 656e 286c 696e 6573 2929 3a0a 2020  (len(lines)):.  
+00012a90: 2020 2020 2020 2020 2020 6465 7461 696c            detail
+00012aa0: 7320 3d20 6c69 6e65 735b 695d 2e73 7472  s = lines[i].str
+00012ab0: 6970 2829 2e73 706c 6974 2822 7c22 290a  ip().split("|").
+00012ac0: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+00012ad0: 5f69 6420 3d20 696e 7428 6465 7461 696c  _id = int(detail
+00012ae0: 735b 305d 290a 2020 2020 2020 2020 2020  s[0]).          
+00012af0: 2020 6966 2073 6f6e 675f 6964 2069 6e20    if song_id in 
+00012b00: 736f 6e67 5f69 6473 3a0a 2020 2020 2020  song_ids:.      
+00012b10: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
+00012b20: 6473 2e72 656d 6f76 6528 736f 6e67 5f69  ds.remove(song_i
+00012b30: 6429 0a0a 2020 2020 2020 2020 2020 2020  d)..            
+00012b40: 2020 2020 6966 2064 6574 6169 6c73 5b32      if details[2
+00012b50: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00012b60: 2020 2020 2020 206e 6577 5f74 6167 7320         new_tags 
+00012b70: 3d20 6465 7461 696c 735b 325d 2e73 706c  = details[2].spl
+00012b80: 6974 2822 2c22 290a 2020 2020 2020 2020  it(",").        
+00012b90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00012ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012bb0: 2020 6e65 775f 7461 6773 203d 205b 5d0a    new_tags = [].
+00012bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012bd0: 6e65 775f 7461 6773 202b 3d20 5b74 6167  new_tags += [tag
+00012be0: 2066 6f72 2074 6167 2069 6e20 7461 6773   for tag in tags
+00012bf0: 2069 6620 7461 6720 6e6f 7420 696e 206e   if tag not in n
+00012c00: 6577 5f74 6167 735d 0a20 2020 2020 2020  ew_tags].       
+00012c10: 2020 2020 2020 2020 2064 6574 6169 6c73           details
+00012c20: 5b32 5d20 3d20 222c 222e 6a6f 696e 286e  [2] = ",".join(n
+00012c30: 6577 5f74 6167 7329 0a20 2020 2020 2020  ew_tags).       
+00012c40: 2020 2020 2020 2020 206c 696e 6573 5b69           lines[i
+00012c50: 5d20 3d20 227c 222e 6a6f 696e 2864 6574  ] = "|".join(det
+00012c60: 6169 6c73 290a 2020 2020 2020 2020 736f  ails).        so
+00012c70: 6e67 735f 6669 6c65 2e63 6c6f 7365 2829  ngs_file.close()
+00012c80: 0a0a 2020 2020 2020 2020 736f 6e67 735f  ..        songs_
+00012c90: 6669 6c65 203d 206f 7065 6e28 636f 6e66  file = open(conf
+00012ca0: 6967 2e53 4f4e 4753 5f49 4e46 4f5f 5041  ig.SONGS_INFO_PA
+00012cb0: 5448 2c20 2277 222c 2065 6e63 6f64 696e  TH, "w", encodin
+00012cc0: 673d 2275 7466 2d38 2229 0a20 2020 2020  g="utf-8").     
+00012cd0: 2020 2073 6f6e 6773 5f66 696c 652e 7772     songs_file.wr
+00012ce0: 6974 6528 225c 6e22 2e6a 6f69 6e28 6c69  ite("\n".join(li
+00012cf0: 6e65 7329 290a 2020 2020 2020 2020 736f  nes)).        so
+00012d00: 6e67 735f 6669 6c65 2e63 6c6f 7365 2829  ngs_file.close()
+00012d10: 0a0a 2020 2020 2020 2020 6966 2073 6f6e  ..        if son
+00012d20: 675f 6964 733a 0a20 2020 2020 2020 2020  g_ids:.         
+00012d30: 2020 2063 6c69 636b 2e73 6563 686f 280a     click.secho(.
+00012d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d50: 6622 436f 756c 6420 6e6f 7420 6669 6e64  f"Could not find
+00012d60: 2073 6f6e 6728 7329 2077 6974 6820 4944   song(s) with ID
+00012d70: 2873 2920 7b27 2c20 272e 6a6f 696e 286d  (s) {', '.join(m
+00012d80: 6170 2873 7472 2c20 736f 6e67 5f69 6473  ap(str, song_ids
+00012d90: 2929 7d2e 222c 0a20 2020 2020 2020 2020  ))}.",.         
+00012da0: 2020 2020 2020 2066 673d 2272 6564 222c         fg="red",
+00012db0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00012dc0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00012dd0: 6e28 736f 6e67 5f69 6473 2920 3d3d 206e  n(song_ids) == n
+00012de0: 756d 5f73 6f6e 6773 3a0a 2020 2020 2020  um_songs:.      
+00012df0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00012e00: 0a20 2020 2020 2020 2063 6c69 636b 2e73  .        click.s
+00012e10: 6563 686f 280a 2020 2020 2020 2020 2020  echo(.          
+00012e20: 2020 6622 4164 6465 6420 7b6c 656e 2874    f"Added {len(t
+00012e30: 6167 7329 7d20 7461 6728 7329 2074 6f20  ags)} tag(s) to 
+00012e40: 7b6e 756d 5f73 6f6e 6773 202d 206c 656e  {num_songs - len
+00012e50: 2873 6f6e 675f 6964 7329 7d20 736f 6e67  (song_ids)} song
+00012e60: 2873 292e 222c 0a20 2020 2020 2020 2020  (s).",.         
+00012e70: 2020 2066 673d 2267 7265 656e 222c 0a20     fg="green",. 
+00012e80: 2020 2020 2020 2029 0a20 2020 2065 6c73         ).    els
+00012e90: 653a 0a20 2020 2020 2020 2063 6c69 636b  e:.        click
+00012ea0: 2e73 6563 686f 2822 4e6f 2074 6167 7320  .secho("No tags 
+00012eb0: 7061 7373 6564 2e22 2c20 6667 3d22 7265  passed.", fg="re
+00012ec0: 6422 290a 0a0a 4063 6c69 2e63 6f6d 6d61  d")...@cli.comma
+00012ed0: 6e64 2829 0a40 636c 6963 6b2e 6172 6775  nd().@click.argu
+00012ee0: 6d65 6e74 2822 736f 6e67 5f69 6473 222c  ment("song_ids",
+00012ef0: 2074 7970 653d 636c 6963 6b2e 494e 542c   type=click.INT,
+00012f00: 2072 6571 7569 7265 643d 5472 7565 2c20   required=True, 
+00012f10: 6e61 7267 733d 2d31 290a 4063 6c69 636b  nargs=-1).@click
+00012f20: 2e6f 7074 696f 6e28 0a20 2020 2022 2d74  .option(.    "-t
+00012f30: 222c 0a20 2020 2022 2d2d 7461 6722 2c0a  ",.    "--tag",.
+00012f40: 2020 2020 2274 6167 7322 2c0a 2020 2020      "tags",.    
+00012f50: 6865 6c70 3d22 5461 6773 2074 6f20 7265  help="Tags to re
+00012f60: 6d6f 7665 2e22 2c0a 2020 2020 6d75 6c74  move.",.    mult
+00012f70: 6970 6c65 3d54 7275 652c 0a29 0a40 636c  iple=True,.).@cl
+00012f80: 6963 6b2e 6f70 7469 6f6e 2822 2d41 2f2d  ick.option("-A/-
+00012f90: 6e41 222c 2022 2d2d 616c 6c2f 2d2d 6e6f  nA", "--all/--no
+00012fa0: 2d61 6c6c 222c 2022 616c 6c5f 222c 2064  -all", "all_", d
+00012fb0: 6566 6175 6c74 3d46 616c 7365 290a 6465  efault=False).de
+00012fc0: 6620 756e 7461 6728 736f 6e67 5f69 6473  f untag(song_ids
+00012fd0: 2c20 7461 6773 2c20 616c 6c5f 293a 0a20  , tags, all_):. 
+00012fe0: 2020 2022 2222 5265 6d6f 7665 2074 6167     """Remove tag
+00012ff0: 7320 6672 6f6d 2061 2073 7065 6369 6669  s from a specifi
+00013000: 6320 736f 6e67 2028 7061 7373 6564 2061  c song (passed a
+00013010: 7320 4944 292e 2054 6167 7320 7468 6174  s ID). Tags that
+00013020: 2074 6865 2073 6f6e 670a 2020 2020 646f   the song.    do
+00013030: 6573 6e27 7420 6861 7665 2077 696c 6c20  esn't have will 
+00013040: 6265 2069 676e 6f72 6564 2e0a 0a20 2020  be ignored...   
+00013050: 2050 6173 7369 6e67 2074 6865 2027 2d41   Passing the '-A
+00013060: 2f2d 2d61 6c6c 2720 666c 6167 2077 696c  /--all' flag wil
+00013070: 6c20 7265 6d6f 7665 2061 6c6c 2074 6167  l remove all tag
+00013080: 7320 6672 6f6d 2074 6865 2073 6f6e 672c  s from the song,
+00013090: 2075 6e6c 6573 7320 5441 4753 0a20 2020   unless TAGS.   
+000130a0: 2069 7320 7061 7373 6564 2028 696e 2077   is passed (in w
+000130b0: 6869 6368 2063 6173 6520 7468 6520 666c  hich case the fl
+000130c0: 6167 2069 7320 6967 6e6f 7265 6429 2e22  ag is ignored)."
+000130d0: 2222 0a20 2020 2073 6f6e 675f 6964 7320  "".    song_ids 
+000130e0: 3d20 7365 7428 736f 6e67 5f69 6473 290a  = set(song_ids).
+000130f0: 2020 2020 6e75 6d5f 736f 6e67 7320 3d20      num_songs = 
+00013100: 6c65 6e28 736f 6e67 5f69 6473 290a 2020  len(song_ids).  
+00013110: 2020 7461 6773 203d 2073 6574 2874 6167    tags = set(tag
+00013120: 7329 0a20 2020 2069 6620 7461 6773 3a0a  s).    if tags:.
+00013130: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
+00013140: 6c65 203d 206f 7065 6e28 636f 6e66 6967  le = open(config
+00013150: 2e53 4f4e 4753 5f49 4e46 4f5f 5041 5448  .SONGS_INFO_PATH
+00013160: 2c20 2272 222c 2065 6e63 6f64 696e 673d  , "r", encoding=
+00013170: 2275 7466 2d38 2229 0a20 2020 2020 2020  "utf-8").       
+00013180: 206c 696e 6573 203d 2073 6f6e 6773 5f66   lines = songs_f
+00013190: 696c 652e 7265 6164 2829 2e73 706c 6974  ile.read().split
+000131a0: 6c69 6e65 7328 290a 2020 2020 2020 2020  lines().        
+000131b0: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
+000131c0: 656e 286c 696e 6573 2929 3a0a 2020 2020  en(lines)):.    
+000131d0: 2020 2020 2020 2020 6465 7461 696c 7320          details 
+000131e0: 3d20 6c69 6e65 735b 695d 2e73 7472 6970  = lines[i].strip
+000131f0: 2829 2e73 706c 6974 2822 7c22 290a 2020  ().split("|").  
+00013200: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
+00013210: 6420 3d20 696e 7428 6465 7461 696c 735b  d = int(details[
+00013220: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
+00013230: 6966 2073 6f6e 675f 6964 2069 6e20 736f  if song_id in so
+00013240: 6e67 5f69 6473 3a0a 2020 2020 2020 2020  ng_ids:.        
+00013250: 2020 2020 2020 2020 736f 6e67 5f69 6473          song_ids
+00013260: 2e72 656d 6f76 6528 736f 6e67 5f69 6429  .remove(song_id)
+00013270: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013280: 2020 7461 6773 5f74 6f5f 6b65 6570 203d    tags_to_keep =
+00013290: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
+000132a0: 2020 2020 2020 2074 6167 2066 6f72 2074         tag for t
+000132b0: 6167 2069 6e20 6465 7461 696c 735b 325d  ag in details[2]
+000132c0: 2e73 706c 6974 2822 2c22 2920 6966 2074  .split(",") if t
+000132d0: 6167 206e 6f74 2069 6e20 7461 6773 0a20  ag not in tags. 
+000132e0: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+000132f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013300: 206c 696e 6573 5b69 5d20 3d20 227c 222e   lines[i] = "|".
+00013310: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
+00013320: 2020 2020 2020 2020 2020 6465 7461 696c            detail
+00013330: 735b 3a32 5d20 2b20 5b22 2c22 2e6a 6f69  s[:2] + [",".joi
+00013340: 6e28 7461 6773 5f74 6f5f 6b65 6570 295d  n(tags_to_keep)]
+00013350: 202b 2064 6574 6169 6c73 5b33 3a5d 0a20   + details[3:]. 
+00013360: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00013370: 0a20 2020 2020 2020 2073 6f6e 6773 5f66  .        songs_f
+00013380: 696c 652e 636c 6f73 6528 290a 0a20 2020  ile.close()..   
+00013390: 2020 2020 2073 6f6e 6773 5f66 696c 6520       songs_file 
+000133a0: 3d20 6f70 656e 2863 6f6e 6669 672e 534f  = open(config.SO
+000133b0: 4e47 535f 494e 464f 5f50 4154 482c 2022  NGS_INFO_PATH, "
+000133c0: 7722 2c20 656e 636f 6469 6e67 3d22 7574  w", encoding="ut
+000133d0: 662d 3822 290a 2020 2020 2020 2020 736f  f-8").        so
+000133e0: 6e67 735f 6669 6c65 2e77 7269 7465 2822  ngs_file.write("
+000133f0: 5c6e 222e 6a6f 696e 286c 696e 6573 2929  \n".join(lines))
+00013400: 0a20 2020 2020 2020 2073 6f6e 6773 5f66  .        songs_f
+00013410: 696c 652e 636c 6f73 6528 290a 0a20 2020  ile.close()..   
+00013420: 2020 2020 2069 6620 736f 6e67 5f69 6473       if song_ids
+00013430: 3a0a 2020 2020 2020 2020 2020 2020 636c  :.            cl
+00013440: 6963 6b2e 7365 6368 6f28 0a20 2020 2020  ick.secho(.     
+00013450: 2020 2020 2020 2020 2020 2066 2243 6f75             f"Cou
+00013460: 6c64 206e 6f74 2066 696e 6420 736f 6e67  ld not find song
+00013470: 2873 2920 7769 7468 2049 4428 7329 207b  (s) with ID(s) {
+00013480: 272c 2027 2e6a 6f69 6e28 6d61 7028 7374  ', '.join(map(st
+00013490: 722c 2073 6f6e 675f 6964 7329 297d 2e22  r, song_ids))}."
+000134a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000134b0: 2020 6667 3d22 7265 6422 2c0a 2020 2020    fg="red",.    
+000134c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000134d0: 2020 2020 2020 6966 206c 656e 2873 6f6e        if len(son
+000134e0: 675f 6964 7329 203d 3d20 6e75 6d5f 736f  g_ids) == num_so
+000134f0: 6e67 733a 0a20 2020 2020 2020 2020 2020  ngs:.           
+00013500: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+00013510: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
+00013520: 0a20 2020 2020 2020 2020 2020 2066 2252  .            f"R
+00013530: 656d 6f76 6564 2061 6e79 206f 6363 7572  emoved any occur
+00013540: 7265 6e63 6573 206f 6620 7b6c 656e 2874  rences of {len(t
+00013550: 6167 7329 7d20 7461 6728 7329 2066 726f  ags)} tag(s) fro
+00013560: 6d20 7b6e 756d 5f73 6f6e 6773 202d 206c  m {num_songs - l
+00013570: 656e 2873 6f6e 675f 6964 7329 7d20 736f  en(song_ids)} so
+00013580: 6e67 2873 292e 222c 0a20 2020 2020 2020  ng(s).",.       
+00013590: 2020 2020 2066 673d 2267 7265 656e 222c       fg="green",
+000135a0: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
+000135b0: 6c73 653a 0a20 2020 2020 2020 2069 6620  lse:.        if 
+000135c0: 6e6f 7420 616c 6c5f 3a0a 2020 2020 2020  not all_:.      
+000135d0: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
+000135e0: 6f28 0a20 2020 2020 2020 2020 2020 2020  o(.             
+000135f0: 2020 2022 4e6f 2074 6167 7320 7061 7373     "No tags pass
+00013600: 6564 e280 9474 6f20 7265 6d6f 7665 2061  ed...to remove a
+00013610: 6c6c 2074 6167 732c 2070 6173 7320 7468  ll tags, pass th
+00013620: 6520 272d 412f 2d2d 616c 6c27 2066 6c61  e '-A/--all' fla
+00013630: 672e 222c 0a20 2020 2020 2020 2020 2020  g.",.           
+00013640: 2020 2020 2066 673d 2272 6564 222c 0a20       fg="red",. 
+00013650: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00013660: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00013670: 2020 2020 2020 2073 6f6e 6773 5f66 696c         songs_fil
+00013680: 6520 3d20 6f70 656e 2863 6f6e 6669 672e  e = open(config.
+00013690: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
+000136a0: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
+000136b0: 7574 662d 3822 290a 2020 2020 2020 2020  utf-8").        
+000136c0: 2020 2020 6c69 6e65 7320 3d20 736f 6e67      lines = song
+000136d0: 735f 6669 6c65 2e72 6561 6428 292e 7370  s_file.read().sp
+000136e0: 6c69 746c 696e 6573 2829 0a20 2020 2020  litlines().     
+000136f0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00013700: 7261 6e67 6528 6c65 6e28 6c69 6e65 7329  range(len(lines)
+00013710: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00013720: 2020 206c 696e 6520 3d20 6c69 6e65 735b     line = lines[
+00013730: 695d 0a20 2020 2020 2020 2020 2020 2020  i].             
+00013740: 2020 2064 6574 6169 6c73 203d 206c 696e     details = lin
+00013750: 652e 7374 7269 7028 292e 7370 6c69 7428  e.strip().split(
+00013760: 227c 2229 0a20 2020 2020 2020 2020 2020  "|").           
+00013770: 2020 2020 2069 6620 696e 7428 6465 7461       if int(deta
+00013780: 696c 735b 305d 2920 696e 2073 6f6e 675f  ils[0]) in song_
+00013790: 6964 733a 0a20 2020 2020 2020 2020 2020  ids:.           
+000137a0: 2020 2020 2020 2020 206c 696e 6573 5b69           lines[i
+000137b0: 5d20 3d20 227c 222e 6a6f 696e 2864 6574  ] = "|".join(det
+000137c0: 6169 6c73 5b3a 325d 202b 205b 2222 5d20  ails[:2] + [""] 
+000137d0: 2b20 6465 7461 696c 735b 333a 5d29 0a20  + details[3:]). 
+000137e0: 2020 2020 2020 2020 2020 2073 6f6e 6773             songs
+000137f0: 5f66 696c 652e 636c 6f73 6528 290a 0a20  _file.close().. 
+00013800: 2020 2020 2020 2020 2020 2073 6f6e 6773             songs
+00013810: 5f66 696c 6520 3d20 6f70 656e 2863 6f6e  _file = open(con
+00013820: 6669 672e 534f 4e47 535f 494e 464f 5f50  fig.SONGS_INFO_P
+00013830: 4154 482c 2022 7722 2c20 656e 636f 6469  ATH, "w", encodi
+00013840: 6e67 3d22 7574 662d 3822 290a 2020 2020  ng="utf-8").    
+00013850: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
+00013860: 6c65 2e77 7269 7465 2822 5c6e 222e 6a6f  le.write("\n".jo
+00013870: 696e 286c 696e 6573 2929 0a20 2020 2020  in(lines)).     
+00013880: 2020 2020 2020 2073 6f6e 6773 5f66 696c         songs_fil
+00013890: 652e 636c 6f73 6528 290a 0a20 2020 2020  e.close()..     
+000138a0: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
+000138b0: 686f 280a 2020 2020 2020 2020 2020 2020  ho(.            
+000138c0: 2020 2020 6622 5265 6d6f 7665 6420 7b6c      f"Removed {l
+000138d0: 656e 2874 6167 7329 7d20 7461 6728 7329  en(tags)} tag(s)
+000138e0: 2066 726f 6d20 7b6c 656e 2873 6f6e 675f   from {len(song_
+000138f0: 6964 7329 7d20 736f 6e67 2873 292e 222c  ids)} song(s).",
+00013900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013910: 2066 673d 2267 7265 656e 222c 0a20 2020   fg="green",.   
+00013920: 2020 2020 2020 2020 2029 0a0a 0a40 636c           )...@cl
+00013930: 692e 636f 6d6d 616e 6428 290a 4063 6c69  i.command().@cli
+00013940: 636b 2e61 7267 756d 656e 7428 2274 6167  ck.argument("tag
+00013950: 7322 2c20 6e61 7267 733d 2d31 290a 4063  s", nargs=-1).@c
+00013960: 6c69 636b 2e6f 7074 696f 6e28 0a20 2020  lick.option(.   
+00013970: 2022 2d73 222c 0a20 2020 2022 2d2d 7368   "-s",.    "--sh
+00013980: 7566 666c 6522 2c0a 2020 2020 2273 6875  uffle",.    "shu
+00013990: 6666 6c65 5f22 2c0a 2020 2020 7479 7065  ffle_",.    type
+000139a0: 3d63 6c69 636b 2e49 6e74 5261 6e67 6528  =click.IntRange(
+000139b0: 302c 2032 292c 0a20 2020 2068 656c 703d  0, 2),.    help=
+000139c0: 2230 3a20 7368 7566 666c 6520 6f6e 6365  "0: shuffle once
+000139d0: 2c20 313a 2073 6875 6666 6c65 2065 7665  , 1: shuffle eve
+000139e0: 7279 206c 6f6f 702c 2032 3a20 7368 7566  ry loop, 2: shuf
+000139f0: 666c 6520 6576 6572 7920 6c6f 6f70 2065  fle every loop e
+00013a00: 7863 6570 7420 666f 7220 7468 6520 6669  xcept for the fi
+00013a10: 7273 7420 6f6e 652e 222c 0a29 0a40 636c  rst one.",.).@cl
+00013a20: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
+00013a30: 222d 522f 2d6e 5222 2c0a 2020 2020 222d  "-R/-nR",.    "-
+00013a40: 2d72 6576 6572 7365 2f2d 2d6e 6f2d 7265  -reverse/--no-re
+00013a50: 7665 7273 6522 2c0a 2020 2020 2272 6576  verse",.    "rev
+00013a60: 6572 7365 222c 0a20 2020 2064 6566 6175  erse",.    defau
+00013a70: 6c74 3d46 616c 7365 2c0a 2020 2020 6865  lt=False,.    he
+00013a80: 6c70 3d22 506c 6179 2073 6f6e 6773 2069  lp="Play songs i
+00013a90: 6e20 7265 7665 7273 6520 286d 6f73 7420  n reverse (most 
+00013aa0: 7265 6365 6e74 6c79 2061 6464 6564 2066  recently added f
+00013ab0: 6972 7374 292e 222c 0a29 0a40 636c 6963  irst).",.).@clic
+00013ac0: 6b2e 6f70 7469 6f6e 280a 2020 2020 222d  k.option(.    "-
+00013ad0: 6f22 2c0a 2020 2020 222d 2d6f 6e6c 7922  o",.    "--only"
+00013ae0: 2c0a 2020 2020 226f 6e6c 7922 2c0a 2020  ,.    "only",.  
+00013af0: 2020 7479 7065 3d63 6c69 636b 2e49 4e54    type=click.INT
+00013b00: 2c0a 2020 2020 6d75 6c74 6970 6c65 3d54  ,.    multiple=T
+00013b10: 7275 652c 0a20 2020 2068 656c 703d 2250  rue,.    help="P
+00013b20: 6c61 7920 6f6e 6c79 2074 6869 732f 7468  lay only this/th
+00013b30: 6573 6520 736f 6e67 2873 2920 2863 616e  ese song(s) (can
+00013b40: 2062 6520 7061 7373 6564 206d 756c 7469   be passed multi
+00013b50: 706c 6520 7469 6d65 732c 2065 2e67 2e20  ple times, e.g. 
+00013b60: 276d 6165 7374 726f 2070 6c61 7920 2d6f  'maestro play -o
+00013b70: 2031 202d 6f20 3137 2729 2e22 2c0a 290a   1 -o 17').",.).
+00013b80: 4063 6c69 636b 2e6f 7074 696f 6e28 0a20  @click.option(. 
+00013b90: 2020 2022 2d76 222c 0a20 2020 2022 2d2d     "-v",.    "--
+00013ba0: 766f 6c75 6d65 222c 0a20 2020 2022 766f  volume",.    "vo
+00013bb0: 6c75 6d65 222c 0a20 2020 2074 7970 653d  lume",.    type=
+00013bc0: 636c 6963 6b2e 496e 7452 616e 6765 2830  click.IntRange(0
+00013bd0: 2c20 3130 3029 2c0a 2020 2020 6465 6661  , 100),.    defa
+00013be0: 756c 743d 3130 302c 0a20 2020 2073 686f  ult=100,.    sho
+00013bf0: 775f 6465 6661 756c 743d 5472 7565 2c0a  w_default=True,.
+00013c00: 290a 4063 6c69 636b 2e6f 7074 696f 6e28  ).@click.option(
+00013c10: 0a20 2020 2022 2d4c 2f2d 6e4c 222c 0a20  .    "-L/-nL",. 
+00013c20: 2020 2022 2d2d 6c6f 6f70 2f2d 2d6e 6f2d     "--loop/--no-
+00013c30: 6c6f 6f70 222c 0a20 2020 2022 6c6f 6f70  loop",.    "loop
+00013c40: 222c 0a20 2020 2064 6566 6175 6c74 3d46  ",.    default=F
+00013c50: 616c 7365 2c0a 2020 2020 6865 6c70 3d22  alse,.    help="
+00013c60: 4c6f 6f70 2074 6865 2070 6c61 796c 6973  Loop the playlis
+00013c70: 742e 222c 0a29 0a40 636c 6963 6b2e 6f70  t.",.).@click.op
+00013c80: 7469 6f6e 280a 2020 2020 222d 432f 2d6e  tion(.    "-C/-n
+00013c90: 4322 2c0a 2020 2020 222d 2d63 6c69 7073  C",.    "--clips
+00013ca0: 2f2d 2d6e 6f2d 636c 6970 7322 2c0a 2020  /--no-clips",.  
+00013cb0: 2020 2263 6c69 7073 222c 0a20 2020 2064    "clips",.    d
+00013cc0: 6566 6175 6c74 3d46 616c 7365 2c0a 2020  efault=False,.  
+00013cd0: 2020 6865 6c70 3d22 5374 6172 7420 696e    help="Start in
+00013ce0: 2063 6c69 7020 6d6f 6465 2e20 4361 6e20   clip mode. Can 
+00013cf0: 6265 2074 6f67 676c 6564 2077 6974 6820  be toggled with 
+00013d00: 2763 272e 222c 0a29 0a40 636c 6963 6b2e  'c'.",.).@click.
+00013d10: 6f70 7469 6f6e 280a 2020 2020 222d 442f  option(.    "-D/
+00013d20: 2d6e 4422 2c0a 2020 2020 222d 2d64 6973  -nD",.    "--dis
+00013d30: 636f 7264 2f2d 2d6e 6f2d 6469 7363 6f72  cord/--no-discor
+00013d40: 6422 2c0a 2020 2020 2264 6973 636f 7264  d",.    "discord
+00013d50: 222c 0a20 2020 2064 6566 6175 6c74 3d46  ",.    default=F
+00013d60: 616c 7365 2c0a 2020 2020 6865 6c70 3d22  alse,.    help="
+00013d70: 4469 7363 6f72 6420 7269 6368 2070 7265  Discord rich pre
+00013d80: 7365 6e63 652e 2049 676e 6f72 6564 2069  sence. Ignored i
+00013d90: 6620 7265 7175 6972 6564 2064 6570 656e  f required depen
+00013da0: 6465 6e63 6965 7320 6172 6520 6e6f 7420  dencies are not 
+00013db0: 696e 7374 616c 6c65 642e 2057 696c 6c20  installed. Will 
+00013dc0: 6661 696c 2073 696c 656e 746c 7920 616e  fail silently an
+00013dd0: 6420 7265 7472 7920 6576 6572 7920 7469  d retry every ti
+00013de0: 6d65 2074 6865 2073 6f6e 6720 6368 616e  me the song chan
+00013df0: 6765 7320 6966 2044 6973 636f 7264 2063  ges if Discord c
+00013e00: 6f6e 6e65 6374 696f 6e20 6661 696c 7320  onnection fails 
+00013e10: 2865 2e67 2e20 4469 7363 6f72 6420 6e6f  (e.g. Discord no
+00013e20: 7420 6f70 656e 292e 222c 0a29 0a40 636c  t open).",.).@cl
+00013e30: 6963 6b2e 6f70 7469 6f6e 280a 2020 2020  ick.option(.    
+00013e40: 222d 4d2f 2d6e 4d22 2c0a 2020 2020 222d  "-M/-nM",.    "-
+00013e50: 2d6d 6174 6368 2d61 6c6c 2f2d 2d6e 6f2d  -match-all/--no-
+00013e60: 6d61 7463 682d 616c 6c22 2c0a 2020 2020  match-all",.    
+00013e70: 226d 6174 6368 5f61 6c6c 222c 0a20 2020  "match_all",.   
+00013e80: 2064 6566 6175 6c74 3d46 616c 7365 2c0a   default=False,.
+00013e90: 2020 2020 6865 6c70 3d22 506c 6179 2073      help="Play s
+00013ea0: 6f6e 6773 2074 6861 7420 6d61 7463 6820  ongs that match 
+00013eb0: 616c 6c20 7461 6773 2c20 6e6f 7420 616e  all tags, not an
+00013ec0: 792e 222c 0a29 0a40 636c 6963 6b2e 6f70  y.",.).@click.op
+00013ed0: 7469 6f6e 280a 2020 2020 222d 562f 2d6e  tion(.    "-V/-n
+00013ee0: 5622 2c0a 2020 2020 222d 2d76 6973 7561  V",.    "--visua
+00013ef0: 6c69 7a65 2f2d 2d6e 6f2d 7669 7375 616c  lize/--no-visual
+00013f00: 697a 6522 2c0a 2020 2020 2276 6973 7561  ize",.    "visua
+00013f10: 6c69 7a65 222c 0a20 2020 2064 6566 6175  lize",.    defau
+00013f20: 6c74 3d46 616c 7365 2c0a 2020 2020 6865  lt=False,.    he
+00013f30: 6c70 3d22 5669 7375 616c 697a 6520 7468  lp="Visualize th
+00013f40: 6520 736f 6e67 2062 6569 6e67 2070 6c61  e song being pla
+00013f50: 7965 642e 2049 676e 6f72 6564 2069 6620  yed. Ignored if 
+00013f60: 7265 7175 6972 6564 2064 6570 656e 6465  required depende
+00013f70: 6e63 6965 7320 6172 6520 6e6f 7420 696e  ncies are not in
+00013f80: 7374 616c 6c65 642e 222c 0a29 0a64 6566  stalled.",.).def
+00013f90: 2070 6c61 7928 0a20 2020 2074 6167 732c   play(.    tags,
+00013fa0: 0a20 2020 2073 6875 6666 6c65 5f2c 0a20  .    shuffle_,. 
+00013fb0: 2020 2072 6576 6572 7365 2c0a 2020 2020     reverse,.    
+00013fc0: 6f6e 6c79 2c0a 2020 2020 766f 6c75 6d65  only,.    volume
+00013fd0: 2c0a 2020 2020 6c6f 6f70 2c0a 2020 2020  ,.    loop,.    
+00013fe0: 636c 6970 732c 0a20 2020 2064 6973 636f  clips,.    disco
+00013ff0: 7264 2c0a 2020 2020 6d61 7463 685f 616c  rd,.    match_al
+00014000: 6c2c 0a20 2020 2076 6973 7561 6c69 7a65  l,.    visualize
+00014010: 2c0a 293a 0a20 2020 2022 2222 506c 6179  ,.):.    """Play
+00014020: 2079 6f75 7220 736f 6e67 732e 2049 6620   your songs. If 
+00014030: 7461 6773 2061 7265 2070 6173 7365 642c  tags are passed,
+00014040: 2061 6e79 2073 6f6e 6720 6d61 7463 6869   any song matchi
+00014050: 6e67 2061 6e79 2074 6167 2077 696c 6c20  ng any tag will 
+00014060: 6265 2069 6e0a 2020 2020 796f 7572 2070  be in.    your p
+00014070: 6c61 796c 6973 742c 2075 6e6c 6573 7320  laylist, unless 
+00014080: 7468 6520 272d 4d2f 2d2d 6d61 7463 682d  the '-M/--match-
+00014090: 616c 6c27 2066 6c61 6720 6973 2070 6173  all' flag is pas
+000140a0: 7365 642c 2069 6e20 7768 6963 6820 6361  sed, in which ca
+000140b0: 7365 0a20 2020 2065 7665 7279 2074 6167  se.    every tag
+000140c0: 206d 7573 7420 6265 206d 6174 6368 6564   must be matched
+000140d0: 2e0a 0a20 2020 205c 620a 2020 2020 5c78  ...    \b.    \x
+000140e0: 3162 5b31 6d53 5041 4345 5c78 3162 5b30  1b[1mSPACE\x1b[0
+000140f0: 6d20 2074 6f20 7061 7573 652f 706c 6179  m  to pause/play
+00014100: 0a20 2020 205c 7831 625b 316d 625c 7831  .    \x1b[1mb\x1
+00014110: 625b 306d 2020 746f 2067 6f20 5b62 5d61  b[0m  to go [b]a
+00014120: 636b 2074 6f20 7072 6576 696f 7573 2073  ck to previous s
+00014130: 6f6e 670a 2020 2020 5c78 3162 5b31 6d72  ong.    \x1b[1mr
+00014140: 5c78 3162 5b30 6d20 2074 6f20 5b72 5d65  \x1b[0m  to [r]e
+00014150: 706c 6179 2073 6f6e 670a 2020 2020 5c78  play song.    \x
+00014160: 3162 5b31 6d6e 5c78 3162 5b30 6d20 2074  1b[1mn\x1b[0m  t
+00014170: 6f20 736b 6970 2074 6f20 5b6e 5d65 7874  o skip to [n]ext
+00014180: 2073 6f6e 670a 2020 2020 5c78 3162 5b31   song.    \x1b[1
+00014190: 6d6c 5c78 3162 5b30 6d20 2074 6f20 5b6c  ml\x1b[0m  to [l
+000141a0: 5d6f 6f70 2074 6865 2063 7572 7265 6e74  ]oop the current
+000141b0: 2073 6f6e 6720 6f6e 6365 2028 276c 2720   song once ('l' 
+000141c0: 696e 2073 7461 7475 7320 6261 7229 2e20  in status bar). 
+000141d0: 7072 6573 7320 6167 6169 6e20 746f 206c  press again to l
+000141e0: 6f6f 7020 696e 6669 6e69 7465 6c79 2028  oop infinitely (
+000141f0: 274c 2720 696e 2073 7461 7475 7320 6261  'L' in status ba
+00014200: 7229 2e20 7072 6573 7320 6f6e 6365 2061  r). press once a
+00014210: 6761 696e 2074 6f20 7475 726e 206f 6666  gain to turn off
+00014220: 206c 6f6f 7069 6e67 0a20 2020 205c 7831   looping.    \x1
+00014230: 625b 316d 635c 7831 625b 306d 2020 746f  b[1mc\x1b[0m  to
+00014240: 2074 6f67 676c 6520 5b63 5d6c 6970 206d   toggle [c]lip m
+00014250: 6f64 650a 2020 2020 5c78 3162 5b31 6d76  ode.    \x1b[1mv
+00014260: 5c78 3162 5b30 6d20 2074 6f20 746f 6767  \x1b[0m  to togg
+00014270: 6c65 205b 765d 6973 7561 6c69 7a61 7469  le [v]isualizati
+00014280: 6f6e 0a20 2020 205c 7831 625b 316d 4c45  on.    \x1b[1mLE
+00014290: 4654 5c78 3162 5b30 6d20 2074 6f20 7265  FT\x1b[0m  to re
+000142a0: 7769 6e64 2035 730a 2020 2020 5c78 3162  wind 5s.    \x1b
+000142b0: 5b31 6d52 4947 4854 5c78 3162 5b30 6d20  [1mRIGHT\x1b[0m 
+000142c0: 2074 6f20 6661 7374 2066 6f72 7761 7264   to fast forward
+000142d0: 2035 730a 2020 2020 5c78 3162 5b31 6d5b   5s.    \x1b[1m[
+000142e0: 5c78 3162 5b30 6d20 2074 6f20 6465 6372  \x1b[0m  to decr
+000142f0: 6561 7365 2076 6f6c 756d 650a 2020 2020  ease volume.    
+00014300: 5c78 3162 5b31 6d5d 5c78 3162 5b30 6d20  \x1b[1m]\x1b[0m 
+00014310: 2074 6f20 696e 6372 6561 7365 2076 6f6c   to increase vol
+00014320: 756d 650a 2020 2020 5c78 3162 5b31 6d6d  ume.    \x1b[1mm
+00014330: 5c78 3162 5b30 6d20 2074 6f20 5b6d 5d75  \x1b[0m  to [m]u
+00014340: 7465 2f75 6e6d 7574 650a 2020 2020 5c78  te/unmute.    \x
+00014350: 3162 5b31 6d65 5c78 3162 5b30 6d20 2074  1b[1me\x1b[0m  t
+00014360: 6f20 5b65 5d6e 6420 7468 6520 736f 6e67  o [e]nd the song
+00014370: 2070 6c61 7965 7220 6166 7465 7220 7468   player after th
+00014380: 6520 6375 7272 656e 7420 736f 6e67 2066  e current song f
+00014390: 696e 6973 6865 7320 2869 6e64 6963 6174  inishes (indicat
+000143a0: 6f72 2069 6e20 7374 6174 7573 2062 6172  or in status bar
+000143b0: 2c20 2765 2720 746f 2063 616e 6365 6c29  , 'e' to cancel)
+000143c0: 0a20 2020 205c 7831 625b 316d 715c 7831  .    \x1b[1mq\x1
+000143d0: 625b 306d 2020 746f 205b 715d 7569 7420  b[0m  to [q]uit 
+000143e0: 7468 6520 736f 6e67 2070 6c61 7965 7220  the song player 
+000143f0: 696d 6d65 6469 6174 656c 790a 2020 2020  immediately.    
+00014400: 5c78 3162 5b31 6d55 502f 444f 574e 5c78  \x1b[1mUP/DOWN\x
+00014410: 3162 5b30 6d20 2074 6f20 7363 726f 6c6c  1b[0m  to scroll
+00014420: 2074 6872 6f75 6768 2074 6865 2070 6c61   through the pla
+00014430: 796c 6973 7420 286d 6f75 7365 2073 6372  ylist (mouse scr
+00014440: 6f6c 6c69 6e67 2073 686f 756c 6420 616c  olling should al
+00014450: 736f 2077 6f72 6b29 0a20 2020 205c 7831  so work).    \x1
+00014460: 625b 316d 705c 7831 625b 306d 2020 746f  b[1mp\x1b[0m  to
+00014470: 2073 6e61 5b70 5d20 6261 636b 2074 6f20   sna[p] back to 
+00014480: 7468 6520 6375 7272 656e 746c 7920 706c  the currently pl
+00014490: 6179 696e 6720 736f 6e67 0a20 2020 205c  aying song.    \
+000144a0: 7831 625b 316d 675c 7831 625b 306d 2020  x1b[1mg\x1b[0m  
+000144b0: 746f 2067 6f20 746f 2074 6865 206e 6578  to go to the nex
+000144c0: 7420 7061 5b67 5d65 2f6c 6f6f 7020 6f66  t pa[g]e/loop of
+000144d0: 2074 6865 2070 6c61 796c 6973 7420 2869   the playlist (i
+000144e0: 676e 6f72 6564 2069 6620 6e6f 7420 7265  gnored if not re
+000144f0: 7065 6174 696e 6720 706c 6179 6c69 7374  peating playlist
+00014500: 290a 2020 2020 5c78 3162 5b31 6d42 4143  ).    \x1b[1mBAC
+00014510: 4b53 5041 4345 2f44 454c 4554 455c 7831  KSPACE/DELETE\x1
+00014520: 625b 306d 2020 6465 6c65 7465 2074 6865  b[0m  delete the
+00014530: 2073 656c 6563 7465 6420 286e 6f74 206e   selected (not n
+00014540: 6563 6573 7361 7269 6c79 2063 7572 7265  ecessarily curre
+00014550: 6e74 6c79 2070 6c61 7969 6e67 2129 2073  ntly playing!) s
+00014560: 6f6e 6720 6672 6f6d 2074 6865 2071 7565  ong from the que
+00014570: 7565 0a20 2020 205c 7831 625b 316d 645c  ue.    \x1b[1md\
+00014580: 7831 625b 306d 2020 746f 2074 6f67 676c  x1b[0m  to toggl
+00014590: 6520 5b44 5d69 7363 6f72 6420 7269 6368  e [D]iscord rich
+000145a0: 2070 7265 7365 6e63 650a 2020 2020 5c78   presence.    \x
+000145b0: 3162 5b31 6d61 5c78 3162 5b30 6d20 2074  1b[1ma\x1b[0m  t
+000145c0: 6f20 6164 6420 6120 736f 6e67 2028 6279  o add a song (by
+000145d0: 2049 4429 2074 6f20 7468 6520 656e 6420   ID) to the end 
+000145e0: 6f66 2074 6865 2070 6c61 796c 6973 742e  of the playlist.
+000145f0: 204f 7065 6e73 2061 2070 726f 6d70 7420   Opens a prompt 
+00014600: 746f 2065 6e74 6572 2074 6865 2049 443a  to enter the ID:
+00014610: 2045 4e54 4552 2074 6f20 636f 6e66 6972   ENTER to confir
+00014620: 6d2c 2045 5343 2074 6f20 6361 6e63 656c  m, ESC to cancel
+00014630: 2e0a 2020 2020 5c78 3162 5b31 6d69 5c78  ..    \x1b[1mi\x
+00014640: 3162 5b30 6d20 2074 6f20 696e 7365 7274  1b[0m  to insert
+00014650: 2061 2073 6f6e 6720 2862 7920 4944 2920   a song (by ID) 
+00014660: 696e 2074 6865 2070 6c61 796c 6973 7420  in the playlist 
+00014670: 6166 7465 7220 7468 6520 7365 6c65 6374  after the select
+00014680: 6564 2073 6f6e 672e 204f 7065 6e73 2061  ed song. Opens a
+00014690: 2070 726f 6d70 7420 6c69 6b65 2027 6127   prompt like 'a'
+000146a0: 2e0a 2020 2020 5c78 3162 5b31 6d74 5c78  ..    \x1b[1mt\x
+000146b0: 3162 5b30 6d20 2074 6f20 6164 6420 6120  1b[0m  to add a 
+000146c0: 7461 6720 746f 2061 6c6c 2073 6f6e 6773  tag to all songs
+000146d0: 2069 6e20 7468 6520 706c 6179 6c69 7374   in the playlist
+000146e0: 2e20 4f70 656e 7320 6120 7072 6f6d 7074  . Opens a prompt
+000146f0: 2074 6f20 656e 7465 7220 7468 6520 7461   to enter the ta
+00014700: 673a 2045 4e54 4552 2074 6f20 636f 6e66  g: ENTER to conf
+00014710: 6972 6d2c 2045 5343 2074 6f20 6361 6e63  irm, ESC to canc
+00014720: 656c 2e0a 0a20 2020 205c 620a 2020 2020  el...    \b.    
+00014730: 736f 6e67 2063 6f6c 6f72 2069 6e64 6963  song color indic
+00014740: 6174 6573 206d 6f64 653a 0a20 2020 2020  ates mode:.     
+00014750: 2020 205c 7831 625b 313b 3334 6d62 6c75     \x1b[1;34mblu
+00014760: 655c 7831 625b 306d 2020 2020 206e 6f72  e\x1b[0m     nor
+00014770: 6d61 6c0a 2020 2020 2020 2020 5c78 3162  mal.        \x1b
+00014780: 5b31 3b33 336d 7965 6c6c 6f77 5c78 3162  [1;33myellow\x1b
+00014790: 5b30 6d20 2020 6c6f 6f70 696e 6720 6375  [0m   looping cu
+000147a0: 7272 656e 7420 736f 6e67 2028 6f6e 6365  rrent song (once
+000147b0: 206f 7220 7265 7065 6174 6564 6c79 290a   or repeatedly).
+000147c0: 0a20 2020 205c 620a 2020 2020 7072 6f67  .    \b.    prog
+000147d0: 7265 7373 2062 6172 2063 6f6c 6f72 2069  ress bar color i
+000147e0: 6e64 6963 6174 6573 2073 7461 7475 733a  ndicates status:
+000147f0: 0a20 2020 2020 2020 205c 7831 625b 313b  .        \x1b[1;
+00014800: 3333 6d79 656c 6c6f 775c 7831 625b 306d  33myellow\x1b[0m
+00014810: 2020 206e 6f72 6d61 6c20 286f 7220 6375     normal (or cu
+00014820: 7272 656e 7420 736f 6e67 2064 6f65 736e  rrent song doesn
+00014830: 2774 2068 6176 6520 6120 636c 6970 290a  't have a clip).
+00014840: 2020 2020 2020 2020 5c78 3162 5b31 3b33          \x1b[1;3
+00014850: 356d 6d61 6765 6e74 615c 7831 625b 306d  5mmagenta\x1b[0m
+00014860: 2020 706c 6179 696e 6720 636c 6970 0a0a    playing clip..
+00014870: 2020 2020 466f 7220 7468 6520 636f 6c6f      For the colo
+00014880: 7220 7669 7369 6f6e 2064 6566 6963 6965  r vision deficie
+00014890: 6e74 2c20 626f 7468 206d 6f64 6573 2061  nt, both modes a
+000148a0: 6c73 6f20 6861 7665 2069 6e64 6963 6174  lso have indicat
+000148b0: 6f72 7320 696e 2074 6865 2073 7461 7475  ors in the statu
+000148c0: 7320 6261 722e 0a20 2020 2022 2222 0a20  s bar..    """. 
+000148d0: 2020 2070 6c61 796c 6973 7420 3d20 5b5d     playlist = []
+000148e0: 0a20 2020 2073 6f6e 6773 5f6e 6f74 5f66  .    songs_not_f
+000148f0: 6f75 6e64 203d 205b 5d0a 0a20 2020 2069  ound = []..    i
+00014900: 6620 6f6e 6c79 3a0a 2020 2020 2020 2020  f only:.        
+00014910: 6f6e 6c79 203d 2073 6574 286f 6e6c 7929  only = set(only)
+00014920: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+00014930: 656e 2863 6f6e 6669 672e 534f 4e47 535f  en(config.SONGS_
+00014940: 494e 464f 5f50 4154 482c 2022 7222 2c20  INFO_PATH, "r", 
+00014950: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+00014960: 2920 6173 2073 6f6e 6773 5f66 696c 653a  ) as songs_file:
+00014970: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00014980: 206c 696e 6520 696e 2073 6f6e 6773 5f66   line in songs_f
+00014990: 696c 653a 0a20 2020 2020 2020 2020 2020  ile:.           
+000149a0: 2020 2020 2064 6574 6169 6c73 203d 206c       details = l
+000149b0: 696e 652e 7374 7269 7028 292e 7370 6c69  ine.strip().spli
+000149c0: 7428 227c 2229 0a20 2020 2020 2020 2020  t("|").         
+000149d0: 2020 2020 2020 2073 6f6e 675f 6964 203d         song_id =
+000149e0: 2069 6e74 2864 6574 6169 6c73 5b30 5d29   int(details[0])
+000149f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014a00: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+00014a10: 6578 6973 7473 286f 732e 7061 7468 2e6a  exists(os.path.j
+00014a20: 6f69 6e28 636f 6e66 6967 2e53 4f4e 4753  oin(config.SONGS
+00014a30: 5f44 4952 2c20 6465 7461 696c 735b 315d  _DIR, details[1]
+00014a40: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00014a50: 2020 2020 2020 2020 736f 6e67 735f 6e6f          songs_no
+00014a60: 745f 666f 756e 642e 6170 7065 6e64 2864  t_found.append(d
+00014a70: 6574 6169 6c73 290a 2020 2020 2020 2020  etails).        
+00014a80: 2020 2020 2020 2020 656c 6966 2073 6f6e          elif son
+00014a90: 675f 6964 2069 6e20 6f6e 6c79 3a0a 2020  g_id in only:.  
+00014aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ab0: 2020 706c 6179 6c69 7374 2e61 7070 656e    playlist.appen
+00014ac0: 6428 6465 7461 696c 7329 0a0a 2020 2020  d(details)..    
+00014ad0: 2020 2020 6966 206e 6f74 2070 6c61 796c      if not playl
+00014ae0: 6973 743a 0a20 2020 2020 2020 2020 2020  ist:.           
+00014af0: 2063 6c69 636b 2e73 6563 686f 2822 4e6f   click.secho("No
+00014b00: 2073 6f6e 6773 2066 6f75 6e64 2077 6974   songs found wit
+00014b10: 6820 7468 6520 6769 7665 6e20 4944 732e  h the given IDs.
+00014b20: 222c 2066 673d 2272 6564 2229 0a20 2020  ", fg="red").   
+00014b30: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
+00014b40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00014b50: 2020 6966 206e 6f74 2074 6167 733a 0a20    if not tags:. 
+00014b60: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+00014b70: 6f70 656e 2863 6f6e 6669 672e 534f 4e47  open(config.SONG
+00014b80: 535f 494e 464f 5f50 4154 482c 2022 7222  S_INFO_PATH, "r"
+00014b90: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
+00014ba0: 3822 2920 6173 2073 6f6e 6773 5f66 696c  8") as songs_fil
+00014bb0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00014bc0: 2020 2066 6f72 206c 696e 6520 696e 2073     for line in s
+00014bd0: 6f6e 6773 5f66 696c 653a 0a20 2020 2020  ongs_file:.     
+00014be0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00014bf0: 6574 6169 6c73 203d 206c 696e 652e 7374  etails = line.st
+00014c00: 7269 7028 292e 7370 6c69 7428 227c 2229  rip().split("|")
+00014c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014c20: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
+00014c30: 6174 682e 6578 6973 7473 286f 732e 7061  ath.exists(os.pa
+00014c40: 7468 2e6a 6f69 6e28 636f 6e66 6967 2e53  th.join(config.S
+00014c50: 4f4e 4753 5f44 4952 2c20 6465 7461 696c  ONGS_DIR, detail
+00014c60: 735b 315d 2929 3a0a 2020 2020 2020 2020  s[1])):.        
+00014c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c80: 736f 6e67 735f 6e6f 745f 666f 756e 642e  songs_not_found.
+00014c90: 6170 7065 6e64 2864 6574 6169 6c73 290a  append(details).
+00014ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014cb0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00014cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014cd0: 2020 706c 6179 6c69 7374 2e61 7070 656e    playlist.appen
+00014ce0: 6428 6465 7461 696c 7329 0a20 2020 2020  d(details).     
+00014cf0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00014d00: 2020 2020 2074 6167 7320 3d20 7365 7428       tags = set(
+00014d10: 7461 6773 290a 2020 2020 2020 2020 2020  tags).          
+00014d20: 2020 7769 7468 206f 7065 6e28 636f 6e66    with open(conf
+00014d30: 6967 2e53 4f4e 4753 5f49 4e46 4f5f 5041  ig.SONGS_INFO_PA
+00014d40: 5448 2c20 2272 222c 2065 6e63 6f64 696e  TH, "r", encodin
+00014d50: 673d 2275 7466 2d38 2229 2061 7320 736f  g="utf-8") as so
+00014d60: 6e67 735f 6669 6c65 3a0a 2020 2020 2020  ngs_file:.      
+00014d70: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
+00014d80: 6e65 2069 6e20 736f 6e67 735f 6669 6c65  ne in songs_file
+00014d90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00014da0: 2020 2020 2020 6465 7461 696c 7320 3d20        details = 
+00014db0: 6c69 6e65 2e73 7472 6970 2829 2e73 706c  line.strip().spl
+00014dc0: 6974 2822 7c22 290a 2020 2020 2020 2020  it("|").        
+00014dd0: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+00014de0: 5f74 6167 7320 3d20 7365 7428 6465 7461  _tags = set(deta
+00014df0: 696c 735b 325d 2e73 706c 6974 2822 2c22  ils[2].split(","
+00014e00: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00014e10: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+00014e20: 2e70 6174 682e 6578 6973 7473 286f 732e  .path.exists(os.
+00014e30: 7061 7468 2e6a 6f69 6e28 636f 6e66 6967  path.join(config
+00014e40: 2e53 4f4e 4753 5f44 4952 2c20 6465 7461  .SONGS_DIR, deta
+00014e50: 696c 735b 315d 2929 3a0a 2020 2020 2020  ils[1])):.      
+00014e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014e70: 2020 736f 6e67 735f 6e6f 745f 666f 756e    songs_not_foun
+00014e80: 642e 6170 7065 6e64 2864 6574 6169 6c73  d.append(details
+00014e90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00014ea0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00014eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ec0: 2020 2020 6966 206e 6f74 206d 6174 6368      if not match
+00014ed0: 5f61 6c6c 3a0a 2020 2020 2020 2020 2020  _all:.          
+00014ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ef0: 2020 6966 2074 6167 7320 2620 736f 6e67    if tags & song
+00014f00: 5f74 6167 733a 2020 2320 696e 7465 7273  _tags:  # inters
+00014f10: 6563 7469 6f6e 0a20 2020 2020 2020 2020  ection.         
+00014f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014f30: 2020 2020 2020 2070 6c61 796c 6973 742e         playlist.
+00014f40: 6170 7065 6e64 2864 6574 6169 6c73 290a  append(details).
+00014f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014f60: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00014f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014f80: 2020 2020 2020 2020 2020 6966 2074 6167            if tag
+00014f90: 7320 3c3d 2073 6f6e 675f 7461 6773 3a20  s <= song_tags: 
+00014fa0: 2023 2073 7562 7365 740a 2020 2020 2020   # subset.      
+00014fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014fc0: 2020 2020 2020 2020 2020 706c 6179 6c69            playli
+00014fd0: 7374 2e61 7070 656e 6428 6465 7461 696c  st.append(detail
+00014fe0: 7329 0a0a 2020 2020 666f 7220 6465 7461  s)..    for deta
+00014ff0: 696c 7320 696e 2070 6c61 796c 6973 743a  ils in playlist:
+00015000: 0a20 2020 2020 2020 2073 6f6e 675f 6461  .        song_da
+00015010: 7461 203d 206d 7573 6963 5f74 6167 2e6c  ta = music_tag.l
+00015020: 6f61 645f 6669 6c65 286f 732e 7061 7468  oad_file(os.path
+00015030: 2e6a 6f69 6e28 636f 6e66 6967 2e53 4f4e  .join(config.SON
+00015040: 4753 5f44 4952 2c20 6465 7461 696c 735b  GS_DIR, details[
+00015050: 315d 2929 0a20 2020 2020 2020 2064 6574  1])).        det
+00015060: 6169 6c73 202b 3d20 5b0a 2020 2020 2020  ails += [.      
+00015070: 2020 2020 2020 2873 6f6e 675f 6461 7461        (song_data
+00015080: 5b22 6172 7469 7374 225d 2e76 616c 7565  ["artist"].value
+00015090: 206f 7220 2255 6e6b 6e6f 776e 2041 7274   or "Unknown Art
+000150a0: 6973 7422 292c 0a20 2020 2020 2020 2020  ist"),.         
+000150b0: 2020 2028 736f 6e67 5f64 6174 615b 2261     (song_data["a
+000150c0: 6c62 756d 225d 2e76 616c 7565 206f 7220  lbum"].value or 
+000150d0: 2255 6e6b 6e6f 776e 2041 6c62 756d 2229  "Unknown Album")
+000150e0: 2c0a 2020 2020 2020 2020 2020 2020 2873  ,.            (s
+000150f0: 6f6e 675f 6461 7461 5b22 616c 6275 6d61  ong_data["albuma
+00015100: 7274 6973 7422 5d2e 7661 6c75 6520 6f72  rtist"].value or
+00015110: 2022 556e 6b6e 6f77 6e20 416c 6275 6d20   "Unknown Album 
+00015120: 4172 7469 7374 2229 2c0a 2020 2020 2020  Artist"),.      
+00015130: 2020 5d0a 0a20 2020 2069 6620 7368 7566    ]..    if shuf
+00015140: 666c 655f 203d 3d20 303a 0a20 2020 2020  fle_ == 0:.     
+00015150: 2020 2073 6875 6666 6c65 5f20 3d20 5472     shuffle_ = Tr
+00015160: 7565 0a20 2020 2020 2020 2072 6573 6875  ue.        reshu
+00015170: 6666 6c65 203d 2046 616c 7365 0a20 2020  ffle = False.   
+00015180: 2065 6c69 6620 7368 7566 666c 655f 203d   elif shuffle_ =
+00015190: 3d20 313a 0a20 2020 2020 2020 2073 6875  = 1:.        shu
+000151a0: 6666 6c65 5f20 3d20 5472 7565 0a20 2020  ffle_ = True.   
+000151b0: 2020 2020 2072 6573 6875 6666 6c65 203d       reshuffle =
+000151c0: 2054 7275 650a 2020 2020 656c 6966 2073   True.    elif s
+000151d0: 6875 6666 6c65 5f20 3d3d 2032 3a0a 2020  huffle_ == 2:.  
+000151e0: 2020 2020 2020 7368 7566 666c 655f 203d        shuffle_ =
+000151f0: 2046 616c 7365 0a20 2020 2020 2020 2072   False.        r
+00015200: 6573 6875 6666 6c65 203d 2054 7275 650a  eshuffle = True.
+00015210: 2020 2020 656c 7365 3a20 2023 2073 6875      else:  # shu
+00015220: 6666 6c65 5f20 3d20 4e6f 6e65 0a20 2020  ffle_ = None.   
+00015230: 2020 2020 2073 6875 6666 6c65 5f20 3d20       shuffle_ = 
+00015240: 4661 6c73 650a 2020 2020 2020 2020 7265  False.        re
+00015250: 7368 7566 666c 6520 3d20 4661 6c73 650a  shuffle = False.
+00015260: 0a20 2020 2069 6620 7368 7566 666c 655f  .    if shuffle_
+00015270: 3a0a 2020 2020 2020 2020 7368 7566 666c  :.        shuffl
+00015280: 6528 706c 6179 6c69 7374 290a 2020 2020  e(playlist).    
+00015290: 656c 6966 2072 6576 6572 7365 3a0a 2020  elif reverse:.  
+000152a0: 2020 2020 2020 706c 6179 6c69 7374 2e72        playlist.r
+000152b0: 6576 6572 7365 2829 0a0a 2020 2020 6966  everse()..    if
+000152c0: 206e 6f74 2070 6c61 796c 6973 743a 0a20   not playlist:. 
+000152d0: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
+000152e0: 686f 2822 4e6f 2073 6f6e 6773 2066 6f75  ho("No songs fou
+000152f0: 6e64 206d 6174 6368 696e 6720 7461 6720  nd matching tag 
+00015300: 6372 6974 6572 6961 2e22 2c20 6667 3d22  criteria.", fg="
+00015310: 7265 6422 290a 2020 2020 656c 7365 3a0a  red").    else:.
+00015320: 2020 2020 2020 2020 766f 6c75 6d65 202f          volume /
+00015330: 3d20 3130 300a 2020 2020 2020 2020 6375  = 100.        cu
+00015340: 7273 6573 2e77 7261 7070 6572 280a 2020  rses.wrapper(.  
+00015350: 2020 2020 2020 2020 2020 5f70 6c61 792c            _play,
+00015360: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
+00015370: 796c 6973 742c 0a20 2020 2020 2020 2020  ylist,.         
+00015380: 2020 2076 6f6c 756d 652c 0a20 2020 2020     volume,.     
+00015390: 2020 2020 2020 206c 6f6f 702c 0a20 2020         loop,.   
+000153a0: 2020 2020 2020 2020 2063 6c69 7073 2c0a           clips,.
+000153b0: 2020 2020 2020 2020 2020 2020 7265 7368              resh
+000153c0: 7566 666c 652c 0a20 2020 2020 2020 2020  uffle,.         
+000153d0: 2020 2064 6973 636f 7264 2061 6e64 2063     discord and c
+000153e0: 616e 5f75 7064 6174 655f 6469 7363 6f72  an_update_discor
+000153f0: 642c 0a20 2020 2020 2020 2020 2020 2076  d,.            v
+00015400: 6973 7561 6c69 7a65 2c0a 2020 2020 2020  isualize,.      
+00015410: 2020 290a 0a20 2020 2069 6620 736f 6e67    )..    if song
+00015420: 735f 6e6f 745f 666f 756e 643a 0a20 2020  s_not_found:.   
+00015430: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
+00015440: 2822 536f 6e67 2066 696c 6573 206e 6f74  ("Song files not
+00015450: 2066 6f75 6e64 3a22 2c20 6667 3d22 7265   found:", fg="re
+00015460: 6422 290a 2020 2020 2020 2020 666f 7220  d").        for 
+00015470: 6465 7461 696c 7320 696e 2073 6f6e 6773  details in songs
+00015480: 5f6e 6f74 5f66 6f75 6e64 3a0a 2020 2020  _not_found:.    
+00015490: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
+000154a0: 6368 6f28 6622 5c74 7b64 6574 6169 6c73  cho(f"\t{details
+000154b0: 5b31 5d7d 2028 4944 207b 6465 7461 696c  [1]} (ID {detail
+000154c0: 735b 305d 7d29 222c 2066 673d 2272 6564  s[0]})", fg="red
+000154d0: 2229 0a0a 0a40 636c 692e 636f 6d6d 616e  ")...@cli.comman
+000154e0: 6428 290a 4063 6c69 636b 2e6f 7074 696f  d().@click.optio
+000154f0: 6e28 0a20 2020 2022 2d54 2f2d 6e54 222c  n(.    "-T/-nT",
+00015500: 0a20 2020 2022 2d2d 7461 672f 2d2d 6e6f  .    "--tag/--no
+00015510: 2d74 6167 222c 0a20 2020 2022 7265 6e61  -tag",.    "rena
+00015520: 6d69 6e67 5f74 6167 222c 0a20 2020 2064  ming_tag",.    d
+00015530: 6566 6175 6c74 3d46 616c 7365 2c0a 2020  efault=False,.  
+00015540: 2020 6865 6c70 3d22 4966 2070 6173 7365    help="If passe
+00015550: 642c 2072 656e 616d 6520 7461 6720 696e  d, rename tag in
+00015560: 7374 6561 6420 6f66 2073 6f6e 6720 2874  stead of song (t
+00015570: 7265 6174 2074 6865 2061 7267 756d 656e  reat the argumen
+00015580: 7473 2061 7320 7461 6773 292e 222c 0a29  ts as tags).",.)
+00015590: 0a40 636c 6963 6b2e 6172 6775 6d65 6e74  .@click.argument
+000155a0: 2822 6f72 6967 696e 616c 2229 0a40 636c  ("original").@cl
+000155b0: 6963 6b2e 6172 6775 6d65 6e74 2822 6e65  ick.argument("ne
+000155c0: 775f 6e61 6d65 2229 0a64 6566 2072 656e  w_name").def ren
+000155d0: 616d 6528 6f72 6967 696e 616c 2c20 6e65  ame(original, ne
+000155e0: 775f 6e61 6d65 2c20 7265 6e61 6d69 6e67  w_name, renaming
+000155f0: 5f74 6167 293a 0a20 2020 2022 2222 0a20  _tag):.    """. 
+00015600: 2020 2052 656e 616d 6520 6120 736f 6e67     Rename a song
+00015610: 2e0a 0a20 2020 2052 656e 616d 6573 2074  ...    Renames t
+00015620: 6865 2073 6f6e 6720 7769 7468 2074 6865  he song with the
+00015630: 2049 4420 4f52 4947 494e 414c 2074 6f20   ID ORIGINAL to 
+00015640: 4e45 575f 4e41 4d45 2e20 5468 6520 6578  NEW_NAME. The ex
+00015650: 7465 6e73 696f 6e20 6f66 2074 6865 0a20  tension of the. 
+00015660: 2020 2073 6f6e 6720 2865 2e67 2e20 272e     song (e.g. '.
+00015670: 7761 7627 2c20 272e 6d70 3327 2920 6973  wav', '.mp3') is
+00015680: 2070 7265 7365 7276 6564 e280 9464 6f20   preserved...do 
+00015690: 6e6f 7420 696e 636c 7564 6520 6974 2069  not include it i
+000156a0: 6e20 7468 6520 6e61 6d65 2e0a 0a20 2020  n the name...   
+000156b0: 2049 6620 7468 6520 272d 542f 2d2d 7461   If the '-T/--ta
+000156c0: 6727 2066 6c61 6720 6973 2070 6173 7365  g' flag is passe
+000156d0: 642c 2074 7265 6174 7320 4f52 4947 494e  d, treats ORIGIN
+000156e0: 414c 2061 7320 6120 7461 672c 2072 656e  AL as a tag, ren
+000156f0: 616d 696e 6720 616c 6c0a 2020 2020 6f63  aming all.    oc
+00015700: 7572 7265 6e63 6573 206f 6620 6974 2074  urrences of it t
+00015710: 6f20 4e45 575f 4e41 4d45 e280 9464 6f65  o NEW_NAME...doe
+00015720: 736e 2774 2063 6865 636b 2069 6620 7468  sn't check if th
+00015730: 6520 7461 6720 4e45 575f 4e41 4d45 2061  e tag NEW_NAME a
+00015740: 6c72 6561 6479 2c0a 2020 2020 6578 6973  lready,.    exis
+00015750: 7473 2c20 736f 2062 6520 6361 7265 6675  ts, so be carefu
+00015760: 6c21 0a20 2020 2022 2222 0a20 2020 2073  l!.    """.    s
+00015770: 6f6e 6773 5f66 696c 6520 3d20 6f70 656e  ongs_file = open
+00015780: 2863 6f6e 6669 672e 534f 4e47 535f 494e  (config.SONGS_IN
+00015790: 464f 5f50 4154 482c 2022 7222 2c20 656e  FO_PATH, "r", en
+000157a0: 636f 6469 6e67 3d22 7574 662d 3822 290a  coding="utf-8").
+000157b0: 2020 2020 6c69 6e65 7320 3d20 736f 6e67      lines = song
+000157c0: 735f 6669 6c65 2e72 6561 6428 292e 7370  s_file.read().sp
+000157d0: 6c69 746c 696e 6573 2829 0a20 2020 2069  litlines().    i
+000157e0: 6620 6e6f 7420 7265 6e61 6d69 6e67 5f74  f not renaming_t
+000157f0: 6167 3a0a 2020 2020 2020 2020 6966 206e  ag:.        if n
+00015800: 6f74 206f 7269 6769 6e61 6c2e 6973 6e75  ot original.isnu
+00015810: 6d65 7269 6328 293a 0a20 2020 2020 2020  meric():.       
+00015820: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
+00015830: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00015840: 2020 2253 6f6e 6720 4944 206d 7573 7420    "Song ID must 
+00015850: 6265 2061 6e20 696e 7465 6765 722e 2054  be an integer. T
+00015860: 6f20 7265 6e61 6d65 2061 2074 6167 2c20  o rename a tag, 
+00015870: 7061 7373 2074 6865 2027 2d54 2f2d 2d74  pass the '-T/--t
+00015880: 6167 2720 666c 6167 2e22 2c0a 2020 2020  ag' flag.",.    
+00015890: 2020 2020 2020 2020 2020 2020 6667 3d22              fg="
+000158a0: 7265 6422 2c0a 2020 2020 2020 2020 2020  red",.          
+000158b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+000158c0: 7265 7475 726e 0a0a 2020 2020 2020 2020  return..        
+000158d0: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
+000158e0: 656e 286c 696e 6573 2929 3a0a 2020 2020  en(lines)):.    
+000158f0: 2020 2020 2020 2020 6465 7461 696c 7320          details 
+00015900: 3d20 6c69 6e65 735b 695d 2e73 7472 6970  = lines[i].strip
+00015910: 2829 2e73 706c 6974 2822 7c22 290a 2020  ().split("|").  
+00015920: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
+00015930: 7061 7468 2e73 706c 6974 6578 7428 6465  path.splitext(de
+00015940: 7461 696c 735b 315d 295b 305d 203d 3d20  tails[1])[0] == 
+00015950: 6e65 775f 6e61 6d65 3a0a 2020 2020 2020  new_name:.      
+00015960: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+00015970: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
+00015980: 2020 2020 2020 2020 2020 2066 2241 2073             f"A s
+00015990: 6f6e 6720 7769 7468 2074 6865 206e 616d  ong with the nam
+000159a0: 6520 277b 6e65 775f 6e61 6d65 7d27 2061  e '{new_name}' a
+000159b0: 6c72 6561 6479 2065 7869 7374 732e 2050  lready exists. P
+000159c0: 6c65 6173 6520 6368 6f6f 7365 2061 6e6f  lease choose ano
+000159d0: 7468 6572 206e 616d 652e 222c 0a20 2020  ther name.",.   
+000159e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000159f0: 2066 673d 2272 6564 222c 0a20 2020 2020   fg="red",.     
+00015a00: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00015a10: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00015a20: 7572 6e0a 0a20 2020 2020 2020 206f 7269  urn..        ori
+00015a30: 6769 6e61 6c20 3d20 696e 7428 6f72 6967  ginal = int(orig
+00015a40: 696e 616c 290a 2020 2020 2020 2020 666f  inal).        fo
+00015a50: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
+00015a60: 286c 696e 6573 2929 3a0a 2020 2020 2020  (lines)):.      
+00015a70: 2020 2020 2020 6465 7461 696c 7320 3d20        details = 
+00015a80: 6c69 6e65 735b 695d 2e73 7472 6970 2829  lines[i].strip()
+00015a90: 2e73 706c 6974 2822 7c22 290a 2020 2020  .split("|").    
+00015aa0: 2020 2020 2020 2020 6966 2069 6e74 2864          if int(d
+00015ab0: 6574 6169 6c73 5b30 5d29 203d 3d20 6f72  etails[0]) == or
+00015ac0: 6967 696e 616c 3a0a 2020 2020 2020 2020  iginal:.        
+00015ad0: 2020 2020 2020 2020 6f6c 645f 7061 7468          old_path
+00015ae0: 203d 2064 6574 6169 6c73 5b31 5d0a 2020   = details[1].  
+00015af0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00015b00: 7461 696c 735b 315d 203d 206e 6577 5f6e  tails[1] = new_n
+00015b10: 616d 6520 2b20 6f73 2e70 6174 682e 7370  ame + os.path.sp
+00015b20: 6c69 7465 7874 286f 6c64 5f70 6174 6829  litext(old_path)
+00015b30: 5b31 5d0a 0a20 2020 2020 2020 2020 2020  [1]..           
+00015b40: 2020 2020 2066 756c 6c5f 736f 6e67 5f70       full_song_p
+00015b50: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
+00015b60: 696e 2863 6f6e 6669 672e 534f 4e47 535f  in(config.SONGS_
+00015b70: 4449 522c 206f 6c64 5f70 6174 6829 0a20  DIR, old_path). 
+00015b80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00015b90: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
+00015ba0: 6973 7473 2866 756c 6c5f 736f 6e67 5f70  ists(full_song_p
+00015bb0: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
+00015bc0: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+00015bd0: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
+00015be0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00015bf0: 2253 6f6e 6720 6669 6c65 2027 7b6f 6c64  "Song file '{old
+00015c00: 5f70 6174 687d 2720 2849 4420 7b6f 7269  _path}' (ID {ori
+00015c10: 6769 6e61 6c7d 2920 6e6f 7420 666f 756e  ginal}) not foun
+00015c20: 642e 222c 0a20 2020 2020 2020 2020 2020  d.",.           
+00015c30: 2020 2020 2020 2020 2020 2020 2066 673d               fg=
+00015c40: 2272 6564 222c 0a20 2020 2020 2020 2020  "red",.         
+00015c50: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00015c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015c70: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
+00015c80: 2020 2020 2020 2020 206c 696e 6573 5b69           lines[i
+00015c90: 5d20 3d20 227c 222e 6a6f 696e 2864 6574  ] = "|".join(det
+00015ca0: 6169 6c73 290a 2020 2020 2020 2020 2020  ails).          
+00015cb0: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
+00015cc0: 2e63 6c6f 7365 2829 0a20 2020 2020 2020  .close().       
+00015cd0: 2020 2020 2020 2020 2073 6f6e 6773 5f66           songs_f
+00015ce0: 696c 6520 3d20 6f70 656e 2863 6f6e 6669  ile = open(confi
+00015cf0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+00015d00: 482c 2022 7722 2c20 656e 636f 6469 6e67  H, "w", encoding
+00015d10: 3d22 7574 662d 3822 290a 2020 2020 2020  ="utf-8").      
+00015d20: 2020 2020 2020 2020 2020 736f 6e67 735f            songs_
+00015d30: 6669 6c65 2e77 7269 7465 2822 5c6e 222e  file.write("\n".
+00015d40: 6a6f 696e 286c 696e 6573 2929 0a0a 2020  join(lines))..  
+00015d50: 2020 2020 2020 2020 2020 2020 2020 6f73                os
+00015d60: 2e72 656e 616d 6528 0a20 2020 2020 2020  .rename(.       
+00015d70: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+00015d80: 7061 7468 2e6a 6f69 6e28 636f 6e66 6967  path.join(config
+00015d90: 2e53 4f4e 4753 5f44 4952 2c20 6f6c 645f  .SONGS_DIR, old_
+00015da0: 7061 7468 292c 0a20 2020 2020 2020 2020  path),.         
+00015db0: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
+00015dc0: 7468 2e6a 6f69 6e28 636f 6e66 6967 2e53  th.join(config.S
+00015dd0: 4f4e 4753 5f44 4952 2c20 6465 7461 696c  ONGS_DIR, detail
+00015de0: 735b 315d 292c 0a20 2020 2020 2020 2020  s[1]),.         
+00015df0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00015e00: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+00015e10: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
+00015e20: 2020 2020 2020 2020 2020 2066 2252 656e             f"Ren
+00015e30: 616d 6564 2073 6f6e 6720 277b 6f6c 645f  amed song '{old_
+00015e40: 7061 7468 7d27 2077 6974 6820 4944 207b  path}' with ID {
+00015e50: 6f72 6967 696e 616c 7d20 746f 2027 7b64  original} to '{d
+00015e60: 6574 6169 6c73 5b31 5d7d 272e 222c 0a20  etails[1]}'.",. 
+00015e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e80: 2020 2066 673d 2267 7265 656e 222c 0a20     fg="green",. 
+00015e90: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00015ea0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015eb0: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
+00015ec0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00015ed0: 2020 636c 6963 6b2e 7365 6368 6f28 6622    click.secho(f"
+00015ee0: 536f 6e67 2077 6974 6820 4944 207b 6f72  Song with ID {or
+00015ef0: 6967 696e 616c 7d20 6e6f 7420 666f 756e  iginal} not foun
+00015f00: 642e 222c 2066 673d 2272 6564 2229 0a20  d.", fg="red"). 
+00015f10: 2020 2020 2020 2020 2020 2073 6f6e 6773             songs
+00015f20: 5f66 696c 652e 636c 6f73 6528 290a 2020  _file.close().  
+00015f30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00015f40: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
+00015f50: 656e 286c 696e 6573 2929 3a0a 2020 2020  en(lines)):.    
+00015f60: 2020 2020 2020 2020 6465 7461 696c 7320          details 
+00015f70: 3d20 6c69 6e65 735b 695d 2e73 7472 6970  = lines[i].strip
+00015f80: 2829 2e73 706c 6974 2822 7c22 290a 2020  ().split("|").  
+00015f90: 2020 2020 2020 2020 2020 7461 6773 203d            tags =
+00015fa0: 2064 6574 6169 6c73 5b32 5d2e 7370 6c69   details[2].spli
+00015fb0: 7428 222c 2229 0a20 2020 2020 2020 2020  t(",").         
+00015fc0: 2020 2066 6f72 2074 2069 6e20 7261 6e67     for t in rang
+00015fd0: 6528 6c65 6e28 7461 6773 2929 3a0a 2020  e(len(tags)):.  
+00015fe0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00015ff0: 2074 6167 735b 745d 203d 3d20 6f72 6967   tags[t] == orig
+00016000: 696e 616c 3a0a 2020 2020 2020 2020 2020  inal:.          
+00016010: 2020 2020 2020 2020 2020 7461 6773 5b74            tags[t
+00016020: 5d20 3d20 6e65 775f 6e61 6d65 0a20 2020  ] = new_name.   
+00016030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016040: 2064 6574 6169 6c73 5b32 5d20 3d20 222c   details[2] = ",
+00016050: 222e 6a6f 696e 2874 6167 7329 0a0a 2020  ".join(tags)..  
+00016060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016070: 2020 6c69 6e65 735b 695d 203d 2022 7c22    lines[i] = "|"
+00016080: 2e6a 6f69 6e28 6465 7461 696c 7329 0a20  .join(details). 
+00016090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000160a0: 2020 2062 7265 616b 0a0a 2020 2020 2020     break..      
+000160b0: 2020 736f 6e67 735f 6669 6c65 2e63 6c6f    songs_file.clo
+000160c0: 7365 2829 0a20 2020 2020 2020 2073 6f6e  se().        son
+000160d0: 6773 5f66 696c 6520 3d20 6f70 656e 2863  gs_file = open(c
+000160e0: 6f6e 6669 672e 534f 4e47 535f 494e 464f  onfig.SONGS_INFO
+000160f0: 5f50 4154 482c 2022 7722 2c20 656e 636f  _PATH, "w", enco
+00016100: 6469 6e67 3d22 7574 662d 3822 290a 2020  ding="utf-8").  
+00016110: 2020 2020 2020 736f 6e67 735f 6669 6c65        songs_file
+00016120: 2e77 7269 7465 2822 5c6e 222e 6a6f 696e  .write("\n".join
+00016130: 286c 696e 6573 2929 0a0a 2020 2020 2020  (lines))..      
+00016140: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
+00016150: 2020 2020 2020 2020 2020 2066 2252 6570             f"Rep
+00016160: 6c61 6365 6420 616c 6c20 6f63 7572 7265  laced all ocurre
+00016170: 6e63 6573 206f 6620 7461 6720 277b 6f72  nces of tag '{or
+00016180: 6967 696e 616c 7d27 2074 6f20 277b 6e65  iginal}' to '{ne
+00016190: 775f 6e61 6d65 7d27 2e22 2c0a 2020 2020  w_name}'.",.    
+000161a0: 2020 2020 2020 2020 6667 3d22 6772 6565          fg="gree
+000161b0: 6e22 2c0a 2020 2020 2020 2020 290a 0a0a  n",.        )...
+000161c0: 4063 6c69 2e63 6f6d 6d61 6e64 2829 0a40  @cli.command().@
+000161d0: 636c 6963 6b2e 6172 6775 6d65 6e74 2822  click.argument("
+000161e0: 7068 7261 7365 2229 0a40 636c 6963 6b2e  phrase").@click.
+000161f0: 6f70 7469 6f6e 280a 2020 2020 222d 542f  option(.    "-T/
+00016200: 2d6e 5422 2c0a 2020 2020 222d 2d74 6167  -nT",.    "--tag
+00016210: 2f2d 2d6e 6f2d 7461 6722 2c0a 2020 2020  /--no-tag",.    
+00016220: 2273 6561 7263 6869 6e67 5f66 6f72 5f74  "searching_for_t
+00016230: 6167 7322 2c0a 2020 2020 6465 6661 756c  ags",.    defaul
+00016240: 743d 4661 6c73 652c 0a20 2020 2068 656c  t=False,.    hel
+00016250: 703d 2253 6561 7263 6865 7320 666f 7220  p="Searches for 
+00016260: 6d61 7463 6869 6e67 2074 6167 7320 696e  matching tags in
+00016270: 7374 6561 6420 6f66 2073 6f6e 6720 6e61  stead of song na
+00016280: 6d65 732e 222c 0a29 0a64 6566 2073 6561  mes.",.).def sea
+00016290: 7263 6828 7068 7261 7365 2c20 7365 6172  rch(phrase, sear
+000162a0: 6368 696e 675f 666f 725f 7461 6773 293a  ching_for_tags):
+000162b0: 0a20 2020 2022 2222 5365 6172 6368 6573  .    """Searches
+000162c0: 2066 6f72 2073 6f6e 6773 2074 6861 7420   for songs that 
+000162d0: 636f 6e74 6169 6e20 5048 5241 5345 2e20  contain PHRASE. 
+000162e0: 416c 6c20 736f 6e67 7320 7374 6172 7469  All songs starti
+000162f0: 6e67 2077 6974 6820 5048 5241 5345 0a20  ng with PHRASE. 
+00016300: 2020 2077 696c 6c20 6170 7065 6172 2062     will appear b
+00016310: 6566 6f72 6520 736f 6e67 7320 636f 6e74  efore songs cont
+00016320: 6169 6e69 6e67 2062 7574 206e 6f74 2073  aining but not s
+00016330: 7461 7274 696e 6720 7769 7468 2050 4852  tarting with PHR
+00016340: 4153 452e 2054 6869 730a 2020 2020 7365  ASE. This.    se
+00016350: 6172 6368 2069 7320 6361 7365 2d69 6e73  arch is case-ins
+00016360: 656e 7369 7469 7665 2e0a 0a20 2020 2049  ensitive...    I
+00016370: 6620 7468 6520 272d 5427 2066 6c61 6720  f the '-T' flag 
+00016380: 6973 2070 6173 7365 642c 2073 6561 7263  is passed, searc
+00016390: 6865 7320 666f 7220 7461 6773 2069 6e73  hes for tags ins
+000163a0: 7465 6164 206f 6620 736f 6e67 206e 616d  tead of song nam
+000163b0: 6573 2e22 2222 0a20 2020 2070 6872 6173  es.""".    phras
+000163c0: 6520 3d20 7068 7261 7365 2e6c 6f77 6572  e = phrase.lower
+000163d0: 2829 0a20 2020 2077 6974 6820 6f70 656e  ().    with open
+000163e0: 2863 6f6e 6669 672e 534f 4e47 535f 494e  (config.SONGS_IN
+000163f0: 464f 5f50 4154 482c 2022 7222 2c20 656e  FO_PATH, "r", en
+00016400: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
+00016410: 6173 2073 6f6e 6773 5f66 696c 653a 0a20  as songs_file:. 
+00016420: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
+00016430: 6172 6368 696e 675f 666f 725f 7461 6773  arching_for_tags
+00016440: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00016450: 7375 6c74 7320 3d20 5b5d 2c20 5b5d 2020  sults = [], []  
+00016460: 2320 7374 6172 7473 2c20 636f 6e74 6169  # starts, contai
+00016470: 6e73 2062 7574 2064 6f65 7320 6e6f 7420  ns but does not 
+00016480: 7374 6172 740a 2020 2020 2020 2020 2020  start.          
+00016490: 2020 666f 7220 6c69 6e65 2069 6e20 736f    for line in so
+000164a0: 6e67 735f 6669 6c65 3a0a 2020 2020 2020  ngs_file:.      
+000164b0: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
+000164c0: 642c 2073 6f6e 675f 6e61 6d65 2c20 7461  d, song_name, ta
+000164d0: 6773 2c20 2a5f 203d 206c 696e 652e 7374  gs, *_ = line.st
+000164e0: 7269 7028 292e 7370 6c69 7428 227c 2229  rip().split("|")
+000164f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016500: 2073 6f6e 675f 6964 203d 2069 6e74 2873   song_id = int(s
+00016510: 6f6e 675f 6964 290a 2020 2020 2020 2020  ong_id).        
+00016520: 2020 2020 2020 2020 736f 6e67 5f6e 616d          song_nam
+00016530: 6520 3d20 736f 6e67 5f6e 616d 652e 6c6f  e = song_name.lo
+00016540: 7765 7228 290a 0a20 2020 2020 2020 2020  wer()..         
+00016550: 2020 2020 2020 2069 6620 736f 6e67 5f6e         if song_n
+00016560: 616d 652e 7374 6172 7473 7769 7468 2870  ame.startswith(p
+00016570: 6872 6173 6529 3a0a 2020 2020 2020 2020  hrase):.        
+00016580: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00016590: 6c74 735b 305d 2e61 7070 656e 6428 736f  lts[0].append(so
+000165a0: 6e67 5f69 6429 0a20 2020 2020 2020 2020  ng_id).         
+000165b0: 2020 2020 2020 2065 6c69 6620 7068 7261         elif phra
+000165c0: 7365 2069 6e20 736f 6e67 5f6e 616d 653a  se in song_name:
+000165d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000165e0: 2020 2020 2072 6573 756c 7473 5b31 5d2e       results[1].
+000165f0: 6170 7065 6e64 2873 6f6e 675f 6964 290a  append(song_id).
+00016600: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00016610: 6e6f 7420 616e 7928 7265 7375 6c74 7329  not any(results)
+00016620: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00016630: 2020 636c 6963 6b2e 7365 6368 6f28 224e    click.secho("N
+00016640: 6f20 7265 7375 6c74 7320 666f 756e 642e  o results found.
+00016650: 222c 2066 673d 2272 6564 2229 0a20 2020  ", fg="red").   
+00016660: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00016670: 7572 6e0a 0a20 2020 2020 2020 2020 2020  urn..           
+00016680: 2073 6f6e 6773 5f66 696c 652e 7365 656b   songs_file.seek
+00016690: 2830 290a 2020 2020 2020 2020 2020 2020  (0).            
+000166a0: 666f 7220 6c69 6e65 2069 6e20 736f 6e67  for line in song
+000166b0: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
+000166c0: 2020 2020 2020 2020 6465 7461 696c 7320          details 
+000166d0: 3d20 6c69 6e65 2e73 7472 6970 2829 2e73  = line.strip().s
+000166e0: 706c 6974 2822 7c22 290a 2020 2020 2020  plit("|").      
+000166f0: 2020 2020 2020 2020 2020 6966 2069 6e74            if int
+00016700: 2864 6574 6169 6c73 5b30 5d29 2069 6e20  (details[0]) in 
+00016710: 7265 7375 6c74 735b 305d 3a0a 2020 2020  results[0]:.    
+00016720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016730: 6865 6c70 6572 732e 7072 696e 745f 656e  helpers.print_en
+00016740: 7472 7928 6465 7461 696c 732c 2070 6872  try(details, phr
+00016750: 6173 6529 0a0a 2020 2020 2020 2020 2020  ase)..          
+00016760: 2020 736f 6e67 735f 6669 6c65 2e73 6565    songs_file.see
+00016770: 6b28 3029 0a20 2020 2020 2020 2020 2020  k(0).           
+00016780: 2066 6f72 206c 696e 6520 696e 2073 6f6e   for line in son
+00016790: 6773 5f66 696c 653a 0a20 2020 2020 2020  gs_file:.       
+000167a0: 2020 2020 2020 2020 2064 6574 6169 6c73           details
+000167b0: 203d 206c 696e 652e 7374 7269 7028 292e   = line.strip().
+000167c0: 7370 6c69 7428 227c 2229 0a20 2020 2020  split("|").     
+000167d0: 2020 2020 2020 2020 2020 2069 6620 696e             if in
+000167e0: 7428 6465 7461 696c 735b 305d 2920 696e  t(details[0]) in
+000167f0: 2072 6573 756c 7473 5b31 5d3a 0a20 2020   results[1]:.   
+00016800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016810: 2068 656c 7065 7273 2e70 7269 6e74 5f65   helpers.print_e
+00016820: 6e74 7279 2864 6574 6169 6c73 2c20 7068  ntry(details, ph
+00016830: 7261 7365 290a 0a20 2020 2020 2020 2020  rase)..         
+00016840: 2020 2063 6c69 636b 2e73 6563 686f 280a     click.secho(.
+00016850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016860: 6622 466f 756e 6420 7b6c 656e 2872 6573  f"Found {len(res
+00016870: 756c 7473 5b30 5d29 202b 206c 656e 2872  ults[0]) + len(r
+00016880: 6573 756c 7473 5b31 5d29 7d20 736f 6e67  esults[1])} song
+00016890: 2873 292e 222c 0a20 2020 2020 2020 2020  (s).",.         
+000168a0: 2020 2020 2020 2066 673d 2267 7265 656e         fg="green
+000168b0: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
+000168c0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+000168d0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000168e0: 7473 203d 2073 6574 2829 2c20 7365 7428  ts = set(), set(
+000168f0: 2920 2023 2073 7461 7274 732c 2063 6f6e  )  # starts, con
+00016900: 7461 696e 7320 6275 7420 646f 6573 206e  tains but does n
+00016910: 6f74 2073 7461 7274 0a20 2020 2020 2020  ot start.       
+00016920: 2020 2020 2066 6f72 206c 696e 6520 696e       for line in
+00016930: 2073 6f6e 6773 5f66 696c 653a 0a20 2020   songs_file:.   
+00016940: 2020 2020 2020 2020 2020 2020 2073 6f6e               son
+00016950: 675f 6964 2c20 736f 6e67 5f6e 616d 652c  g_id, song_name,
+00016960: 2074 6167 732c 202a 5f20 3d20 6c69 6e65   tags, *_ = line
+00016970: 2e73 7472 6970 2829 2e73 706c 6974 2822  .strip().split("
+00016980: 7c22 290a 2020 2020 2020 2020 2020 2020  |").            
+00016990: 2020 2020 6966 2074 6167 733a 0a20 2020      if tags:.   
+000169a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000169b0: 2074 6167 7320 3d20 7461 6773 2e73 706c   tags = tags.spl
+000169c0: 6974 2822 2c22 290a 0a20 2020 2020 2020  it(",")..       
+000169d0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+000169e0: 2074 6167 2069 6e20 7461 6773 3a0a 2020   tag in tags:.  
+000169f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a00: 2020 2020 2020 7461 675f 6c6f 7765 7220        tag_lower 
+00016a10: 3d20 7461 672e 6c6f 7765 7228 290a 2020  = tag.lower().  
+00016a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a30: 2020 2020 2020 6966 2074 6167 5f6c 6f77        if tag_low
+00016a40: 6572 2e73 7461 7274 7377 6974 6828 7068  er.startswith(ph
+00016a50: 7261 7365 293a 0a20 2020 2020 2020 2020  rase):.         
+00016a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a70: 2020 2072 6573 756c 7473 5b30 5d2e 6164     results[0].ad
+00016a80: 6428 7461 6729 0a20 2020 2020 2020 2020  d(tag).         
+00016a90: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00016aa0: 6c69 6620 7068 7261 7365 2069 6e20 7461  lif phrase in ta
+00016ab0: 675f 6c6f 7765 723a 0a20 2020 2020 2020  g_lower:.       
+00016ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ad0: 2020 2020 2072 6573 756c 7473 5b31 5d2e       results[1].
+00016ae0: 6164 6428 7461 6729 0a0a 2020 2020 2020  add(tag)..      
+00016af0: 2020 2020 2020 6966 206e 6f74 2061 6e79        if not any
+00016b00: 2872 6573 756c 7473 293a 0a20 2020 2020  (results):.     
+00016b10: 2020 2020 2020 2020 2020 2063 6c69 636b             click
+00016b20: 2e73 6563 686f 2822 4e6f 2072 6573 756c  .secho("No resul
+00016b30: 7473 2066 6f75 6e64 2e22 2c20 6667 3d22  ts found.", fg="
+00016b40: 7265 6422 290a 2020 2020 2020 2020 2020  red").          
+00016b50: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
+00016b60: 2020 2020 2020 2020 2020 666f 7220 7461            for ta
+00016b70: 6720 696e 2072 6573 756c 7473 5b30 5d3a  g in results[0]:
+00016b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016b90: 2070 7269 6e74 2874 6167 290a 0a20 2020   print(tag)..   
+00016ba0: 2020 2020 2020 2020 2066 6f72 2074 6167           for tag
+00016bb0: 2069 6e20 7265 7375 6c74 735b 315d 3a0a   in results[1]:.
+00016bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016bd0: 7072 696e 7428 7461 6729 0a0a 2020 2020  print(tag)..    
+00016be0: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
+00016bf0: 6368 6f28 0a20 2020 2020 2020 2020 2020  cho(.           
+00016c00: 2020 2020 2066 2246 6f75 6e64 207b 6c65       f"Found {le
+00016c10: 6e28 7265 7375 6c74 735b 305d 2920 2b20  n(results[0]) + 
+00016c20: 6c65 6e28 7265 7375 6c74 735b 315d 297d  len(results[1])}
+00016c30: 2074 6167 2873 292e 222c 2066 673d 2267   tag(s).", fg="g
+00016c40: 7265 656e 220a 2020 2020 2020 2020 2020  reen".          
+00016c50: 2020 290a 0a0a 4063 6c69 2e63 6f6d 6d61    )...@cli.comma
+00016c60: 6e64 286e 616d 653d 226c 6973 7422 290a  nd(name="list").
+00016c70: 4063 6c69 636b 2e61 7267 756d 656e 7428  @click.argument(
+00016c80: 2273 6561 7263 685f 7461 6773 222c 206d  "search_tags", m
+00016c90: 6574 6176 6172 3d22 5441 4753 222c 206e  etavar="TAGS", n
+00016ca0: 6172 6773 3d2d 3129 0a40 636c 6963 6b2e  args=-1).@click.
+00016cb0: 6f70 7469 6f6e 280a 2020 2020 222d 7322  option(.    "-s"
+00016cc0: 2c0a 2020 2020 222d 2d73 6f72 7422 2c0a  ,.    "--sort",.
+00016cd0: 2020 2020 2273 6f72 745f 222c 0a20 2020      "sort_",.   
+00016ce0: 2074 7970 653d 636c 6963 6b2e 4368 6f69   type=click.Choi
+00016cf0: 6365 280a 2020 2020 2020 2020 280a 2020  ce(.        (.  
+00016d00: 2020 2020 2020 2020 2020 226e 6f6e 6522            "none"
+00016d10: 2c0a 2020 2020 2020 2020 2020 2020 226e  ,.            "n
+00016d20: 616d 6522 2c0a 2020 2020 2020 2020 2020  ame",.          
+00016d30: 2020 226e 222c 0a20 2020 2020 2020 2020    "n",.         
+00016d40: 2020 2022 7365 6373 2d6c 6973 7465 6e65     "secs-listene
+00016d50: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
+00016d60: 2273 222c 0a20 2020 2020 2020 2020 2020  "s",.           
+00016d70: 2022 6475 7261 7469 6f6e 222c 0a20 2020   "duration",.   
+00016d80: 2020 2020 2020 2020 2022 6422 2c0a 2020           "d",.  
+00016d90: 2020 2020 2020 2020 2020 2274 696d 6573            "times
+00016da0: 2d6c 6973 7465 6e65 6422 2c0a 2020 2020  -listened",.    
+00016db0: 2020 2020 2020 2020 2274 222c 0a20 2020          "t",.   
+00016dc0: 2020 2020 2029 0a20 2020 2029 2c0a 2020       ).    ),.  
+00016dd0: 2020 6865 6c70 3d22 536f 7274 2062 7920    help="Sort by 
+00016de0: 6e61 6d65 2c20 7365 636f 6e64 7320 6c69  name, seconds li
+00016df0: 7374 656e 6564 2c20 6f72 2074 696d 6573  stened, or times
+00016e00: 206c 6973 7465 6e65 6420 2873 6563 6f6e   listened (secon
+00016e10: 6473 2f73 6f6e 6720 6475 7261 7469 6f6e  ds/song duration
+00016e20: 292e 2047 7265 6174 6573 7420 6669 7273  ). Greatest firs
+00016e30: 742e 222c 0a20 2020 2064 6566 6175 6c74  t.",.    default
+00016e40: 3d22 6e6f 6e65 222c 0a20 2020 2073 686f  ="none",.    sho
+00016e50: 775f 6465 6661 756c 743d 5472 7565 2c0a  w_default=True,.
+00016e60: 290a 4063 6c69 636b 2e6f 7074 696f 6e28  ).@click.option(
+00016e70: 0a20 2020 2022 2d52 2f2d 6e52 222c 0a20  .    "-R/-nR",. 
+00016e80: 2020 2022 2d2d 7265 7665 7273 652f 2d2d     "--reverse/--
+00016e90: 6e6f 2d72 6576 6572 7365 222c 0a20 2020  no-reverse",.   
+00016ea0: 2022 7265 7665 7273 655f 222c 0a20 2020   "reverse_",.   
+00016eb0: 2064 6566 6175 6c74 3d46 616c 7365 2c0a   default=False,.
+00016ec0: 2020 2020 6865 6c70 3d22 5265 7665 7273      help="Revers
+00016ed0: 6520 7468 6520 736f 7274 696e 6720 6f72  e the sorting or
+00016ee0: 6465 7220 2867 7265 6174 6573 7420 6669  der (greatest fi
+00016ef0: 7273 7429 2e22 2c0a 290a 4063 6c69 636b  rst).",.).@click
+00016f00: 2e6f 7074 696f 6e28 0a20 2020 2022 2d54  .option(.    "-T
+00016f10: 2f2d 6e54 222c 0a20 2020 2022 2d2d 7461  /-nT",.    "--ta
+00016f20: 672f 2d2d 6e6f 2d74 6167 222c 0a20 2020  g/--no-tag",.   
+00016f30: 2022 6c69 7374 696e 675f 7461 6773 222c   "listing_tags",
+00016f40: 0a20 2020 2064 6566 6175 6c74 3d46 616c  .    default=Fal
+00016f50: 7365 2c0a 2020 2020 6865 6c70 3d22 4c69  se,.    help="Li
+00016f60: 7374 2074 6167 7320 6d61 7463 6869 6e67  st tags matching
+00016f70: 2054 4147 5320 696e 7374 6561 6420 6f66   TAGS instead of
+00016f80: 2073 6f6e 6773 2e22 2c0a 290a 4063 6c69   songs.",.).@cli
+00016f90: 636b 2e6f 7074 696f 6e28 0a20 2020 2022  ck.option(.    "
+00016fa0: 2d79 222c 0a20 2020 2022 2d2d 7965 6172  -y",.    "--year
+00016fb0: 222c 0a20 2020 2022 7965 6172 222c 0a20  ",.    "year",. 
+00016fc0: 2020 2068 656c 703d 2253 686f 7720 7469     help="Show ti
+00016fd0: 6d65 206c 6973 7465 6e65 6420 666f 7220  me listened for 
+00016fe0: 6120 7370 6563 6966 6963 2079 6561 722c  a specific year,
+00016ff0: 2069 6e73 7465 6164 206f 6620 7468 6520   instead of the 
+00017000: 746f 7461 6c2e 2050 6173 7369 6e67 2027  total. Passing '
+00017010: 6375 7227 2077 696c 6c20 7368 6f77 2074  cur' will show t
+00017020: 6865 2074 696d 6520 6c69 7374 656e 6564  he time listened
+00017030: 2066 6f72 2074 6865 2063 7572 7265 6e74   for the current
+00017040: 2079 6561 722e 222c 0a29 0a40 636c 6963   year.",.).@clic
+00017050: 6b2e 6f70 7469 6f6e 2822 2d74 222c 2022  k.option("-t", "
+00017060: 2d2d 746f 7022 2c20 2274 6f70 222c 2074  --top", "top", t
+00017070: 7970 653d 696e 742c 2068 656c 703d 2253  ype=int, help="S
+00017080: 686f 7720 7468 6520 746f 7020 6e20 736f  how the top n so
+00017090: 6e67 732f 7461 6773 2e22 290a 4063 6c69  ngs/tags.").@cli
+000170a0: 636b 2e6f 7074 696f 6e28 0a20 2020 2022  ck.option(.    "
+000170b0: 2d4d 2f2d 6e4d 222c 0a20 2020 2022 2d2d  -M/-nM",.    "--
+000170c0: 6d61 7463 682d 616c 6c2f 2d2d 6e6f 2d6d  match-all/--no-m
+000170d0: 6174 6368 2d61 6c6c 222c 0a20 2020 2022  atch-all",.    "
+000170e0: 6d61 7463 685f 616c 6c22 2c0a 2020 2020  match_all",.    
+000170f0: 6465 6661 756c 743d 4661 6c73 652c 0a20  default=False,. 
+00017100: 2020 2068 656c 703d 2253 686f 7773 2073     help="Shows s
+00017110: 6f6e 6773 2074 6861 7420 6d61 7463 6820  ongs that match 
+00017120: 616c 6c20 7461 6773 2069 6e73 7465 6164  all tags instead
+00017130: 206f 6620 616e 7920 7461 672e 2049 676e   of any tag. Ign
+00017140: 6f72 6564 2069 6620 272d 742f 2d2d 7461  ored if '-t/--ta
+00017150: 6727 2069 7320 7061 7373 6564 2e22 2c0a  g' is passed.",.
+00017160: 290a 6465 6620 6c69 7374 5f28 7365 6172  ).def list_(sear
+00017170: 6368 5f74 6167 732c 206c 6973 7469 6e67  ch_tags, listing
+00017180: 5f74 6167 732c 2079 6561 722c 2073 6f72  _tags, year, sor
+00017190: 745f 2c20 746f 702c 2072 6576 6572 7365  t_, top, reverse
+000171a0: 5f2c 206d 6174 6368 5f61 6c6c 293a 0a20  _, match_all):. 
+000171b0: 2020 2022 2222 4c69 7374 2074 6865 2065     """List the e
+000171c0: 6e74 7269 6573 2066 6f72 2061 6c6c 2073  ntries for all s
+000171d0: 6f6e 6773 2e0a 0a20 2020 204f 7574 7075  ongs...    Outpu
+000171e0: 7420 666f 726d 6174 3a20 4944 2c20 6e61  t format: ID, na
+000171f0: 6d65 2c20 6475 7261 7469 6f6e 2c20 6c69  me, duration, li
+00017200: 7374 656e 2074 696d 652c 2074 696d 6573  sten time, times
+00017210: 206c 6973 7465 6e65 642c 205b 636c 6970   listened, [clip
+00017220: 2d73 7461 7274 2c20 636c 6970 2d65 6e64  -start, clip-end
+00017230: 5d20 6966 2063 6c69 7020 6578 6973 7473  ] if clip exists
+00017240: 2c20 636f 6d6d 612d 7365 7061 7261 7465  , comma-separate
+00017250: 6420 7461 6773 2069 6620 616e 790a 0a20  d tags if any.. 
+00017260: 2020 2049 6620 7468 6520 272d 5427 2066     If the '-T' f
+00017270: 6c61 6720 6973 2070 6173 7365 642c 2074  lag is passed, t
+00017280: 6167 7320 7769 6c6c 2062 6520 6c69 7374  ags will be list
+00017290: 6564 2069 6e73 7465 6164 206f 6620 736f  ed instead of so
+000172a0: 6e67 732e 0a0a 2020 2020 4f75 7470 7574  ngs...    Output
+000172b0: 2066 6f72 6d61 743a 2074 6167 2c20 6475   format: tag, du
+000172c0: 7261 7469 6f6e 2c20 6c69 7374 656e 2074  ration, listen t
+000172d0: 696d 652c 2074 696d 6573 206c 6973 7465  ime, times liste
+000172e0: 6e65 640a 0a20 2020 2049 6620 5441 4753  ned..    If TAGS
+000172f0: 2061 7265 2070 6173 7365 642c 2061 6e79   are passed, any
+00017300: 2074 6167 2f73 6f6e 6720 6d61 7463 6869   tag/song matchi
+00017310: 6e67 2061 6e79 2074 6167 2069 6e20 5441  ng any tag in TA
+00017320: 4753 2077 696c 6c20 6265 206c 6973 7465  GS will be liste
+00017330: 642c 0a20 2020 2075 6e6c 6573 7320 7468  d,.    unless th
+00017340: 6520 272d 4d2f 2d2d 6d61 7463 682d 616c  e '-M/--match-al
+00017350: 6c27 2066 6c61 6720 6973 2070 6173 7365  l' flag is passe
+00017360: 642c 2069 6e20 7768 6963 6820 6361 7365  d, in which case
+00017370: 2065 7665 7279 2074 6167 206d 7573 740a   every tag must.
+00017380: 2020 2020 6265 206d 6174 6368 6564 2028      be matched (
+00017390: 6967 6e6f 7265 6420 6966 206c 6973 7469  ignored if listi
+000173a0: 6e67 2074 6167 7329 2e0a 2020 2020 2222  ng tags)..    ""
+000173b0: 220a 2020 2020 6966 2074 6f70 2069 7320  ".    if top is 
+000173c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000173d0: 2020 6966 2074 6f70 203c 2031 3a0a 2020    if top < 1:.  
+000173e0: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+000173f0: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
+00017400: 2020 2020 2020 2022 5468 6520 6f70 7469         "The opti
+00017410: 6f6e 2027 2d74 2f2d 2d74 6f70 2720 6d75  on '-t/--top' mu
+00017420: 7374 2062 6520 6120 706f 7369 7469 7665  st be a positive
+00017430: 206e 756d 6265 722e 222c 2066 673d 2272   number.", fg="r
+00017440: 6564 220a 2020 2020 2020 2020 2020 2020  ed".            
+00017450: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00017460: 7475 726e 0a0a 2020 2020 6966 2079 6561  turn..    if yea
+00017470: 7220 6973 204e 6f6e 653a 0a20 2020 2020  r is None:.     
+00017480: 2020 2073 7461 7473 5f70 6174 6820 3d20     stats_path = 
+00017490: 636f 6e66 6967 2e54 4f54 414c 5f53 5441  config.TOTAL_STA
+000174a0: 5453 5f50 4154 480a 2020 2020 656c 7365  TS_PATH.    else
+000174b0: 3a0a 2020 2020 2020 2020 6966 2079 6561  :.        if yea
+000174c0: 7220 3d3d 2022 6375 7222 3a0a 2020 2020  r == "cur":.    
+000174d0: 2020 2020 2020 2020 7965 6172 203d 2063          year = c
+000174e0: 6f6e 6669 672e 4355 525f 5945 4152 0a20  onfig.CUR_YEAR. 
+000174f0: 2020 2020 2020 2020 2020 2073 7461 7473             stats
+00017500: 5f70 6174 6820 3d20 636f 6e66 6967 2e43  _path = config.C
+00017510: 5552 5f59 4541 525f 5354 4154 535f 5041  UR_YEAR_STATS_PA
+00017520: 5448 0a20 2020 2020 2020 2065 6c73 653a  TH.        else:
+00017530: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00017540: 6e6f 7420 7965 6172 2e69 7364 6967 6974  not year.isdigit
+00017550: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+00017560: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
+00017570: 2259 6561 7220 6d75 7374 2062 6520 6120  "Year must be a 
+00017580: 6e75 6d62 6572 206f 7220 2763 7572 272e  number or 'cur'.
+00017590: 222c 2066 673d 2272 6564 2229 0a20 2020  ", fg="red").   
+000175a0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000175b0: 7572 6e0a 2020 2020 2020 2020 2020 2020  urn.            
+000175c0: 7374 6174 735f 7061 7468 203d 206f 732e  stats_path = os.
+000175d0: 7061 7468 2e6a 6f69 6e28 636f 6e66 6967  path.join(config
+000175e0: 2e53 5441 5453 5f44 4952 2c20 6622 7b79  .STATS_DIR, f"{y
+000175f0: 6561 727d 2e74 7874 2229 0a20 2020 2020  ear}.txt").     
+00017600: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+00017610: 2e70 6174 682e 6578 6973 7473 2873 7461  .path.exists(sta
+00017620: 7473 5f70 6174 6829 3a0a 2020 2020 2020  ts_path):.      
+00017630: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+00017640: 7365 6368 6f28 6622 4e6f 2073 7461 7473  secho(f"No stats
+00017650: 2066 6f75 6e64 2066 6f72 2079 6561 7220   found for year 
+00017660: 7b79 6561 727d 2e22 2c20 6667 3d22 7265  {year}.", fg="re
+00017670: 6422 290a 2020 2020 2020 2020 2020 2020  d").            
+00017680: 2020 2020 7265 7475 726e 0a0a 2020 2020      return..    
+00017690: 6966 2073 6561 7263 685f 7461 6773 3a0a  if search_tags:.
+000176a0: 2020 2020 2020 2020 7365 6172 6368 5f74          search_t
+000176b0: 6167 7320 3d20 7365 7428 7365 6172 6368  ags = set(search
+000176c0: 5f74 6167 7329 0a0a 2020 2020 6e75 6d5f  _tags)..    num_
+000176d0: 6c69 6e65 7320 3d20 300a 2020 2020 736f  lines = 0.    so
+000176e0: 6e67 735f 6e6f 745f 666f 756e 6420 3d20  ngs_not_found = 
+000176f0: 5b5d 0a0a 2020 2020 6966 206c 6973 7469  []..    if listi
+00017700: 6e67 5f74 6167 733a 0a20 2020 2020 2020  ng_tags:.       
+00017710: 2077 6974 6820 280a 2020 2020 2020 2020   with (.        
+00017720: 2020 2020 6f70 656e 2863 6f6e 6669 672e      open(config.
+00017730: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
+00017740: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
+00017750: 7574 662d 3822 2920 6173 2073 6f6e 6773  utf-8") as songs
+00017760: 5f66 696c 652c 0a20 2020 2020 2020 2020  _file,.         
+00017770: 2020 206f 7065 6e28 7374 6174 735f 7061     open(stats_pa
+00017780: 7468 2c20 2272 222c 2065 6e63 6f64 696e  th, "r", encodin
+00017790: 673d 2275 7466 2d38 2229 2061 7320 7374  g="utf-8") as st
+000177a0: 6174 735f 6669 6c65 2c0a 2020 2020 2020  ats_file,.      
+000177b0: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+000177c0: 2073 6f6e 6773 5f6c 696e 6573 203d 2073   songs_lines = s
+000177d0: 6f6e 6773 5f66 696c 652e 7265 6164 6c69  ongs_file.readli
+000177e0: 6e65 7328 290a 2020 2020 2020 2020 2020  nes().          
+000177f0: 2020 7374 6174 7320 3d20 6469 6374 280a    stats = dict(.
 00017800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017810: 2020 2020 2020 2020 2074 6167 735b 7461           tags[ta
-00017820: 675d 5b30 5d20 2b20 7374 6174 735b 736f  g][0] + stats[so
-00017830: 6e67 5f69 645d 2c0a 2020 2020 2020 2020  ng_id],.        
-00017840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017850: 2020 2020 2020 2020 7461 6773 5b74 6167          tags[tag
-00017860: 5d5b 315d 0a20 2020 2020 2020 2020 2020  ][1].           
-00017870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017880: 2020 2020 202b 206d 7573 6963 5f74 6167       + music_tag
-00017890: 2e6c 6f61 645f 6669 6c65 280a 2020 2020  .load_file(.    
-000178a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017810: 6d61 7028 0a20 2020 2020 2020 2020 2020  map(.           
+00017820: 2020 2020 2020 2020 206c 616d 6264 6120           lambda 
+00017830: 743a 2028 696e 7428 745b 305d 292c 2920  t: (int(t[0]),) 
+00017840: 2b20 745b 313a 5d2c 0a20 2020 2020 2020  + t[1:],.       
+00017850: 2020 2020 2020 2020 2020 2020 206d 6170               map
+00017860: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00017870: 2020 2020 2020 2020 2020 6c61 6d62 6461            lambda
+00017880: 2078 3a20 7475 706c 6528 6d61 7028 666c   x: tuple(map(fl
+00017890: 6f61 742c 2078 2e73 7472 6970 2829 2e73  oat, x.strip().s
+000178a0: 706c 6974 2822 7c22 2929 292c 0a20 2020  plit("|"))),.   
 000178b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000178c0: 6f73 2e70 6174 682e 6a6f 696e 2863 6f6e  os.path.join(con
-000178d0: 6669 672e 534f 4e47 535f 4449 522c 2073  fig.SONGS_DIR, s
-000178e0: 6f6e 675f 6e61 6d65 290a 2020 2020 2020  ong_name).      
-000178f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017900: 2020 2020 2020 2020 2020 295b 2223 6c65            )["#le
-00017910: 6e67 7468 225d 2e76 616c 7565 2c0a 2020  ngth"].value,.  
-00017920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017930: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-00017940: 2020 2020 2020 2020 2074 6167 5f69 7465           tag_ite
-00017950: 6d73 203d 206c 6973 7428 7461 6773 2e69  ms = list(tags.i
-00017960: 7465 6d73 2829 290a 0a20 2020 2020 2020  tems())..       
-00017970: 2020 2020 2069 6620 736f 7274 5f20 213d       if sort_ !=
-00017980: 2022 6e6f 6e65 223a 0a20 2020 2020 2020   "none":.       
-00017990: 2020 2020 2020 2020 2069 6620 736f 7274           if sort
-000179a0: 5f20 696e 2028 226e 616d 6522 2c20 226e  _ in ("name", "n
-000179b0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-000179c0: 2020 2020 2020 2020 736f 7274 5f6b 6579          sort_key
-000179d0: 203d 206c 616d 6264 6120 743a 2074 5b30   = lambda t: t[0
-000179e0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000179f0: 2020 656c 6966 2073 6f72 745f 2069 6e20    elif sort_ in 
-00017a00: 2822 7365 6373 2d6c 6973 7465 6e65 6422  ("secs-listened"
-00017a10: 2c20 2273 2229 3a0a 2020 2020 2020 2020  , "s"):.        
-00017a20: 2020 2020 2020 2020 2020 2020 736f 7274              sort
-00017a30: 5f6b 6579 203d 206c 616d 6264 6120 743a  _key = lambda t:
-00017a40: 2074 5b31 5d5b 305d 0a20 2020 2020 2020   t[1][0].       
-00017a50: 2020 2020 2020 2020 2065 6c69 6620 736f           elif so
-00017a60: 7274 5f20 696e 2028 2264 7572 6174 696f  rt_ in ("duratio
-00017a70: 6e22 2c20 2264 2229 3a0a 2020 2020 2020  n", "d"):.      
-00017a80: 2020 2020 2020 2020 2020 2020 2020 736f                so
-00017a90: 7274 5f6b 6579 203d 206c 616d 6264 6120  rt_key = lambda 
-00017aa0: 743a 2074 5b31 5d5b 315d 0a20 2020 2020  t: t[1][1].     
-00017ab0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00017ac0: 736f 7274 5f20 696e 2028 2274 696d 6573  sort_ in ("times
-00017ad0: 2d6c 6973 7465 6e65 6422 2c20 2274 2229  -listened", "t")
-00017ae0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00017af0: 2020 2020 2020 736f 7274 5f6b 6579 203d        sort_key =
-00017b00: 206c 616d 6264 6120 743a 2074 5b31 5d5b   lambda t: t[1][
-00017b10: 305d 202f 2074 5b31 5d5b 315d 0a20 2020  0] / t[1][1].   
-00017b20: 2020 2020 2020 2020 2020 2020 2074 6167               tag
-00017b30: 5f69 7465 6d73 2e73 6f72 7428 0a20 2020  _items.sort(.   
-00017b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b50: 206b 6579 3d73 6f72 745f 6b65 792c 0a20   key=sort_key,. 
-00017b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b70: 2020 2072 6576 6572 7365 3d6e 6f74 2072     reverse=not r
-00017b80: 6576 6572 7365 5f2c 0a20 2020 2020 2020  everse_,.       
-00017b90: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00017ba0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017bb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00017bc0: 6e6f 7420 7265 7665 7273 655f 3a0a 2020  not reverse_:.  
+000178c0: 2020 2020 2073 7461 7473 5f66 696c 652e       stats_file.
+000178d0: 7265 6164 6c69 6e65 7328 292c 0a20 2020  readlines(),.   
+000178e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000178f0: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+00017900: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00017910: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
+00017920: 2074 6167 7320 3d20 6465 6661 756c 7464   tags = defaultd
+00017930: 6963 7428 6c61 6d62 6461 3a20 2830 2e30  ict(lambda: (0.0
+00017940: 2c20 302e 3029 290a 2020 2020 2020 2020  , 0.0)).        
+00017950: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+00017960: 6765 286c 656e 2873 6f6e 6773 5f6c 696e  ge(len(songs_lin
+00017970: 6573 2929 3a0a 2020 2020 2020 2020 2020  es)):.          
+00017980: 2020 2020 2020 736f 6e67 5f69 642c 2073        song_id, s
+00017990: 6f6e 675f 6e61 6d65 2c20 7461 675f 7374  ong_name, tag_st
+000179a0: 7269 6e67 203d 2028 0a20 2020 2020 2020  ring = (.       
+000179b0: 2020 2020 2020 2020 2020 2020 2073 6f6e               son
+000179c0: 6773 5f6c 696e 6573 5b69 5d2e 7374 7269  gs_lines[i].stri
+000179d0: 7028 292e 7370 6c69 7428 227c 2229 5b30  p().split("|")[0
+000179e0: 3a33 5d0a 2020 2020 2020 2020 2020 2020  :3].            
+000179f0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00017a00: 2020 2020 2020 6966 206e 6f74 206f 732e        if not os.
+00017a10: 7061 7468 2e65 7869 7374 7328 6f73 2e70  path.exists(os.p
+00017a20: 6174 682e 6a6f 696e 2863 6f6e 6669 672e  ath.join(config.
+00017a30: 534f 4e47 535f 4449 522c 2073 6f6e 675f  SONGS_DIR, song_
+00017a40: 6e61 6d65 2929 3a0a 2020 2020 2020 2020  name)):.        
+00017a50: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+00017a60: 735f 6e6f 745f 666f 756e 642e 6170 7065  s_not_found.appe
+00017a70: 6e64 2828 736f 6e67 5f69 642c 2073 6f6e  nd((song_id, son
+00017a80: 675f 6e61 6d65 2929 0a20 2020 2020 2020  g_name)).       
+00017a90: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00017aa0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00017ab0: 2020 2020 2020 736f 6e67 5f69 6420 3d20        song_id = 
+00017ac0: 696e 7428 736f 6e67 5f69 6429 0a20 2020  int(song_id).   
+00017ad0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00017ae0: 7461 675f 7374 7269 6e67 3a0a 2020 2020  tag_string:.    
+00017af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017b00: 666f 7220 7461 6720 696e 2074 6167 5f73  for tag in tag_s
+00017b10: 7472 696e 672e 7370 6c69 7428 222c 2229  tring.split(",")
+00017b20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017b30: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00017b40: 2073 6561 7263 685f 7461 6773 206f 7220   search_tags or 
+00017b50: 7461 6720 696e 2073 6561 7263 685f 7461  tag in search_ta
+00017b60: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00017b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017b80: 7461 6773 5b74 6167 5d20 3d20 280a 2020  tags[tag] = (.  
+00017b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ba0: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+00017bb0: 6773 5b74 6167 5d5b 305d 202b 2073 7461  gs[tag][0] + sta
+00017bc0: 7473 5b73 6f6e 675f 6964 5d2c 0a20 2020  ts[song_id],.   
 00017bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017be0: 2020 7461 675f 6974 656d 732e 7265 7665    tag_items.reve
-00017bf0: 7273 6528 290a 0a20 2020 2020 2020 2020  rse()..         
-00017c00: 2020 2066 6f72 2074 6167 2c20 286c 6973     for tag, (lis
-00017c10: 7465 6e5f 7469 6d65 2c20 746f 7461 6c5f  ten_time, total_
-00017c20: 6475 7261 7469 6f6e 2920 696e 2074 6167  duration) in tag
-00017c30: 5f69 7465 6d73 3a0a 2020 2020 2020 2020  _items:.        
-00017c40: 2020 2020 2020 2020 636c 6963 6b2e 6563          click.ec
-00017c50: 686f 280a 2020 2020 2020 2020 2020 2020  ho(.            
-00017c60: 2020 2020 2020 2020 6622 7b74 6167 7d20          f"{tag} 
-00017c70: 7b63 6c69 636b 2e73 7479 6c65 2868 656c  {click.style(hel
-00017c80: 7065 7273 2e66 6f72 6d61 745f 7365 636f  pers.format_seco
-00017c90: 6e64 7328 746f 7461 6c5f 6475 7261 7469  nds(total_durati
-00017ca0: 6f6e 2c20 7368 6f77 5f64 6563 696d 616c  on, show_decimal
-00017cb0: 3d54 7275 6529 2c20 6667 3d27 6272 6967  =True), fg='brig
-00017cc0: 6874 5f62 6c61 636b 2729 7d20 7b63 6c69  ht_black')} {cli
-00017cd0: 636b 2e73 7479 6c65 2868 656c 7065 7273  ck.style(helpers
-00017ce0: 2e66 6f72 6d61 745f 7365 636f 6e64 7328  .format_seconds(
-00017cf0: 6c69 7374 656e 5f74 696d 652c 2073 686f  listen_time, sho
-00017d00: 775f 6465 6369 6d61 6c3d 5472 7565 292c  w_decimal=True),
-00017d10: 2066 673d 2779 656c 6c6f 7727 297d 207b   fg='yellow')} {
-00017d20: 636c 6963 6b2e 7374 796c 6528 2725 2e32  click.style('%.2
-00017d30: 6627 2528 6c69 7374 656e 5f74 696d 652f  f'%(listen_time/
-00017d40: 746f 7461 6c5f 6475 7261 7469 6f6e 292c  total_duration),
-00017d50: 2066 673d 2767 7265 656e 2729 7d22 0a20   fg='green')}". 
-00017d60: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00017d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017d80: 206e 756d 5f6c 696e 6573 202b 3d20 310a   num_lines += 1.
-00017d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017da0: 6966 2074 6f70 2069 7320 6e6f 7420 4e6f  if top is not No
-00017db0: 6e65 2061 6e64 206e 756d 5f6c 696e 6573  ne and num_lines
-00017dc0: 203d 3d20 746f 703a 0a20 2020 2020 2020   == top:.       
-00017dd0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-00017de0: 616b 0a20 2020 2020 2020 2020 2020 2069  ak.            i
-00017df0: 6620 736f 6e67 735f 6e6f 745f 666f 756e  f songs_not_foun
-00017e00: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
-00017e10: 2020 2063 6c69 636b 2e73 6563 686f 2822     click.secho("
-00017e20: 536f 6e67 2066 696c 6573 206e 6f74 2066  Song files not f
-00017e30: 6f75 6e64 3a22 2c20 6667 3d22 7265 6422  ound:", fg="red"
-00017e40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00017e50: 2020 666f 7220 736f 6e67 5f69 642c 2073    for song_id, s
-00017e60: 6f6e 675f 6e61 6d65 2069 6e20 736f 6e67  ong_name in song
-00017e70: 735f 6e6f 745f 666f 756e 643a 0a20 2020  s_not_found:.   
-00017e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e90: 2063 6c69 636b 2e73 6563 686f 2866 225c   click.secho(f"\
-00017ea0: 747b 736f 6e67 5f6e 616d 657d 2028 4944  t{song_name} (ID
-00017eb0: 207b 736f 6e67 5f69 647d 2922 2c20 6667   {song_id})", fg
-00017ec0: 3d22 7265 6422 290a 2020 2020 2020 2020  ="red").        
-00017ed0: 7265 7475 726e 0a0a 2020 2020 6e6f 5f72  return..    no_r
-00017ee0: 6573 756c 7473 203d 2054 7275 650a 2020  esults = True.  
-00017ef0: 2020 7769 7468 2028 0a20 2020 2020 2020    with (.       
-00017f00: 206f 7065 6e28 636f 6e66 6967 2e53 4f4e   open(config.SON
-00017f10: 4753 5f49 4e46 4f5f 5041 5448 2c20 2272  GS_INFO_PATH, "r
-00017f20: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
-00017f30: 2d38 2229 2061 7320 736f 6e67 735f 6669  -8") as songs_fi
-00017f40: 6c65 2c0a 2020 2020 2020 2020 6f70 656e  le,.        open
-00017f50: 2873 7461 7473 5f70 6174 682c 2022 7222  (stats_path, "r"
-00017f60: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
-00017f70: 3822 2920 6173 2073 7461 7473 5f66 696c  8") as stats_fil
-00017f80: 652c 0a20 2020 2029 3a0a 0a20 2020 2020  e,.    ):..     
-00017f90: 2020 2064 6566 2063 6865 636b 5f69 665f     def check_if_
-00017fa0: 6669 6c65 5f65 7869 7374 7328 6465 7461  file_exists(deta
-00017fb0: 696c 5f73 7472 696e 6729 3a0a 2020 2020  il_string):.    
-00017fc0: 2020 2020 2020 2020 6465 7461 696c 7320          details 
-00017fd0: 3d20 6465 7461 696c 5f73 7472 696e 672e  = detail_string.
-00017fe0: 7374 7269 7028 292e 7370 6c69 7428 227c  strip().split("|
-00017ff0: 2229 0a20 2020 2020 2020 2020 2020 2069  ").            i
-00018000: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
-00018010: 6973 7473 286f 732e 7061 7468 2e6a 6f69  ists(os.path.joi
-00018020: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f44  n(config.SONGS_D
-00018030: 4952 2c20 6465 7461 696c 735b 315d 2929  IR, details[1]))
-00018040: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018050: 2020 736f 6e67 735f 6e6f 745f 666f 756e    songs_not_foun
-00018060: 642e 6170 7065 6e64 2864 6574 6169 6c73  d.append(details
-00018070: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00018080: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
-00018090: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000180a0: 6e20 5472 7565 0a0a 2020 2020 2020 2020  n True..        
-000180b0: 6c69 6e65 7320 3d20 6c69 7374 2866 696c  lines = list(fil
-000180c0: 7465 7228 6368 6563 6b5f 6966 5f66 696c  ter(check_if_fil
-000180d0: 655f 6578 6973 7473 2c20 736f 6e67 735f  e_exists, songs_
-000180e0: 6669 6c65 2e72 6561 646c 696e 6573 2829  file.readlines()
-000180f0: 2929 0a0a 2020 2020 2020 2020 7374 6174  ))..        stat
-00018100: 7320 3d20 6469 6374 280a 2020 2020 2020  s = dict(.      
-00018110: 2020 2020 2020 6d61 7028 0a20 2020 2020        map(.     
-00018120: 2020 2020 2020 2020 2020 206c 616d 6264             lambd
-00018130: 6120 743a 2028 696e 7428 745b 305d 292c  a t: (int(t[0]),
-00018140: 2920 2b20 745b 313a 5d2c 0a20 2020 2020  ) + t[1:],.     
-00018150: 2020 2020 2020 2020 2020 206d 6170 280a             map(.
+00017be0: 2020 2020 2020 2020 2020 2020 2074 6167               tag
+00017bf0: 735b 7461 675d 5b31 5d0a 2020 2020 2020  s[tag][1].      
+00017c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c10: 2020 2020 2020 2020 2020 2b20 6d75 7369            + musi
+00017c20: 635f 7461 672e 6c6f 6164 5f66 696c 6528  c_tag.load_file(
+00017c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c50: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
+00017c60: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f44  n(config.SONGS_D
+00017c70: 4952 2c20 736f 6e67 5f6e 616d 6529 0a20  IR, song_name). 
+00017c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c90: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00017ca0: 5b22 236c 656e 6774 6822 5d2e 7661 6c75  ["#length"].valu
+00017cb0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00017cc0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00017cd0: 0a0a 2020 2020 2020 2020 2020 2020 7461  ..            ta
+00017ce0: 675f 6974 656d 7320 3d20 6c69 7374 2874  g_items = list(t
+00017cf0: 6167 732e 6974 656d 7328 2929 0a0a 2020  ags.items())..  
+00017d00: 2020 2020 2020 2020 2020 6966 2073 6f72            if sor
+00017d10: 745f 2021 3d20 226e 6f6e 6522 3a0a 2020  t_ != "none":.  
+00017d20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00017d30: 2073 6f72 745f 2069 6e20 2822 6e61 6d65   sort_ in ("name
+00017d40: 222c 2022 6e22 293a 0a20 2020 2020 2020  ", "n"):.       
+00017d50: 2020 2020 2020 2020 2020 2020 2073 6f72               sor
+00017d60: 745f 6b65 7920 3d20 6c61 6d62 6461 2074  t_key = lambda t
+00017d70: 3a20 745b 305d 0a20 2020 2020 2020 2020  : t[0].         
+00017d80: 2020 2020 2020 2065 6c69 6620 736f 7274         elif sort
+00017d90: 5f20 696e 2028 2273 6563 732d 6c69 7374  _ in ("secs-list
+00017da0: 656e 6564 222c 2022 7322 293a 0a20 2020  ened", "s"):.   
+00017db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017dc0: 2073 6f72 745f 6b65 7920 3d20 6c61 6d62   sort_key = lamb
+00017dd0: 6461 2074 3a20 745b 315d 5b30 5d0a 2020  da t: t[1][0].  
+00017de0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00017df0: 6966 2073 6f72 745f 2069 6e20 2822 6475  if sort_ in ("du
+00017e00: 7261 7469 6f6e 222c 2022 6422 293a 0a20  ration", "d"):. 
+00017e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e20: 2020 2073 6f72 745f 6b65 7920 3d20 6c61     sort_key = la
+00017e30: 6d62 6461 2074 3a20 745b 315d 5b31 5d0a  mbda t: t[1][1].
+00017e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e50: 656c 6966 2073 6f72 745f 2069 6e20 2822  elif sort_ in ("
+00017e60: 7469 6d65 732d 6c69 7374 656e 6564 222c  times-listened",
+00017e70: 2022 7422 293a 0a20 2020 2020 2020 2020   "t"):.         
+00017e80: 2020 2020 2020 2020 2020 2073 6f72 745f             sort_
+00017e90: 6b65 7920 3d20 6c61 6d62 6461 2074 3a20  key = lambda t: 
+00017ea0: 745b 315d 5b30 5d20 2f20 745b 315d 5b31  t[1][0] / t[1][1
+00017eb0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00017ec0: 2020 7461 675f 6974 656d 732e 736f 7274    tag_items.sort
+00017ed0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00017ee0: 2020 2020 2020 6b65 793d 736f 7274 5f6b        key=sort_k
+00017ef0: 6579 2c0a 2020 2020 2020 2020 2020 2020  ey,.            
+00017f00: 2020 2020 2020 2020 7265 7665 7273 653d          reverse=
+00017f10: 6e6f 7420 7265 7665 7273 655f 2c0a 2020  not reverse_,.  
+00017f20: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00017f30: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00017f40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017f50: 2020 6966 206e 6f74 2072 6576 6572 7365    if not reverse
+00017f60: 5f3a 0a20 2020 2020 2020 2020 2020 2020  _:.             
+00017f70: 2020 2020 2020 2074 6167 5f69 7465 6d73         tag_items
+00017f80: 2e72 6576 6572 7365 2829 0a0a 2020 2020  .reverse()..    
+00017f90: 2020 2020 2020 2020 666f 7220 7461 672c          for tag,
+00017fa0: 2028 6c69 7374 656e 5f74 696d 652c 2074   (listen_time, t
+00017fb0: 6f74 616c 5f64 7572 6174 696f 6e29 2069  otal_duration) i
+00017fc0: 6e20 7461 675f 6974 656d 733a 0a20 2020  n tag_items:.   
+00017fd0: 2020 2020 2020 2020 2020 2020 2063 6c69               cli
+00017fe0: 636b 2e65 6368 6f28 0a20 2020 2020 2020  ck.echo(.       
+00017ff0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
+00018000: 7461 677d 207b 636c 6963 6b2e 7374 796c  tag} {click.styl
+00018010: 6528 6865 6c70 6572 732e 666f 726d 6174  e(helpers.format
+00018020: 5f73 6563 6f6e 6473 2874 6f74 616c 5f64  _seconds(total_d
+00018030: 7572 6174 696f 6e2c 2073 686f 775f 6465  uration, show_de
+00018040: 6369 6d61 6c3d 5472 7565 292c 2066 673d  cimal=True), fg=
+00018050: 2762 7269 6768 745f 626c 6163 6b27 297d  'bright_black')}
+00018060: 207b 636c 6963 6b2e 7374 796c 6528 6865   {click.style(he
+00018070: 6c70 6572 732e 666f 726d 6174 5f73 6563  lpers.format_sec
+00018080: 6f6e 6473 286c 6973 7465 6e5f 7469 6d65  onds(listen_time
+00018090: 2c20 7368 6f77 5f64 6563 696d 616c 3d54  , show_decimal=T
+000180a0: 7275 6529 2c20 6667 3d27 7965 6c6c 6f77  rue), fg='yellow
+000180b0: 2729 7d20 7b63 6c69 636b 2e73 7479 6c65  ')} {click.style
+000180c0: 2827 252e 3266 2725 286c 6973 7465 6e5f  ('%.2f'%(listen_
+000180d0: 7469 6d65 2f74 6f74 616c 5f64 7572 6174  time/total_durat
+000180e0: 696f 6e29 2c20 6667 3d27 6772 6565 6e27  ion), fg='green'
+000180f0: 297d 220a 2020 2020 2020 2020 2020 2020  )}".            
+00018100: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00018110: 2020 2020 2020 6e75 6d5f 6c69 6e65 7320        num_lines 
+00018120: 2b3d 2031 0a20 2020 2020 2020 2020 2020  += 1.           
+00018130: 2020 2020 2069 6620 746f 7020 6973 206e       if top is n
+00018140: 6f74 204e 6f6e 6520 616e 6420 6e75 6d5f  ot None and num_
+00018150: 6c69 6e65 7320 3d3d 2074 6f70 3a0a 2020  lines == top:.  
 00018160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018170: 2020 2020 6c61 6d62 6461 2078 3a20 7475      lambda x: tu
-00018180: 706c 6528 6d61 7028 666c 6f61 742c 2078  ple(map(float, x
-00018190: 2e73 7472 6970 2829 2e73 706c 6974 2822  .strip().split("
-000181a0: 7c22 2929 292c 0a20 2020 2020 2020 2020  |"))),.         
-000181b0: 2020 2020 2020 2020 2020 2073 7461 7473             stats
-000181c0: 5f66 696c 652e 7265 6164 6c69 6e65 7328  _file.readlines(
-000181d0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-000181e0: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
-000181f0: 2020 290a 2020 2020 2020 2020 290a 0a20    ).        ).. 
-00018200: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00018210: 7261 6e67 6528 6c65 6e28 6c69 6e65 7329  range(len(lines)
-00018220: 293a 0a20 2020 2020 2020 2020 2020 2064  ):.            d
-00018230: 6574 6169 6c73 203d 206c 696e 6573 5b69  etails = lines[i
-00018240: 5d2e 7374 7269 7028 292e 7370 6c69 7428  ].strip().split(
-00018250: 227c 2229 0a20 2020 2020 2020 2020 2020  "|").           
-00018260: 2073 6f6e 675f 6964 203d 2069 6e74 2864   song_id = int(d
-00018270: 6574 6169 6c73 5b30 5d29 0a0a 2020 2020  etails[0])..    
-00018280: 2020 2020 2020 2020 7461 6773 203d 2073          tags = s
-00018290: 6574 2864 6574 6169 6c73 5b32 5d2e 7370  et(details[2].sp
-000182a0: 6c69 7428 222c 2229 290a 2020 2020 2020  lit(",")).      
-000182b0: 2020 2020 2020 6966 2073 6561 7263 685f        if search_
-000182c0: 7461 6773 3a0a 2020 2020 2020 2020 2020  tags:.          
-000182d0: 2020 2020 2020 6966 206d 6174 6368 5f61        if match_a
-000182e0: 6c6c 3a0a 2020 2020 2020 2020 2020 2020  ll:.            
-000182f0: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-00018300: 6561 7263 685f 7461 6773 203c 3d20 7461  earch_tags <= ta
-00018310: 6773 3a20 2023 2073 7562 7365 740a 2020  gs:  # subset.  
-00018320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018330: 2020 2020 2020 6c69 6e65 735b 695d 203d        lines[i] =
-00018340: 2022 220a 2020 2020 2020 2020 2020 2020   "".            
-00018350: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00018360: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-00018370: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00018380: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00018390: 6620 6e6f 7420 7365 6172 6368 5f74 6167  f not search_tag
-000183a0: 7320 2620 7461 6773 3a20 2023 2069 6e74  s & tags:  # int
-000183b0: 6572 7365 6374 696f 6e0a 2020 2020 2020  ersection.      
-000183c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183d0: 2020 6c69 6e65 735b 695d 203d 2022 220a    lines[i] = "".
-000183e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183f0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00018400: 0a0a 2020 2020 2020 2020 2020 2020 7469  ..            ti
-00018410: 6d65 5f6c 6973 7465 6e65 6420 3d20 7374  me_listened = st
-00018420: 6174 735b 736f 6e67 5f69 645d 0a20 2020  ats[song_id].   
-00018430: 2020 2020 2020 2020 206c 696e 6573 5b69           lines[i
-00018440: 5d20 3d20 7475 706c 6528 6465 7461 696c  ] = tuple(detail
-00018450: 7329 202b 2028 0a20 2020 2020 2020 2020  s) + (.         
-00018460: 2020 2020 2020 2074 696d 655f 6c69 7374         time_list
-00018470: 656e 6564 2c0a 2020 2020 2020 2020 2020  ened,.          
-00018480: 2020 2020 2020 6d75 7369 635f 7461 672e        music_tag.
-00018490: 6c6f 6164 5f66 696c 6528 6f73 2e70 6174  load_file(os.pat
-000184a0: 682e 6a6f 696e 2863 6f6e 6669 672e 534f  h.join(config.SO
-000184b0: 4e47 535f 4449 522c 2064 6574 6169 6c73  NGS_DIR, details
-000184c0: 5b31 5d29 295b 0a20 2020 2020 2020 2020  [1]))[.         
-000184d0: 2020 2020 2020 2020 2020 2022 236c 656e             "#len
-000184e0: 6774 6822 0a20 2020 2020 2020 2020 2020  gth".           
-000184f0: 2020 2020 205d 2e76 616c 7565 2c0a 2020       ].value,.  
-00018500: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-00018510: 2020 2020 206c 696e 6573 203d 205b 6c69       lines = [li
-00018520: 6e65 2066 6f72 206c 696e 6520 696e 206c  ne for line in l
-00018530: 696e 6573 2069 6620 6c69 6e65 5d0a 0a20  ines if line].. 
-00018540: 2020 2020 2020 2069 6620 736f 7274 5f20         if sort_ 
-00018550: 213d 2022 6e6f 6e65 223a 0a20 2020 2020  != "none":.     
-00018560: 2020 2020 2020 2069 6620 736f 7274 5f20         if sort_ 
-00018570: 696e 2028 226e 616d 6522 2c20 226e 2229  in ("name", "n")
-00018580: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018590: 2020 736f 7274 5f6b 6579 203d 206c 616d    sort_key = lam
-000185a0: 6264 6120 743a 2074 5b31 5d0a 2020 2020  bda t: t[1].    
-000185b0: 2020 2020 2020 2020 656c 6966 2073 6f72          elif sor
-000185c0: 745f 2069 6e20 2822 7365 6373 2d6c 6973  t_ in ("secs-lis
-000185d0: 7465 6e65 6422 2c20 2273 2229 3a0a 2020  tened", "s"):.  
-000185e0: 2020 2020 2020 2020 2020 2020 2020 736f                so
-000185f0: 7274 5f6b 6579 203d 206c 616d 6264 6120  rt_key = lambda 
-00018600: 743a 2066 6c6f 6174 2874 5b2d 325d 290a  t: float(t[-2]).
-00018610: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00018620: 2073 6f72 745f 2069 6e20 2822 6475 7261   sort_ in ("dura
-00018630: 7469 6f6e 222c 2022 6422 293a 0a20 2020  tion", "d"):.   
-00018640: 2020 2020 2020 2020 2020 2020 2073 6f72               sor
-00018650: 745f 6b65 7920 3d20 6c61 6d62 6461 2074  t_key = lambda t
-00018660: 3a20 666c 6f61 7428 745b 2d31 5d29 0a20  : float(t[-1]). 
-00018670: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00018680: 736f 7274 5f20 696e 2028 2274 696d 6573  sort_ in ("times
-00018690: 2d6c 6973 7465 6e65 6422 2c20 2274 2229  -listened", "t")
-000186a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000186b0: 2020 736f 7274 5f6b 6579 203d 206c 616d    sort_key = lam
-000186c0: 6264 6120 743a 2066 6c6f 6174 2874 5b2d  bda t: float(t[-
-000186d0: 325d 2920 2f20 666c 6f61 7428 745b 2d31  2]) / float(t[-1
-000186e0: 5d29 0a20 2020 2020 2020 2020 2020 206c  ]).            l
-000186f0: 696e 6573 2e73 6f72 7428 0a20 2020 2020  ines.sort(.     
-00018700: 2020 2020 2020 2020 2020 206b 6579 3d73             key=s
-00018710: 6f72 745f 6b65 792c 0a20 2020 2020 2020  ort_key,.       
-00018720: 2020 2020 2020 2020 2072 6576 6572 7365           reverse
-00018730: 3d6e 6f74 2072 6576 6572 7365 5f2c 0a20  =not reverse_,. 
-00018740: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00018750: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00018760: 2020 2020 2020 2069 6620 6e6f 7420 7265         if not re
-00018770: 7665 7273 655f 3a0a 2020 2020 2020 2020  verse_:.        
-00018780: 2020 2020 2020 2020 6c69 6e65 732e 7265          lines.re
-00018790: 7665 7273 6528 290a 0a20 2020 2020 2020  verse()..       
-000187a0: 2066 6f72 2064 6574 6169 6c73 2069 6e20   for details in 
-000187b0: 6c69 6e65 733a 0a20 2020 2020 2020 2020  lines:.         
-000187c0: 2020 2068 656c 7065 7273 2e70 7269 6e74     helpers.print
-000187d0: 5f65 6e74 7279 2864 6574 6169 6c73 290a  _entry(details).
-000187e0: 2020 2020 2020 2020 2020 2020 6e75 6d5f              num_
-000187f0: 6c69 6e65 7320 2b3d 2031 0a20 2020 2020  lines += 1.     
-00018800: 2020 2020 2020 206e 6f5f 7265 7375 6c74         no_result
-00018810: 7320 3d20 4661 6c73 650a 2020 2020 2020  s = False.      
-00018820: 2020 2020 2020 6966 2074 6f70 2069 7320        if top is 
-00018830: 6e6f 7420 4e6f 6e65 2061 6e64 206e 756d  not None and num
-00018840: 5f6c 696e 6573 203d 3d20 746f 703a 0a20  _lines == top:. 
-00018850: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00018860: 7265 616b 0a0a 2020 2020 6966 206e 6f5f  reak..    if no_
-00018870: 7265 7375 6c74 7320 616e 6420 7365 6172  results and sear
-00018880: 6368 5f74 6167 733a 0a20 2020 2020 2020  ch_tags:.       
-00018890: 2063 6c69 636b 2e73 6563 686f 2822 4e6f   click.secho("No
-000188a0: 2073 6f6e 6773 2066 6f75 6e64 206d 6174   songs found mat
-000188b0: 6368 696e 6720 7461 6773 2e22 2c20 6667  ching tags.", fg
-000188c0: 3d22 7265 6422 290a 2020 2020 656c 6966  ="red").    elif
-000188d0: 206e 6f5f 7265 7375 6c74 733a 0a20 2020   no_results:.   
-000188e0: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-000188f0: 280a 2020 2020 2020 2020 2020 2020 224e  (.            "N
-00018900: 6f20 736f 6e67 7320 666f 756e 642e 2055  o songs found. U
-00018910: 7365 2027 6d61 6573 7472 6f20 6164 6427  se 'maestro add'
-00018920: 2074 6f20 6164 6420 6120 736f 6e67 2e22   to add a song."
-00018930: 2c20 6667 3d22 7265 6422 0a20 2020 2020  , fg="red".     
-00018940: 2020 2029 0a20 2020 2065 6c69 6620 736f     ).    elif so
-00018950: 6e67 735f 6e6f 745f 666f 756e 643a 0a20  ngs_not_found:. 
-00018960: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
-00018970: 686f 2822 536f 6e67 2066 696c 6573 206e  ho("Song files n
-00018980: 6f74 2066 6f75 6e64 3a22 2c20 6667 3d22  ot found:", fg="
-00018990: 7265 6422 290a 2020 2020 2020 2020 666f  red").        fo
-000189a0: 7220 6465 7461 696c 7320 696e 2073 6f6e  r details in son
-000189b0: 6773 5f6e 6f74 5f66 6f75 6e64 3a0a 2020  gs_not_found:.  
-000189c0: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
-000189d0: 7365 6368 6f28 6622 5c74 7b64 6574 6169  secho(f"\t{detai
-000189e0: 6c73 5b31 5d7d 2028 4944 207b 6465 7461  ls[1]} (ID {deta
-000189f0: 696c 735b 305d 7d29 222c 2066 673d 2272  ils[0]})", fg="r
-00018a00: 6564 2229 0a0a 0a40 636c 692e 636f 6d6d  ed")...@cli.comm
-00018a10: 616e 6428 290a 4063 6c69 636b 2e6f 7074  and().@click.opt
-00018a20: 696f 6e28 0a20 2020 2022 2d79 222c 0a20  ion(.    "-y",. 
-00018a30: 2020 2022 2d2d 7965 6172 222c 0a20 2020     "--year",.   
-00018a40: 2022 7965 6172 222c 0a20 2020 2068 656c   "year",.    hel
-00018a50: 703d 2253 686f 7720 7469 6d65 206c 6973  p="Show time lis
-00018a60: 7465 6e65 6420 666f 7220 6120 7370 6563  tened for a spec
-00018a70: 6966 6963 2079 6561 722c 2069 6e73 7465  ific year, inste
-00018a80: 6164 206f 6620 7468 6520 746f 7461 6c2e  ad of the total.
-00018a90: 2050 6173 7369 6e67 2027 6375 7227 2077   Passing 'cur' w
-00018aa0: 696c 6c20 7368 6f77 2074 6865 2074 696d  ill show the tim
-00018ab0: 6520 6c69 7374 656e 6564 2066 6f72 2074  e listened for t
-00018ac0: 6865 2063 7572 7265 6e74 2079 6561 722e  he current year.
-00018ad0: 222c 0a29 0a40 636c 6963 6b2e 6f70 7469  ",.).@click.opti
-00018ae0: 6f6e 280a 2020 2020 222d 492f 2d6e 4922  on(.    "-I/-nI"
-00018af0: 2c0a 2020 2020 222d 2d73 6f6e 672d 696e  ,.    "--song-in
-00018b00: 666f 2f2d 2d6e 6f2d 736f 6e67 2d69 6e66  fo/--no-song-inf
-00018b10: 6f22 2c0a 2020 2020 2273 6f6e 675f 696e  o",.    "song_in
-00018b20: 666f 222c 0a20 2020 2064 6566 6175 6c74  fo",.    default
-00018b30: 3d46 616c 7365 2c0a 2020 2020 6865 6c70  =False,.    help
-00018b40: 3d22 5368 6f77 2074 6865 2061 7274 6973  ="Show the artis
-00018b50: 742c 2061 6c62 756d 2c20 616e 6420 616c  t, album, and al
-00018b60: 6275 6d20 6172 7469 7374 2066 6f72 2065  bum artist for e
-00018b70: 6163 6820 736f 6e67 2e22 2c0a 290a 4063  ach song.",.).@c
-00018b80: 6c69 636b 2e61 7267 756d 656e 7428 2273  lick.argument("s
-00018b90: 6f6e 675f 6964 7322 2c20 7479 7065 3d63  ong_ids", type=c
-00018ba0: 6c69 636b 2e49 4e54 2c20 6e61 7267 733d  lick.INT, nargs=
-00018bb0: 2d31 2c20 7265 7175 6972 6564 3d54 7275  -1, required=Tru
-00018bc0: 6529 0a64 6566 2065 6e74 7279 2873 6f6e  e).def entry(son
-00018bd0: 675f 6964 732c 2079 6561 722c 2073 6f6e  g_ids, year, son
-00018be0: 675f 696e 666f 293a 0a20 2020 2022 2222  g_info):.    """
-00018bf0: 0a20 2020 2056 6965 7720 7468 6520 6465  .    View the de
-00018c00: 7461 696c 7320 666f 7220 7370 6563 6966  tails for specif
-00018c10: 6963 2073 6f6e 6728 7329 2e0a 0a20 2020  ic song(s)...   
-00018c20: 2050 7269 6e74 7320 7468 6520 6465 7461   Prints the deta
-00018c30: 696c 7320 6f66 2074 6865 2073 6f6e 6728  ils of the song(
-00018c40: 7329 2077 6974 6820 7468 6520 4944 2873  s) with the ID(s
-00018c50: 2920 534f 4e47 5f49 4453 2e0a 0a20 2020  ) SONG_IDS...   
-00018c60: 205c 620a 2020 2020 4f75 7470 7574 2066   \b.    Output f
-00018c70: 6f72 6d61 743a 0a20 2020 2020 2020 2049  ormat:.        I
-00018c80: 442c 206e 616d 652c 2064 7572 6174 696f  D, name, duratio
-00018c90: 6e2c 206c 6973 7465 6e20 7469 6d65 2c20  n, listen time, 
-00018ca0: 7469 6d65 7320 6c69 7374 656e 6564 2c20  times listened, 
-00018cb0: 5b63 6c69 702d 7374 6172 742c 2063 6c69  [clip-start, cli
-00018cc0: 702d 656e 645d 2069 6620 636c 6970 2065  p-end] if clip e
-00018cd0: 7869 7374 732c 2063 6f6d 6d61 2d73 6570  xists, comma-sep
-00018ce0: 6172 6174 6564 2074 6167 7320 6966 2061  arated tags if a
-00018cf0: 6e79 0a20 2020 2020 2020 2061 7274 6973  ny.        artis
-00018d00: 7420 2d20 616c 6275 6d20 2861 6c62 756d  t - album (album
-00018d10: 2061 7274 6973 7429 2069 6620 2d49 2f2d   artist) if -I/-
-00018d20: 2d73 6f6e 672d 696e 666f 2069 7320 7061  -song-info is pa
-00018d30: 7373 6564 0a20 2020 2022 2222 0a20 2020  ssed.    """.   
-00018d40: 2073 6f6e 675f 6964 7320 3d20 7365 7428   song_ids = set(
-00018d50: 736f 6e67 5f69 6473 290a 0a20 2020 2069  song_ids)..    i
-00018d60: 6620 7965 6172 2069 7320 4e6f 6e65 3a0a  f year is None:.
-00018d70: 2020 2020 2020 2020 7374 6174 735f 7061          stats_pa
-00018d80: 7468 203d 2063 6f6e 6669 672e 544f 5441  th = config.TOTA
-00018d90: 4c5f 5354 4154 535f 5041 5448 0a20 2020  L_STATS_PATH.   
-00018da0: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-00018db0: 6620 7965 6172 203d 3d20 2263 7572 223a  f year == "cur":
-00018dc0: 0a20 2020 2020 2020 2020 2020 2079 6561  .            yea
-00018dd0: 7220 3d20 636f 6e66 6967 2e43 5552 5f59  r = config.CUR_Y
-00018de0: 4541 520a 2020 2020 2020 2020 2020 2020  EAR.            
-00018df0: 7374 6174 735f 7061 7468 203d 2063 6f6e  stats_path = con
-00018e00: 6669 672e 4355 525f 5945 4152 5f53 5441  fig.CUR_YEAR_STA
-00018e10: 5453 5f50 4154 480a 2020 2020 2020 2020  TS_PATH.        
-00018e20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00018e30: 2020 6966 206e 6f74 2079 6561 722e 6973    if not year.is
-00018e40: 6469 6769 7428 293a 0a20 2020 2020 2020  digit():.       
-00018e50: 2020 2020 2020 2020 2063 6c69 636b 2e73           click.s
-00018e60: 6563 686f 2822 5965 6172 206d 7573 7420  echo("Year must 
-00018e70: 6265 2061 206e 756d 6265 722e 222c 2066  be a number.", f
-00018e80: 673d 2272 6564 2229 0a20 2020 2020 2020  g="red").       
-00018e90: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-00018ea0: 2020 2020 2020 2020 2020 2020 7374 6174              stat
-00018eb0: 735f 7061 7468 203d 206f 732e 7061 7468  s_path = os.path
-00018ec0: 2e6a 6f69 6e28 636f 6e66 6967 2e53 5441  .join(config.STA
-00018ed0: 5453 5f44 4952 2c20 6622 7b79 6561 727d  TS_DIR, f"{year}
-00018ee0: 2e74 7874 2229 0a0a 2020 2020 7472 793a  .txt")..    try:
-00018ef0: 0a20 2020 2020 2020 2077 6974 6820 280a  .        with (.
-00018f00: 2020 2020 2020 2020 2020 2020 6f70 656e              open
-00018f10: 2863 6f6e 6669 672e 534f 4e47 535f 494e  (config.SONGS_IN
-00018f20: 464f 5f50 4154 482c 2022 7222 2c20 656e  FO_PATH, "r", en
-00018f30: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
-00018f40: 6173 2073 6f6e 6773 5f66 696c 652c 0a20  as songs_file,. 
-00018f50: 2020 2020 2020 2020 2020 206f 7065 6e28             open(
-00018f60: 7374 6174 735f 7061 7468 2c20 2272 222c  stats_path, "r",
-00018f70: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-00018f80: 2229 2061 7320 7374 6174 735f 6669 6c65  ") as stats_file
-00018f90: 2c0a 2020 2020 2020 2020 293a 0a20 2020  ,.        ):.   
-00018fa0: 2020 2020 2020 2020 206c 696e 6573 203d           lines =
-00018fb0: 2073 6f6e 6773 5f66 696c 652e 7265 6164   songs_file.read
-00018fc0: 6c69 6e65 7328 290a 2020 2020 2020 2020  lines().        
-00018fd0: 2020 2020 7374 6174 7320 3d20 6469 6374      stats = dict
-00018fe0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00018ff0: 2020 6d61 7028 0a20 2020 2020 2020 2020    map(.         
-00019000: 2020 2020 2020 2020 2020 206c 616d 6264             lambd
-00019010: 6120 743a 2028 696e 7428 745b 305d 292c  a t: (int(t[0]),
-00019020: 2920 2b20 745b 313a 5d2c 2020 2320 636f  ) + t[1:],  # co
-00019030: 6e76 6572 7420 6b65 7920 746f 2069 6e74  nvert key to int
-00019040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019050: 2020 2020 206d 6170 280a 2020 2020 2020       map(.      
-00019060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019070: 2020 6c61 6d62 6461 2078 3a20 7475 706c    lambda x: tupl
-00019080: 6528 6d61 7028 666c 6f61 742c 2078 2e73  e(map(float, x.s
-00019090: 7472 6970 2829 2e73 706c 6974 2822 7c22  trip().split("|"
-000190a0: 2929 292c 0a20 2020 2020 2020 2020 2020  ))),.           
-000190b0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-000190c0: 7473 5f66 696c 652e 7265 6164 6c69 6e65  ts_file.readline
-000190d0: 7328 292c 0a20 2020 2020 2020 2020 2020  s(),.           
-000190e0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-000190f0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00019100: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00019110: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00019120: 2072 616e 6765 286c 656e 286c 696e 6573   range(len(lines
-00019130: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00019140: 2020 2020 6465 7461 696c 7320 3d20 6c69      details = li
-00019150: 6e65 735b 695d 2e73 7472 6970 2829 2e73  nes[i].strip().s
-00019160: 706c 6974 2822 7c22 290a 2020 2020 2020  plit("|").      
-00019170: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
-00019180: 6420 3d20 696e 7428 6465 7461 696c 735b  d = int(details[
-00019190: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
-000191a0: 2020 2020 6966 2073 6f6e 675f 6964 2069      if song_id i
-000191b0: 6e20 736f 6e67 5f69 6473 3a0a 2020 2020  n song_ids:.    
-000191c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000191d0: 6966 206e 6f74 206f 732e 7061 7468 2e65  if not os.path.e
-000191e0: 7869 7374 7328 6f73 2e70 6174 682e 6a6f  xists(os.path.jo
-000191f0: 696e 2863 6f6e 6669 672e 534f 4e47 535f  in(config.SONGS_
-00019200: 4449 522c 2064 6574 6169 6c73 5b31 5d29  DIR, details[1])
-00019210: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00019220: 2020 2020 2020 2020 2020 2063 6c69 636b             click
-00019230: 2e73 6563 686f 280a 2020 2020 2020 2020  .secho(.        
-00019240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019250: 2020 2020 6622 536f 6e67 2066 696c 6520      f"Song file 
-00019260: 7769 7468 2049 4420 7b73 6f6e 675f 6964  with ID {song_id
-00019270: 7d20 6e6f 7420 666f 756e 642e 222c 2066  } not found.", f
-00019280: 673d 2272 6564 220a 2020 2020 2020 2020  g="red".        
-00019290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000192b0: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
-000192c0: 6473 2e72 656d 6f76 6528 736f 6e67 5f69  ds.remove(song_i
-000192d0: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-000192e0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-000192f0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-00019300: 2020 2020 2020 2020 6865 6c70 6572 732e          helpers.
-00019310: 7072 696e 745f 656e 7472 7928 0a20 2020  print_entry(.   
-00019320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019330: 2020 2020 2064 6574 6169 6c73 0a20 2020       details.   
-00019340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019350: 2020 2020 202b 205b 0a20 2020 2020 2020       + [.       
-00019360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019370: 2020 2020 2073 7461 7473 5b73 6f6e 675f       stats[song_
-00019380: 6964 5d2c 0a20 2020 2020 2020 2020 2020  id],.           
+00018170: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
+00018180: 2020 2020 6966 2073 6f6e 6773 5f6e 6f74      if songs_not
+00018190: 5f66 6f75 6e64 3a0a 2020 2020 2020 2020  _found:.        
+000181a0: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
+000181b0: 6368 6f28 2253 6f6e 6720 6669 6c65 7320  cho("Song files 
+000181c0: 6e6f 7420 666f 756e 643a 222c 2066 673d  not found:", fg=
+000181d0: 2272 6564 2229 0a20 2020 2020 2020 2020  "red").         
+000181e0: 2020 2020 2020 2066 6f72 2073 6f6e 675f         for song_
+000181f0: 6964 2c20 736f 6e67 5f6e 616d 6520 696e  id, song_name in
+00018200: 2073 6f6e 6773 5f6e 6f74 5f66 6f75 6e64   songs_not_found
+00018210: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018220: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
+00018230: 6f28 6622 5c74 7b73 6f6e 675f 6e61 6d65  o(f"\t{song_name
+00018240: 7d20 2849 4420 7b73 6f6e 675f 6964 7d29  } (ID {song_id})
+00018250: 222c 2066 673d 2272 6564 2229 0a20 2020  ", fg="red").   
+00018260: 2020 2020 2072 6574 7572 6e0a 0a20 2020       return..   
+00018270: 206e 6f5f 7265 7375 6c74 7320 3d20 5472   no_results = Tr
+00018280: 7565 0a20 2020 2077 6974 6820 280a 2020  ue.    with (.  
+00018290: 2020 2020 2020 6f70 656e 2863 6f6e 6669        open(confi
+000182a0: 672e 534f 4e47 535f 494e 464f 5f50 4154  g.SONGS_INFO_PAT
+000182b0: 482c 2022 7222 2c20 656e 636f 6469 6e67  H, "r", encoding
+000182c0: 3d22 7574 662d 3822 2920 6173 2073 6f6e  ="utf-8") as son
+000182d0: 6773 5f66 696c 652c 0a20 2020 2020 2020  gs_file,.       
+000182e0: 206f 7065 6e28 7374 6174 735f 7061 7468   open(stats_path
+000182f0: 2c20 2272 222c 2065 6e63 6f64 696e 673d  , "r", encoding=
+00018300: 2275 7466 2d38 2229 2061 7320 7374 6174  "utf-8") as stat
+00018310: 735f 6669 6c65 2c0a 2020 2020 293a 0a0a  s_file,.    ):..
+00018320: 2020 2020 2020 2020 6465 6620 6368 6563          def chec
+00018330: 6b5f 6966 5f66 696c 655f 6578 6973 7473  k_if_file_exists
+00018340: 2864 6574 6169 6c5f 7374 7269 6e67 293a  (detail_string):
+00018350: 0a20 2020 2020 2020 2020 2020 2064 6574  .            det
+00018360: 6169 6c73 203d 2064 6574 6169 6c5f 7374  ails = detail_st
+00018370: 7269 6e67 2e73 7472 6970 2829 2e73 706c  ring.strip().spl
+00018380: 6974 2822 7c22 290a 2020 2020 2020 2020  it("|").        
+00018390: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
+000183a0: 7468 2e65 7869 7374 7328 6f73 2e70 6174  th.exists(os.pat
+000183b0: 682e 6a6f 696e 2863 6f6e 6669 672e 534f  h.join(config.SO
+000183c0: 4e47 535f 4449 522c 2064 6574 6169 6c73  NGS_DIR, details
+000183d0: 5b31 5d29 293a 0a20 2020 2020 2020 2020  [1])):.         
+000183e0: 2020 2020 2020 2073 6f6e 6773 5f6e 6f74         songs_not
+000183f0: 5f66 6f75 6e64 2e61 7070 656e 6428 6465  _found.append(de
+00018400: 7461 696c 7329 0a20 2020 2020 2020 2020  tails).         
+00018410: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00018420: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+00018430: 7265 7475 726e 2054 7275 650a 0a20 2020  return True..   
+00018440: 2020 2020 206c 696e 6573 203d 206c 6973       lines = lis
+00018450: 7428 6669 6c74 6572 2863 6865 636b 5f69  t(filter(check_i
+00018460: 665f 6669 6c65 5f65 7869 7374 732c 2073  f_file_exists, s
+00018470: 6f6e 6773 5f66 696c 652e 7265 6164 6c69  ongs_file.readli
+00018480: 6e65 7328 2929 290a 0a20 2020 2020 2020  nes()))..       
+00018490: 2073 7461 7473 203d 2064 6963 7428 0a20   stats = dict(. 
+000184a0: 2020 2020 2020 2020 2020 206d 6170 280a             map(.
+000184b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000184c0: 6c61 6d62 6461 2074 3a20 2869 6e74 2874  lambda t: (int(t
+000184d0: 5b30 5d29 2c29 202b 2074 5b31 3a5d 2c0a  [0]),) + t[1:],.
+000184e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000184f0: 6d61 7028 0a20 2020 2020 2020 2020 2020  map(.           
+00018500: 2020 2020 2020 2020 206c 616d 6264 6120           lambda 
+00018510: 783a 2074 7570 6c65 286d 6170 2866 6c6f  x: tuple(map(flo
+00018520: 6174 2c20 782e 7374 7269 7028 292e 7370  at, x.strip().sp
+00018530: 6c69 7428 227c 2229 2929 2c0a 2020 2020  lit("|"))),.    
+00018540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018550: 7374 6174 735f 6669 6c65 2e72 6561 646c  stats_file.readl
+00018560: 696e 6573 2829 2c0a 2020 2020 2020 2020  ines(),.        
+00018570: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+00018580: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00018590: 2029 0a0a 2020 2020 2020 2020 666f 7220   )..        for 
+000185a0: 6920 696e 2072 616e 6765 286c 656e 286c  i in range(len(l
+000185b0: 696e 6573 2929 3a0a 2020 2020 2020 2020  ines)):.        
+000185c0: 2020 2020 6465 7461 696c 7320 3d20 6c69      details = li
+000185d0: 6e65 735b 695d 2e73 7472 6970 2829 2e73  nes[i].strip().s
+000185e0: 706c 6974 2822 7c22 290a 2020 2020 2020  plit("|").      
+000185f0: 2020 2020 2020 736f 6e67 5f69 6420 3d20        song_id = 
+00018600: 696e 7428 6465 7461 696c 735b 305d 290a  int(details[0]).
+00018610: 0a20 2020 2020 2020 2020 2020 2074 6167  .            tag
+00018620: 7320 3d20 7365 7428 6465 7461 696c 735b  s = set(details[
+00018630: 325d 2e73 706c 6974 2822 2c22 2929 0a20  2].split(",")). 
+00018640: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00018650: 6172 6368 5f74 6167 733a 0a20 2020 2020  arch_tags:.     
+00018660: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+00018670: 7463 685f 616c 6c3a 0a20 2020 2020 2020  tch_all:.       
+00018680: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00018690: 6e6f 7420 7365 6172 6368 5f74 6167 7320  not search_tags 
+000186a0: 3c3d 2074 6167 733a 2020 2320 7375 6273  <= tags:  # subs
+000186b0: 6574 0a20 2020 2020 2020 2020 2020 2020  et.             
+000186c0: 2020 2020 2020 2020 2020 206c 696e 6573             lines
+000186d0: 5b69 5d20 3d20 2222 0a20 2020 2020 2020  [i] = "".       
+000186e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000186f0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00018700: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00018710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018720: 2020 2020 6966 206e 6f74 2073 6561 7263      if not searc
+00018730: 685f 7461 6773 2026 2074 6167 733a 2020  h_tags & tags:  
+00018740: 2320 696e 7465 7273 6563 7469 6f6e 0a20  # intersection. 
+00018750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018760: 2020 2020 2020 206c 696e 6573 5b69 5d20         lines[i] 
+00018770: 3d20 2222 0a20 2020 2020 2020 2020 2020  = "".           
+00018780: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00018790: 7469 6e75 650a 0a20 2020 2020 2020 2020  tinue..         
+000187a0: 2020 2074 696d 655f 6c69 7374 656e 6564     time_listened
+000187b0: 203d 2073 7461 7473 5b73 6f6e 675f 6964   = stats[song_id
+000187c0: 5d0a 2020 2020 2020 2020 2020 2020 6c69  ].            li
+000187d0: 6e65 735b 695d 203d 2074 7570 6c65 2864  nes[i] = tuple(d
+000187e0: 6574 6169 6c73 2920 2b20 280a 2020 2020  etails) + (.    
+000187f0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00018800: 5f6c 6973 7465 6e65 642c 0a20 2020 2020  _listened,.     
+00018810: 2020 2020 2020 2020 2020 206d 7573 6963             music
+00018820: 5f74 6167 2e6c 6f61 645f 6669 6c65 286f  _tag.load_file(o
+00018830: 732e 7061 7468 2e6a 6f69 6e28 636f 6e66  s.path.join(conf
+00018840: 6967 2e53 4f4e 4753 5f44 4952 2c20 6465  ig.SONGS_DIR, de
+00018850: 7461 696c 735b 315d 2929 5b0a 2020 2020  tails[1]))[.    
+00018860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018870: 2223 6c65 6e67 7468 220a 2020 2020 2020  "#length".      
+00018880: 2020 2020 2020 2020 2020 5d2e 7661 6c75            ].valu
+00018890: 652c 0a20 2020 2020 2020 2020 2020 2029  e,.            )
+000188a0: 0a0a 2020 2020 2020 2020 6c69 6e65 7320  ..        lines 
+000188b0: 3d20 5b6c 696e 6520 666f 7220 6c69 6e65  = [line for line
+000188c0: 2069 6e20 6c69 6e65 7320 6966 206c 696e   in lines if lin
+000188d0: 655d 0a0a 2020 2020 2020 2020 6966 2073  e]..        if s
+000188e0: 6f72 745f 2021 3d20 226e 6f6e 6522 3a0a  ort_ != "none":.
+000188f0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00018900: 6f72 745f 2069 6e20 2822 6e61 6d65 222c  ort_ in ("name",
+00018910: 2022 6e22 293a 0a20 2020 2020 2020 2020   "n"):.         
+00018920: 2020 2020 2020 2073 6f72 745f 6b65 7920         sort_key 
+00018930: 3d20 6c61 6d62 6461 2074 3a20 745b 315d  = lambda t: t[1]
+00018940: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00018950: 6620 736f 7274 5f20 696e 2028 2273 6563  f sort_ in ("sec
+00018960: 732d 6c69 7374 656e 6564 222c 2022 7322  s-listened", "s"
+00018970: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00018980: 2020 2073 6f72 745f 6b65 7920 3d20 6c61     sort_key = la
+00018990: 6d62 6461 2074 3a20 666c 6f61 7428 745b  mbda t: float(t[
+000189a0: 2d32 5d29 0a20 2020 2020 2020 2020 2020  -2]).           
+000189b0: 2065 6c69 6620 736f 7274 5f20 696e 2028   elif sort_ in (
+000189c0: 2264 7572 6174 696f 6e22 2c20 2264 2229  "duration", "d")
+000189d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000189e0: 2020 736f 7274 5f6b 6579 203d 206c 616d    sort_key = lam
+000189f0: 6264 6120 743a 2066 6c6f 6174 2874 5b2d  bda t: float(t[-
+00018a00: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
+00018a10: 656c 6966 2073 6f72 745f 2069 6e20 2822  elif sort_ in ("
+00018a20: 7469 6d65 732d 6c69 7374 656e 6564 222c  times-listened",
+00018a30: 2022 7422 293a 0a20 2020 2020 2020 2020   "t"):.         
+00018a40: 2020 2020 2020 2073 6f72 745f 6b65 7920         sort_key 
+00018a50: 3d20 6c61 6d62 6461 2074 3a20 666c 6f61  = lambda t: floa
+00018a60: 7428 745b 2d32 5d29 202f 2066 6c6f 6174  t(t[-2]) / float
+00018a70: 2874 5b2d 315d 290a 2020 2020 2020 2020  (t[-1]).        
+00018a80: 2020 2020 6c69 6e65 732e 736f 7274 280a      lines.sort(.
+00018a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018aa0: 6b65 793d 736f 7274 5f6b 6579 2c0a 2020  key=sort_key,.  
+00018ab0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00018ac0: 7665 7273 653d 6e6f 7420 7265 7665 7273  verse=not revers
+00018ad0: 655f 2c0a 2020 2020 2020 2020 2020 2020  e_,.            
+00018ae0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00018af0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00018b00: 6f74 2072 6576 6572 7365 5f3a 0a20 2020  ot reverse_:.   
+00018b10: 2020 2020 2020 2020 2020 2020 206c 696e               lin
+00018b20: 6573 2e72 6576 6572 7365 2829 0a0a 2020  es.reverse()..  
+00018b30: 2020 2020 2020 666f 7220 6465 7461 696c        for detail
+00018b40: 7320 696e 206c 696e 6573 3a0a 2020 2020  s in lines:.    
+00018b50: 2020 2020 2020 2020 6865 6c70 6572 732e          helpers.
+00018b60: 7072 696e 745f 656e 7472 7928 6465 7461  print_entry(deta
+00018b70: 696c 7329 0a20 2020 2020 2020 2020 2020  ils).           
+00018b80: 206e 756d 5f6c 696e 6573 202b 3d20 310a   num_lines += 1.
+00018b90: 2020 2020 2020 2020 2020 2020 6e6f 5f72              no_r
+00018ba0: 6573 756c 7473 203d 2046 616c 7365 0a20  esults = False. 
+00018bb0: 2020 2020 2020 2020 2020 2069 6620 746f             if to
+00018bc0: 7020 6973 206e 6f74 204e 6f6e 6520 616e  p is not None an
+00018bd0: 6420 6e75 6d5f 6c69 6e65 7320 3d3d 2074  d num_lines == t
+00018be0: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
+00018bf0: 2020 2020 6272 6561 6b0a 0a20 2020 2069      break..    i
+00018c00: 6620 736f 6e67 735f 6e6f 745f 666f 756e  f songs_not_foun
+00018c10: 643a 0a20 2020 2020 2020 2063 6c69 636b  d:.        click
+00018c20: 2e73 6563 686f 2822 536f 6e67 2066 696c  .secho("Song fil
+00018c30: 6573 206e 6f74 2066 6f75 6e64 3a22 2c20  es not found:", 
+00018c40: 6667 3d22 7265 6422 290a 2020 2020 2020  fg="red").      
+00018c50: 2020 666f 7220 6465 7461 696c 7320 696e    for details in
+00018c60: 2073 6f6e 6773 5f6e 6f74 5f66 6f75 6e64   songs_not_found
+00018c70: 3a0a 2020 2020 2020 2020 2020 2020 636c  :.            cl
+00018c80: 6963 6b2e 7365 6368 6f28 6622 5c74 7b64  ick.secho(f"\t{d
+00018c90: 6574 6169 6c73 5b31 5d7d 2028 4944 207b  etails[1]} (ID {
+00018ca0: 6465 7461 696c 735b 305d 7d29 222c 2066  details[0]})", f
+00018cb0: 673d 2272 6564 2229 0a20 2020 2065 6c69  g="red").    eli
+00018cc0: 6620 6e6f 5f72 6573 756c 7473 2061 6e64  f no_results and
+00018cd0: 2073 6561 7263 685f 7461 6773 3a0a 2020   search_tags:.  
+00018ce0: 2020 2020 2020 636c 6963 6b2e 7365 6368        click.sech
+00018cf0: 6f28 224e 6f20 736f 6e67 7320 666f 756e  o("No songs foun
+00018d00: 6420 6d61 7463 6869 6e67 2074 6167 732e  d matching tags.
+00018d10: 222c 2066 673d 2272 6564 2229 0a20 2020  ", fg="red").   
+00018d20: 2065 6c69 6620 6e6f 5f72 6573 756c 7473   elif no_results
+00018d30: 3a0a 2020 2020 2020 2020 636c 6963 6b2e  :.        click.
+00018d40: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
+00018d50: 2020 2022 4e6f 2073 6f6e 6773 2066 6f75     "No songs fou
+00018d60: 6e64 2e20 5573 6520 276d 6165 7374 726f  nd. Use 'maestro
+00018d70: 2061 6464 2720 746f 2061 6464 2061 2073   add' to add a s
+00018d80: 6f6e 672e 222c 2066 673d 2272 6564 220a  ong.", fg="red".
+00018d90: 2020 2020 2020 2020 290a 0a0a 4063 6c69          )...@cli
+00018da0: 2e63 6f6d 6d61 6e64 2829 0a40 636c 6963  .command().@clic
+00018db0: 6b2e 6f70 7469 6f6e 280a 2020 2020 222d  k.option(.    "-
+00018dc0: 7922 2c0a 2020 2020 222d 2d79 6561 7222  y",.    "--year"
+00018dd0: 2c0a 2020 2020 2279 6561 7222 2c0a 2020  ,.    "year",.  
+00018de0: 2020 6865 6c70 3d22 5368 6f77 2074 696d    help="Show tim
+00018df0: 6520 6c69 7374 656e 6564 2066 6f72 2061  e listened for a
+00018e00: 2073 7065 6369 6669 6320 7965 6172 2c20   specific year, 
+00018e10: 696e 7374 6561 6420 6f66 2074 6865 2074  instead of the t
+00018e20: 6f74 616c 2e20 5061 7373 696e 6720 2763  otal. Passing 'c
+00018e30: 7572 2720 7769 6c6c 2073 686f 7720 7468  ur' will show th
+00018e40: 6520 7469 6d65 206c 6973 7465 6e65 6420  e time listened 
+00018e50: 666f 7220 7468 6520 6375 7272 656e 7420  for the current 
+00018e60: 7965 6172 2e22 2c0a 290a 4063 6c69 636b  year.",.).@click
+00018e70: 2e6f 7074 696f 6e28 0a20 2020 2022 2d49  .option(.    "-I
+00018e80: 2f2d 6e49 222c 0a20 2020 2022 2d2d 736f  /-nI",.    "--so
+00018e90: 6e67 2d69 6e66 6f2f 2d2d 6e6f 2d73 6f6e  ng-info/--no-son
+00018ea0: 672d 696e 666f 222c 0a20 2020 2022 736f  g-info",.    "so
+00018eb0: 6e67 5f69 6e66 6f22 2c0a 2020 2020 6465  ng_info",.    de
+00018ec0: 6661 756c 743d 4661 6c73 652c 0a20 2020  fault=False,.   
+00018ed0: 2068 656c 703d 2253 686f 7720 7468 6520   help="Show the 
+00018ee0: 6172 7469 7374 2c20 616c 6275 6d2c 2061  artist, album, a
+00018ef0: 6e64 2061 6c62 756d 2061 7274 6973 7420  nd album artist 
+00018f00: 666f 7220 6561 6368 2073 6f6e 672e 222c  for each song.",
+00018f10: 0a29 0a40 636c 6963 6b2e 6172 6775 6d65  .).@click.argume
+00018f20: 6e74 2822 736f 6e67 5f69 6473 222c 2074  nt("song_ids", t
+00018f30: 7970 653d 636c 6963 6b2e 494e 542c 206e  ype=click.INT, n
+00018f40: 6172 6773 3d2d 312c 2072 6571 7569 7265  args=-1, require
+00018f50: 643d 5472 7565 290a 6465 6620 656e 7472  d=True).def entr
+00018f60: 7928 736f 6e67 5f69 6473 2c20 7965 6172  y(song_ids, year
+00018f70: 2c20 736f 6e67 5f69 6e66 6f29 3a0a 2020  , song_info):.  
+00018f80: 2020 2222 220a 2020 2020 5669 6577 2074    """.    View t
+00018f90: 6865 2064 6574 6169 6c73 2066 6f72 2073  he details for s
+00018fa0: 7065 6369 6669 6320 736f 6e67 2873 292e  pecific song(s).
+00018fb0: 0a0a 2020 2020 5072 696e 7473 2074 6865  ..    Prints the
+00018fc0: 2064 6574 6169 6c73 206f 6620 7468 6520   details of the 
+00018fd0: 736f 6e67 2873 2920 7769 7468 2074 6865  song(s) with the
+00018fe0: 2049 4428 7329 2053 4f4e 475f 4944 532e   ID(s) SONG_IDS.
+00018ff0: 0a0a 2020 2020 5c62 0a20 2020 204f 7574  ..    \b.    Out
+00019000: 7075 7420 666f 726d 6174 3a0a 2020 2020  put format:.    
+00019010: 2020 2020 4944 2c20 6e61 6d65 2c20 6475      ID, name, du
+00019020: 7261 7469 6f6e 2c20 6c69 7374 656e 2074  ration, listen t
+00019030: 696d 652c 2074 696d 6573 206c 6973 7465  ime, times liste
+00019040: 6e65 642c 205b 636c 6970 2d73 7461 7274  ned, [clip-start
+00019050: 2c20 636c 6970 2d65 6e64 5d20 6966 2063  , clip-end] if c
+00019060: 6c69 7020 6578 6973 7473 2c20 636f 6d6d  lip exists, comm
+00019070: 612d 7365 7061 7261 7465 6420 7461 6773  a-separated tags
+00019080: 2069 6620 616e 790a 2020 2020 2020 2020   if any.        
+00019090: 6172 7469 7374 202d 2061 6c62 756d 2028  artist - album (
+000190a0: 616c 6275 6d20 6172 7469 7374 2920 6966  album artist) if
+000190b0: 202d 492f 2d2d 736f 6e67 2d69 6e66 6f20   -I/--song-info 
+000190c0: 6973 2070 6173 7365 640a 2020 2020 2222  is passed.    ""
+000190d0: 220a 2020 2020 736f 6e67 5f69 6473 203d  ".    song_ids =
+000190e0: 2073 6574 2873 6f6e 675f 6964 7329 0a0a   set(song_ids)..
+000190f0: 2020 2020 6966 2079 6561 7220 6973 204e      if year is N
+00019100: 6f6e 653a 0a20 2020 2020 2020 2073 7461  one:.        sta
+00019110: 7473 5f70 6174 6820 3d20 636f 6e66 6967  ts_path = config
+00019120: 2e54 4f54 414c 5f53 5441 5453 5f50 4154  .TOTAL_STATS_PAT
+00019130: 480a 2020 2020 656c 7365 3a0a 2020 2020  H.    else:.    
+00019140: 2020 2020 6966 2079 6561 7220 3d3d 2022      if year == "
+00019150: 6375 7222 3a0a 2020 2020 2020 2020 2020  cur":.          
+00019160: 2020 7965 6172 203d 2063 6f6e 6669 672e    year = config.
+00019170: 4355 525f 5945 4152 0a20 2020 2020 2020  CUR_YEAR.       
+00019180: 2020 2020 2073 7461 7473 5f70 6174 6820       stats_path 
+00019190: 3d20 636f 6e66 6967 2e43 5552 5f59 4541  = config.CUR_YEA
+000191a0: 525f 5354 4154 535f 5041 5448 0a20 2020  R_STATS_PATH.   
+000191b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000191c0: 2020 2020 2020 2069 6620 6e6f 7420 7965         if not ye
+000191d0: 6172 2e69 7364 6967 6974 2829 3a0a 2020  ar.isdigit():.  
+000191e0: 2020 2020 2020 2020 2020 2020 2020 636c                cl
+000191f0: 6963 6b2e 7365 6368 6f28 2259 6561 7220  ick.secho("Year 
+00019200: 6d75 7374 2062 6520 6120 6e75 6d62 6572  must be a number
+00019210: 2e22 2c20 6667 3d22 7265 6422 290a 2020  .", fg="red").  
+00019220: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00019230: 7475 726e 0a20 2020 2020 2020 2020 2020  turn.           
+00019240: 2073 7461 7473 5f70 6174 6820 3d20 6f73   stats_path = os
+00019250: 2e70 6174 682e 6a6f 696e 2863 6f6e 6669  .path.join(confi
+00019260: 672e 5354 4154 535f 4449 522c 2066 227b  g.STATS_DIR, f"{
+00019270: 7965 6172 7d2e 7478 7422 290a 0a20 2020  year}.txt")..   
+00019280: 2074 7279 3a0a 2020 2020 2020 2020 7769   try:.        wi
+00019290: 7468 2028 0a20 2020 2020 2020 2020 2020  th (.           
+000192a0: 206f 7065 6e28 636f 6e66 6967 2e53 4f4e   open(config.SON
+000192b0: 4753 5f49 4e46 4f5f 5041 5448 2c20 2272  GS_INFO_PATH, "r
+000192c0: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
+000192d0: 2d38 2229 2061 7320 736f 6e67 735f 6669  -8") as songs_fi
+000192e0: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
+000192f0: 6f70 656e 2873 7461 7473 5f70 6174 682c  open(stats_path,
+00019300: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
+00019310: 7574 662d 3822 2920 6173 2073 7461 7473  utf-8") as stats
+00019320: 5f66 696c 652c 0a20 2020 2020 2020 2029  _file,.        )
+00019330: 3a0a 2020 2020 2020 2020 2020 2020 6c69  :.            li
+00019340: 6e65 7320 3d20 736f 6e67 735f 6669 6c65  nes = songs_file
+00019350: 2e72 6561 646c 696e 6573 2829 0a20 2020  .readlines().   
+00019360: 2020 2020 2020 2020 2073 7461 7473 203d           stats =
+00019370: 2064 6963 7428 0a20 2020 2020 2020 2020   dict(.         
+00019380: 2020 2020 2020 206d 6170 280a 2020 2020         map(.    
 00019390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000193a0: 206d 7573 6963 5f74 6167 2e6c 6f61 645f   music_tag.load_
-000193b0: 6669 6c65 280a 2020 2020 2020 2020 2020  file(.          
-000193c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000193d0: 2020 2020 2020 6f73 2e70 6174 682e 6a6f        os.path.jo
-000193e0: 696e 2863 6f6e 6669 672e 534f 4e47 535f  in(config.SONGS_
-000193f0: 4449 522c 2064 6574 6169 6c73 5b31 5d29  DIR, details[1])
-00019400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019410: 2020 2020 2020 2020 2020 2020 2029 5b22               )["
-00019420: 236c 656e 6774 6822 5d2e 7661 6c75 652c  #length"].value,
-00019430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019440: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
-00019450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019460: 2020 2020 7368 6f77 5f73 6f6e 675f 696e      show_song_in
-00019470: 666f 3d73 6f6e 675f 696e 666f 2c0a 2020  fo=song_info,.  
-00019480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019490: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-000194a0: 2020 2020 2020 2020 736f 6e67 5f69 6473          song_ids
-000194b0: 2e72 656d 6f76 6528 736f 6e67 5f69 6429  .remove(song_id)
-000194c0: 0a20 2020 2065 7863 6570 7420 4669 6c65  .    except File
-000194d0: 4e6f 7446 6f75 6e64 4572 726f 723a 0a20  NotFoundError:. 
-000194e0: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
-000194f0: 686f 2866 224e 6f20 7374 6174 7320 666f  ho(f"No stats fo
-00019500: 756e 6420 666f 7220 7965 6172 207b 7965  und for year {ye
-00019510: 6172 7d2e 222c 2066 673d 2272 6564 2229  ar}.", fg="red")
-00019520: 0a0a 2020 2020 6966 2073 6f6e 675f 6964  ..    if song_id
-00019530: 733a 0a20 2020 2020 2020 2073 6f6e 675f  s:.        song_
-00019540: 6964 7320 3d20 5b73 7472 2869 645f 2920  ids = [str(id_) 
-00019550: 666f 7220 6964 5f20 696e 2073 6f6e 675f  for id_ in song_
-00019560: 6964 735d 0a20 2020 2020 2020 2063 6c69  ids].        cli
-00019570: 636b 2e73 6563 686f 280a 2020 2020 2020  ck.secho(.      
-00019580: 2020 2020 2020 6622 4e6f 2073 6f6e 6773        f"No songs
-00019590: 2066 6f75 6e64 2077 6974 6820 4944 733a   found with IDs:
-000195a0: 207b 272c 2027 2e6a 6f69 6e28 736f 6e67   {', '.join(song
-000195b0: 5f69 6473 297d 2e22 2c20 6667 3d22 7265  _ids)}.", fg="re
-000195c0: 6422 0a20 2020 2020 2020 2029 0a0a 0a40  d".        )...@
-000195d0: 636c 692e 636f 6d6d 616e 6428 290a 4063  cli.command().@c
-000195e0: 6c69 636b 2e61 7267 756d 656e 7428 2273  lick.argument("s
-000195f0: 6f6e 6722 2c20 7265 7175 6972 6564 3d54  ong", required=T
-00019600: 7275 6529 0a40 636c 6963 6b2e 6f70 7469  rue).@click.opti
-00019610: 6f6e 280a 2020 2020 222d 4e2f 2d6e 4e22  on(.    "-N/-nN"
-00019620: 2c0a 2020 2020 222d 2d6e 616d 652f 2d2d  ,.    "--name/--
-00019630: 6e6f 2d6e 616d 6522 2c0a 2020 2020 2274  no-name",.    "t
-00019640: 6974 6c65 222c 0a20 2020 2064 6566 6175  itle",.    defau
-00019650: 6c74 3d46 616c 7365 2c0a 2020 2020 6865  lt=False,.    he
-00019660: 6c70 3d22 5472 6561 7420 534f 4e47 2061  lp="Treat SONG a
-00019670: 7320 6120 736f 6e67 206e 616d 6520 696e  s a song name in
-00019680: 7374 6561 6420 6f66 2061 6e20 4944 2e22  stead of an ID."
-00019690: 2c0a 290a 6465 6620 7265 636f 6d6d 656e  ,.).def recommen
-000196a0: 6428 736f 6e67 2c20 7469 746c 6529 3a0a  d(song, title):.
-000196b0: 2020 2020 2222 220a 2020 2020 4765 7420      """.    Get 
-000196c0: 7265 636f 6d6d 656e 6461 7469 6f6e 7320  recommendations 
-000196d0: 6672 6f6d 2059 5420 4d75 7369 6320 6261  from YT Music ba
-000196e0: 7365 6420 6f6e 2073 6f6e 6720 7469 746c  sed on song titl
-000196f0: 6573 2e20 4e6f 7465 3a20 7468 6973 2066  es. Note: this f
-00019700: 6561 7475 7265 0a20 2020 2069 7320 6578  eature.    is ex
-00019710: 7065 7269 6d65 6e74 616c 2e0a 0a20 2020  perimental...   
-00019720: 2052 6563 6f6d 6d65 6e64 7320 736f 6e67   Recommends song
-00019730: 7320 2870 6f73 7369 626c 7920 6578 706c  s (possibly expl
-00019740: 6963 6974 2920 7573 696e 6720 7468 6520  icit) using the 
-00019750: 596f 7554 7562 6520 4d75 7369 6320 4150  YouTube Music AP
-00019760: 4920 7369 6d69 6c61 720a 2020 2020 746f  I similar.    to
-00019770: 2074 6865 2073 6f6e 6720 7769 7468 2049   the song with I
-00019780: 4420 534f 4e47 2074 6f20 6c69 7374 656e  D SONG to listen
-00019790: 2074 6f2e 0a0a 2020 2020 4966 2074 6865   to...    If the
-000197a0: 2027 2d4e 2720 666c 6167 2069 7320 7061   '-N' flag is pa
-000197b0: 7373 6564 2c20 534f 4e47 2069 7320 7472  ssed, SONG is tr
-000197c0: 6561 7465 6420 6173 2061 2073 6f6e 6720  eated as a song 
-000197d0: 6e61 6d65 2074 6f20 7365 6172 6368 2066  name to search f
-000197e0: 6f72 0a20 2020 206f 6e20 596f 7554 7562  or.    on YouTub
-000197f0: 6520 4d75 7369 632e 2222 220a 2020 2020  e Music.""".    
-00019800: 7472 793a 0a20 2020 2020 2020 2066 726f  try:.        fro
-00019810: 6d20 7974 6d75 7369 6361 7069 2069 6d70  m ytmusicapi imp
-00019820: 6f72 7420 5954 4d75 7369 630a 2020 2020  ort YTMusic.    
-00019830: 6578 6365 7074 2049 6d70 6f72 7445 7272  except ImportErr
-00019840: 6f72 3a0a 2020 2020 2020 2020 636c 6963  or:.        clic
-00019850: 6b2e 7365 6368 6f28 0a20 2020 2020 2020  k.secho(.       
-00019860: 2020 2020 2022 5468 6520 2772 6563 6f6d       "The 'recom
-00019870: 6d65 6e64 2720 636f 6d6d 616e 6420 7265  mend' command re
-00019880: 7175 6972 6573 2074 6865 2027 7974 6d75  quires the 'ytmu
-00019890: 7369 6361 7069 2720 7061 636b 6167 6520  sicapi' package 
-000198a0: 746f 2062 6520 696e 7374 616c 6c65 642e  to be installed.
-000198b0: 2052 756e 2027 7069 7020 696e 7374 616c   Run 'pip instal
-000198c0: 6c20 7974 6d75 7369 6361 7069 2720 746f  l ytmusicapi' to
-000198d0: 2069 6e73 7461 6c6c 2069 742e 222c 0a20   install it.",. 
-000198e0: 2020 2020 2020 2020 2020 2066 673d 2272             fg="r
-000198f0: 6564 222c 0a20 2020 2020 2020 2029 0a20  ed",.        ). 
-00019900: 2020 2020 2020 2072 6574 7572 6e0a 0a20         return.. 
-00019910: 2020 2079 746d 7573 6963 203d 2059 544d     ytmusic = YTM
-00019920: 7573 6963 2829 0a0a 2020 2020 6966 2074  usic()..    if t
-00019930: 6974 6c65 3a0a 2020 2020 2020 2020 7265  itle:.        re
-00019940: 7375 6c74 7320 3d20 7974 6d75 7369 632e  sults = ytmusic.
-00019950: 7365 6172 6368 2873 6f6e 672c 2066 696c  search(song, fil
-00019960: 7465 723d 2273 6f6e 6773 2229 0a20 2020  ter="songs").   
-00019970: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-00019980: 6620 6e6f 7420 736f 6e67 2e69 7364 6967  f not song.isdig
-00019990: 6974 2829 3a0a 2020 2020 2020 2020 2020  it():.          
-000199a0: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
-000199b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000199c0: 536f 6e67 2049 4420 6d75 7374 2062 6520  Song ID must be 
-000199d0: 6120 6e75 6d62 6572 2e20 546f 2067 6574  a number. To get
-000199e0: 2072 6563 6f6d 6d65 6e64 6174 696f 6e73   recommendations
-000199f0: 2062 7920 6e61 6d65 2c20 7061 7373 2074   by name, pass t
-00019a00: 6865 2027 2d4e 2f2d 2d6e 616d 6527 2066  he '-N/--name' f
-00019a10: 6c61 672e 222c 0a20 2020 2020 2020 2020  lag.",.         
-00019a20: 2020 2020 2020 2066 673d 2272 6564 222c         fg="red",
-00019a30: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00019a40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00019a50: 6e0a 0a20 2020 2020 2020 2077 6974 6820  n..        with 
-00019a60: 6f70 656e 2863 6f6e 6669 672e 534f 4e47  open(config.SONG
-00019a70: 535f 494e 464f 5f50 4154 482c 2022 7222  S_INFO_PATH, "r"
-00019a80: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
-00019a90: 3822 2920 6173 2073 6f6e 6773 5f66 696c  8") as songs_fil
-00019aa0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
-00019ab0: 6f72 206c 696e 6520 696e 2073 6f6e 6773  or line in songs
-00019ac0: 5f66 696c 653a 0a20 2020 2020 2020 2020  _file:.         
-00019ad0: 2020 2020 2020 2064 6574 6169 6c73 203d         details =
-00019ae0: 206c 696e 652e 7374 7269 7028 292e 7370   line.strip().sp
-00019af0: 6c69 7428 227c 2229 0a20 2020 2020 2020  lit("|").       
-00019b00: 2020 2020 2020 2020 2069 6620 6465 7461           if deta
-00019b10: 696c 735b 305d 203d 3d20 736f 6e67 3a0a  ils[0] == song:.
-00019b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b30: 2020 2020 7265 7375 6c74 7320 3d20 7974      results = yt
-00019b40: 6d75 7369 632e 7365 6172 6368 280a 2020  music.search(.  
-00019b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b60: 2020 2020 2020 6f73 2e70 6174 682e 7370        os.path.sp
-00019b70: 6c69 7465 7874 2864 6574 6169 6c73 5b31  litext(details[1
-00019b80: 5d29 5b30 5d2c 2066 696c 7465 723d 2273  ])[0], filter="s
-00019b90: 6f6e 6773 220a 2020 2020 2020 2020 2020  ongs".          
-00019ba0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00019bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019bc0: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-00019bd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00019be0: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
-00019bf0: 6368 6f28 6622 4e6f 2073 6f6e 6720 666f  cho(f"No song fo
-00019c00: 756e 6420 7769 7468 2049 4420 7b73 6f6e  und with ID {son
-00019c10: 677d 2e22 2c20 6667 3d22 7265 6422 290a  g}.", fg="red").
-00019c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c30: 7265 7475 726e 0a0a 2020 2020 7974 5f6d  return..    yt_m
-00019c40: 7573 6963 5f70 6c61 796c 6973 7420 3d20  usic_playlist = 
-00019c50: 7974 6d75 7369 632e 6765 745f 7761 7463  ytmusic.get_watc
-00019c60: 685f 706c 6179 6c69 7374 2872 6573 756c  h_playlist(resul
-00019c70: 7473 5b30 5d5b 2276 6964 656f 4964 225d  ts[0]["videoId"]
-00019c80: 290a 0a20 2020 2063 6c69 636b 2e65 6368  )..    click.ech
-00019c90: 6f28 2252 6563 6f6d 6d65 6e64 6174 696f  o("Recommendatio
-00019ca0: 6e73 2066 6f72 2022 2c20 6e6c 3d46 616c  ns for ", nl=Fal
-00019cb0: 7365 290a 2020 2020 636c 6963 6b2e 7365  se).    click.se
-00019cc0: 6368 6f28 0a20 2020 2020 2020 2079 745f  cho(.        yt_
-00019cd0: 6d75 7369 635f 706c 6179 6c69 7374 5b22  music_playlist["
-00019ce0: 7472 6163 6b73 225d 5b30 5d5b 2274 6974  tracks"][0]["tit
-00019cf0: 6c65 225d 202b 2022 2022 2c0a 2020 2020  le"] + " ",.    
-00019d00: 2020 2020 6667 3d22 626c 7565 222c 0a20      fg="blue",. 
-00019d10: 2020 2020 2020 206e 6c3d 4661 6c73 652c         nl=False,
-00019d20: 0a20 2020 2029 0a20 2020 2063 6c69 636b  .    ).    click
-00019d30: 2e73 6563 686f 280a 2020 2020 2020 2020  .secho(.        
-00019d40: 6622 2868 7474 7073 3a2f 2f6d 7573 6963  f"(https://music
-00019d50: 2e79 6f75 7475 6265 2e63 6f6d 2f77 6174  .youtube.com/wat
-00019d60: 6368 3f76 3d7b 7974 5f6d 7573 6963 5f70  ch?v={yt_music_p
-00019d70: 6c61 796c 6973 745b 2774 7261 636b 7327  laylist['tracks'
-00019d80: 5d5b 305d 5b27 7669 6465 6f49 6427 5d7d  ][0]['videoId']}
-00019d90: 2922 2c0a 2020 2020 2020 2020 6667 3d22  )",.        fg="
-00019da0: 6272 6967 6874 5f62 6c61 636b 222c 0a20  bright_black",. 
-00019db0: 2020 2020 2020 206e 6c3d 4661 6c73 652c         nl=False,
-00019dc0: 0a20 2020 2029 0a20 2020 2063 6c69 636b  .    ).    click
-00019dd0: 2e65 6368 6f28 223a 2229 0a20 2020 2066  .echo(":").    f
-00019de0: 6f72 2074 7261 636b 2069 6e20 7974 5f6d  or track in yt_m
-00019df0: 7573 6963 5f70 6c61 796c 6973 745b 2274  usic_playlist["t
-00019e00: 7261 636b 7322 5d5b 313a 5d3a 0a20 2020  racks"][1:]:.   
-00019e10: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-00019e20: 2874 7261 636b 5b22 7469 746c 6522 5d20  (track["title"] 
-00019e30: 2b20 2220 222c 2066 673d 2262 6c75 6522  + " ", fg="blue"
-00019e40: 2c20 626f 6c64 3d54 7275 652c 206e 6c3d  , bold=True, nl=
-00019e50: 4661 6c73 6529 0a20 2020 2020 2020 2063  False).        c
-00019e60: 6c69 636b 2e73 6563 686f 280a 2020 2020  lick.secho(.    
-00019e70: 2020 2020 2020 2020 6622 6874 7470 733a          f"https:
-00019e80: 2f2f 6d75 7369 632e 796f 7574 7562 652e  //music.youtube.
-00019e90: 636f 6d2f 7761 7463 683f 763d 7b74 7261  com/watch?v={tra
-00019ea0: 636b 5b27 7669 6465 6f49 6427 5d7d 222c  ck['videoId']}",
-00019eb0: 0a20 2020 2020 2020 2020 2020 2066 673d  .            fg=
-00019ec0: 2262 7269 6768 745f 626c 6163 6b22 2c0a  "bright_black",.
-00019ed0: 2020 2020 2020 2020 290a 0a0a 4063 6c69          )...@cli
-00019ee0: 2e63 6f6d 6d61 6e64 2829 0a40 636c 6963  .command().@clic
-00019ef0: 6b2e 6172 6775 6d65 6e74 2822 736f 6e67  k.argument("song
-00019f00: 5f69 6473 222c 2072 6571 7569 7265 643d  _ids", required=
-00019f10: 5472 7565 2c20 7479 7065 3d69 6e74 2c20  True, type=int, 
-00019f20: 6e61 7267 733d 2d31 290a 4063 6c69 636b  nargs=-1).@click
-00019f30: 2e6f 7074 696f 6e28 222d 422f 2d6e 4222  .option("-B/-nB"
-00019f40: 2c20 222d 2d62 6f74 746f 6d2f 2d2d 6e6f  , "--bottom/--no
-00019f50: 2d62 6f74 746f 6d22 2c20 2262 6f74 746f  -bottom", "botto
-00019f60: 6d22 2c20 6465 6661 756c 743d 4661 6c73  m", default=Fals
-00019f70: 6529 0a64 6566 2070 7573 6828 736f 6e67  e).def push(song
-00019f80: 5f69 6473 2c20 626f 7474 6f6d 293a 0a20  _ids, bottom):. 
-00019f90: 2020 2022 2222 0a20 2020 204d 6f76 6520     """.    Move 
-00019fa0: 736f 6e67 7320 6172 6f75 6e64 2074 6f20  songs around to 
-00019fb0: 7468 6520 626f 7474 6f6d 206f 7220 746f  the bottom or to
-00019fc0: 7020 6f66 2074 6865 2064 6174 6162 6173  p of the databas
-00019fd0: 652e 0a0a 2020 2020 5075 7368 2074 6865  e...    Push the
-00019fe0: 2073 6f6e 6728 7329 2077 6974 6820 4944   song(s) with ID
-00019ff0: 2873 2920 534f 4e47 5f49 4453 2074 6f20  (s) SONG_IDS to 
-0001a000: 7468 6520 746f 7020 6f66 2074 6865 2064  the top of the d
-0001a010: 6174 6162 6173 6520 2861 7320 6966 2074  atabase (as if t
-0001a020: 6865 790a 2020 2020 7765 7265 2074 6865  hey.    were the
-0001a030: 2073 6f6e 6773 206d 6f73 7420 7265 6365   songs most rece
-0001a040: 6e74 6c79 2061 6464 6564 2920 696e 2074  ntly added) in t
-0001a050: 6865 206f 7264 6572 2074 6865 7920 6172  he order they ar
-0001a060: 6520 7061 7373 6564 2028 652e 672e 0a20  e passed (e.g.. 
-0001a070: 2020 2027 6d61 6573 7472 6f20 7075 7368     'maestro push
-0001a080: 2031 2032 2033 2720 7769 6c6c 206d 616b   1 2 3' will mak
-0001a090: 6520 7468 6520 6d6f 7374 2072 6563 656e  e the most recen
-0001a0a0: 7420 736f 6e67 2062 6520 3329 2e0a 0a20  t song be 3)... 
-0001a0b0: 2020 2049 6620 7468 6520 272d 4227 2066     If the '-B' f
-0001a0c0: 6c61 6720 6973 2070 6173 7365 642c 2074  lag is passed, t
-0001a0d0: 6865 2073 6f6e 6728 7329 2077 696c 6c20  he song(s) will 
-0001a0e0: 6265 2070 7573 6865 6420 746f 2074 6865  be pushed to the
-0001a0f0: 2062 6f74 746f 6d20 6f66 2074 6865 0a20   bottom of the. 
-0001a100: 2020 206c 6973 7420 696e 7374 6561 642e     list instead.
-0001a110: 0a20 2020 2022 2222 0a20 2020 2077 6974  .    """.    wit
-0001a120: 6820 6f70 656e 2863 6f6e 6669 672e 534f  h open(config.SO
-0001a130: 4e47 535f 494e 464f 5f50 4154 482c 2022  NGS_INFO_PATH, "
-0001a140: 722b 222c 2065 6e63 6f64 696e 673d 2275  r+", encoding="u
-0001a150: 7466 2d38 2229 2061 7320 736f 6e67 735f  tf-8") as songs_
-0001a160: 6669 6c65 3a0a 2020 2020 2020 2020 6c69  file:.        li
-0001a170: 6e65 7320 3d20 736f 6e67 735f 6669 6c65  nes = songs_file
-0001a180: 2e72 6561 646c 696e 6573 2829 0a0a 2020  .readlines()..  
-0001a190: 2020 2020 2020 6c69 6e65 735f 746f 5f6d        lines_to_m
-0001a1a0: 6f76 6520 3d20 5b5d 0a20 2020 2020 2020  ove = [].       
-0001a1b0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0001a1c0: 6c65 6e28 6c69 6e65 7329 293a 0a20 2020  len(lines)):.   
-0001a1d0: 2020 2020 2020 2020 2069 6620 696e 7428           if int(
-0001a1e0: 6c69 6e65 735b 695d 2e73 706c 6974 2822  lines[i].split("
-0001a1f0: 7c22 295b 305d 2920 696e 2073 6f6e 675f  |")[0]) in song_
-0001a200: 6964 733a 0a20 2020 2020 2020 2020 2020  ids:.           
-0001a210: 2020 2020 206c 696e 6573 5f74 6f5f 6d6f       lines_to_mo
-0001a220: 7665 2e61 7070 656e 6428 2869 2c20 6c69  ve.append((i, li
-0001a230: 6e65 735b 695d 2929 0a0a 2020 2020 2020  nes[i]))..      
-0001a240: 2020 666f 7220 692c 205f 2069 6e20 7265    for i, _ in re
-0001a250: 7665 7273 6564 286c 696e 6573 5f74 6f5f  versed(lines_to_
-0001a260: 6d6f 7665 293a 0a20 2020 2020 2020 2020  move):.         
-0001a270: 2020 206c 696e 6573 2e70 6f70 2869 290a     lines.pop(i).
-0001a280: 0a20 2020 2020 2020 2073 6f6e 675f 6964  .        song_id
-0001a290: 735f 7769 7468 5f6f 7264 6572 203d 2064  s_with_order = d
-0001a2a0: 6963 7428 0a20 2020 2020 2020 2020 2020  ict(.           
-0001a2b0: 206d 6170 286c 616d 6264 6120 783a 2028   map(lambda x: (
-0001a2c0: 785b 315d 2c20 785b 305d 292c 2065 6e75  x[1], x[0]), enu
-0001a2d0: 6d65 7261 7465 2873 6f6e 675f 6964 7329  merate(song_ids)
-0001a2e0: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-0001a2f0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-0001a300: 6e67 6528 6c65 6e28 6c69 6e65 735f 746f  nge(len(lines_to
-0001a310: 5f6d 6f76 6529 293a 0a20 2020 2020 2020  _move)):.       
-0001a320: 2020 2020 206c 696e 6573 5f74 6f5f 6d6f       lines_to_mo
-0001a330: 7665 5b69 5d20 3d20 280a 2020 2020 2020  ve[i] = (.      
-0001a340: 2020 2020 2020 2020 2020 736f 6e67 5f69            song_i
-0001a350: 6473 5f77 6974 685f 6f72 6465 725b 696e  ds_with_order[in
-0001a360: 7428 6c69 6e65 735f 746f 5f6d 6f76 655b  t(lines_to_move[
-0001a370: 695d 5b31 5d2e 7370 6c69 7428 227c 2229  i][1].split("|")
-0001a380: 5b30 5d29 5d2c 0a20 2020 2020 2020 2020  [0])],.         
-0001a390: 2020 2020 2020 202a 6c69 6e65 735f 746f         *lines_to
-0001a3a0: 5f6d 6f76 655b 695d 2c0a 2020 2020 2020  _move[i],.      
-0001a3b0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0001a3c0: 206c 696e 6573 5f74 6f5f 6d6f 7665 2e73   lines_to_move.s
-0001a3d0: 6f72 7428 6b65 793d 6c61 6d62 6461 2078  ort(key=lambda x
-0001a3e0: 3a20 785b 305d 2c20 7265 7665 7273 653d  : x[0], reverse=
-0001a3f0: 626f 7474 6f6d 290a 0a20 2020 2020 2020  bottom)..       
-0001a400: 2069 6620 6e6f 7420 626f 7474 6f6d 3a0a   if not bottom:.
-0001a410: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-0001a420: 7320 2b3d 205b 745b 325d 2066 6f72 2074  s += [t[2] for t
-0001a430: 2069 6e20 6c69 6e65 735f 746f 5f6d 6f76   in lines_to_mov
-0001a440: 655d 0a20 2020 2020 2020 2065 6c73 653a  e].        else:
-0001a450: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
-0001a460: 6573 203d 205b 745b 325d 2066 6f72 2074  es = [t[2] for t
-0001a470: 2069 6e20 6c69 6e65 735f 746f 5f6d 6f76   in lines_to_mov
-0001a480: 655d 202b 206c 696e 6573 0a0a 2020 2020  e] + lines..    
-0001a490: 2020 2020 736f 6e67 735f 6669 6c65 2e73      songs_file.s
-0001a4a0: 6565 6b28 3029 0a20 2020 2020 2020 2073  eek(0).        s
-0001a4b0: 6f6e 6773 5f66 696c 652e 7772 6974 6528  ongs_file.write(
-0001a4c0: 2222 2e6a 6f69 6e28 6c69 6e65 7329 290a  "".join(lines)).
-0001a4d0: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
-0001a4e0: 6c65 2e74 7275 6e63 6174 6528 290a 0a0a  le.truncate()...
-0001a4f0: 4063 6c69 2e63 6f6d 6d61 6e64 286e 616d  @cli.command(nam
-0001a500: 653d 2263 6c69 7022 290a 4063 6c69 636b  e="clip").@click
-0001a510: 2e61 7267 756d 656e 7428 2273 6f6e 675f  .argument("song_
-0001a520: 6964 222c 2072 6571 7569 7265 643d 5472  id", required=Tr
-0001a530: 7565 2c20 7479 7065 3d69 6e74 290a 4063  ue, type=int).@c
-0001a540: 6c69 636b 2e61 7267 756d 656e 7428 2273  lick.argument("s
-0001a550: 7461 7274 222c 2072 6571 7569 7265 643d  tart", required=
-0001a560: 4661 6c73 652c 2074 7970 653d 666c 6f61  False, type=floa
-0001a570: 742c 2064 6566 6175 6c74 3d4e 6f6e 6529  t, default=None)
-0001a580: 0a40 636c 6963 6b2e 6172 6775 6d65 6e74  .@click.argument
-0001a590: 2822 656e 6422 2c20 7265 7175 6972 6564  ("end", required
-0001a5a0: 3d46 616c 7365 2c20 7479 7065 3d66 6c6f  =False, type=flo
-0001a5b0: 6174 2c20 6465 6661 756c 743d 4e6f 6e65  at, default=None
-0001a5c0: 290a 6465 6620 636c 6970 5f28 736f 6e67  ).def clip_(song
-0001a5d0: 5f69 642c 2073 7461 7274 2c20 656e 6429  _id, start, end)
-0001a5e0: 3a0a 2020 2020 2222 220a 2020 2020 4372  :.    """.    Cr
-0001a5f0: 6561 7465 206f 7220 6564 6974 2074 6865  eate or edit the
-0001a600: 2063 6c69 7020 666f 7220 6120 736f 6e67   clip for a song
-0001a610: 2e0a 0a20 2020 2053 6574 7320 7468 6520  ...    Sets the 
-0001a620: 636c 6970 2066 6f72 2074 6865 2073 6f6e  clip for the son
-0001a630: 6720 7769 7468 2049 4420 534f 4e47 5f49  g with ID SONG_I
-0001a640: 4420 746f 2074 6865 2074 696d 6520 7261  D to the time ra
-0001a650: 6e67 6520 5354 4152 5420 746f 2045 4e44  nge START to END
-0001a660: 0a20 2020 2028 696e 2073 6563 6f6e 6473  .    (in seconds
-0001a670: 292e 0a0a 2020 2020 4966 2045 4e44 2069  )...    If END i
-0001a680: 7320 6e6f 7420 7061 7373 6564 2c20 7468  s not passed, th
-0001a690: 6520 636c 6970 2077 696c 6c20 6265 2066  e clip will be f
-0001a6a0: 726f 6d20 5354 4152 5420 746f 2074 6865  rom START to the
-0001a6b0: 2065 6e64 206f 6620 7468 6520 736f 6e67   end of the song
-0001a6c0: 2e0a 0a20 2020 2049 6620 6e65 6974 6865  ...    If neithe
-0001a6d0: 7220 5354 4152 5420 6e6f 7220 454e 4420  r START nor END 
-0001a6e0: 6172 6520 7061 7373 6564 2c20 6120 636c  are passed, a cl
-0001a6f0: 6970 2065 6469 746f 7220 7769 6c6c 2062  ip editor will b
-0001a700: 6520 6f70 656e 6564 2c20 696e 2077 6869  e opened, in whi
-0001a710: 6368 0a20 2020 2079 6f75 2063 616e 206d  ch.    you can m
-0001a720: 6f76 6520 7468 6520 7374 6172 7420 616e  ove the start an
-0001a730: 6420 656e 6420 6f66 2074 6865 2063 6c69  d end of the cli
-0001a740: 7020 6172 6f75 6e64 2075 7369 6e67 2074  p around using t
-0001a750: 6865 2061 7272 6f77 206b 6579 7320 7768  he arrow keys wh
-0001a760: 696c 650a 2020 2020 6c69 7374 656e 696e  ile.    listenin
-0001a770: 6720 746f 2074 6865 2073 6f6e 6720 2861  g to the song (a
-0001a780: 6c73 6f20 7368 6f77 7320 7761 7665 666f  lso shows wavefo
-0001a790: 726d 292e 0a0a 2020 2020 5c62 0a20 2020  rm)...    \b.   
-0001a7a0: 2054 6865 2065 6469 746f 7220 7374 6172   The editor star
-0001a7b0: 7473 206f 7574 2065 6469 7469 6e67 2074  ts out editing t
-0001a7c0: 6865 2073 7461 7274 206f 6620 7468 6520  he start of the 
-0001a7d0: 636c 6970 2e0a 2020 2020 5c78 3162 5b31  clip..    \x1b[1
-0001a7e0: 6d74 5c78 3162 5b30 6d20 746f 2074 6f67  mt\x1b[0m to tog
-0001a7f0: 676c 6520 6265 7477 6565 6e20 6564 6974  gle between edit
-0001a800: 696e 6720 7468 6520 7374 6172 7420 616e  ing the start an
-0001a810: 6420 656e 6420 6f66 2074 6865 2063 6c69  d end of the cli
-0001a820: 702e 0a20 2020 205c 7831 625b 316d 5348  p..    \x1b[1mSH
-0001a830: 4946 542b 4c45 4654 2f52 4947 4854 5c78  IFT+LEFT/RIGHT\x
-0001a840: 3162 5b30 6d20 7769 6c6c 206d 6f76 6520  1b[0m will move 
-0001a850: 7768 6963 6865 7665 7220 636c 6970 2065  whichever clip e
-0001a860: 6e64 2079 6f75 2061 7265 2065 6469 7469  nd you are editi
-0001a870: 6e67 0a20 2020 2020 2020 2062 7920 302e  ng.        by 0.
-0001a880: 3120 7365 636f 6e64 732c 2073 6e61 7020  1 seconds, snap 
-0001a890: 7468 6520 6375 7272 656e 7420 706c 6179  the current play
-0001a8a0: 6261 636b 2074 6f20 7468 6174 2063 6c69  back to that cli
-0001a8b0: 7020 656e 6420 2874 6f20 6578 6163 746c  p end (to exactl
-0001a8c0: 790a 2020 2020 2020 2020 7468 6520 636c  y.        the cl
-0001a8d0: 6970 2073 7461 7274 2069 6620 6564 6974  ip start if edit
-0001a8e0: 696e 6720 7374 6172 742c 2065 6e64 2d31  ing start, end-1
-0001a8f0: 2069 6620 6564 6974 696e 6720 656e 6429   if editing end)
-0001a900: 2c20 616e 6420 7061 7573 652e 0a20 2020  , and pause..   
-0001a910: 205c 7831 625b 316d 4c45 4654 2f52 4947   \x1b[1mLEFT/RIG
-0001a920: 4854 5c78 3162 5b30 6d20 7769 6c6c 206d  HT\x1b[0m will m
-0001a930: 6f76 6520 7768 6963 6865 7665 7220 636c  ove whichever cl
-0001a940: 6970 2065 6e64 2079 6f75 2061 7265 2065  ip end you are e
-0001a950: 6469 7469 6e67 2062 7920 310a 2020 2020  diting by 1.    
-0001a960: 2020 2020 7365 636f 6e64 2c20 736e 6170      second, snap
-0001a970: 2074 6865 2063 7572 7265 6e74 2070 6c61   the current pla
-0001a980: 7962 6163 6b20 746f 2074 6861 7420 636c  yback to that cl
-0001a990: 6970 2065 6e64 2c20 616e 6420 7061 7573  ip end, and paus
-0001a9a0: 652e 0a20 2020 205c 7831 625b 316d 454e  e..    \x1b[1mEN
-0001a9b0: 5445 525c 7831 625b 306d 2077 696c 6c20  TER\x1b[0m will 
-0001a9c0: 6578 6974 2074 6865 2065 6469 746f 7220  exit the editor 
-0001a9d0: 616e 6420 7361 7665 2074 6865 2063 6c69  and save the cli
-0001a9e0: 702e 0a20 2020 205c 7831 625b 316d 715c  p..    \x1b[1mq\
-0001a9f0: 7831 625b 306d 2077 696c 6c20 6578 6974  x1b[0m will exit
-0001aa00: 2074 6865 2065 6469 746f 7220 7769 7468   the editor with
-0001aa10: 6f75 7420 7361 7669 6e67 2074 6865 2063  out saving the c
-0001aa20: 6c69 702e 0a20 2020 2022 2222 0a20 2020  lip..    """.   
-0001aa30: 2069 6620 7374 6172 7420 6973 206e 6f74   if start is not
-0001aa40: 204e 6f6e 653a 0a20 2020 2020 2020 2069   None:.        i
-0001aa50: 6620 7374 6172 7420 3c20 303a 0a20 2020  f start < 0:.   
-0001aa60: 2020 2020 2020 2020 2063 6c69 636b 2e73           click.s
-0001aa70: 6563 686f 2822 5354 4152 5420 6d75 7374  echo("START must
-0001aa80: 2062 6520 6120 706f 7369 7469 7665 206e   be a positive n
-0001aa90: 756d 6265 722e 222c 2066 673d 2272 6564  umber.", fg="red
-0001aaa0: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-0001aab0: 6574 7572 6e0a 2020 2020 2020 2020 6966  eturn.        if
-0001aac0: 2065 6e64 2069 7320 6e6f 7420 4e6f 6e65   end is not None
-0001aad0: 2061 6e64 2065 6e64 203c 2030 3a0a 2020   and end < 0:.  
-0001aae0: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
-0001aaf0: 7365 6368 6f28 2245 4e44 206d 7573 7420  secho("END must 
-0001ab00: 6265 2061 2070 6f73 6974 6976 6520 6e75  be a positive nu
-0001ab10: 6d62 6572 2e22 2c20 6667 3d22 7265 6422  mber.", fg="red"
-0001ab20: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0001ab30: 7475 726e 0a0a 2020 2020 7769 7468 206f  turn..    with o
-0001ab40: 7065 6e28 636f 6e66 6967 2e53 4f4e 4753  pen(config.SONGS
-0001ab50: 5f49 4e46 4f5f 5041 5448 2c20 2272 2b22  _INFO_PATH, "r+"
-0001ab60: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
-0001ab70: 3822 2920 6173 2073 6f6e 6773 5f66 696c  8") as songs_fil
-0001ab80: 653a 0a20 2020 2020 2020 206c 696e 6573  e:.        lines
-0001ab90: 203d 2073 6f6e 6773 5f66 696c 652e 7265   = songs_file.re
-0001aba0: 6164 6c69 6e65 7328 290a 0a20 2020 2020  adlines()..     
-0001abb0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0001abc0: 6528 6c65 6e28 6c69 6e65 7329 293a 0a20  e(len(lines)):. 
-0001abd0: 2020 2020 2020 2020 2020 2064 6574 6169             detai
-0001abe0: 6c73 203d 206c 696e 6573 5b69 5d2e 7374  ls = lines[i].st
-0001abf0: 7269 7028 292e 7370 6c69 7428 227c 2229  rip().split("|")
-0001ac00: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001ac10: 696e 7428 6465 7461 696c 735b 305d 2920  int(details[0]) 
-0001ac20: 3d3d 2073 6f6e 675f 6964 3a0a 2020 2020  == song_id:.    
-0001ac30: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-0001ac40: 6b0a 2020 2020 2020 2020 656c 7365 3a0a  k.        else:.
-0001ac50: 2020 2020 2020 2020 2020 2020 636c 6963              clic
-0001ac60: 6b2e 7365 6368 6f28 6622 4e6f 2073 6f6e  k.secho(f"No son
-0001ac70: 6720 666f 756e 6420 7769 7468 2049 4420  g found with ID 
-0001ac80: 7b73 6f6e 675f 6964 7d2e 222c 2066 673d  {song_id}.", fg=
-0001ac90: 2272 6564 2229 0a20 2020 2020 2020 2020  "red").         
-0001aca0: 2020 2072 6574 7572 6e0a 0a20 2020 2020     return..     
-0001acb0: 2020 2073 6f6e 675f 6e61 6d65 203d 2064     song_name = d
-0001acc0: 6574 6169 6c73 5b31 5d0a 2020 2020 2020  etails[1].      
-0001acd0: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-0001ace0: 2e65 7869 7374 7328 6f73 2e70 6174 682e  .exists(os.path.
-0001acf0: 6a6f 696e 2863 6f6e 6669 672e 534f 4e47  join(config.SONG
-0001ad00: 535f 4449 522c 2073 6f6e 675f 6e61 6d65  S_DIR, song_name
-0001ad10: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0001ad20: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-0001ad30: 2020 2020 2020 2020 2020 2020 2066 2253               f"S
-0001ad40: 6f6e 6720 6669 6c65 207b 736f 6e67 5f6e  ong file {song_n
-0001ad50: 616d 657d 2028 4944 207b 736f 6e67 5f69  ame} (ID {song_i
-0001ad60: 647d 2920 6e6f 7420 666f 756e 642e 222c  d}) not found.",
-0001ad70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ad80: 2066 673d 2272 6564 222c 0a20 2020 2020   fg="red",.     
-0001ad90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001ada0: 2020 2020 2072 6574 7572 6e0a 0a20 2020       return..   
-0001adb0: 2020 2020 2069 6620 7374 6172 7420 6973       if start is
-0001adc0: 204e 6f6e 653a 2020 2320 636c 6970 2065   None:  # clip e
-0001add0: 6469 746f 720a 2020 2020 2020 2020 2020  ditor.          
-0001ade0: 2020 7374 6172 742c 2065 6e64 203d 2063    start, end = c
-0001adf0: 7572 7365 732e 7772 6170 7065 7228 6865  urses.wrapper(he
-0001ae00: 6c70 6572 732e 636c 6970 5f65 6469 746f  lpers.clip_edito
-0001ae10: 722c 2064 6574 6169 6c73 290a 2020 2020  r, details).    
-0001ae20: 2020 2020 2020 2020 6966 2073 7461 7274          if start
-0001ae30: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0001ae40: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
-0001ae50: 7365 6368 6f28 6622 4e6f 2063 6861 6e67  secho(f"No chang
-0001ae60: 6520 696e 2063 6c69 7020 666f 7220 7b73  e in clip for {s
-0001ae70: 6f6e 675f 6e61 6d65 7d2e 222c 2066 673d  ong_name}.", fg=
-0001ae80: 2267 7265 656e 2229 0a20 2020 2020 2020  "green").       
-0001ae90: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-0001aea0: 0a20 2020 2020 2020 2073 6f6e 675f 7061  .        song_pa
-0001aeb0: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
-0001aec0: 6e28 636f 6e66 6967 2e53 4f4e 4753 5f44  n(config.SONGS_D
-0001aed0: 4952 2c20 736f 6e67 5f6e 616d 6529 0a20  IR, song_name). 
-0001aee0: 2020 2020 2020 2064 7572 6174 696f 6e20         duration 
-0001aef0: 3d20 6d75 7369 635f 7461 672e 6c6f 6164  = music_tag.load
-0001af00: 5f66 696c 6528 736f 6e67 5f70 6174 6829  _file(song_path)
-0001af10: 5b22 236c 656e 6774 6822 5d2e 7661 6c75  ["#length"].valu
-0001af20: 650a 0a20 2020 2020 2020 2069 6620 656e  e..        if en
-0001af30: 6420 6973 204e 6f6e 653a 0a20 2020 2020  d is None:.     
-0001af40: 2020 2020 2020 2065 6e64 203d 2064 7572         end = dur
-0001af50: 6174 696f 6e0a 0a20 2020 2020 2020 2069  ation..        i
-0001af60: 6620 7374 6172 7420 3e20 6475 7261 7469  f start > durati
-0001af70: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
-0001af80: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-0001af90: 2020 2020 2020 2020 2020 2020 2022 5354               "ST
-0001afa0: 4152 5420 6d75 7374 206e 6f74 2062 6520  ART must not be 
-0001afb0: 6d6f 7265 2074 6861 6e20 7468 6520 736f  more than the so
-0001afc0: 6e67 2064 7572 6174 696f 6e2e 222c 2066  ng duration.", f
-0001afd0: 673d 2272 6564 220a 2020 2020 2020 2020  g="red".        
-0001afe0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0001aff0: 2020 7265 7475 726e 0a20 2020 2020 2020    return.       
-0001b000: 2069 6620 656e 6420 3e20 6475 7261 7469   if end > durati
-0001b010: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
-0001b020: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-0001b030: 2020 2020 2020 2020 2020 2020 2022 454e               "EN
-0001b040: 4420 6d75 7374 206e 6f74 2062 6520 6d6f  D must not be mo
-0001b050: 7265 2074 6861 6e20 7468 6520 736f 6e67  re than the song
-0001b060: 2064 7572 6174 696f 6e2e 222c 2066 673d   duration.", fg=
-0001b070: 2272 6564 220a 2020 2020 2020 2020 2020  "red".          
-0001b080: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0001b090: 7265 7475 726e 0a20 2020 2020 2020 2069  return.        i
-0001b0a0: 6620 7374 6172 7420 3e20 656e 643a 0a20  f start > end:. 
-0001b0b0: 2020 2020 2020 2020 2020 2063 6c69 636b             click
-0001b0c0: 2e73 6563 686f 2822 5354 4152 5420 6d75  .secho("START mu
-0001b0d0: 7374 206e 6f74 2062 6520 6d6f 7265 2074  st not be more t
-0001b0e0: 6861 6e20 454e 442e 222c 2066 673d 2272  han END.", fg="r
-0001b0f0: 6564 2229 0a20 2020 2020 2020 2020 2020  ed").           
-0001b100: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
-0001b110: 206c 696e 6573 5b69 5d20 3d20 280a 2020   lines[i] = (.  
-0001b120: 2020 2020 2020 2020 2020 227c 222e 6a6f            "|".jo
-0001b130: 696e 2864 6574 6169 6c73 5b3a 335d 202b  in(details[:3] +
-0001b140: 205b 7374 7228 7374 6172 7429 202b 2022   [str(start) + "
-0001b150: 2022 202b 2073 7472 2865 6e64 295d 202b   " + str(end)] +
-0001b160: 2064 6574 6169 6c73 5b35 3a5d 290a 2020   details[5:]).  
-0001b170: 2020 2020 2020 2020 2020 2b20 225c 6e22            + "\n"
-0001b180: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0001b190: 2020 2020 736f 6e67 735f 6669 6c65 2e73      songs_file.s
-0001b1a0: 6565 6b28 3029 0a20 2020 2020 2020 2073  eek(0).        s
-0001b1b0: 6f6e 6773 5f66 696c 652e 7772 6974 6528  ongs_file.write(
-0001b1c0: 2222 2e6a 6f69 6e28 6c69 6e65 7329 290a  "".join(lines)).
-0001b1d0: 2020 2020 2020 2020 736f 6e67 735f 6669          songs_fi
-0001b1e0: 6c65 2e74 7275 6e63 6174 6528 290a 0a20  le.truncate().. 
-0001b1f0: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
-0001b200: 686f 2866 2243 6c69 7070 6564 207b 736f  ho(f"Clipped {so
-0001b210: 6e67 5f6e 616d 657d 2066 726f 6d20 7b73  ng_name} from {s
-0001b220: 7461 7274 7d20 746f 207b 656e 647d 2e22  tart} to {end}."
-0001b230: 2c20 6667 3d22 6772 6565 6e22 290a 0a0a  , fg="green")...
-0001b240: 4063 6c69 2e63 6f6d 6d61 6e64 2829 0a40  @cli.command().@
-0001b250: 636c 6963 6b2e 6172 6775 6d65 6e74 2822  click.argument("
-0001b260: 736f 6e67 5f69 6473 222c 2074 7970 653d  song_ids", type=
-0001b270: 696e 742c 206e 6172 6773 3d2d 312c 2072  int, nargs=-1, r
-0001b280: 6571 7569 7265 643d 4661 6c73 6529 0a40  equired=False).@
-0001b290: 636c 6963 6b2e 6f70 7469 6f6e 280a 2020  click.option(.  
-0001b2a0: 2020 222d 412f 2d6e 4122 2c0a 2020 2020    "-A/-nA",.    
-0001b2b0: 222d 2d61 6c6c 2f2d 2d6e 6f2d 616c 6c22  "--all/--no-all"
-0001b2c0: 2c0a 2020 2020 2261 6c6c 5f22 2c0a 2020  ,.    "all_",.  
-0001b2d0: 2020 6465 6661 756c 743d 4661 6c73 652c    default=False,
-0001b2e0: 0a20 2020 2068 656c 703d 2252 656d 6f76  .    help="Remov
-0001b2f0: 6520 636c 6970 7320 666f 7220 616c 6c20  e clips for all 
-0001b300: 736f 6e67 732e 2049 676e 6f72 6573 2053  songs. Ignores S
-0001b310: 4f4e 475f 4944 532e 222c 0a29 0a40 636c  ONG_IDS.",.).@cl
-0001b320: 6963 6b2e 6f70 7469 6f6e 2822 2d46 2f2d  ick.option("-F/-
-0001b330: 6e46 222c 2022 2d2d 666f 7263 652f 2d2d  nF", "--force/--
-0001b340: 6e6f 2d66 6f72 6365 222c 2022 666f 7263  no-force", "forc
-0001b350: 6522 2c20 6465 6661 756c 743d 4661 6c73  e", default=Fals
-0001b360: 6529 0a64 6566 2075 6e63 6c69 7028 736f  e).def unclip(so
-0001b370: 6e67 5f69 6473 2c20 616c 6c5f 2c20 666f  ng_ids, all_, fo
-0001b380: 7263 6529 3a0a 2020 2020 2222 220a 2020  rce):.    """.  
-0001b390: 2020 5265 6d6f 7665 2063 6c69 7073 2066    Remove clips f
-0001b3a0: 6f72 2073 7065 6369 6669 6320 736f 6e67  or specific song
-0001b3b0: 2873 292e 0a0a 2020 2020 5265 6d6f 7665  (s)...    Remove
-0001b3c0: 7320 636c 6970 2066 6f72 2074 6865 2073  s clip for the s
-0001b3d0: 6f6e 6728 7329 2077 6974 6820 4944 2873  ong(s) with ID(s
-0001b3e0: 2920 534f 4e47 5f49 4453 2e0a 0a20 2020  ) SONG_IDS...   
-0001b3f0: 2049 6620 7468 6520 272d 412f 2d2d 616c   If the '-A/--al
-0001b400: 6c27 2066 6c61 6720 6973 2070 6173 7365  l' flag is passe
-0001b410: 642c 2074 6865 2063 6c69 7073 2066 6f72  d, the clips for
-0001b420: 2061 6c6c 2073 6f6e 6773 2077 696c 6c20   all songs will 
-0001b430: 6265 2072 656d 6f76 6564 2c0a 2020 2020  be removed,.    
-0001b440: 6967 6e6f 7269 6e67 2053 4f4e 475f 4944  ignoring SONG_ID
-0001b450: 532e 2054 6869 7320 7072 6f6d 7074 7320  S. This prompts 
-0001b460: 666f 7220 636f 6e66 6972 6d61 7469 6f6e  for confirmation
-0001b470: 2075 6e6c 6573 7320 7468 6520 272d 462f   unless the '-F/
-0001b480: 2d2d 666f 7263 6527 0a20 2020 2066 6c61  --force'.    fla
-0001b490: 6720 6973 2070 6173 7365 642e 0a20 2020  g is passed..   
-0001b4a0: 2022 2222 0a20 2020 2069 6620 6e6f 7420   """.    if not 
-0001b4b0: 616c 6c5f 3a0a 2020 2020 2020 2020 6966  all_:.        if
-0001b4c0: 2073 6f6e 675f 6964 733a 0a20 2020 2020   song_ids:.     
-0001b4d0: 2020 2020 2020 2073 6f6e 675f 6964 7320         song_ids 
-0001b4e0: 3d20 7365 7428 736f 6e67 5f69 6473 290a  = set(song_ids).
-0001b4f0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001b500: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
-0001b510: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
-0001b520: 2020 2020 2020 2022 4e6f 2073 6f6e 6720         "No song 
-0001b530: 4944 7320 7061 7373 6564 2e20 546f 2072  IDs passed. To r
-0001b540: 656d 6f76 6520 636c 6970 7320 666f 7220  emove clips for 
-0001b550: 616c 6c20 736f 6e67 732c 2070 6173 7320  all songs, pass 
-0001b560: 7468 6520 272d 412f 2d2d 616c 6c27 2066  the '-A/--all' f
-0001b570: 6c61 672e 222c 0a20 2020 2020 2020 2020  lag.",.         
-0001b580: 2020 2020 2020 2066 673d 2272 6564 222c         fg="red",
-0001b590: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-0001b5a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001b5b0: 6e0a 0a20 2020 2069 6620 616c 6c5f 2061  n..    if all_ a
-0001b5c0: 6e64 206e 6f74 2066 6f72 6365 3a0a 2020  nd not force:.  
-0001b5d0: 2020 2020 2020 636c 6963 6b2e 6563 686f        click.echo
-0001b5e0: 280a 2020 2020 2020 2020 2020 2020 2241  (.            "A
-0001b5f0: 7265 2079 6f75 2073 7572 6520 796f 7520  re you sure you 
-0001b600: 7761 6e74 2074 6f20 7265 6d6f 7665 2063  want to remove c
-0001b610: 6c69 7073 2066 6f72 2061 6c6c 2073 6f6e  lips for all son
-0001b620: 6773 3f20 5468 6973 2063 616e 6e6f 7420  gs? This cannot 
-0001b630: 6265 2075 6e64 6f6e 652e 205b 792f 6e5d  be undone. [y/n]
-0001b640: 2022 2c0a 2020 2020 2020 2020 290a 2020   ",.        ).  
-0001b650: 2020 2020 2020 6966 2069 6e70 7574 2829        if input()
-0001b660: 2e6c 6f77 6572 2829 2021 3d20 2279 223a  .lower() != "y":
-0001b670: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001b680: 7572 6e0a 0a20 2020 2077 6974 6820 6f70  urn..    with op
-0001b690: 656e 2863 6f6e 6669 672e 534f 4e47 535f  en(config.SONGS_
-0001b6a0: 494e 464f 5f50 4154 482c 2022 722b 222c  INFO_PATH, "r+",
-0001b6b0: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-0001b6c0: 2229 2061 7320 736f 6e67 735f 6669 6c65  ") as songs_file
-0001b6d0: 3a0a 2020 2020 2020 2020 6c69 6e65 7320  :.        lines 
-0001b6e0: 3d20 736f 6e67 735f 6669 6c65 2e72 6561  = songs_file.rea
-0001b6f0: 646c 696e 6573 2829 0a0a 2020 2020 2020  dlines()..      
-0001b700: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0001b710: 286c 656e 286c 696e 6573 2929 3a0a 2020  (len(lines)):.  
-0001b720: 2020 2020 2020 2020 2020 6465 7461 696c            detail
-0001b730: 7320 3d20 6c69 6e65 735b 695d 2e73 7472  s = lines[i].str
-0001b740: 6970 2829 2e73 706c 6974 2822 7c22 290a  ip().split("|").
-0001b750: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0001b760: 6c6c 5f20 6f72 2069 6e74 2864 6574 6169  ll_ or int(detai
-0001b770: 6c73 5b30 5d29 2069 6e20 736f 6e67 5f69  ls[0]) in song_i
-0001b780: 6473 3a0a 2020 2020 2020 2020 2020 2020  ds:.            
-0001b790: 2020 2020 6c69 6e65 735b 695d 203d 2022      lines[i] = "
-0001b7a0: 7c22 2e6a 6f69 6e28 6465 7461 696c 735b  |".join(details[
-0001b7b0: 3a33 5d20 2b20 5b22 225d 202b 2064 6574  :3] + [""] + det
-0001b7c0: 6169 6c73 5b35 3a5d 2920 2b20 225c 6e22  ails[5:]) + "\n"
-0001b7d0: 0a0a 2020 2020 2020 2020 736f 6e67 735f  ..        songs_
-0001b7e0: 6669 6c65 2e73 6565 6b28 3029 0a20 2020  file.seek(0).   
-0001b7f0: 2020 2020 2073 6f6e 6773 5f66 696c 652e       songs_file.
-0001b800: 7772 6974 6528 2222 2e6a 6f69 6e28 6c69  write("".join(li
-0001b810: 6e65 7329 290a 2020 2020 2020 2020 736f  nes)).        so
-0001b820: 6e67 735f 6669 6c65 2e74 7275 6e63 6174  ngs_file.truncat
-0001b830: 6528 290a 0a20 2020 2069 6620 616c 6c5f  e()..    if all_
-0001b840: 3a0a 2020 2020 2020 2020 636c 6963 6b2e  :.        click.
-0001b850: 7365 6368 6f28 2252 656d 6f76 6564 2063  secho("Removed c
-0001b860: 6c69 7073 2066 6f72 2061 6c6c 2073 6f6e  lips for all son
-0001b870: 6773 2e22 2c20 6667 3d22 6772 6565 6e22  gs.", fg="green"
-0001b880: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-0001b890: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
-0001b8a0: 0a20 2020 2020 2020 2020 2020 2066 2252  .            f"R
-0001b8b0: 656d 6f76 6564 2063 6c69 7028 7329 2066  emoved clip(s) f
-0001b8c0: 6f72 2073 6f6e 6728 7329 2077 6974 6820  or song(s) with 
-0001b8d0: 4944 2873 2920 7b27 2c20 272e 6a6f 696e  ID(s) {', '.join
-0001b8e0: 286d 6170 2873 7472 2c20 736f 6e67 5f69  (map(str, song_i
-0001b8f0: 6473 2929 7d2e 222c 0a20 2020 2020 2020  ds))}.",.       
-0001b900: 2020 2020 2066 673d 2267 7265 656e 222c       fg="green",
-0001b910: 0a20 2020 2020 2020 2029 0a0a 0a40 636c  .        )...@cl
-0001b920: 692e 636f 6d6d 616e 6428 290a 4063 6c69  i.command().@cli
-0001b930: 636b 2e61 7267 756d 656e 7428 2273 6f6e  ck.argument("son
-0001b940: 675f 6964 222c 2074 7970 653d 696e 742c  g_id", type=int,
-0001b950: 2072 6571 7569 7265 643d 5472 7565 290a   required=True).
-0001b960: 4063 6c69 636b 2e61 7267 756d 656e 7428  @click.argument(
-0001b970: 2270 6169 7273 222c 2074 7970 653d 7374  "pairs", type=st
-0001b980: 722c 2072 6571 7569 7265 643d 4661 6c73  r, required=Fals
-0001b990: 6529 0a64 6566 206d 6574 6164 6174 6128  e).def metadata(
-0001b9a0: 736f 6e67 5f69 642c 2070 6169 7273 293a  song_id, pairs):
-0001b9b0: 0a20 2020 2022 2222 0a20 2020 2056 6965  .    """.    Vie
-0001b9c0: 7720 6f72 2065 6469 7420 7468 6520 6d65  w or edit the me
-0001b9d0: 7461 6461 7461 2066 6f72 2061 2073 6f6e  tadata for a son
-0001b9e0: 672e 0a0a 2020 2020 4966 206e 6f20 5041  g...    If no PA
-0001b9f0: 4952 5320 6172 6520 7061 7373 6564 2c20  IRS are passed, 
-0001ba00: 7072 696e 7473 2074 6865 206d 6574 6164  prints the metad
-0001ba10: 6174 6120 666f 7220 7468 6520 736f 6e67  ata for the song
-0001ba20: 2077 6974 6820 4944 2053 4f4e 475f 4944   with ID SONG_ID
-0001ba30: 2e0a 0a20 2020 2049 6620 5041 4952 5320  ...    If PAIRS 
-0001ba40: 6172 6520 7061 7373 6564 2c20 7365 7473  are passed, sets
-0001ba50: 2074 6865 206d 6574 6164 6174 6120 666f   the metadata fo
-0001ba60: 7220 7468 6520 736f 6e67 2077 6974 6820  r the song with 
-0001ba70: 4944 2053 4f4e 475f 4944 2074 6f20 7468  ID SONG_ID to th
-0001ba80: 650a 2020 2020 6b65 792d 7661 6c75 6520  e.    key-value 
-0001ba90: 7061 6972 7320 696e 2050 4149 5253 2e20  pairs in PAIRS. 
-0001baa0: 5041 4952 5320 7368 6f75 6c64 2062 6520  PAIRS should be 
-0001bab0: 6120 7374 7269 6e67 206f 6620 7468 6520  a string of the 
-0001bac0: 666f 726d 0a20 2020 2027 6b65 7931 3a76  form.    'key1:v
-0001bad0: 616c 7565 317c 6b65 7932 3a76 616c 7565  alue1|key2:value
-0001bae0: 327c 2e2e 2e27 2e0a 0a20 2020 2050 6f73  2|...'...    Pos
-0001baf0: 7369 626c 6520 6564 6974 6162 6c65 206d  sible editable m
-0001bb00: 6574 6164 6174 6120 6b65 7973 2061 7265  etadata keys are
-0001bb10: 3a20 616c 6275 6d2c 2061 6c62 756d 6172  : album, albumar
-0001bb20: 7469 7374 2c20 6172 7469 7374 2c20 6172  tist, artist, ar
-0001bb30: 7477 6f72 6b2c 0a20 2020 2063 6f6d 6d65  twork,.    comme
-0001bb40: 6e74 2c20 636f 6d70 696c 6174 696f 6e2c  nt, compilation,
-0001bb50: 2063 6f6d 706f 7365 722c 2064 6973 636e   composer, discn
-0001bb60: 756d 6265 722c 2067 656e 7265 2c20 6c79  umber, genre, ly
-0001bb70: 7269 6373 2c20 746f 7461 6c64 6973 6373  rics, totaldiscs
-0001bb80: 2c0a 2020 2020 746f 7461 6c74 7261 636b  ,.    totaltrack
-0001bb90: 732c 2074 7261 636b 6e75 6d62 6572 2c20  s, tracknumber, 
-0001bba0: 7472 6163 6b74 6974 6c65 2c20 7965 6172  tracktitle, year
-0001bbb0: 2c20 6973 7263 0a0a 2020 2020 4b65 7973  , isrc..    Keys
-0001bbc0: 2061 7265 206e 6f74 2063 6173 6520 7365   are not case se
-0001bbd0: 6e73 6974 6976 6520 616e 6420 6361 6e20  nsitive and can 
-0001bbe0: 636f 6e74 6169 6e20 6172 6269 7472 6172  contain arbitrar
-0001bbf0: 7920 7768 6974 6573 7061 6365 2c20 272d  y whitespace, '-
-0001bc00: 272c 2061 6e64 0a20 2020 2027 5f27 2063  ', and.    '_' c
-0001bc10: 6861 7261 6374 6572 732e 2049 6e20 6f74  haracters. In ot
-0001bc20: 6865 7220 776f 7264 732c 2027 416c 6275  her words, 'Albu
-0001bc30: 6d20 4172 7469 7374 272c 2027 616c 6275  m Artist', 'albu
-0001bc40: 6d2d 6172 7469 7374 272c 2061 6e64 0a20  m-artist', and. 
-0001bc50: 2020 2027 616c 6275 6d5f 6172 7469 7374     'album_artist
-0001bc60: 2720 6172 6520 616c 6c20 7379 6e6f 6e79  ' are all synony
-0001bc70: 6d73 2066 6f72 2027 616c 6275 6d61 7274  ms for 'albumart
-0001bc80: 6973 7427 2e20 416c 736f 2c20 2764 6973  ist'. Also, 'dis
-0001bc90: 6b27 2069 730a 2020 2020 7379 6e6f 6e79  k' is.    synony
-0001bca0: 6d6f 7573 2077 6974 6820 2764 6973 6327  mous with 'disc'
-0001bcb0: 2e0a 2020 2020 2222 220a 0a20 2020 2077  ..    """..    w
-0001bcc0: 6974 6820 6f70 656e 2863 6f6e 6669 672e  ith open(config.
-0001bcd0: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
-0001bce0: 2022 7222 2c20 656e 636f 6469 6e67 3d22   "r", encoding="
-0001bcf0: 7574 662d 3822 2920 6173 2073 6f6e 6773  utf-8") as songs
-0001bd00: 5f66 696c 653a 0a20 2020 2020 2020 206c  _file:.        l
-0001bd10: 696e 6573 203d 2073 6f6e 6773 5f66 696c  ines = songs_fil
-0001bd20: 652e 7265 6164 6c69 6e65 7328 290a 0a20  e.readlines().. 
-0001bd30: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0001bd40: 7261 6e67 6528 6c65 6e28 6c69 6e65 7329  range(len(lines)
-0001bd50: 293a 0a20 2020 2020 2020 2020 2020 2064  ):.            d
-0001bd60: 6574 6169 6c73 203d 206c 696e 6573 5b69  etails = lines[i
-0001bd70: 5d2e 7374 7269 7028 292e 7370 6c69 7428  ].strip().split(
-0001bd80: 227c 2229 0a20 2020 2020 2020 2020 2020  "|").           
-0001bd90: 2069 6620 696e 7428 6465 7461 696c 735b   if int(details[
-0001bda0: 305d 2920 3d3d 2073 6f6e 675f 6964 3a0a  0]) == song_id:.
-0001bdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bdc0: 736f 6e67 5f70 6174 6820 3d20 6f73 2e70  song_path = os.p
-0001bdd0: 6174 682e 6a6f 696e 2863 6f6e 6669 672e  ath.join(config.
-0001bde0: 534f 4e47 535f 4449 522c 2064 6574 6169  SONGS_DIR, detai
-0001bdf0: 6c73 5b31 5d29 0a20 2020 2020 2020 2020  ls[1]).         
-0001be00: 2020 2020 2020 2073 6f6e 675f 6e61 6d65         song_name
-0001be10: 203d 2064 6574 6169 6c73 5b31 5d0a 2020   = details[1].  
-0001be20: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001be30: 206e 6f74 206f 732e 7061 7468 2e65 7869   not os.path.exi
-0001be40: 7374 7328 736f 6e67 5f70 6174 6829 3a0a  sts(song_path):.
-0001be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be60: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
-0001be70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001be80: 2020 2020 2020 2020 2066 2253 6f6e 6720           f"Song 
-0001be90: 6669 6c65 207b 736f 6e67 5f6e 616d 657d  file {song_name}
-0001bea0: 2028 4944 207b 736f 6e67 5f69 647d 2920   (ID {song_id}) 
-0001beb0: 6e6f 7420 666f 756e 642e 222c 0a20 2020  not found.",.   
-0001bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bed0: 2020 2020 2066 673d 2272 6564 222c 0a20       fg="red",. 
-0001bee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bef0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0001bf00: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-0001bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf20: 6272 6561 6b0a 2020 2020 2020 2020 656c  break.        el
-0001bf30: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001bf40: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
-0001bf50: 2020 2020 2020 2020 2020 2020 2066 224e               f"N
-0001bf60: 6f20 736f 6e67 2077 6974 6820 4944 207b  o song with ID {
-0001bf70: 736f 6e67 5f69 647d 2066 6f75 6e64 2e22  song_id} found."
-0001bf80: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001bf90: 2020 6667 3d22 7265 6422 2c0a 2020 2020    fg="red",.    
-0001bfa0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001bfb0: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
-0001bfc0: 2020 6966 2070 6169 7273 3a0a 2020 2020    if pairs:.    
-0001bfd0: 2020 2020 7061 6972 7320 3d20 5b74 7570      pairs = [tup
-0001bfe0: 6c65 2870 6169 722e 7374 7269 7028 292e  le(pair.strip().
-0001bff0: 7370 6c69 7428 223a 2229 2920 666f 7220  split(":")) for 
-0001c000: 7061 6972 2069 6e20 7061 6972 732e 7370  pair in pairs.sp
-0001c010: 6c69 7428 227c 2229 5d0a 0a20 2020 2020  lit("|")]..     
-0001c020: 2020 2073 6f6e 675f 6461 7461 203d 206d     song_data = m
-0001c030: 7573 6963 5f74 6167 2e6c 6f61 645f 6669  usic_tag.load_fi
-0001c040: 6c65 2873 6f6e 675f 7061 7468 290a 2020  le(song_path).  
-0001c050: 2020 2020 2020 7661 6c69 645f 7061 6972        valid_pair
-0001c060: 7320 3d20 7061 6972 735b 3a5d 0a20 2020  s = pairs[:].   
-0001c070: 2020 2020 2066 6f72 206b 6579 2c20 7661       for key, va
-0001c080: 6c75 6520 696e 2070 6169 7273 3a0a 2020  lue in pairs:.  
-0001c090: 2020 2020 2020 2020 2020 6966 206b 6579            if key
-0001c0a0: 206e 6f74 2069 6e20 636f 6e66 6967 2e4d   not in config.M
-0001c0b0: 4554 4144 4154 415f 4b45 5953 206f 7220  ETADATA_KEYS or 
-0001c0c0: 6b65 792e 7374 6172 7473 7769 7468 2822  key.startswith("
-0001c0d0: 2322 293a 0a20 2020 2020 2020 2020 2020  #"):.           
-0001c0e0: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
-0001c0f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001c100: 2020 2020 2020 6622 277b 6b65 797d 2720        f"'{key}' 
-0001c110: 6973 206e 6f74 2061 2076 616c 6964 2065  is not a valid e
-0001c120: 6469 7461 626c 6520 6d65 7461 6461 7461  ditable metadata
-0001c130: 206b 6579 2e22 2c20 6667 3d22 7265 6422   key.", fg="red"
-0001c140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c150: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-0001c160: 2020 2076 616c 6964 5f70 6169 7273 2e72     valid_pairs.r
-0001c170: 656d 6f76 6528 286b 6579 2c20 7661 6c75  emove((key, valu
-0001c180: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
-0001c190: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-0001c1a0: 2020 2020 2020 2020 2073 6f6e 675f 6461           song_da
-0001c1b0: 7461 5b6b 6579 5d20 3d20 7661 6c75 650a  ta[key] = value.
-0001c1c0: 0a20 2020 2020 2020 2073 6f6e 675f 6461  .        song_da
-0001c1d0: 7461 2e73 6176 6528 290a 0a20 2020 2020  ta.save()..     
-0001c1e0: 2020 2063 6c69 636b 2e73 6563 686f 280a     click.secho(.
-0001c1f0: 2020 2020 2020 2020 2020 2020 6622 5365              f"Se
-0001c200: 7420 6d65 7461 6461 7461 2066 6f72 2027  t metadata for '
-0001c210: 7b73 6f6e 675f 6e61 6d65 7d27 2077 6974  {song_name}' wit
-0001c220: 6820 4944 207b 736f 6e67 5f69 647d 2074  h ID {song_id} t
-0001c230: 6f20 7b76 616c 6964 5f70 6169 7273 7d2e  o {valid_pairs}.
-0001c240: 222c 0a20 2020 2020 2020 2020 2020 2066  ",.            f
-0001c250: 673d 2267 7265 656e 222c 0a20 2020 2020  g="green",.     
-0001c260: 2020 2029 0a20 2020 2065 6c73 653a 0a20     ).    else:. 
-0001c270: 2020 2020 2020 2073 6f6e 675f 6461 7461         song_data
-0001c280: 203d 206d 7573 6963 5f74 6167 2e6c 6f61   = music_tag.loa
-0001c290: 645f 6669 6c65 2873 6f6e 675f 7061 7468  d_file(song_path
-0001c2a0: 290a 2020 2020 2020 2020 636c 6963 6b2e  ).        click.
-0001c2b0: 6563 686f 2822 4d65 7461 6461 7461 2066  echo("Metadata f
-0001c2c0: 6f72 2022 2c20 6e6c 3d46 616c 7365 290a  or ", nl=False).
-0001c2d0: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
-0001c2e0: 6368 6f28 736f 6e67 5f6e 616d 652c 2066  cho(song_name, f
-0001c2f0: 673d 2262 6c75 6522 2c20 626f 6c64 3d54  g="blue", bold=T
-0001c300: 7275 652c 206e 6c3d 4661 6c73 6529 0a20  rue, nl=False). 
-0001c310: 2020 2020 2020 2063 6c69 636b 2e65 6368         click.ech
-0001c320: 6f28 6622 2077 6974 6820 4944 207b 736f  o(f" with ID {so
-0001c330: 6e67 5f69 647d 3a22 290a 0a20 2020 2020  ng_id}:")..     
-0001c340: 2020 2066 6f72 206b 6579 2069 6e20 636f     for key in co
-0001c350: 6e66 6967 2e4d 4554 4144 4154 415f 4b45  nfig.METADATA_KE
-0001c360: 5953 3a0a 2020 2020 2020 2020 2020 2020  YS:.            
-0001c370: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001c380: 2020 2020 2063 6c69 636b 2e65 6368 6f28       click.echo(
-0001c390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c3a0: 2020 2020 2066 225c 747b 6b65 7920 6966       f"\t{key if
-0001c3b0: 206e 6f74 206b 6579 2e73 7461 7274 7377   not key.startsw
-0001c3c0: 6974 6828 2723 2729 2065 6c73 6520 6b65  ith('#') else ke
-0001c3d0: 795b 313a 5d7d 3a20 7b73 6f6e 675f 6461  y[1:]}: {song_da
-0001c3e0: 7461 5b6b 6579 5d2e 7661 6c75 657d 220a  ta[key].value}".
-0001c3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c400: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-0001c410: 6365 7074 3a20 2023 2070 796c 696e 743a  cept:  # pylint:
-0001c420: 2064 6973 6162 6c65 3d62 6172 652d 6578   disable=bare-ex
-0001c430: 6365 7074 0a20 2020 2020 2020 2020 2020  cept.           
-0001c440: 2020 2020 2070 6173 730a 0a0a 4063 6c69       pass...@cli
-0001c450: 2e63 6f6d 6d61 6e64 286e 616d 653d 2264  .command(name="d
-0001c460: 6972 2229 0a40 636c 6963 6b2e 6172 6775  ir").@click.argu
-0001c470: 6d65 6e74 2822 6469 7265 6374 6f72 7922  ment("directory"
-0001c480: 2c20 7479 7065 3d63 6c69 636b 2e50 6174  , type=click.Pat
-0001c490: 6828 6669 6c65 5f6f 6b61 793d 4661 6c73  h(file_okay=Fals
-0001c4a0: 6529 2c20 7265 7175 6972 6564 3d46 616c  e), required=Fal
-0001c4b0: 7365 290a 6465 6620 6469 725f 2864 6972  se).def dir_(dir
-0001c4c0: 6563 746f 7279 293a 0a20 2020 2022 2222  ectory):.    """
-0001c4d0: 0a20 2020 2043 6861 6e67 6520 7468 6520  .    Change the 
-0001c4e0: 6469 7265 6374 6f72 7920 7768 6572 6520  directory where 
-0001c4f0: 6d61 6573 7472 6f20 6c6f 6f6b 7320 666f  maestro looks fo
-0001c500: 7220 736f 6e67 732e 0a20 2020 204e 4f54  r songs..    NOT
-0001c510: 453a 2054 6869 7320 646f 6573 206e 6f74  E: This does not
-0001c520: 206d 6f76 6520 616e 7920 736f 6e67 732e   move any songs.
-0001c530: 2049 7420 6f6e 6c79 2063 6861 6e67 6573   It only changes
-0001c540: 2077 6865 7265 206d 6165 7374 726f 206c   where maestro l
-0001c550: 6f6f 6b73 2066 6f72 0a20 2020 2073 6f6e  ooks for.    son
-0001c560: 6773 2e20 596f 7520 7769 6c6c 2068 6176  gs. You will hav
-0001c570: 6520 746f 206d 6f76 6520 7468 6520 736f  e to move the so
-0001c580: 6e67 7320 796f 7572 7365 6c66 2e0a 0a20  ngs yourself... 
-0001c590: 2020 2049 6620 6e6f 2061 7267 756d 656e     If no argumen
-0001c5a0: 7420 6973 2070 6173 7365 642c 2070 7269  t is passed, pri
-0001c5b0: 6e74 7320 7468 6520 6375 7272 656e 7420  nts the current 
-0001c5c0: 6469 7265 6374 6f72 792e 0a20 2020 2022  directory..    "
-0001c5d0: 2222 0a0a 2020 2020 6966 2064 6972 6563  ""..    if direc
-0001c5e0: 746f 7279 2069 7320 4e6f 6e65 3a0a 2020  tory is None:.  
-0001c5f0: 2020 2020 2020 636c 6963 6b2e 6563 686f        click.echo
-0001c600: 2863 6f6e 6669 672e 534f 4e47 535f 4449  (config.SONGS_DI
-0001c610: 5229 0a20 2020 2020 2020 2072 6574 7572  R).        retur
-0001c620: 6e0a 0a20 2020 2069 6620 6e6f 7420 6f73  n..    if not os
-0001c630: 2e70 6174 682e 6578 6973 7473 2864 6972  .path.exists(dir
-0001c640: 6563 746f 7279 293a 0a20 2020 2020 2020  ectory):.       
-0001c650: 206f 732e 6d61 6b65 6469 7273 2864 6972   os.makedirs(dir
-0001c660: 6563 746f 7279 290a 0a20 2020 2077 6974  ectory)..    wit
-0001c670: 6820 6f70 656e 2863 6f6e 6669 672e 5345  h open(config.SE
-0001c680: 5454 494e 4753 5f46 494c 452c 2022 722b  TTINGS_FILE, "r+
-0001c690: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
-0001c6a0: 2d38 2229 2061 7320 7365 7474 696e 6773  -8") as settings
-0001c6b0: 5f66 696c 653a 0a20 2020 2020 2020 2073  _file:.        s
-0001c6c0: 6574 7469 6e67 7320 3d20 6a73 6f6e 2e6c  ettings = json.l
-0001c6d0: 6f61 6428 7365 7474 696e 6773 5f66 696c  oad(settings_fil
-0001c6e0: 6529 0a20 2020 2020 2020 2073 6574 7469  e).        setti
-0001c6f0: 6e67 735b 2273 6f6e 675f 6469 7265 6374  ngs["song_direct
-0001c700: 6f72 7922 5d20 3d20 6469 7265 6374 6f72  ory"] = director
-0001c710: 790a 2020 2020 2020 2020 7365 7474 696e  y.        settin
-0001c720: 6773 5f66 696c 652e 7365 656b 2830 290a  gs_file.seek(0).
-0001c730: 2020 2020 2020 2020 6a73 6f6e 2e64 756d          json.dum
-0001c740: 7028 7365 7474 696e 6773 2c20 7365 7474  p(settings, sett
-0001c750: 696e 6773 5f66 696c 6529 0a20 2020 2020  ings_file).     
-0001c760: 2020 2073 6574 7469 6e67 735f 6669 6c65     settings_file
-0001c770: 2e74 7275 6e63 6174 6528 290a 0a20 2020  .truncate()..   
-0001c780: 2063 6c69 636b 2e73 6563 686f 2866 2243   click.secho(f"C
-0001c790: 6861 6e67 6564 2073 6f6e 6720 6469 7265  hanged song dire
-0001c7a0: 6374 6f72 7920 746f 207b 6469 7265 6374  ctory to {direct
-0001c7b0: 6f72 797d 2e22 2c20 6667 3d22 6772 6565  ory}.", fg="gree
-0001c7c0: 6e22 29                                  n")
+000193a0: 6c61 6d62 6461 2074 3a20 2869 6e74 2874  lambda t: (int(t
+000193b0: 5b30 5d29 2c29 202b 2074 5b31 3a5d 2c20  [0]),) + t[1:], 
+000193c0: 2023 2063 6f6e 7665 7274 206b 6579 2074   # convert key t
+000193d0: 6f20 696e 740a 2020 2020 2020 2020 2020  o int.          
+000193e0: 2020 2020 2020 2020 2020 6d61 7028 0a20            map(. 
+000193f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019400: 2020 2020 2020 206c 616d 6264 6120 783a         lambda x:
+00019410: 2074 7570 6c65 286d 6170 2866 6c6f 6174   tuple(map(float
+00019420: 2c20 782e 7374 7269 7028 292e 7370 6c69  , x.strip().spli
+00019430: 7428 227c 2229 2929 2c0a 2020 2020 2020  t("|"))),.      
+00019440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019450: 2020 7374 6174 735f 6669 6c65 2e72 6561    stats_file.rea
+00019460: 646c 696e 6573 2829 2c0a 2020 2020 2020  dlines(),.      
+00019470: 2020 2020 2020 2020 2020 2020 2020 292c                ),
+00019480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019490: 2029 0a20 2020 2020 2020 2020 2020 2029   ).            )
+000194a0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000194b0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+000194c0: 6c69 6e65 7329 293a 0a20 2020 2020 2020  lines)):.       
+000194d0: 2020 2020 2020 2020 2064 6574 6169 6c73           details
+000194e0: 203d 206c 696e 6573 5b69 5d2e 7374 7269   = lines[i].stri
+000194f0: 7028 292e 7370 6c69 7428 227c 2229 0a20  p().split("|"). 
+00019500: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00019510: 6f6e 675f 6964 203d 2069 6e74 2864 6574  ong_id = int(det
+00019520: 6169 6c73 5b30 5d29 0a20 2020 2020 2020  ails[0]).       
+00019530: 2020 2020 2020 2020 2069 6620 736f 6e67           if song
+00019540: 5f69 6420 696e 2073 6f6e 675f 6964 733a  _id in song_ids:
+00019550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019560: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
+00019570: 6174 682e 6578 6973 7473 286f 732e 7061  ath.exists(os.pa
+00019580: 7468 2e6a 6f69 6e28 636f 6e66 6967 2e53  th.join(config.S
+00019590: 4f4e 4753 5f44 4952 2c20 6465 7461 696c  ONGS_DIR, detail
+000195a0: 735b 315d 2929 3a0a 2020 2020 2020 2020  s[1])):.        
+000195b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195c0: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
+000195d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195e0: 2020 2020 2020 2020 2066 2253 6f6e 6720           f"Song 
+000195f0: 6669 6c65 2077 6974 6820 4944 207b 736f  file with ID {so
+00019600: 6e67 5f69 647d 206e 6f74 2066 6f75 6e64  ng_id} not found
+00019610: 2e22 2c20 6667 3d22 7265 6422 0a20 2020  .", fg="red".   
+00019620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019630: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00019640: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00019650: 6f6e 675f 6964 732e 7265 6d6f 7665 2873  ong_ids.remove(s
+00019660: 6f6e 675f 6964 290a 2020 2020 2020 2020  ong_id).        
+00019670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019680: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+00019690: 2020 2020 2020 2020 2020 2020 2068 656c               hel
+000196a0: 7065 7273 2e70 7269 6e74 5f65 6e74 7279  pers.print_entry
+000196b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000196c0: 2020 2020 2020 2020 2020 6465 7461 696c            detail
+000196d0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+000196e0: 2020 2020 2020 2020 2020 2b20 5b0a 2020            + [.  
+000196f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019700: 2020 2020 2020 2020 2020 7374 6174 735b            stats[
+00019710: 736f 6e67 5f69 645d 2c0a 2020 2020 2020  song_id],.      
+00019720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019730: 2020 2020 2020 6d75 7369 635f 7461 672e        music_tag.
+00019740: 6c6f 6164 5f66 696c 6528 0a20 2020 2020  load_file(.     
+00019750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019760: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
+00019770: 7468 2e6a 6f69 6e28 636f 6e66 6967 2e53  th.join(config.S
+00019780: 4f4e 4753 5f44 4952 2c20 6465 7461 696c  ONGS_DIR, detail
+00019790: 735b 315d 290a 2020 2020 2020 2020 2020  s[1]).          
+000197a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000197b0: 2020 295b 2223 6c65 6e67 7468 225d 2e76    )["#length"].v
+000197c0: 616c 7565 2c0a 2020 2020 2020 2020 2020  alue,.          
+000197d0: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
+000197e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000197f0: 2020 2020 2020 2020 2073 686f 775f 736f           show_so
+00019800: 6e67 5f69 6e66 6f3d 736f 6e67 5f69 6e66  ng_info=song_inf
+00019810: 6f2c 0a20 2020 2020 2020 2020 2020 2020  o,.             
+00019820: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00019830: 2020 2020 2020 2020 2020 2020 2073 6f6e               son
+00019840: 675f 6964 732e 7265 6d6f 7665 2873 6f6e  g_ids.remove(son
+00019850: 675f 6964 290a 2020 2020 6578 6365 7074  g_id).    except
+00019860: 2046 696c 654e 6f74 466f 756e 6445 7272   FileNotFoundErr
+00019870: 6f72 3a0a 2020 2020 2020 2020 636c 6963  or:.        clic
+00019880: 6b2e 7365 6368 6f28 6622 4e6f 2073 7461  k.secho(f"No sta
+00019890: 7473 2066 6f75 6e64 2066 6f72 2079 6561  ts found for yea
+000198a0: 7220 7b79 6561 727d 2e22 2c20 6667 3d22  r {year}.", fg="
+000198b0: 7265 6422 290a 0a20 2020 2069 6620 736f  red")..    if so
+000198c0: 6e67 5f69 6473 3a0a 2020 2020 2020 2020  ng_ids:.        
+000198d0: 736f 6e67 5f69 6473 203d 205b 7374 7228  song_ids = [str(
+000198e0: 6964 5f29 2066 6f72 2069 645f 2069 6e20  id_) for id_ in 
+000198f0: 736f 6e67 5f69 6473 5d0a 2020 2020 2020  song_ids].      
+00019900: 2020 636c 6963 6b2e 7365 6368 6f28 0a20    click.secho(. 
+00019910: 2020 2020 2020 2020 2020 2066 224e 6f20             f"No 
+00019920: 736f 6e67 7320 666f 756e 6420 7769 7468  songs found with
+00019930: 2049 4473 3a20 7b27 2c20 272e 6a6f 696e   IDs: {', '.join
+00019940: 2873 6f6e 675f 6964 7329 7d2e 222c 2066  (song_ids)}.", f
+00019950: 673d 2272 6564 220a 2020 2020 2020 2020  g="red".        
+00019960: 290a 0a0a 4063 6c69 2e63 6f6d 6d61 6e64  )...@cli.command
+00019970: 2829 0a40 636c 6963 6b2e 6172 6775 6d65  ().@click.argume
+00019980: 6e74 2822 736f 6e67 222c 2072 6571 7569  nt("song", requi
+00019990: 7265 643d 5472 7565 290a 4063 6c69 636b  red=True).@click
+000199a0: 2e6f 7074 696f 6e28 0a20 2020 2022 2d4e  .option(.    "-N
+000199b0: 2f2d 6e4e 222c 0a20 2020 2022 2d2d 6e61  /-nN",.    "--na
+000199c0: 6d65 2f2d 2d6e 6f2d 6e61 6d65 222c 0a20  me/--no-name",. 
+000199d0: 2020 2022 7469 746c 6522 2c0a 2020 2020     "title",.    
+000199e0: 6465 6661 756c 743d 4661 6c73 652c 0a20  default=False,. 
+000199f0: 2020 2068 656c 703d 2254 7265 6174 2053     help="Treat S
+00019a00: 4f4e 4720 6173 2061 2073 6f6e 6720 6e61  ONG as a song na
+00019a10: 6d65 2069 6e73 7465 6164 206f 6620 616e  me instead of an
+00019a20: 2049 442e 222c 0a29 0a64 6566 2072 6563   ID.",.).def rec
+00019a30: 6f6d 6d65 6e64 2873 6f6e 672c 2074 6974  ommend(song, tit
+00019a40: 6c65 293a 0a20 2020 2022 2222 0a20 2020  le):.    """.   
+00019a50: 2047 6574 2072 6563 6f6d 6d65 6e64 6174   Get recommendat
+00019a60: 696f 6e73 2066 726f 6d20 5954 204d 7573  ions from YT Mus
+00019a70: 6963 2062 6173 6564 206f 6e20 736f 6e67  ic based on song
+00019a80: 2074 6974 6c65 732e 204e 6f74 653a 2074   titles. Note: t
+00019a90: 6869 7320 6665 6174 7572 650a 2020 2020  his feature.    
+00019aa0: 6973 2065 7870 6572 696d 656e 7461 6c2e  is experimental.
+00019ab0: 0a0a 2020 2020 5265 636f 6d6d 656e 6473  ..    Recommends
+00019ac0: 2073 6f6e 6773 2028 706f 7373 6962 6c79   songs (possibly
+00019ad0: 2065 7870 6c69 6369 7429 2075 7369 6e67   explicit) using
+00019ae0: 2074 6865 2059 6f75 5475 6265 204d 7573   the YouTube Mus
+00019af0: 6963 2041 5049 2073 696d 696c 6172 0a20  ic API similar. 
+00019b00: 2020 2074 6f20 7468 6520 736f 6e67 2077     to the song w
+00019b10: 6974 6820 4944 2053 4f4e 4720 746f 206c  ith ID SONG to l
+00019b20: 6973 7465 6e20 746f 2e0a 0a20 2020 2049  isten to...    I
+00019b30: 6620 7468 6520 272d 4e27 2066 6c61 6720  f the '-N' flag 
+00019b40: 6973 2070 6173 7365 642c 2053 4f4e 4720  is passed, SONG 
+00019b50: 6973 2074 7265 6174 6564 2061 7320 6120  is treated as a 
+00019b60: 736f 6e67 206e 616d 6520 746f 2073 6561  song name to sea
+00019b70: 7263 6820 666f 720a 2020 2020 6f6e 2059  rch for.    on Y
+00019b80: 6f75 5475 6265 204d 7573 6963 2e22 2222  ouTube Music."""
+00019b90: 0a20 2020 2074 7279 3a0a 2020 2020 2020  .    try:.      
+00019ba0: 2020 6672 6f6d 2079 746d 7573 6963 6170    from ytmusicap
+00019bb0: 6920 696d 706f 7274 2059 544d 7573 6963  i import YTMusic
+00019bc0: 0a20 2020 2065 7863 6570 7420 496d 706f  .    except Impo
+00019bd0: 7274 4572 726f 723a 0a20 2020 2020 2020  rtError:.       
+00019be0: 2063 6c69 636b 2e73 6563 686f 280a 2020   click.secho(.  
+00019bf0: 2020 2020 2020 2020 2020 2254 6865 2027            "The '
+00019c00: 7265 636f 6d6d 656e 6427 2063 6f6d 6d61  recommend' comma
+00019c10: 6e64 2072 6571 7569 7265 7320 7468 6520  nd requires the 
+00019c20: 2779 746d 7573 6963 6170 6927 2070 6163  'ytmusicapi' pac
+00019c30: 6b61 6765 2074 6f20 6265 2069 6e73 7461  kage to be insta
+00019c40: 6c6c 6564 2e20 5275 6e20 2770 6970 2069  lled. Run 'pip i
+00019c50: 6e73 7461 6c6c 2079 746d 7573 6963 6170  nstall ytmusicap
+00019c60: 6927 2074 6f20 696e 7374 616c 6c20 6974  i' to install it
+00019c70: 2e22 2c0a 2020 2020 2020 2020 2020 2020  .",.            
+00019c80: 6667 3d22 7265 6422 2c0a 2020 2020 2020  fg="red",.      
+00019c90: 2020 290a 2020 2020 2020 2020 7265 7475    ).        retu
+00019ca0: 726e 0a0a 2020 2020 7974 6d75 7369 6320  rn..    ytmusic 
+00019cb0: 3d20 5954 4d75 7369 6328 290a 0a20 2020  = YTMusic()..   
+00019cc0: 2069 6620 7469 746c 653a 0a20 2020 2020   if title:.     
+00019cd0: 2020 2072 6573 756c 7473 203d 2079 746d     results = ytm
+00019ce0: 7573 6963 2e73 6561 7263 6828 736f 6e67  usic.search(song
+00019cf0: 2c20 6669 6c74 6572 3d22 736f 6e67 7322  , filter="songs"
+00019d00: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+00019d10: 2020 2020 6966 206e 6f74 2073 6f6e 672e      if not song.
+00019d20: 6973 6469 6769 7428 293a 0a20 2020 2020  isdigit():.     
+00019d30: 2020 2020 2020 2063 6c69 636b 2e73 6563         click.sec
+00019d40: 686f 280a 2020 2020 2020 2020 2020 2020  ho(.            
+00019d50: 2020 2020 2253 6f6e 6720 4944 206d 7573      "Song ID mus
+00019d60: 7420 6265 2061 206e 756d 6265 722e 2054  t be a number. T
+00019d70: 6f20 6765 7420 7265 636f 6d6d 656e 6461  o get recommenda
+00019d80: 7469 6f6e 7320 6279 206e 616d 652c 2070  tions by name, p
+00019d90: 6173 7320 7468 6520 272d 4e2f 2d2d 6e61  ass the '-N/--na
+00019da0: 6d65 2720 666c 6167 2e22 2c0a 2020 2020  me' flag.",.    
+00019db0: 2020 2020 2020 2020 2020 2020 6667 3d22              fg="
+00019dc0: 7265 6422 2c0a 2020 2020 2020 2020 2020  red",.          
+00019dd0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00019de0: 7265 7475 726e 0a0a 2020 2020 2020 2020  return..        
+00019df0: 7769 7468 206f 7065 6e28 636f 6e66 6967  with open(config
+00019e00: 2e53 4f4e 4753 5f49 4e46 4f5f 5041 5448  .SONGS_INFO_PATH
+00019e10: 2c20 2272 222c 2065 6e63 6f64 696e 673d  , "r", encoding=
+00019e20: 2275 7466 2d38 2229 2061 7320 736f 6e67  "utf-8") as song
+00019e30: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
+00019e40: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
+00019e50: 736f 6e67 735f 6669 6c65 3a0a 2020 2020  songs_file:.    
+00019e60: 2020 2020 2020 2020 2020 2020 6465 7461              deta
+00019e70: 696c 7320 3d20 6c69 6e65 2e73 7472 6970  ils = line.strip
+00019e80: 2829 2e73 706c 6974 2822 7c22 290a 2020  ().split("|").  
+00019e90: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00019ea0: 2064 6574 6169 6c73 5b30 5d20 3d3d 2073   details[0] == s
+00019eb0: 6f6e 673a 0a20 2020 2020 2020 2020 2020  ong:.           
+00019ec0: 2020 2020 2020 2020 2072 6573 756c 7473           results
+00019ed0: 203d 2079 746d 7573 6963 2e73 6561 7263   = ytmusic.searc
+00019ee0: 6828 0a20 2020 2020 2020 2020 2020 2020  h(.             
+00019ef0: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
+00019f00: 7468 2e73 706c 6974 6578 7428 6465 7461  th.splitext(deta
+00019f10: 696c 735b 315d 295b 305d 2c20 6669 6c74  ils[1])[0], filt
+00019f20: 6572 3d22 736f 6e67 7322 0a20 2020 2020  er="songs".     
+00019f30: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00019f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019f50: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
+00019f60: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00019f70: 2020 2020 2020 2020 2020 2020 2063 6c69               cli
+00019f80: 636b 2e73 6563 686f 2866 224e 6f20 736f  ck.secho(f"No so
+00019f90: 6e67 2066 6f75 6e64 2077 6974 6820 4944  ng found with ID
+00019fa0: 207b 736f 6e67 7d2e 222c 2066 673d 2272   {song}.", fg="r
+00019fb0: 6564 2229 0a20 2020 2020 2020 2020 2020  ed").           
+00019fc0: 2020 2020 2072 6574 7572 6e0a 0a20 2020       return..   
+00019fd0: 2079 745f 6d75 7369 635f 706c 6179 6c69   yt_music_playli
+00019fe0: 7374 203d 2079 746d 7573 6963 2e67 6574  st = ytmusic.get
+00019ff0: 5f77 6174 6368 5f70 6c61 796c 6973 7428  _watch_playlist(
+0001a000: 7265 7375 6c74 735b 305d 5b22 7669 6465  results[0]["vide
+0001a010: 6f49 6422 5d29 0a0a 2020 2020 636c 6963  oId"])..    clic
+0001a020: 6b2e 6563 686f 2822 5265 636f 6d6d 656e  k.echo("Recommen
+0001a030: 6461 7469 6f6e 7320 666f 7220 222c 206e  dations for ", n
+0001a040: 6c3d 4661 6c73 6529 0a20 2020 2063 6c69  l=False).    cli
+0001a050: 636b 2e73 6563 686f 280a 2020 2020 2020  ck.secho(.      
+0001a060: 2020 7974 5f6d 7573 6963 5f70 6c61 796c    yt_music_playl
+0001a070: 6973 745b 2274 7261 636b 7322 5d5b 305d  ist["tracks"][0]
+0001a080: 5b22 7469 746c 6522 5d20 2b20 2220 222c  ["title"] + " ",
+0001a090: 0a20 2020 2020 2020 2066 673d 2262 6c75  .        fg="blu
+0001a0a0: 6522 2c0a 2020 2020 2020 2020 6e6c 3d46  e",.        nl=F
+0001a0b0: 616c 7365 2c0a 2020 2020 290a 2020 2020  alse,.    ).    
+0001a0c0: 636c 6963 6b2e 7365 6368 6f28 0a20 2020  click.secho(.   
+0001a0d0: 2020 2020 2066 2228 6874 7470 733a 2f2f       f"(https://
+0001a0e0: 6d75 7369 632e 796f 7574 7562 652e 636f  music.youtube.co
+0001a0f0: 6d2f 7761 7463 683f 763d 7b79 745f 6d75  m/watch?v={yt_mu
+0001a100: 7369 635f 706c 6179 6c69 7374 5b27 7472  sic_playlist['tr
+0001a110: 6163 6b73 275d 5b30 5d5b 2776 6964 656f  acks'][0]['video
+0001a120: 4964 275d 7d29 222c 0a20 2020 2020 2020  Id']})",.       
+0001a130: 2066 673d 2262 7269 6768 745f 626c 6163   fg="bright_blac
+0001a140: 6b22 2c0a 2020 2020 2020 2020 6e6c 3d46  k",.        nl=F
+0001a150: 616c 7365 2c0a 2020 2020 290a 2020 2020  alse,.    ).    
+0001a160: 636c 6963 6b2e 6563 686f 2822 3a22 290a  click.echo(":").
+0001a170: 2020 2020 666f 7220 7472 6163 6b20 696e      for track in
+0001a180: 2079 745f 6d75 7369 635f 706c 6179 6c69   yt_music_playli
+0001a190: 7374 5b22 7472 6163 6b73 225d 5b31 3a5d  st["tracks"][1:]
+0001a1a0: 3a0a 2020 2020 2020 2020 636c 6963 6b2e  :.        click.
+0001a1b0: 7365 6368 6f28 7472 6163 6b5b 2274 6974  secho(track["tit
+0001a1c0: 6c65 225d 202b 2022 2022 2c20 6667 3d22  le"] + " ", fg="
+0001a1d0: 626c 7565 222c 2062 6f6c 643d 5472 7565  blue", bold=True
+0001a1e0: 2c20 6e6c 3d46 616c 7365 290a 2020 2020  , nl=False).    
+0001a1f0: 2020 2020 636c 6963 6b2e 7365 6368 6f28      click.secho(
+0001a200: 0a20 2020 2020 2020 2020 2020 2066 2268  .            f"h
+0001a210: 7474 7073 3a2f 2f6d 7573 6963 2e79 6f75  ttps://music.you
+0001a220: 7475 6265 2e63 6f6d 2f77 6174 6368 3f76  tube.com/watch?v
+0001a230: 3d7b 7472 6163 6b5b 2776 6964 656f 4964  ={track['videoId
+0001a240: 275d 7d22 2c0a 2020 2020 2020 2020 2020  ']}",.          
+0001a250: 2020 6667 3d22 6272 6967 6874 5f62 6c61    fg="bright_bla
+0001a260: 636b 222c 0a20 2020 2020 2020 2029 0a0a  ck",.        )..
+0001a270: 0a40 636c 692e 636f 6d6d 616e 6428 290a  .@cli.command().
+0001a280: 4063 6c69 636b 2e61 7267 756d 656e 7428  @click.argument(
+0001a290: 2273 6f6e 675f 6964 7322 2c20 7265 7175  "song_ids", requ
+0001a2a0: 6972 6564 3d54 7275 652c 2074 7970 653d  ired=True, type=
+0001a2b0: 696e 742c 206e 6172 6773 3d2d 3129 0a40  int, nargs=-1).@
+0001a2c0: 636c 6963 6b2e 6f70 7469 6f6e 2822 2d42  click.option("-B
+0001a2d0: 2f2d 6e42 222c 2022 2d2d 626f 7474 6f6d  /-nB", "--bottom
+0001a2e0: 2f2d 2d6e 6f2d 626f 7474 6f6d 222c 2022  /--no-bottom", "
+0001a2f0: 626f 7474 6f6d 222c 2064 6566 6175 6c74  bottom", default
+0001a300: 3d46 616c 7365 290a 6465 6620 7075 7368  =False).def push
+0001a310: 2873 6f6e 675f 6964 732c 2062 6f74 746f  (song_ids, botto
+0001a320: 6d29 3a0a 2020 2020 2222 220a 2020 2020  m):.    """.    
+0001a330: 4d6f 7665 2073 6f6e 6773 2061 726f 756e  Move songs aroun
+0001a340: 6420 746f 2074 6865 2062 6f74 746f 6d20  d to the bottom 
+0001a350: 6f72 2074 6f70 206f 6620 7468 6520 6461  or top of the da
+0001a360: 7461 6261 7365 2e0a 0a20 2020 2050 7573  tabase...    Pus
+0001a370: 6820 7468 6520 736f 6e67 2873 2920 7769  h the song(s) wi
+0001a380: 7468 2049 4428 7329 2053 4f4e 475f 4944  th ID(s) SONG_ID
+0001a390: 5320 746f 2074 6865 2074 6f70 206f 6620  S to the top of 
+0001a3a0: 7468 6520 6461 7461 6261 7365 2028 6173  the database (as
+0001a3b0: 2069 6620 7468 6579 0a20 2020 2077 6572   if they.    wer
+0001a3c0: 6520 7468 6520 736f 6e67 7320 6d6f 7374  e the songs most
+0001a3d0: 2072 6563 656e 746c 7920 6164 6465 6429   recently added)
+0001a3e0: 2069 6e20 7468 6520 6f72 6465 7220 7468   in the order th
+0001a3f0: 6579 2061 7265 2070 6173 7365 6420 2865  ey are passed (e
+0001a400: 2e67 2e0a 2020 2020 276d 6165 7374 726f  .g..    'maestro
+0001a410: 2070 7573 6820 3120 3220 3327 2077 696c   push 1 2 3' wil
+0001a420: 6c20 6d61 6b65 2074 6865 206d 6f73 7420  l make the most 
+0001a430: 7265 6365 6e74 2073 6f6e 6720 6265 2033  recent song be 3
+0001a440: 292e 0a0a 2020 2020 4966 2074 6865 2027  )...    If the '
+0001a450: 2d42 2720 666c 6167 2069 7320 7061 7373  -B' flag is pass
+0001a460: 6564 2c20 7468 6520 736f 6e67 2873 2920  ed, the song(s) 
+0001a470: 7769 6c6c 2062 6520 7075 7368 6564 2074  will be pushed t
+0001a480: 6f20 7468 6520 626f 7474 6f6d 206f 6620  o the bottom of 
+0001a490: 7468 650a 2020 2020 6c69 7374 2069 6e73  the.    list ins
+0001a4a0: 7465 6164 2e0a 2020 2020 2222 220a 2020  tead..    """.  
+0001a4b0: 2020 7769 7468 206f 7065 6e28 636f 6e66    with open(conf
+0001a4c0: 6967 2e53 4f4e 4753 5f49 4e46 4f5f 5041  ig.SONGS_INFO_PA
+0001a4d0: 5448 2c20 2272 2b22 2c20 656e 636f 6469  TH, "r+", encodi
+0001a4e0: 6e67 3d22 7574 662d 3822 2920 6173 2073  ng="utf-8") as s
+0001a4f0: 6f6e 6773 5f66 696c 653a 0a20 2020 2020  ongs_file:.     
+0001a500: 2020 206c 696e 6573 203d 2073 6f6e 6773     lines = songs
+0001a510: 5f66 696c 652e 7265 6164 6c69 6e65 7328  _file.readlines(
+0001a520: 290a 0a20 2020 2020 2020 206c 696e 6573  )..        lines
+0001a530: 5f74 6f5f 6d6f 7665 203d 205b 5d0a 2020  _to_move = [].  
+0001a540: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+0001a550: 616e 6765 286c 656e 286c 696e 6573 2929  ange(len(lines))
+0001a560: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0001a570: 2069 6e74 286c 696e 6573 5b69 5d2e 7370   int(lines[i].sp
+0001a580: 6c69 7428 227c 2229 5b30 5d29 2069 6e20  lit("|")[0]) in 
+0001a590: 736f 6e67 5f69 6473 3a0a 2020 2020 2020  song_ids:.      
+0001a5a0: 2020 2020 2020 2020 2020 6c69 6e65 735f            lines_
+0001a5b0: 746f 5f6d 6f76 652e 6170 7065 6e64 2828  to_move.append((
+0001a5c0: 692c 206c 696e 6573 5b69 5d29 290a 0a20  i, lines[i])).. 
+0001a5d0: 2020 2020 2020 2066 6f72 2069 2c20 5f20         for i, _ 
+0001a5e0: 696e 2072 6576 6572 7365 6428 6c69 6e65  in reversed(line
+0001a5f0: 735f 746f 5f6d 6f76 6529 3a0a 2020 2020  s_to_move):.    
+0001a600: 2020 2020 2020 2020 6c69 6e65 732e 706f          lines.po
+0001a610: 7028 6929 0a0a 2020 2020 2020 2020 736f  p(i)..        so
+0001a620: 6e67 5f69 6473 5f77 6974 685f 6f72 6465  ng_ids_with_orde
+0001a630: 7220 3d20 6469 6374 280a 2020 2020 2020  r = dict(.      
+0001a640: 2020 2020 2020 6d61 7028 6c61 6d62 6461        map(lambda
+0001a650: 2078 3a20 2878 5b31 5d2c 2078 5b30 5d29   x: (x[1], x[0])
+0001a660: 2c20 656e 756d 6572 6174 6528 736f 6e67  , enumerate(song
+0001a670: 5f69 6473 2929 0a20 2020 2020 2020 2029  _ids)).        )
+0001a680: 0a0a 2020 2020 2020 2020 666f 7220 6920  ..        for i 
+0001a690: 696e 2072 616e 6765 286c 656e 286c 696e  in range(len(lin
+0001a6a0: 6573 5f74 6f5f 6d6f 7665 2929 3a0a 2020  es_to_move)):.  
+0001a6b0: 2020 2020 2020 2020 2020 6c69 6e65 735f            lines_
+0001a6c0: 746f 5f6d 6f76 655b 695d 203d 2028 0a20  to_move[i] = (. 
+0001a6d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001a6e0: 6f6e 675f 6964 735f 7769 7468 5f6f 7264  ong_ids_with_ord
+0001a6f0: 6572 5b69 6e74 286c 696e 6573 5f74 6f5f  er[int(lines_to_
+0001a700: 6d6f 7665 5b69 5d5b 315d 2e73 706c 6974  move[i][1].split
+0001a710: 2822 7c22 295b 305d 295d 2c0a 2020 2020  ("|")[0])],.    
+0001a720: 2020 2020 2020 2020 2020 2020 2a6c 696e              *lin
+0001a730: 6573 5f74 6f5f 6d6f 7665 5b69 5d2c 0a20  es_to_move[i],. 
+0001a740: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+0001a750: 2020 2020 2020 6c69 6e65 735f 746f 5f6d        lines_to_m
+0001a760: 6f76 652e 736f 7274 286b 6579 3d6c 616d  ove.sort(key=lam
+0001a770: 6264 6120 783a 2078 5b30 5d2c 2072 6576  bda x: x[0], rev
+0001a780: 6572 7365 3d62 6f74 746f 6d29 0a0a 2020  erse=bottom)..  
+0001a790: 2020 2020 2020 6966 206e 6f74 2062 6f74        if not bot
+0001a7a0: 746f 6d3a 0a20 2020 2020 2020 2020 2020  tom:.           
+0001a7b0: 206c 696e 6573 202b 3d20 5b74 5b32 5d20   lines += [t[2] 
+0001a7c0: 666f 7220 7420 696e 206c 696e 6573 5f74  for t in lines_t
+0001a7d0: 6f5f 6d6f 7665 5d0a 2020 2020 2020 2020  o_move].        
+0001a7e0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001a7f0: 2020 6c69 6e65 7320 3d20 5b74 5b32 5d20    lines = [t[2] 
+0001a800: 666f 7220 7420 696e 206c 696e 6573 5f74  for t in lines_t
+0001a810: 6f5f 6d6f 7665 5d20 2b20 6c69 6e65 730a  o_move] + lines.
+0001a820: 0a20 2020 2020 2020 2073 6f6e 6773 5f66  .        songs_f
+0001a830: 696c 652e 7365 656b 2830 290a 2020 2020  ile.seek(0).    
+0001a840: 2020 2020 736f 6e67 735f 6669 6c65 2e77      songs_file.w
+0001a850: 7269 7465 2822 222e 6a6f 696e 286c 696e  rite("".join(lin
+0001a860: 6573 2929 0a20 2020 2020 2020 2073 6f6e  es)).        son
+0001a870: 6773 5f66 696c 652e 7472 756e 6361 7465  gs_file.truncate
+0001a880: 2829 0a0a 0a40 636c 692e 636f 6d6d 616e  ()...@cli.comman
+0001a890: 6428 6e61 6d65 3d22 636c 6970 2229 0a40  d(name="clip").@
+0001a8a0: 636c 6963 6b2e 6172 6775 6d65 6e74 2822  click.argument("
+0001a8b0: 736f 6e67 5f69 6422 2c20 7265 7175 6972  song_id", requir
+0001a8c0: 6564 3d54 7275 652c 2074 7970 653d 696e  ed=True, type=in
+0001a8d0: 7429 0a40 636c 6963 6b2e 6172 6775 6d65  t).@click.argume
+0001a8e0: 6e74 2822 7374 6172 7422 2c20 7265 7175  nt("start", requ
+0001a8f0: 6972 6564 3d46 616c 7365 2c20 7479 7065  ired=False, type
+0001a900: 3d66 6c6f 6174 2c20 6465 6661 756c 743d  =float, default=
+0001a910: 4e6f 6e65 290a 4063 6c69 636b 2e61 7267  None).@click.arg
+0001a920: 756d 656e 7428 2265 6e64 222c 2072 6571  ument("end", req
+0001a930: 7569 7265 643d 4661 6c73 652c 2074 7970  uired=False, typ
+0001a940: 653d 666c 6f61 742c 2064 6566 6175 6c74  e=float, default
+0001a950: 3d4e 6f6e 6529 0a64 6566 2063 6c69 705f  =None).def clip_
+0001a960: 2873 6f6e 675f 6964 2c20 7374 6172 742c  (song_id, start,
+0001a970: 2065 6e64 293a 0a20 2020 2022 2222 0a20   end):.    """. 
+0001a980: 2020 2043 7265 6174 6520 6f72 2065 6469     Create or edi
+0001a990: 7420 7468 6520 636c 6970 2066 6f72 2061  t the clip for a
+0001a9a0: 2073 6f6e 672e 0a0a 2020 2020 5365 7473   song...    Sets
+0001a9b0: 2074 6865 2063 6c69 7020 666f 7220 7468   the clip for th
+0001a9c0: 6520 736f 6e67 2077 6974 6820 4944 2053  e song with ID S
+0001a9d0: 4f4e 475f 4944 2074 6f20 7468 6520 7469  ONG_ID to the ti
+0001a9e0: 6d65 2072 616e 6765 2053 5441 5254 2074  me range START t
+0001a9f0: 6f20 454e 440a 2020 2020 2869 6e20 7365  o END.    (in se
+0001aa00: 636f 6e64 7329 2e0a 0a20 2020 2049 6620  conds)...    If 
+0001aa10: 454e 4420 6973 206e 6f74 2070 6173 7365  END is not passe
+0001aa20: 642c 2074 6865 2063 6c69 7020 7769 6c6c  d, the clip will
+0001aa30: 2062 6520 6672 6f6d 2053 5441 5254 2074   be from START t
+0001aa40: 6f20 7468 6520 656e 6420 6f66 2074 6865  o the end of the
+0001aa50: 2073 6f6e 672e 0a0a 2020 2020 4966 206e   song...    If n
+0001aa60: 6569 7468 6572 2053 5441 5254 206e 6f72  either START nor
+0001aa70: 2045 4e44 2061 7265 2070 6173 7365 642c   END are passed,
+0001aa80: 2061 2063 6c69 7020 6564 6974 6f72 2077   a clip editor w
+0001aa90: 696c 6c20 6265 206f 7065 6e65 642c 2069  ill be opened, i
+0001aaa0: 6e20 7768 6963 680a 2020 2020 796f 7520  n which.    you 
+0001aab0: 6361 6e20 6d6f 7665 2074 6865 2073 7461  can move the sta
+0001aac0: 7274 2061 6e64 2065 6e64 206f 6620 7468  rt and end of th
+0001aad0: 6520 636c 6970 2061 726f 756e 6420 7573  e clip around us
+0001aae0: 696e 6720 7468 6520 6172 726f 7720 6b65  ing the arrow ke
+0001aaf0: 7973 2077 6869 6c65 0a20 2020 206c 6973  ys while.    lis
+0001ab00: 7465 6e69 6e67 2074 6f20 7468 6520 736f  tening to the so
+0001ab10: 6e67 2028 616c 736f 2073 686f 7773 2077  ng (also shows w
+0001ab20: 6176 6566 6f72 6d29 2e0a 0a20 2020 205c  aveform)...    \
+0001ab30: 620a 2020 2020 5468 6520 6564 6974 6f72  b.    The editor
+0001ab40: 2073 7461 7274 7320 6f75 7420 6564 6974   starts out edit
+0001ab50: 696e 6720 7468 6520 7374 6172 7420 6f66  ing the start of
+0001ab60: 2074 6865 2063 6c69 702e 0a20 2020 205c   the clip..    \
+0001ab70: 7831 625b 316d 745c 7831 625b 306d 2074  x1b[1mt\x1b[0m t
+0001ab80: 6f20 746f 6767 6c65 2062 6574 7765 656e  o toggle between
+0001ab90: 2065 6469 7469 6e67 2074 6865 2073 7461   editing the sta
+0001aba0: 7274 2061 6e64 2065 6e64 206f 6620 7468  rt and end of th
+0001abb0: 6520 636c 6970 2e0a 2020 2020 5c78 3162  e clip..    \x1b
+0001abc0: 5b31 6d53 4849 4654 2b4c 4546 542f 5249  [1mSHIFT+LEFT/RI
+0001abd0: 4748 545c 7831 625b 306d 2077 696c 6c20  GHT\x1b[0m will 
+0001abe0: 6d6f 7665 2077 6869 6368 6576 6572 2063  move whichever c
+0001abf0: 6c69 7020 656e 6420 796f 7520 6172 6520  lip end you are 
+0001ac00: 6564 6974 696e 670a 2020 2020 2020 2020  editing.        
+0001ac10: 6279 2030 2e31 2073 6563 6f6e 6473 2c20  by 0.1 seconds, 
+0001ac20: 736e 6170 2074 6865 2063 7572 7265 6e74  snap the current
+0001ac30: 2070 6c61 7962 6163 6b20 746f 2074 6861   playback to tha
+0001ac40: 7420 636c 6970 2065 6e64 2028 746f 2065  t clip end (to e
+0001ac50: 7861 6374 6c79 0a20 2020 2020 2020 2074  xactly.        t
+0001ac60: 6865 2063 6c69 7020 7374 6172 7420 6966  he clip start if
+0001ac70: 2065 6469 7469 6e67 2073 7461 7274 2c20   editing start, 
+0001ac80: 656e 642d 3120 6966 2065 6469 7469 6e67  end-1 if editing
+0001ac90: 2065 6e64 292c 2061 6e64 2070 6175 7365   end), and pause
+0001aca0: 2e0a 2020 2020 5c78 3162 5b31 6d4c 4546  ..    \x1b[1mLEF
+0001acb0: 542f 5249 4748 545c 7831 625b 306d 2077  T/RIGHT\x1b[0m w
+0001acc0: 696c 6c20 6d6f 7665 2077 6869 6368 6576  ill move whichev
+0001acd0: 6572 2063 6c69 7020 656e 6420 796f 7520  er clip end you 
+0001ace0: 6172 6520 6564 6974 696e 6720 6279 2031  are editing by 1
+0001acf0: 0a20 2020 2020 2020 2073 6563 6f6e 642c  .        second,
+0001ad00: 2073 6e61 7020 7468 6520 6375 7272 656e   snap the curren
+0001ad10: 7420 706c 6179 6261 636b 2074 6f20 7468  t playback to th
+0001ad20: 6174 2063 6c69 7020 656e 642c 2061 6e64  at clip end, and
+0001ad30: 2070 6175 7365 2e0a 2020 2020 5c78 3162   pause..    \x1b
+0001ad40: 5b31 6d45 4e54 4552 5c78 3162 5b30 6d20  [1mENTER\x1b[0m 
+0001ad50: 7769 6c6c 2065 7869 7420 7468 6520 6564  will exit the ed
+0001ad60: 6974 6f72 2061 6e64 2073 6176 6520 7468  itor and save th
+0001ad70: 6520 636c 6970 2e0a 2020 2020 5c78 3162  e clip..    \x1b
+0001ad80: 5b31 6d71 5c78 3162 5b30 6d20 7769 6c6c  [1mq\x1b[0m will
+0001ad90: 2065 7869 7420 7468 6520 6564 6974 6f72   exit the editor
+0001ada0: 2077 6974 686f 7574 2073 6176 696e 6720   without saving 
+0001adb0: 7468 6520 636c 6970 2e0a 2020 2020 2222  the clip..    ""
+0001adc0: 220a 2020 2020 6966 2073 7461 7274 2069  ".    if start i
+0001add0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0001ade0: 2020 2020 6966 2073 7461 7274 203c 2030      if start < 0
+0001adf0: 3a0a 2020 2020 2020 2020 2020 2020 636c  :.            cl
+0001ae00: 6963 6b2e 7365 6368 6f28 2253 5441 5254  ick.secho("START
+0001ae10: 206d 7573 7420 6265 2061 2070 6f73 6974   must be a posit
+0001ae20: 6976 6520 6e75 6d62 6572 2e22 2c20 6667  ive number.", fg
+0001ae30: 3d22 7265 6422 290a 2020 2020 2020 2020  ="red").        
+0001ae40: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
+0001ae50: 2020 2069 6620 656e 6420 6973 206e 6f74     if end is not
+0001ae60: 204e 6f6e 6520 616e 6420 656e 6420 3c20   None and end < 
+0001ae70: 303a 0a20 2020 2020 2020 2020 2020 2063  0:.            c
+0001ae80: 6c69 636b 2e73 6563 686f 2822 454e 4420  lick.secho("END 
+0001ae90: 6d75 7374 2062 6520 6120 706f 7369 7469  must be a positi
+0001aea0: 7665 206e 756d 6265 722e 222c 2066 673d  ve number.", fg=
+0001aeb0: 2272 6564 2229 0a20 2020 2020 2020 2020  "red").         
+0001aec0: 2020 2072 6574 7572 6e0a 0a20 2020 2077     return..    w
+0001aed0: 6974 6820 6f70 656e 2863 6f6e 6669 672e  ith open(config.
+0001aee0: 534f 4e47 535f 494e 464f 5f50 4154 482c  SONGS_INFO_PATH,
+0001aef0: 2022 722b 222c 2065 6e63 6f64 696e 673d   "r+", encoding=
+0001af00: 2275 7466 2d38 2229 2061 7320 736f 6e67  "utf-8") as song
+0001af10: 735f 6669 6c65 3a0a 2020 2020 2020 2020  s_file:.        
+0001af20: 6c69 6e65 7320 3d20 736f 6e67 735f 6669  lines = songs_fi
+0001af30: 6c65 2e72 6561 646c 696e 6573 2829 0a0a  le.readlines()..
+0001af40: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0001af50: 2072 616e 6765 286c 656e 286c 696e 6573   range(len(lines
+0001af60: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0001af70: 6465 7461 696c 7320 3d20 6c69 6e65 735b  details = lines[
+0001af80: 695d 2e73 7472 6970 2829 2e73 706c 6974  i].strip().split
+0001af90: 2822 7c22 290a 2020 2020 2020 2020 2020  ("|").          
+0001afa0: 2020 6966 2069 6e74 2864 6574 6169 6c73    if int(details
+0001afb0: 5b30 5d29 203d 3d20 736f 6e67 5f69 643a  [0]) == song_id:
+0001afc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001afd0: 2062 7265 616b 0a20 2020 2020 2020 2065   break.        e
+0001afe0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001aff0: 2063 6c69 636b 2e73 6563 686f 2866 224e   click.secho(f"N
+0001b000: 6f20 736f 6e67 2066 6f75 6e64 2077 6974  o song found wit
+0001b010: 6820 4944 207b 736f 6e67 5f69 647d 2e22  h ID {song_id}."
+0001b020: 2c20 6667 3d22 7265 6422 290a 2020 2020  , fg="red").    
+0001b030: 2020 2020 2020 2020 7265 7475 726e 0a0a          return..
+0001b040: 2020 2020 2020 2020 736f 6e67 5f6e 616d          song_nam
+0001b050: 6520 3d20 6465 7461 696c 735b 315d 0a20  e = details[1]. 
+0001b060: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+0001b070: 2e70 6174 682e 6578 6973 7473 286f 732e  .path.exists(os.
+0001b080: 7061 7468 2e6a 6f69 6e28 636f 6e66 6967  path.join(config
+0001b090: 2e53 4f4e 4753 5f44 4952 2c20 736f 6e67  .SONGS_DIR, song
+0001b0a0: 5f6e 616d 6529 293a 0a20 2020 2020 2020  _name)):.       
+0001b0b0: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
+0001b0c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001b0d0: 2020 6622 536f 6e67 2066 696c 6520 7b73    f"Song file {s
+0001b0e0: 6f6e 675f 6e61 6d65 7d20 2849 4420 7b73  ong_name} (ID {s
+0001b0f0: 6f6e 675f 6964 7d29 206e 6f74 2066 6f75  ong_id}) not fou
+0001b100: 6e64 2e22 2c0a 2020 2020 2020 2020 2020  nd.",.          
+0001b110: 2020 2020 2020 6667 3d22 7265 6422 2c0a        fg="red",.
+0001b120: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0001b130: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001b140: 0a0a 2020 2020 2020 2020 6966 2073 7461  ..        if sta
+0001b150: 7274 2069 7320 4e6f 6e65 3a20 2023 2063  rt is None:  # c
+0001b160: 6c69 7020 6564 6974 6f72 0a20 2020 2020  lip editor.     
+0001b170: 2020 2020 2020 2073 7461 7274 2c20 656e         start, en
+0001b180: 6420 3d20 6375 7273 6573 2e77 7261 7070  d = curses.wrapp
+0001b190: 6572 2868 656c 7065 7273 2e63 6c69 705f  er(helpers.clip_
+0001b1a0: 6564 6974 6f72 2c20 6465 7461 696c 7329  editor, details)
+0001b1b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001b1c0: 7374 6172 7420 6973 204e 6f6e 653a 0a20  start is None:. 
+0001b1d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001b1e0: 6c69 636b 2e73 6563 686f 2866 224e 6f20  lick.secho(f"No 
+0001b1f0: 6368 616e 6765 2069 6e20 636c 6970 2066  change in clip f
+0001b200: 6f72 207b 736f 6e67 5f6e 616d 657d 2e22  or {song_name}."
+0001b210: 2c20 6667 3d22 6772 6565 6e22 290a 2020  , fg="green").  
+0001b220: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001b230: 7475 726e 0a0a 2020 2020 2020 2020 736f  turn..        so
+0001b240: 6e67 5f70 6174 6820 3d20 6f73 2e70 6174  ng_path = os.pat
+0001b250: 682e 6a6f 696e 2863 6f6e 6669 672e 534f  h.join(config.SO
+0001b260: 4e47 535f 4449 522c 2073 6f6e 675f 6e61  NGS_DIR, song_na
+0001b270: 6d65 290a 2020 2020 2020 2020 6475 7261  me).        dura
+0001b280: 7469 6f6e 203d 206d 7573 6963 5f74 6167  tion = music_tag
+0001b290: 2e6c 6f61 645f 6669 6c65 2873 6f6e 675f  .load_file(song_
+0001b2a0: 7061 7468 295b 2223 6c65 6e67 7468 225d  path)["#length"]
+0001b2b0: 2e76 616c 7565 0a0a 2020 2020 2020 2020  .value..        
+0001b2c0: 6966 2065 6e64 2069 7320 4e6f 6e65 3a0a  if end is None:.
+0001b2d0: 2020 2020 2020 2020 2020 2020 656e 6420              end 
+0001b2e0: 3d20 6475 7261 7469 6f6e 0a0a 2020 2020  = duration..    
+0001b2f0: 2020 2020 6966 2073 7461 7274 203e 2064      if start > d
+0001b300: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
+0001b310: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
+0001b320: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001b330: 2020 2253 5441 5254 206d 7573 7420 6e6f    "START must no
+0001b340: 7420 6265 206d 6f72 6520 7468 616e 2074  t be more than t
+0001b350: 6865 2073 6f6e 6720 6475 7261 7469 6f6e  he song duration
+0001b360: 2e22 2c20 6667 3d22 7265 6422 0a20 2020  .", fg="red".   
+0001b370: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001b380: 2020 2020 2020 2072 6574 7572 6e0a 2020         return.  
+0001b390: 2020 2020 2020 6966 2065 6e64 203e 2064        if end > d
+0001b3a0: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
+0001b3b0: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
+0001b3c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001b3d0: 2020 2245 4e44 206d 7573 7420 6e6f 7420    "END must not 
+0001b3e0: 6265 206d 6f72 6520 7468 616e 2074 6865  be more than the
+0001b3f0: 2073 6f6e 6720 6475 7261 7469 6f6e 2e22   song duration."
+0001b400: 2c20 6667 3d22 7265 6422 0a20 2020 2020  , fg="red".     
+0001b410: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001b420: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+0001b430: 2020 2020 6966 2073 7461 7274 203e 2065      if start > e
+0001b440: 6e64 3a0a 2020 2020 2020 2020 2020 2020  nd:.            
+0001b450: 636c 6963 6b2e 7365 6368 6f28 2253 5441  click.secho("STA
+0001b460: 5254 206d 7573 7420 6e6f 7420 6265 206d  RT must not be m
+0001b470: 6f72 6520 7468 616e 2045 4e44 2e22 2c20  ore than END.", 
+0001b480: 6667 3d22 7265 6422 290a 2020 2020 2020  fg="red").      
+0001b490: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
+0001b4a0: 2020 2020 2020 6c69 6e65 735b 695d 203d        lines[i] =
+0001b4b0: 2028 0a20 2020 2020 2020 2020 2020 2022   (.            "
+0001b4c0: 7c22 2e6a 6f69 6e28 6465 7461 696c 735b  |".join(details[
+0001b4d0: 3a33 5d20 2b20 5b73 7472 2873 7461 7274  :3] + [str(start
+0001b4e0: 2920 2b20 2220 2220 2b20 7374 7228 656e  ) + " " + str(en
+0001b4f0: 6429 5d20 2b20 6465 7461 696c 735b 353a  d)] + details[5:
+0001b500: 5d29 0a20 2020 2020 2020 2020 2020 202b  ]).            +
+0001b510: 2022 5c6e 220a 2020 2020 2020 2020 290a   "\n".        ).
+0001b520: 0a20 2020 2020 2020 2073 6f6e 6773 5f66  .        songs_f
+0001b530: 696c 652e 7365 656b 2830 290a 2020 2020  ile.seek(0).    
+0001b540: 2020 2020 736f 6e67 735f 6669 6c65 2e77      songs_file.w
+0001b550: 7269 7465 2822 222e 6a6f 696e 286c 696e  rite("".join(lin
+0001b560: 6573 2929 0a20 2020 2020 2020 2073 6f6e  es)).        son
+0001b570: 6773 5f66 696c 652e 7472 756e 6361 7465  gs_file.truncate
+0001b580: 2829 0a0a 2020 2020 2020 2020 636c 6963  ()..        clic
+0001b590: 6b2e 7365 6368 6f28 6622 436c 6970 7065  k.secho(f"Clippe
+0001b5a0: 6420 7b73 6f6e 675f 6e61 6d65 7d20 6672  d {song_name} fr
+0001b5b0: 6f6d 207b 7374 6172 747d 2074 6f20 7b65  om {start} to {e
+0001b5c0: 6e64 7d2e 222c 2066 673d 2267 7265 656e  nd}.", fg="green
+0001b5d0: 2229 0a0a 0a40 636c 692e 636f 6d6d 616e  ")...@cli.comman
+0001b5e0: 6428 290a 4063 6c69 636b 2e61 7267 756d  d().@click.argum
+0001b5f0: 656e 7428 2273 6f6e 675f 6964 7322 2c20  ent("song_ids", 
+0001b600: 7479 7065 3d69 6e74 2c20 6e61 7267 733d  type=int, nargs=
+0001b610: 2d31 2c20 7265 7175 6972 6564 3d46 616c  -1, required=Fal
+0001b620: 7365 290a 4063 6c69 636b 2e6f 7074 696f  se).@click.optio
+0001b630: 6e28 0a20 2020 2022 2d41 2f2d 6e41 222c  n(.    "-A/-nA",
+0001b640: 0a20 2020 2022 2d2d 616c 6c2f 2d2d 6e6f  .    "--all/--no
+0001b650: 2d61 6c6c 222c 0a20 2020 2022 616c 6c5f  -all",.    "all_
+0001b660: 222c 0a20 2020 2064 6566 6175 6c74 3d46  ",.    default=F
+0001b670: 616c 7365 2c0a 2020 2020 6865 6c70 3d22  alse,.    help="
+0001b680: 5265 6d6f 7665 2063 6c69 7073 2066 6f72  Remove clips for
+0001b690: 2061 6c6c 2073 6f6e 6773 2e20 4967 6e6f   all songs. Igno
+0001b6a0: 7265 7320 534f 4e47 5f49 4453 2e22 2c0a  res SONG_IDS.",.
+0001b6b0: 290a 4063 6c69 636b 2e6f 7074 696f 6e28  ).@click.option(
+0001b6c0: 222d 462f 2d6e 4622 2c20 222d 2d66 6f72  "-F/-nF", "--for
+0001b6d0: 6365 2f2d 2d6e 6f2d 666f 7263 6522 2c20  ce/--no-force", 
+0001b6e0: 2266 6f72 6365 222c 2064 6566 6175 6c74  "force", default
+0001b6f0: 3d46 616c 7365 290a 6465 6620 756e 636c  =False).def uncl
+0001b700: 6970 2873 6f6e 675f 6964 732c 2061 6c6c  ip(song_ids, all
+0001b710: 5f2c 2066 6f72 6365 293a 0a20 2020 2022  _, force):.    "
+0001b720: 2222 0a20 2020 2052 656d 6f76 6520 636c  "".    Remove cl
+0001b730: 6970 7320 666f 7220 7370 6563 6966 6963  ips for specific
+0001b740: 2073 6f6e 6728 7329 2e0a 0a20 2020 2052   song(s)...    R
+0001b750: 656d 6f76 6573 2063 6c69 7020 666f 7220  emoves clip for 
+0001b760: 7468 6520 736f 6e67 2873 2920 7769 7468  the song(s) with
+0001b770: 2049 4428 7329 2053 4f4e 475f 4944 532e   ID(s) SONG_IDS.
+0001b780: 0a0a 2020 2020 4966 2074 6865 2027 2d41  ..    If the '-A
+0001b790: 2f2d 2d61 6c6c 2720 666c 6167 2069 7320  /--all' flag is 
+0001b7a0: 7061 7373 6564 2c20 7468 6520 636c 6970  passed, the clip
+0001b7b0: 7320 666f 7220 616c 6c20 736f 6e67 7320  s for all songs 
+0001b7c0: 7769 6c6c 2062 6520 7265 6d6f 7665 642c  will be removed,
+0001b7d0: 0a20 2020 2069 676e 6f72 696e 6720 534f  .    ignoring SO
+0001b7e0: 4e47 5f49 4453 2e20 5468 6973 2070 726f  NG_IDS. This pro
+0001b7f0: 6d70 7473 2066 6f72 2063 6f6e 6669 726d  mpts for confirm
+0001b800: 6174 696f 6e20 756e 6c65 7373 2074 6865  ation unless the
+0001b810: 2027 2d46 2f2d 2d66 6f72 6365 270a 2020   '-F/--force'.  
+0001b820: 2020 666c 6167 2069 7320 7061 7373 6564    flag is passed
+0001b830: 2e0a 2020 2020 2222 220a 2020 2020 6966  ..    """.    if
+0001b840: 206e 6f74 2061 6c6c 5f3a 0a20 2020 2020   not all_:.     
+0001b850: 2020 2069 6620 736f 6e67 5f69 6473 3a0a     if song_ids:.
+0001b860: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+0001b870: 5f69 6473 203d 2073 6574 2873 6f6e 675f  _ids = set(song_
+0001b880: 6964 7329 0a20 2020 2020 2020 2065 6c73  ids).        els
+0001b890: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
+0001b8a0: 6c69 636b 2e73 6563 686f 280a 2020 2020  lick.secho(.    
+0001b8b0: 2020 2020 2020 2020 2020 2020 224e 6f20              "No 
+0001b8c0: 736f 6e67 2049 4473 2070 6173 7365 642e  song IDs passed.
+0001b8d0: 2054 6f20 7265 6d6f 7665 2063 6c69 7073   To remove clips
+0001b8e0: 2066 6f72 2061 6c6c 2073 6f6e 6773 2c20   for all songs, 
+0001b8f0: 7061 7373 2074 6865 2027 2d41 2f2d 2d61  pass the '-A/--a
+0001b900: 6c6c 2720 666c 6167 2e22 2c0a 2020 2020  ll' flag.",.    
+0001b910: 2020 2020 2020 2020 2020 2020 6667 3d22              fg="
+0001b920: 7265 6422 2c0a 2020 2020 2020 2020 2020  red",.          
+0001b930: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0001b940: 7265 7475 726e 0a0a 2020 2020 6966 2061  return..    if a
+0001b950: 6c6c 5f20 616e 6420 6e6f 7420 666f 7263  ll_ and not forc
+0001b960: 653a 0a20 2020 2020 2020 2063 6c69 636b  e:.        click
+0001b970: 2e65 6368 6f28 0a20 2020 2020 2020 2020  .echo(.         
+0001b980: 2020 2022 4172 6520 796f 7520 7375 7265     "Are you sure
+0001b990: 2079 6f75 2077 616e 7420 746f 2072 656d   you want to rem
+0001b9a0: 6f76 6520 636c 6970 7320 666f 7220 616c  ove clips for al
+0001b9b0: 6c20 736f 6e67 733f 2054 6869 7320 6361  l songs? This ca
+0001b9c0: 6e6e 6f74 2062 6520 756e 646f 6e65 2e20  nnot be undone. 
+0001b9d0: 5b79 2f6e 5d20 222c 0a20 2020 2020 2020  [y/n] ",.       
+0001b9e0: 2029 0a20 2020 2020 2020 2069 6620 696e   ).        if in
+0001b9f0: 7075 7428 292e 6c6f 7765 7228 2920 213d  put().lower() !=
+0001ba00: 2022 7922 3a0a 2020 2020 2020 2020 2020   "y":.          
+0001ba10: 2020 7265 7475 726e 0a0a 2020 2020 7769    return..    wi
+0001ba20: 7468 206f 7065 6e28 636f 6e66 6967 2e53  th open(config.S
+0001ba30: 4f4e 4753 5f49 4e46 4f5f 5041 5448 2c20  ONGS_INFO_PATH, 
+0001ba40: 2272 2b22 2c20 656e 636f 6469 6e67 3d22  "r+", encoding="
+0001ba50: 7574 662d 3822 2920 6173 2073 6f6e 6773  utf-8") as songs
+0001ba60: 5f66 696c 653a 0a20 2020 2020 2020 206c  _file:.        l
+0001ba70: 696e 6573 203d 2073 6f6e 6773 5f66 696c  ines = songs_fil
+0001ba80: 652e 7265 6164 6c69 6e65 7328 290a 0a20  e.readlines().. 
+0001ba90: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0001baa0: 7261 6e67 6528 6c65 6e28 6c69 6e65 7329  range(len(lines)
+0001bab0: 293a 0a20 2020 2020 2020 2020 2020 2064  ):.            d
+0001bac0: 6574 6169 6c73 203d 206c 696e 6573 5b69  etails = lines[i
+0001bad0: 5d2e 7374 7269 7028 292e 7370 6c69 7428  ].strip().split(
+0001bae0: 227c 2229 0a20 2020 2020 2020 2020 2020  "|").           
+0001baf0: 2069 6620 616c 6c5f 206f 7220 696e 7428   if all_ or int(
+0001bb00: 6465 7461 696c 735b 305d 2920 696e 2073  details[0]) in s
+0001bb10: 6f6e 675f 6964 733a 0a20 2020 2020 2020  ong_ids:.       
+0001bb20: 2020 2020 2020 2020 206c 696e 6573 5b69           lines[i
+0001bb30: 5d20 3d20 227c 222e 6a6f 696e 2864 6574  ] = "|".join(det
+0001bb40: 6169 6c73 5b3a 335d 202b 205b 2222 5d20  ails[:3] + [""] 
+0001bb50: 2b20 6465 7461 696c 735b 353a 5d29 202b  + details[5:]) +
+0001bb60: 2022 5c6e 220a 0a20 2020 2020 2020 2073   "\n"..        s
+0001bb70: 6f6e 6773 5f66 696c 652e 7365 656b 2830  ongs_file.seek(0
+0001bb80: 290a 2020 2020 2020 2020 736f 6e67 735f  ).        songs_
+0001bb90: 6669 6c65 2e77 7269 7465 2822 222e 6a6f  file.write("".jo
+0001bba0: 696e 286c 696e 6573 2929 0a20 2020 2020  in(lines)).     
+0001bbb0: 2020 2073 6f6e 6773 5f66 696c 652e 7472     songs_file.tr
+0001bbc0: 756e 6361 7465 2829 0a0a 2020 2020 6966  uncate()..    if
+0001bbd0: 2061 6c6c 5f3a 0a20 2020 2020 2020 2063   all_:.        c
+0001bbe0: 6c69 636b 2e73 6563 686f 2822 5265 6d6f  lick.secho("Remo
+0001bbf0: 7665 6420 636c 6970 7320 666f 7220 616c  ved clips for al
+0001bc00: 6c20 736f 6e67 732e 222c 2066 673d 2267  l songs.", fg="g
+0001bc10: 7265 656e 2229 0a20 2020 2065 6c73 653a  reen").    else:
+0001bc20: 0a20 2020 2020 2020 2063 6c69 636b 2e73  .        click.s
+0001bc30: 6563 686f 280a 2020 2020 2020 2020 2020  echo(.          
+0001bc40: 2020 6622 5265 6d6f 7665 6420 636c 6970    f"Removed clip
+0001bc50: 2873 2920 666f 7220 736f 6e67 2873 2920  (s) for song(s) 
+0001bc60: 7769 7468 2049 4428 7329 207b 272c 2027  with ID(s) {', '
+0001bc70: 2e6a 6f69 6e28 6d61 7028 7374 722c 2073  .join(map(str, s
+0001bc80: 6f6e 675f 6964 7329 297d 2e22 2c0a 2020  ong_ids))}.",.  
+0001bc90: 2020 2020 2020 2020 2020 6667 3d22 6772            fg="gr
+0001bca0: 6565 6e22 2c0a 2020 2020 2020 2020 290a  een",.        ).
+0001bcb0: 0a0a 4063 6c69 2e63 6f6d 6d61 6e64 2829  ..@cli.command()
+0001bcc0: 0a40 636c 6963 6b2e 6172 6775 6d65 6e74  .@click.argument
+0001bcd0: 2822 736f 6e67 5f69 6422 2c20 7479 7065  ("song_id", type
+0001bce0: 3d69 6e74 2c20 7265 7175 6972 6564 3d54  =int, required=T
+0001bcf0: 7275 6529 0a40 636c 6963 6b2e 6172 6775  rue).@click.argu
+0001bd00: 6d65 6e74 2822 7061 6972 7322 2c20 7479  ment("pairs", ty
+0001bd10: 7065 3d73 7472 2c20 7265 7175 6972 6564  pe=str, required
+0001bd20: 3d46 616c 7365 290a 6465 6620 6d65 7461  =False).def meta
+0001bd30: 6461 7461 2873 6f6e 675f 6964 2c20 7061  data(song_id, pa
+0001bd40: 6972 7329 3a0a 2020 2020 2222 220a 2020  irs):.    """.  
+0001bd50: 2020 5669 6577 206f 7220 6564 6974 2074    View or edit t
+0001bd60: 6865 206d 6574 6164 6174 6120 666f 7220  he metadata for 
+0001bd70: 6120 736f 6e67 2e0a 0a20 2020 2049 6620  a song...    If 
+0001bd80: 6e6f 2050 4149 5253 2061 7265 2070 6173  no PAIRS are pas
+0001bd90: 7365 642c 2070 7269 6e74 7320 7468 6520  sed, prints the 
+0001bda0: 6d65 7461 6461 7461 2066 6f72 2074 6865  metadata for the
+0001bdb0: 2073 6f6e 6720 7769 7468 2049 4420 534f   song with ID SO
+0001bdc0: 4e47 5f49 442e 0a0a 2020 2020 4966 2050  NG_ID...    If P
+0001bdd0: 4149 5253 2061 7265 2070 6173 7365 642c  AIRS are passed,
+0001bde0: 2073 6574 7320 7468 6520 6d65 7461 6461   sets the metada
+0001bdf0: 7461 2066 6f72 2074 6865 2073 6f6e 6720  ta for the song 
+0001be00: 7769 7468 2049 4420 534f 4e47 5f49 4420  with ID SONG_ID 
+0001be10: 746f 2074 6865 0a20 2020 206b 6579 2d76  to the.    key-v
+0001be20: 616c 7565 2070 6169 7273 2069 6e20 5041  alue pairs in PA
+0001be30: 4952 532e 2050 4149 5253 2073 686f 756c  IRS. PAIRS shoul
+0001be40: 6420 6265 2061 2073 7472 696e 6720 6f66  d be a string of
+0001be50: 2074 6865 2066 6f72 6d0a 2020 2020 276b   the form.    'k
+0001be60: 6579 313a 7661 6c75 6531 7c6b 6579 323a  ey1:value1|key2:
+0001be70: 7661 6c75 6532 7c2e 2e2e 272e 0a0a 2020  value2|...'...  
+0001be80: 2020 506f 7373 6962 6c65 2065 6469 7461    Possible edita
+0001be90: 626c 6520 6d65 7461 6461 7461 206b 6579  ble metadata key
+0001bea0: 7320 6172 653a 2061 6c62 756d 2c20 616c  s are: album, al
+0001beb0: 6275 6d61 7274 6973 742c 2061 7274 6973  bumartist, artis
+0001bec0: 742c 2061 7274 776f 726b 2c0a 2020 2020  t, artwork,.    
+0001bed0: 636f 6d6d 656e 742c 2063 6f6d 7069 6c61  comment, compila
+0001bee0: 7469 6f6e 2c20 636f 6d70 6f73 6572 2c20  tion, composer, 
+0001bef0: 6469 7363 6e75 6d62 6572 2c20 6765 6e72  discnumber, genr
+0001bf00: 652c 206c 7972 6963 732c 2074 6f74 616c  e, lyrics, total
+0001bf10: 6469 7363 732c 0a20 2020 2074 6f74 616c  discs,.    total
+0001bf20: 7472 6163 6b73 2c20 7472 6163 6b6e 756d  tracks, tracknum
+0001bf30: 6265 722c 2074 7261 636b 7469 746c 652c  ber, tracktitle,
+0001bf40: 2079 6561 722c 2069 7372 630a 0a20 2020   year, isrc..   
+0001bf50: 204b 6579 7320 6172 6520 6e6f 7420 6361   Keys are not ca
+0001bf60: 7365 2073 656e 7369 7469 7665 2061 6e64  se sensitive and
+0001bf70: 2063 616e 2063 6f6e 7461 696e 2061 7262   can contain arb
+0001bf80: 6974 7261 7279 2077 6869 7465 7370 6163  itrary whitespac
+0001bf90: 652c 2027 2d27 2c20 616e 640a 2020 2020  e, '-', and.    
+0001bfa0: 275f 2720 6368 6172 6163 7465 7273 2e20  '_' characters. 
+0001bfb0: 496e 206f 7468 6572 2077 6f72 6473 2c20  In other words, 
+0001bfc0: 2741 6c62 756d 2041 7274 6973 7427 2c20  'Album Artist', 
+0001bfd0: 2761 6c62 756d 2d61 7274 6973 7427 2c20  'album-artist', 
+0001bfe0: 616e 640a 2020 2020 2761 6c62 756d 5f61  and.    'album_a
+0001bff0: 7274 6973 7427 2061 7265 2061 6c6c 2073  rtist' are all s
+0001c000: 796e 6f6e 796d 7320 666f 7220 2761 6c62  ynonyms for 'alb
+0001c010: 756d 6172 7469 7374 272e 2041 6c73 6f2c  umartist'. Also,
+0001c020: 2027 6469 736b 2720 6973 0a20 2020 2073   'disk' is.    s
+0001c030: 796e 6f6e 796d 6f75 7320 7769 7468 2027  ynonymous with '
+0001c040: 6469 7363 272e 0a20 2020 2022 2222 0a0a  disc'..    """..
+0001c050: 2020 2020 7769 7468 206f 7065 6e28 636f      with open(co
+0001c060: 6e66 6967 2e53 4f4e 4753 5f49 4e46 4f5f  nfig.SONGS_INFO_
+0001c070: 5041 5448 2c20 2272 222c 2065 6e63 6f64  PATH, "r", encod
+0001c080: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
+0001c090: 736f 6e67 735f 6669 6c65 3a0a 2020 2020  songs_file:.    
+0001c0a0: 2020 2020 6c69 6e65 7320 3d20 736f 6e67      lines = song
+0001c0b0: 735f 6669 6c65 2e72 6561 646c 696e 6573  s_file.readlines
+0001c0c0: 2829 0a0a 2020 2020 2020 2020 666f 7220  ()..        for 
+0001c0d0: 6920 696e 2072 616e 6765 286c 656e 286c  i in range(len(l
+0001c0e0: 696e 6573 2929 3a0a 2020 2020 2020 2020  ines)):.        
+0001c0f0: 2020 2020 6465 7461 696c 7320 3d20 6c69      details = li
+0001c100: 6e65 735b 695d 2e73 7472 6970 2829 2e73  nes[i].strip().s
+0001c110: 706c 6974 2822 7c22 290a 2020 2020 2020  plit("|").      
+0001c120: 2020 2020 2020 6966 2069 6e74 2864 6574        if int(det
+0001c130: 6169 6c73 5b30 5d29 203d 3d20 736f 6e67  ails[0]) == song
+0001c140: 5f69 643a 0a20 2020 2020 2020 2020 2020  _id:.           
+0001c150: 2020 2020 2073 6f6e 675f 7061 7468 203d       song_path =
+0001c160: 206f 732e 7061 7468 2e6a 6f69 6e28 636f   os.path.join(co
+0001c170: 6e66 6967 2e53 4f4e 4753 5f44 4952 2c20  nfig.SONGS_DIR, 
+0001c180: 6465 7461 696c 735b 315d 290a 2020 2020  details[1]).    
+0001c190: 2020 2020 2020 2020 2020 2020 736f 6e67              song
+0001c1a0: 5f6e 616d 6520 3d20 6465 7461 696c 735b  _name = details[
+0001c1b0: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
+0001c1c0: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
+0001c1d0: 682e 6578 6973 7473 2873 6f6e 675f 7061  h.exists(song_pa
+0001c1e0: 7468 293a 0a20 2020 2020 2020 2020 2020  th):.           
+0001c1f0: 2020 2020 2020 2020 2063 6c69 636b 2e73           click.s
+0001c200: 6563 686f 280a 2020 2020 2020 2020 2020  echo(.          
+0001c210: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+0001c220: 536f 6e67 2066 696c 6520 7b73 6f6e 675f  Song file {song_
+0001c230: 6e61 6d65 7d20 2849 4420 7b73 6f6e 675f  name} (ID {song_
+0001c240: 6964 7d29 206e 6f74 2066 6f75 6e64 2e22  id}) not found."
+0001c250: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001c260: 2020 2020 2020 2020 2020 6667 3d22 7265            fg="re
+0001c270: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
+0001c280: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001c290: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001c2a0: 7475 726e 0a20 2020 2020 2020 2020 2020  turn.           
+0001c2b0: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
+0001c2c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001c2d0: 2020 2020 2063 6c69 636b 2e73 6563 686f       click.secho
+0001c2e0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001c2f0: 2020 6622 4e6f 2073 6f6e 6720 7769 7468    f"No song with
+0001c300: 2049 4420 7b73 6f6e 675f 6964 7d20 666f   ID {song_id} fo
+0001c310: 756e 642e 222c 0a20 2020 2020 2020 2020  und.",.         
+0001c320: 2020 2020 2020 2066 673d 2272 6564 222c         fg="red",
+0001c330: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+0001c340: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001c350: 6e0a 0a20 2020 2069 6620 7061 6972 733a  n..    if pairs:
+0001c360: 0a20 2020 2020 2020 2070 6169 7273 203d  .        pairs =
+0001c370: 205b 7475 706c 6528 7061 6972 2e73 7472   [tuple(pair.str
+0001c380: 6970 2829 2e73 706c 6974 2822 3a22 2929  ip().split(":"))
+0001c390: 2066 6f72 2070 6169 7220 696e 2070 6169   for pair in pai
+0001c3a0: 7273 2e73 706c 6974 2822 7c22 295d 0a0a  rs.split("|")]..
+0001c3b0: 2020 2020 2020 2020 736f 6e67 5f64 6174          song_dat
+0001c3c0: 6120 3d20 6d75 7369 635f 7461 672e 6c6f  a = music_tag.lo
+0001c3d0: 6164 5f66 696c 6528 736f 6e67 5f70 6174  ad_file(song_pat
+0001c3e0: 6829 0a20 2020 2020 2020 2076 616c 6964  h).        valid
+0001c3f0: 5f70 6169 7273 203d 2070 6169 7273 5b3a  _pairs = pairs[:
+0001c400: 5d0a 2020 2020 2020 2020 666f 7220 6b65  ].        for ke
+0001c410: 792c 2076 616c 7565 2069 6e20 7061 6972  y, value in pair
+0001c420: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
+0001c430: 6620 6b65 7920 6e6f 7420 696e 2063 6f6e  f key not in con
+0001c440: 6669 672e 4d45 5441 4441 5441 5f4b 4559  fig.METADATA_KEY
+0001c450: 5320 6f72 206b 6579 2e73 7461 7274 7377  S or key.startsw
+0001c460: 6974 6828 2223 2229 3a0a 2020 2020 2020  ith("#"):.      
+0001c470: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+0001c480: 7365 6368 6f28 0a20 2020 2020 2020 2020  secho(.         
+0001c490: 2020 2020 2020 2020 2020 2066 2227 7b6b             f"'{k
+0001c4a0: 6579 7d27 2069 7320 6e6f 7420 6120 7661  ey}' is not a va
+0001c4b0: 6c69 6420 6564 6974 6162 6c65 206d 6574  lid editable met
+0001c4c0: 6164 6174 6120 6b65 792e 222c 2066 673d  adata key.", fg=
+0001c4d0: 2272 6564 220a 2020 2020 2020 2020 2020  "red".          
+0001c4e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001c4f0: 2020 2020 2020 2020 7661 6c69 645f 7061          valid_pa
+0001c500: 6972 732e 7265 6d6f 7665 2828 6b65 792c  irs.remove((key,
+0001c510: 2076 616c 7565 2929 0a20 2020 2020 2020   value)).       
+0001c520: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+0001c530: 650a 2020 2020 2020 2020 2020 2020 736f  e.            so
+0001c540: 6e67 5f64 6174 615b 6b65 795d 203d 2076  ng_data[key] = v
+0001c550: 616c 7565 0a0a 2020 2020 2020 2020 736f  alue..        so
+0001c560: 6e67 5f64 6174 612e 7361 7665 2829 0a0a  ng_data.save()..
+0001c570: 2020 2020 2020 2020 636c 6963 6b2e 7365          click.se
+0001c580: 6368 6f28 0a20 2020 2020 2020 2020 2020  cho(.           
+0001c590: 2066 2253 6574 206d 6574 6164 6174 6120   f"Set metadata 
+0001c5a0: 666f 7220 277b 736f 6e67 5f6e 616d 657d  for '{song_name}
+0001c5b0: 2720 7769 7468 2049 4420 7b73 6f6e 675f  ' with ID {song_
+0001c5c0: 6964 7d20 746f 207b 7661 6c69 645f 7061  id} to {valid_pa
+0001c5d0: 6972 737d 2e22 2c0a 2020 2020 2020 2020  irs}.",.        
+0001c5e0: 2020 2020 6667 3d22 6772 6565 6e22 2c0a      fg="green",.
+0001c5f0: 2020 2020 2020 2020 290a 2020 2020 656c          ).    el
+0001c600: 7365 3a0a 2020 2020 2020 2020 736f 6e67  se:.        song
+0001c610: 5f64 6174 6120 3d20 6d75 7369 635f 7461  _data = music_ta
+0001c620: 672e 6c6f 6164 5f66 696c 6528 736f 6e67  g.load_file(song
+0001c630: 5f70 6174 6829 0a20 2020 2020 2020 2063  _path).        c
+0001c640: 6c69 636b 2e65 6368 6f28 224d 6574 6164  lick.echo("Metad
+0001c650: 6174 6120 666f 7220 222c 206e 6c3d 4661  ata for ", nl=Fa
+0001c660: 6c73 6529 0a20 2020 2020 2020 2063 6c69  lse).        cli
+0001c670: 636b 2e73 6563 686f 2873 6f6e 675f 6e61  ck.secho(song_na
+0001c680: 6d65 2c20 6667 3d22 626c 7565 222c 2062  me, fg="blue", b
+0001c690: 6f6c 643d 5472 7565 2c20 6e6c 3d46 616c  old=True, nl=Fal
+0001c6a0: 7365 290a 2020 2020 2020 2020 636c 6963  se).        clic
+0001c6b0: 6b2e 6563 686f 2866 2220 7769 7468 2049  k.echo(f" with I
+0001c6c0: 4420 7b73 6f6e 675f 6964 7d3a 2229 0a0a  D {song_id}:")..
+0001c6d0: 2020 2020 2020 2020 666f 7220 6b65 7920          for key 
+0001c6e0: 696e 2063 6f6e 6669 672e 4d45 5441 4441  in config.METADA
+0001c6f0: 5441 5f4b 4559 533a 0a20 2020 2020 2020  TA_KEYS:.       
+0001c700: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+0001c710: 2020 2020 2020 2020 2020 636c 6963 6b2e            click.
+0001c720: 6563 686f 280a 2020 2020 2020 2020 2020  echo(.          
+0001c730: 2020 2020 2020 2020 2020 6622 5c74 7b6b            f"\t{k
+0001c740: 6579 2069 6620 6e6f 7420 6b65 792e 7374  ey if not key.st
+0001c750: 6172 7473 7769 7468 2827 2327 2920 656c  artswith('#') el
+0001c760: 7365 206b 6579 5b31 3a5d 7d3a 207b 736f  se key[1:]}: {so
+0001c770: 6e67 5f64 6174 615b 6b65 795d 2e76 616c  ng_data[key].val
+0001c780: 7565 7d22 0a20 2020 2020 2020 2020 2020  ue}".           
+0001c790: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001c7a0: 2020 2065 7863 6570 743a 2020 2320 7079     except:  # py
+0001c7b0: 6c69 6e74 3a20 6469 7361 626c 653d 6261  lint: disable=ba
+0001c7c0: 7265 2d65 7863 6570 740a 2020 2020 2020  re-except.      
+0001c7d0: 2020 2020 2020 2020 2020 7061 7373 0a0a            pass..
+0001c7e0: 0a40 636c 692e 636f 6d6d 616e 6428 6e61  .@cli.command(na
+0001c7f0: 6d65 3d22 6469 7222 290a 4063 6c69 636b  me="dir").@click
+0001c800: 2e61 7267 756d 656e 7428 2264 6972 6563  .argument("direc
+0001c810: 746f 7279 222c 2074 7970 653d 636c 6963  tory", type=clic
+0001c820: 6b2e 5061 7468 2866 696c 655f 6f6b 6179  k.Path(file_okay
+0001c830: 3d46 616c 7365 292c 2072 6571 7569 7265  =False), require
+0001c840: 643d 4661 6c73 6529 0a64 6566 2064 6972  d=False).def dir
+0001c850: 5f28 6469 7265 6374 6f72 7929 3a0a 2020  _(directory):.  
+0001c860: 2020 2222 220a 2020 2020 4368 616e 6765    """.    Change
+0001c870: 2074 6865 2064 6972 6563 746f 7279 2077   the directory w
+0001c880: 6865 7265 206d 6165 7374 726f 206c 6f6f  here maestro loo
+0001c890: 6b73 2066 6f72 2073 6f6e 6773 2e0a 2020  ks for songs..  
+0001c8a0: 2020 4e4f 5445 3a20 5468 6973 2064 6f65    NOTE: This doe
+0001c8b0: 7320 6e6f 7420 6d6f 7665 2061 6e79 2073  s not move any s
+0001c8c0: 6f6e 6773 2e20 4974 206f 6e6c 7920 6368  ongs. It only ch
+0001c8d0: 616e 6765 7320 7768 6572 6520 6d61 6573  anges where maes
+0001c8e0: 7472 6f20 6c6f 6f6b 7320 666f 720a 2020  tro looks for.  
+0001c8f0: 2020 736f 6e67 732e 2059 6f75 2077 696c    songs. You wil
+0001c900: 6c20 6861 7665 2074 6f20 6d6f 7665 2074  l have to move t
+0001c910: 6865 2073 6f6e 6773 2079 6f75 7273 656c  he songs yoursel
+0001c920: 662e 0a0a 2020 2020 4966 206e 6f20 6172  f...    If no ar
+0001c930: 6775 6d65 6e74 2069 7320 7061 7373 6564  gument is passed
+0001c940: 2c20 7072 696e 7473 2074 6865 2063 7572  , prints the cur
+0001c950: 7265 6e74 2064 6972 6563 746f 7279 2e0a  rent directory..
+0001c960: 2020 2020 2222 220a 0a20 2020 2069 6620      """..    if 
+0001c970: 6469 7265 6374 6f72 7920 6973 204e 6f6e  directory is Non
+0001c980: 653a 0a20 2020 2020 2020 2063 6c69 636b  e:.        click
+0001c990: 2e65 6368 6f28 636f 6e66 6967 2e53 4f4e  .echo(config.SON
+0001c9a0: 4753 5f44 4952 290a 2020 2020 2020 2020  GS_DIR).        
+0001c9b0: 7265 7475 726e 0a0a 2020 2020 6966 206e  return..    if n
+0001c9c0: 6f74 206f 732e 7061 7468 2e65 7869 7374  ot os.path.exist
+0001c9d0: 7328 6469 7265 6374 6f72 7929 3a0a 2020  s(directory):.  
+0001c9e0: 2020 2020 2020 6f73 2e6d 616b 6564 6972        os.makedir
+0001c9f0: 7328 6469 7265 6374 6f72 7929 0a0a 2020  s(directory)..  
+0001ca00: 2020 7769 7468 206f 7065 6e28 636f 6e66    with open(conf
+0001ca10: 6967 2e53 4554 5449 4e47 535f 4649 4c45  ig.SETTINGS_FILE
+0001ca20: 2c20 2272 2b22 2c20 656e 636f 6469 6e67  , "r+", encoding
+0001ca30: 3d22 7574 662d 3822 2920 6173 2073 6574  ="utf-8") as set
+0001ca40: 7469 6e67 735f 6669 6c65 3a0a 2020 2020  tings_file:.    
+0001ca50: 2020 2020 7365 7474 696e 6773 203d 206a      settings = j
+0001ca60: 736f 6e2e 6c6f 6164 2873 6574 7469 6e67  son.load(setting
+0001ca70: 735f 6669 6c65 290a 2020 2020 2020 2020  s_file).        
+0001ca80: 7365 7474 696e 6773 5b22 736f 6e67 5f64  settings["song_d
+0001ca90: 6972 6563 746f 7279 225d 203d 2064 6972  irectory"] = dir
+0001caa0: 6563 746f 7279 0a20 2020 2020 2020 2073  ectory.        s
+0001cab0: 6574 7469 6e67 735f 6669 6c65 2e73 6565  ettings_file.see
+0001cac0: 6b28 3029 0a20 2020 2020 2020 206a 736f  k(0).        jso
+0001cad0: 6e2e 6475 6d70 2873 6574 7469 6e67 732c  n.dump(settings,
+0001cae0: 2073 6574 7469 6e67 735f 6669 6c65 290a   settings_file).
+0001caf0: 2020 2020 2020 2020 7365 7474 696e 6773          settings
+0001cb00: 5f66 696c 652e 7472 756e 6361 7465 2829  _file.truncate()
+0001cb10: 0a0a 2020 2020 636c 6963 6b2e 7365 6368  ..    click.sech
+0001cb20: 6f28 6622 4368 616e 6765 6420 736f 6e67  o(f"Changed song
+0001cb30: 2064 6972 6563 746f 7279 2074 6f20 7b64   directory to {d
+0001cb40: 6972 6563 746f 7279 7d2e 222c 2066 673d  irectory}.", fg=
+0001cb50: 2267 7265 656e 2229                      "green")
```

### Comparing `maestro-music-1.0.7/maestro_music.egg-info/PKG-INFO` & `maestro-music-1.0.8/maestro_music.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: maestro-music
-Version: 1.0.7
+Version: 1.0.8
 Summary: A simple command line tool to play songs (or any audio files, really).
 Home-page: https://github.com/PrajwalVandana/maestro-cli
 Author: Prajwal Vandana
 License: MIT
 Keywords: music,sound,audio,music-player,cli,ogg,flac,mp3,wav,spotify,youtube,audio-visualization,audio-visualizer
 Description-Content-Type: text/markdown
 License-File: LICENSE
```

### Comparing `maestro-music-1.0.7/setup.py` & `maestro-music-1.0.8/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -12,15 +12,15 @@
         "pyobjc-framework-MediaPlayer",
         "pyobjc-framework-Quartz",
     ]
 ]
 
 setup(
     name="maestro-music",
-    version="1.0.7",
+    version="1.0.8",
     author="Prajwal Vandana",
     url="https://github.com/PrajwalVandana/maestro-cli",
     description="A simple command line tool to play songs (or any audio files, really).",
     long_description=open("readme.md", encoding="utf-8").read(),
     license="MIT",
     license_files=["LICENSE"],
     long_description_content_type="text/markdown",
```

