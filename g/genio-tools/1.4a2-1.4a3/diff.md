# Comparing `tmp/genio_tools-1.4a2-py3-none-any.whl.zip` & `tmp/genio_tools-1.4a3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 25074 bytes, number of entries: 25
--rw-rw-r--  2.0 unx      570 b- defN 23-May-11 10:18 aiot/__init__.py
--rw-rw-r--  2.0 unx     1088 b- defN 23-May-11 10:18 aiot/app.py
--rw-rw-r--  2.0 unx     4953 b- defN 23-May-11 10:18 aiot/board.py
--rw-rw-r--  2.0 unx     1973 b- defN 23-May-11 10:18 aiot/boardcontrol_linux.py
--rw-rw-r--  2.0 unx     2472 b- defN 23-May-11 10:18 aiot/boardcontrol_win.py
--rw-rw-r--  2.0 unx     2460 b- defN 23-Mar-26 14:11 aiot/bootrom.py
--rw-rw-r--  2.0 unx     3402 b- defN 23-Mar-26 14:11 aiot/config.py
--rw-rw-r--  2.0 unx     4040 b- defN 23-Mar-26 14:11 aiot/efuse.py
--rw-rw-r--  2.0 unx     1306 b- defN 23-Mar-26 14:11 aiot/fastboot.py
--rw-rw-r--  2.0 unx     9504 b- defN 23-May-11 10:18 aiot/flash.py
--rw-rw-r--  2.0 unx     1377 b- defN 23-Mar-26 14:11 aiot/ftdi.py
--rw-rw-r--  2.0 unx     3861 b- defN 23-May-11 10:18 aiot/ftdi_win.py
--rw-rw-r--  2.0 unx      800 b- defN 23-Mar-26 14:11 aiot/rpmb.py
--rw-rw-r--  2.0 unx     3440 b- defN 23-May-12 08:25 aiot/ubootenv.py
--rw-rw-r--  2.0 unx      157 b- defN 23-May-12 08:27 aiot/version.py
--rw-rw-r--  2.0 unx      126 b- defN 23-Mar-26 14:11 aiot/image/__init__.py
--rw-rw-r--  2.0 unx     2406 b- defN 23-May-11 10:18 aiot/image/android.py
--rw-rw-r--  2.0 unx     6789 b- defN 23-May-11 10:18 aiot/image/ubuntu.py
--rw-rw-r--  2.0 unx     9181 b- defN 23-May-11 10:18 aiot/image/yocto.py
--rw-rw-r--  2.0 unx     1091 b- defN 23-May-12 08:27 genio_tools-1.4a2.dist-info/LICENSE
--rw-rw-r--  2.0 unx      926 b- defN 23-May-12 08:27 genio_tools-1.4a2.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-May-12 08:27 genio_tools-1.4a2.dist-info/WHEEL
--rw-rw-r--  2.0 unx      334 b- defN 23-May-12 08:27 genio_tools-1.4a2.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        5 b- defN 23-May-12 08:27 genio_tools-1.4a2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1897 b- defN 23-May-12 08:27 genio_tools-1.4a2.dist-info/RECORD
-25 files, 64250 bytes uncompressed, 22078 bytes compressed:  65.6%
+Zip file size: 25396 bytes, number of entries: 25
+-rw-rw-r--  2.0 unx      570 b- defN 23-Jul-07 10:31 aiot/__init__.py
+-rw-rw-r--  2.0 unx     1088 b- defN 23-May-03 11:13 aiot/app.py
+-rw-rw-r--  2.0 unx     4898 b- defN 23-Jul-10 09:31 aiot/board.py
+-rw-rw-r--  2.0 unx     1988 b- defN 23-Jul-10 09:31 aiot/boardcontrol_linux.py
+-rw-rw-r--  2.0 unx     2472 b- defN 23-Jul-07 10:30 aiot/boardcontrol_win.py
+-rw-rw-r--  2.0 unx     2460 b- defN 23-May-03 09:03 aiot/bootrom.py
+-rw-rw-r--  2.0 unx     3402 b- defN 23-May-03 09:03 aiot/config.py
+-rw-rw-r--  2.0 unx     4040 b- defN 23-May-03 09:03 aiot/efuse.py
+-rw-rw-r--  2.0 unx     1306 b- defN 23-May-03 09:03 aiot/fastboot.py
+-rw-rw-r--  2.0 unx     9608 b- defN 23-Jul-10 09:31 aiot/flash.py
+-rw-rw-r--  2.0 unx     2368 b- defN 23-Jul-10 09:31 aiot/ftdi.py
+-rw-rw-r--  2.0 unx     3861 b- defN 23-Jul-07 10:30 aiot/ftdi_win.py
+-rw-rw-r--  2.0 unx      800 b- defN 23-May-03 09:03 aiot/rpmb.py
+-rw-rw-r--  2.0 unx     3440 b- defN 23-Jul-10 09:30 aiot/ubootenv.py
+-rw-rw-r--  2.0 unx      157 b- defN 23-Jul-10 10:05 aiot/version.py
+-rw-rw-r--  2.0 unx      126 b- defN 23-May-03 09:03 aiot/image/__init__.py
+-rw-rw-r--  2.0 unx     2406 b- defN 23-May-03 11:27 aiot/image/android.py
+-rw-rw-r--  2.0 unx     6631 b- defN 23-Jul-10 09:30 aiot/image/ubuntu.py
+-rw-rw-r--  2.0 unx     9181 b- defN 23-Jul-10 09:30 aiot/image/yocto.py
+-rw-rw-r--  2.0 unx     1091 b- defN 23-Jul-10 10:05 genio_tools-1.4a3.dist-info/LICENSE
+-rw-rw-r--  2.0 unx      926 b- defN 23-Jul-10 10:05 genio_tools-1.4a3.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jul-10 10:05 genio_tools-1.4a3.dist-info/WHEEL
+-rw-rw-r--  2.0 unx      334 b- defN 23-Jul-10 10:05 genio_tools-1.4a3.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        5 b- defN 23-Jul-10 10:05 genio_tools-1.4a3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1897 b- defN 23-Jul-10 10:05 genio_tools-1.4a3.dist-info/RECORD
+25 files, 65147 bytes uncompressed, 22400 bytes compressed:  65.6%
```

## zipnote {}

```diff
@@ -51,26 +51,26 @@
 
 Filename: aiot/image/ubuntu.py
 Comment: 
 
 Filename: aiot/image/yocto.py
 Comment: 
 
-Filename: genio_tools-1.4a2.dist-info/LICENSE
+Filename: genio_tools-1.4a3.dist-info/LICENSE
 Comment: 
 
-Filename: genio_tools-1.4a2.dist-info/METADATA
+Filename: genio_tools-1.4a3.dist-info/METADATA
 Comment: 
 
-Filename: genio_tools-1.4a2.dist-info/WHEEL
+Filename: genio_tools-1.4a3.dist-info/WHEEL
 Comment: 
 
-Filename: genio_tools-1.4a2.dist-info/entry_points.txt
+Filename: genio_tools-1.4a3.dist-info/entry_points.txt
 Comment: 
 
-Filename: genio_tools-1.4a2.dist-info/top_level.txt
+Filename: genio_tools-1.4a3.dist-info/top_level.txt
 Comment: 
 
-Filename: genio_tools-1.4a2.dist-info/RECORD
+Filename: genio_tools-1.4a3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## aiot/board.py

```diff
@@ -60,19 +60,18 @@
         board.power()
 
 def main():
     app = aiot.App(description=app_description)
     parser = app.parser
     logger = app.logger
 
-    if platform.system() == 'Windows':
-        parser.add_argument('-s', '--serial',
-                            type=str,
-                            default=None,
-                            help="Specify which board to connect to using FTDI serial. You can get serial with 'aiot-board list'")
+    parser.add_argument('-s', '--serial',
+                        type=str,
+                        default=None,
+                        help="Specify which board to connect to using FTDI serial. You can get serial with 'aiot-board list'")
 
     #parser.add_argument('command', type=str,
     #    choices=['reset', 'download', 'power', 'program-ftdi', 'list'],
     #    help=)
     subparsers = parser.add_subparsers(
         dest = 'command',
     )
```

## aiot/boardcontrol_linux.py

```diff
@@ -7,15 +7,15 @@
 import sys
 import time
 
 class BoardControl:
     GPIO_LOW = 0
     GPIO_HIGH = 1
 
-    def __init__(self, reset_gpio, dl_gpio, pwr_gpio, chip_id = None):
+    def __init__(self, reset_gpio, dl_gpio, pwr_gpio, chip_id = None, serial = None):
         chip = self.get_gpiochip(chip_id)
 
         config = gpiod.line_request()
         config.consumer = "aiot-board"
         config.request_type = gpiod.line_request.DIRECTION_OUTPUT
 
         self.reset_gpio = chip.get_line(reset_gpio)
```

## aiot/flash.py

```diff
@@ -69,14 +69,18 @@
                 self.logger.error(f"Invalid target '{target}'")
                 return False
 
             if partition in self.img.partitions:
                 if binary == None:
                     binary = os.path.join(self.img.path, self.img.partitions[partition])
 
+                # u-boot-env.bin will be generated later. Skip checking.
+                if os.path.basename(binary) == 'u-boot-env.bin':
+                    continue
+
                 if not os.path.exists(binary):
                     self.logger.error(f"The binary file '{binary}' for partition '{partition}' doesn't exist")
                     return False
 
         return True
 
     def flash(self, targets):
@@ -130,17 +134,17 @@
             type = lambda num: int(num, 0),
             help = 'Size of the U-Boot environment storage. Default to 4096 bytes.')
         group.add_argument('--uboot-env-redund-offset', 
             default = -1,
             type = lambda num: int(num, 0),
             help = 'Enable U-Boot redundant env generation and assign offset of the redundant data. No redundant env by default.')
         group.add_argument('-e', '--uboot-env-set',
-            nargs='+',
+            action="append",
             metavar="KEY=VALUE",
-            help='Update or add U-Boot env variables using one or more KEY=VALUE pair. e.g. `-e boot_targets=ebbr ethaddr=00:11:22:33:44:55. '
+            help='Update or add U-Boot env variables as a KEY=VALUE pair. e.g. `-e boot_targets=ebbr -e ethaddr=00:11:22:33:44:55.'
                  'Use double quote for VALUE if there are space characters, e.g. `-e boot_prefixes="/ /boot /oemboot"`.')
 
     def add_firmware_group(self, parser):
         group = parser.add_argument_group('Firmware')
         group.add_argument('--serialno', type=str, \
             help="Customize serial number used in adb and fastboot, e.g. the result of 'adb devices'\n"
                  "This is not the serial used by 'aiot-board -s' and 'aiot-flash -s',"
@@ -207,16 +211,15 @@
             return
 
         if not args.dry_run:
             try:
                 self.logger.info("Try to automatically reset the board into DOWNLOAD mode...")
                 if platform.system() == 'Linux':
                     board = aiot.BoardControl(args.gpio_reset, args.gpio_download,
-                                            args.gpio_power, args.gpio_chip,
-                                            serial = None)
+                                            args.gpio_power, args.gpio_chip)
                 elif platform.system() == 'Windows':
                     board = aiot.BoardControl(args.gpio_reset, args.gpio_download,
                                             args.gpio_power, None,
                                             serial = args.ftdi_serial)
                 board.download_mode_boot()
             except RuntimeError as r:
                 self.logger.warning(r)
```

## aiot/ftdi.py

```diff
@@ -3,28 +3,43 @@
 # Author: Fabien Parent <fparent@baylibre.com>
 
 import logging
 import pyftdi.eeprom
 import usb
 
 class FtdiControl:
-    def __init__(self):
+    def __init__(self, serial = None):
         self.logger = logging.getLogger('aiot')
+        self.serial = serial
 
-    def find_device(self):
+    def print_device_list(self):
+        pyftdi.ftdi.Ftdi.show_devices()
+
+    def find_device(self, serial = None):
+        if serial:
+            for usb_dev, dev_idx in pyftdi.ftdi.Ftdi.list_devices():
+                if serial == usb_dev.sn:
+                    self.logger.debug(f"Matching serial found:{usb_dev}")
+                    return pyftdi.usbtools.UsbTools.get_device(usb_dev)
+            self.logger.error(f"Cannot find FTDI device with serial={serial}")
+            return None
+        else:
+            return self._find_device_by_usb()
+
+    def _find_device_by_usb(self):
         dev = list(usb.core.find(find_all=True, idVendor=0x0403))
         if len(dev) == 0:
             raise RuntimeError("Cannot find any FTDI device")
         elif len(dev) > 1:
             raise RuntimeError("More than one FTDI device connected")
 
         return dev[0]
 
-    def program(self, product_name, reset_gpio, download_gpio, power_gpio):
-        device = self.find_device()
+    def program(self, product_name, reset_gpio, download_gpio, power_gpio, new_serial = None):
+        device = self.find_device(self.serial)
 
         eeprom = pyftdi.eeprom.FtdiEeprom()
         eeprom.open(device)
 
         # HACKS for bad FTDI-232R devices
         if eeprom._eeprom[0x07] == 0x00 and device.idProduct == 0x6001:
             self.logger.warning("Bad FTDI type. Assuming FTDI-232R device.")
@@ -32,11 +47,18 @@
             eeprom._eeprom[0x07] = 0x06
             eeprom._decode_eeprom()
 
         eeprom.set_property(f"cbus_func_{power_gpio}", "GPIO")
         eeprom.set_property(f"cbus_func_{reset_gpio}", "GPIO")
         eeprom.set_property(f"cbus_func_{download_gpio}", "GPIO")
 
+        if new_serial:
+            # Currently Linux version does not support serial setting.
+            # If we set serial, the following error occurs:
+            # pyftdi.ftdi.FtdiError: EEPROM does not support mirroring
+            # eeprom.set_serial_number(new_serial)
+            self.logger.error("Setting FTDI serial number is not supported")
+
         eeprom.commit(dry_run = False)
         eeprom.reset_device()
 
         self.logger.info("FTDI device programmed successfully")
```

## aiot/version.py

```diff
@@ -1,4 +1,4 @@
 # file generated by setuptools_scm
 # don't change, don't track in version control
-__version__ = version = '1.4a2'
+__version__ = version = '1.4a3'
 __version_tuple__ = version_tuple = (1, 4)
```

## aiot/image/ubuntu.py

```diff
@@ -19,15 +19,14 @@
 class UbuntuImage:
     def __init__(self, args):
         self.args = args
         self.path = args.path
         self.ubuntu_edition = None
         self.ubuntu_version = None
         self.ubuntu_codename = None
-        self.mtk_aiot = None
         self.uboot_env_size = self.args.uboot_env_size
         offset_arg = self.args.uboot_env_redund_offset
         self.uboot_env_redund_offset = 0x100000 if offset_arg == -1 else offset_arg
         self.uboot_env_redund_support = True
         self.eth_oui = "00:0C:E7"
         self.num_of_eth = 0
         self.tools_cfg = []
@@ -64,16 +63,14 @@
                 ubuntu_env = data['ubuntu-env']
                 if 'edition' in ubuntu_env:
                     self.ubuntu_edition = ubuntu_env['edition']
                 if 'codename' in ubuntu_env:
                     self.ubuntu_codename = ubuntu_env['codename']
                 if 'version' in ubuntu_env:
                     self.ubuntu_version = ubuntu_env['version']
-                if 'mtk-aiot' in ubuntu_env:
-                    self.mtk_aiot = ubuntu_env['mtk-aiot']
 
             if 'uboot-env' in data:
                 uboot_env = data['uboot-env']
                 if 'env-size' in uboot_env:
                     self.uboot_env_size = int(uboot_env['env-size'], 0)
                     self.logger.debug(f"ubuntu.json: uboot_env_size={self.uboot_env_size}")
                 if 'env-redund-offset' in uboot_env:
@@ -88,15 +85,15 @@
             if 'ethernet' in data:
                 ethernet = data['ethernet']
                 if 'oui' in ethernet:
                     self.eth_oui = ethernet['oui']
                 if 'num-of-eth' in ethernet:
                     self.num_of_eth = ethernet['num-of-eth']
 
-            self.tools_cfg = data.get('aiot-tools', None)
+            self.tools_cfg = data.get('genio-tools', None)
 
             if not 'partitions' in data:
                 self.logger.error(f"No partition layout found in {config_file}")
                 sys.exit(-errno.ENODATA)
 
             self.partitions = data['partitions']
             for partition in self.partitions:
@@ -119,15 +116,15 @@
         if not self.tools_cfg or not 'min-version' in self.tools_cfg:
             return
 
         min_version = self.tools_cfg['min-version']
 
         if packaging.version.parse(min_version) > \
            packaging.version.parse(aiot.version):
-            self.logger.error("Your AIoT tools is too old. "
+            self.logger.error("Your Genio tools is too old. "
                 f"Please upgrade to version {min_version} or higher")
             sys.exit(-errno.ENOENT)
 
     def generate_partition_table(self):
         # extract MBR
         with open(f"{self.path}/MBR_EMMC", "wb+") as mbr:
             with open(f"{self.path}/MBR_EMMC_UBUNTU", "rb+") as fd:
@@ -166,14 +163,13 @@
 
     @classmethod
     def setup_local_parser(cls):
         cls.setup_parser(cls.parser)
         return cls.parser.parse_args()
 
     def __str__(self):
-        return f"""AIoT Tools: v{aiot.version}
+        return f"""Genio Tools: v{aiot.version}
 Ubuntu Image:
 \tedition:  {self.ubuntu_edition}
 \tversion:  {self.ubuntu_version}
 \tcodename: {self.ubuntu_codename}
-\tmtk_aiot: {self.mtk_aiot}
 """
```

## Comparing `genio_tools-1.4a2.dist-info/LICENSE` & `genio_tools-1.4a3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `genio_tools-1.4a2.dist-info/METADATA` & `genio_tools-1.4a3.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: genio-tools
-Version: 1.4a2
+Version: 1.4a3
 Summary: Tools for flashing boards using MediaTek Genio SoCs
 Home-page: https://gitlab.com/mediatek/aiot/bsp/genio-tools
 Author: Fabien Parent
 Maintainer: Pablo Sun
 Maintainer-email: pablo.sun@mediatek.com
 License: UNKNOWN
 Platform: UNKNOWN
```

## Comparing `genio_tools-1.4a2.dist-info/RECORD` & `genio_tools-1.4a3.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 aiot/__init__.py,sha256=UFjWAjLTr4XsKz4rh3EylTU4CK7yjT310VB_HOvslnk,570
 aiot/app.py,sha256=MrZGCFauA1rkV5UEhCts64Mv7UUUMKz2jRu2R6Fy9mI,1088
-aiot/board.py,sha256=xUQIEZsk0ee_CtYrgXtNkztjKwjbva-bBEFV0g66qMU,4953
-aiot/boardcontrol_linux.py,sha256=aP0EvUYsBioMWmQs9zPVeKIXfE0Nf6zDFZd3Zu8Yhhg,1973
+aiot/board.py,sha256=hDe1SXp_GvVkFCSlCzCGjHK47abPnOaONgRvVgNPWF0,4898
+aiot/boardcontrol_linux.py,sha256=_W_ESQyL55wgtupzleZhFkojiDiyToNl10fK3wJMSm4,1988
 aiot/boardcontrol_win.py,sha256=akXb0cvwsvR8zl45RP3Bv_9uNdZHCzHoe6TQGBuSwHI,2472
 aiot/bootrom.py,sha256=CN6fpFU9mL6RbPRqGxAJTYVc81pZH5wxHCgbsPXyPOA,2460
 aiot/config.py,sha256=7QyWsCFN8H282l0Rbxn1agBNNXZasfRV2vW3DCmHCFY,3402
 aiot/efuse.py,sha256=fVTc6gCe8ByDYjE-lmWDTg8fmV2La69PEqULi1PSidk,4040
 aiot/fastboot.py,sha256=G_e0SB7-hU5oHRbrsDtwhF83p9-X9Afpf2Y91-T-0MI,1306
-aiot/flash.py,sha256=Px06KktrvE3GfmLN8ojjqZStRbW8k-LxHnpLM18e_UE,9504
-aiot/ftdi.py,sha256=WqkGyZYztZ93mB_O7vDiPvoMnjwty5bTecUGi4Kg8so,1377
+aiot/flash.py,sha256=LBh8B78xamw07xnJx19WUBx4ScHg2yMjER17RyMNPfA,9608
+aiot/ftdi.py,sha256=6ZAAkdw0I4nc-jlveWxakKee9JkmK6SMD1I-cBT5FjM,2368
 aiot/ftdi_win.py,sha256=cpyK0VkxOWqU0tPqWilEGFKdF7ZOOELRRS69MeYc0iE,3861
 aiot/rpmb.py,sha256=PGpqRwvVALaTq0bHA6VcQaF5Br_zn20uaWKt-imHO80,800
 aiot/ubootenv.py,sha256=dC54sVuD5eKuyckIttfVJ5eESYz-AZCRQBtial0lBGY,3440
-aiot/version.py,sha256=y0tSop-O0k4Fjd1pcywwiymPqbX2xSiUcaZytBl62Bc,157
+aiot/version.py,sha256=c8Mja_eGLl8n3XwFXABJhovDPHJlYHaO0sQCew0k3C0,157
 aiot/image/__init__.py,sha256=jb2-bE8l44Ml6qQk16XnvoDcjaivODUd-LjUD_Ksp-U,126
 aiot/image/android.py,sha256=_8_ntf6EwIB3ttSDlLgLDo_48ixlehTMkQIOtilR3lM,2406
-aiot/image/ubuntu.py,sha256=XbDAGUCbrMrXr__EPG0sTv79LFop4qFtoNbHIsGDu5s,6789
+aiot/image/ubuntu.py,sha256=ifB9NjQXFzENr_-7xVfe_lXaOXyOwbz3HhTEwhTRnyQ,6631
 aiot/image/yocto.py,sha256=t8DNXmpFmBfVuYovpYkjdYOsZ746oYynqPBEdYq4nvM,9181
-genio_tools-1.4a2.dist-info/LICENSE,sha256=5_0VvMgYcuw5GLW1PUKNoExF_dlOfU0HjC2qbk0Z-vM,1091
-genio_tools-1.4a2.dist-info/METADATA,sha256=OxQgkIZnYCA1tckppR6GztBQS7SX297smjX5s8xQhbE,926
-genio_tools-1.4a2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-genio_tools-1.4a2.dist-info/entry_points.txt,sha256=Io_q9lqIMOoRXd5vn1p4OAvYWzL7AqP_DbFJDAMsSUY,334
-genio_tools-1.4a2.dist-info/top_level.txt,sha256=SO4EJaYCTPaFdWDC4m9vjRKVX5YBQ1ofUr85dMEXMU4,5
-genio_tools-1.4a2.dist-info/RECORD,,
+genio_tools-1.4a3.dist-info/LICENSE,sha256=5_0VvMgYcuw5GLW1PUKNoExF_dlOfU0HjC2qbk0Z-vM,1091
+genio_tools-1.4a3.dist-info/METADATA,sha256=S1bPi1B4neB2KDIhYQGwhYrG5401AiGbtSfX32kN7uU,926
+genio_tools-1.4a3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+genio_tools-1.4a3.dist-info/entry_points.txt,sha256=Io_q9lqIMOoRXd5vn1p4OAvYWzL7AqP_DbFJDAMsSUY,334
+genio_tools-1.4a3.dist-info/top_level.txt,sha256=SO4EJaYCTPaFdWDC4m9vjRKVX5YBQ1ofUr85dMEXMU4,5
+genio_tools-1.4a3.dist-info/RECORD,,
```

